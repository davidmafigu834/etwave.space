import{r as a,j as e}from"./ui-DwAOVm1p.js";import{u as A,D as M,a as V,b as R,c as _,z as $,L as S,A as k,B as o}from"./app-BlWi7cIv.js";import{T as E}from"./textarea-DmNeUOf1.js";import{S as F,a as I,b as L,c as U,d as c}from"./select-DV03FLtq.js";import{C as z}from"./calendar-Jlwl64Lp.js";import{M as B}from"./mail-B928cX0J.js";import{P as O}from"./phone-4keuK80f.js";import{C as P}from"./clock-C9SI5I6F.js";import{M as q}from"./message-square-BEKBBgPS.js";function p({isOpen:C,onClose:x,onSubmit:D,appointment:s}){var i,f,y,b;const{t:r}=A(),[h,u]=a.useState(""),[g,j]=a.useState("");a.useEffect(()=>{s&&(u(s.notes||""),j(s.status||"scheduled"))},[s]);const w=l=>{l.preventDefault(),D({notes:h,status:g})},T=(l,d)=>{var N;if(!l)return"N/A";try{const m=`${new Date(l).toISOString().split("T")[0]} ${d||"00:00"}:00`;return((N=window.appSettings)==null?void 0:N.formatDateTime(m,!0))||`${new Date(l).toLocaleDateString()} ${d||"00:00"}`}catch(v){return console.error("Date formatting error:",v),"Invalid Date"}},t=l=>({scheduled:"bg-blue-100 text-blue-800",confirmed:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800",no_show:"bg-orange-100 text-orange-800"})[l]||"bg-gray-100 text-gray-800";return e.jsx(M,{open:C,onOpenChange:x,children:e.jsxs(V,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs(R,{children:[e.jsx(_,{children:r("Reply to Appointment")}),e.jsx($,{children:r("Update status and send a reply to this appointment")})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-md mb-4",children:[e.jsx("div",{className:"flex items-center mb-2",children:e.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ring-gray-500/10 ${t((s==null?void 0:s.status)||"scheduled")}`,children:((i=s==null?void 0:s.status)==null?void 0:i.charAt(0).toUpperCase())+((f=s==null?void 0:s.status)==null?void 0:f.slice(1).replace("_"," "))||"Scheduled"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:(s==null?void 0:s.name)||(s==null?void 0:s.title)||""}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("span",{children:T((s==null?void 0:s.appointment_date)||(s==null?void 0:s.date),(s==null?void 0:s.appointment_time)||(s==null?void 0:s.time))})]}),(s==null?void 0:s.email)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("span",{children:s==null?void 0:s.email})]}),(s==null?void 0:s.phone)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("span",{children:s==null?void 0:s.phone})]}),(((y=s==null?void 0:s.business)==null?void 0:y.name)||(s==null?void 0:s.business))&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("span",{children:typeof(s==null?void 0:s.business)=="string"?s==null?void 0:s.business:(b=s==null?void 0:s.business)==null?void 0:b.name})]})]}),(s==null?void 0:s.message)&&e.jsx("div",{className:"mt-3 border-t border-gray-200 dark:border-gray-700 pt-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(q,{className:"h-4 w-4 mr-2 text-gray-500 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-sm mb-1",children:[r("Client Message"),":"]}),e.jsx("p",{className:"text-sm",children:s==null?void 0:s.message})]})]})})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"status",children:r("Update Status")}),e.jsxs(F,{value:g,onValueChange:j,children:[e.jsx(I,{children:e.jsx(L,{placeholder:r("Select status")})}),e.jsxs(U,{children:[e.jsx(c,{value:"scheduled",children:r("Scheduled")}),e.jsx(c,{value:"confirmed",children:r("Confirmed")}),e.jsx(c,{value:"completed",children:r("Completed")}),e.jsx(c,{value:"cancelled",children:r("Cancelled")}),e.jsx(c,{value:"no_show",children:r("No Show")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"notes",children:r("Your Reply")}),e.jsx(E,{id:"notes",placeholder:r("Enter your reply here..."),value:h,onChange:l=>u(l.target.value),rows:5,className:"resize-none"})]})]}),e.jsxs(k,{className:"pt-2",children:[e.jsx(o,{type:"button",variant:"outline",onClick:x,children:r("Cancel")}),e.jsx(o,{type:"submit",children:r("Send Reply")})]})]})]})})}export{p as A};

import{r,j as e}from"./ui-DwAOVm1p.js";import{u as j,n as y}from"./app-BlWi7cIv.js";import{V as C}from"./VCardPreview-oR94VyeL.js";import{C as v,A as M}from"./AppointmentFormModal-Dc9Oy0BF.js";import{g as E}from"./index-XE3nPYxI.js";import{u as N}from"./use-favicon-BHKlxAc6.js";import"./vendor-CxtKjBZA.js";import"./utils-DBYZG17H.js";import"./play-CGlp7qj2.js";import"./SocialIcon-B3KlezrG.js";import"./browser-Cf3k5C0K.js";import"./download-Cd-5XK7j.js";import"./copy-Btm1-TBN.js";import"./share-2-DhC-lz5D.js";import"./sectionHelpers-B_caUkl9.js";import"./language-DYlIyiUn.js";import"./calendar-Jlwl64Lp.js";import"./mail-B928cX0J.js";import"./youtube-bw428XJV.js";import"./wrench-CNaiBex1.js";import"./phone-4keuK80f.js";import"./globe-kYq37WGi.js";import"./map-pin-CqiFX9bE.js";import"./clock-C9SI5I6F.js";import"./star-BG1OP4pF.js";import"./qr-code-EmYcnpgn.js";import"./message-square-BEKBBgPS.js";import"./house-Bxi3yPAC.js";import"./award-DqAGCSGb.js";import"./user-D7_XmPgu.js";import"./briefcase-AuRykhaE.js";import"./building--nslHNr2.js";import"./dollar-sign-B5K61QeY.js";import"./sparkles-tvpsAjMk.js";import"./smartphone-DesibTOI.js";import"./menu-DwqhxsMH.js";import"./camera-nAyPukUH.js";import"./heart-WEivgWul.js";import"./external-link-JXKp3xBD.js";import"./chevron-right-CTYpggVz.js";import"./chevron-up-DMuWaAmJ.js";import"./users-WU9ta9Er.js";import"./instagram-ByrYH2QY.js";import"./facebook-2uncl42_.js";import"./ticket-CMpHD9UK.js";import"./arrow-right-DDAEGMKC.js";import"./info-DYw6_RZC.js";import"./shield-BWPM2EMy.js";import"./circle-check-big-CMY9b2ai.js";import"./circle-check-slliUzm6.js";import"./code-D_e5rl7x.js";import"./linkedin-LFnjPlyG.js";import"./trending-up-B1kKYkX1.js";import"./settings-CXB8R1cS.js";import"./zap-BHnHi5aV.js";import"./monitor-CCzvwMhI.js";import"./circle-help-Da_IgE0W.js";import"./chart-column-CrjmBQBc.js";import"./target-vllBT5Ac.js";import"./activity-CHagUXRh.js";import"./eye-BE9GWtQY.js";import"./lightbulb-BVt4lDQ6.js";import"./textarea-DmNeUOf1.js";import"./circle-x-PHYE7O0q.js";import"./circle-alert-n5kUioWN.js";import"./architect-designer-N9Cq8jeR.js";function Ro(){var l,d,u,f,g;N();const{t:p}=j(),[o,h]=r.useState(null),[t,x]=r.useState(null),[b,a]=r.useState(!1),[_,c]=r.useState(!1);return r.useEffect(()=>{const n=localStorage.getItem("vcard_preview_data");if(n)try{const s=JSON.parse(n);if(h(s),s.business_type){const m=E(s.business_type);x(m)}}catch(s){console.error("Error parsing preview data:",s)}},[]),r.useEffect(()=>{const n=i=>{a(!0)},s=i=>{c(!0)},m=[window,document,document.body];return m.forEach(i=>{i.addEventListener("openContactModal",n,!0),i.addEventListener("openAppointmentModal",s,!0)}),()=>{m.forEach(i=>{i.removeEventListener("openContactModal",n,!0),i.removeEventListener("openAppointmentModal",s,!0)})}},[]),!o||!t?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:p("Loading Preview...")}),e.jsx("p",{className:"text-gray-600",children:p("If nothing loads, please go back and try again.")})]})}):e.jsxs(e.Fragment,{children:[e.jsx(y,{title:`Preview: ${o.name||"Business Card"}`}),e.jsx("div",{className:"min-h-screen bg-gray-100",children:e.jsx("div",{className:"max-w-md mx-auto py-8",children:e.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:e.jsx(C,{businessType:o.business_type,data:{name:o.name,slug:"preview",business_type:o.business_type,config_sections:o.config_sections,template_config:{sections:o.config_sections,sectionSettings:o.config_sections,allowedSections:(l=o.template_config)==null?void 0:l.allowedSections}},template:t})})})}),e.jsx(v,{isOpen:b,onClose:()=>a(!1),businessId:0,businessName:(o==null?void 0:o.name)||"Preview Business",themeColors:((d=o==null?void 0:o.config_sections)==null?void 0:d.colors)||(t==null?void 0:t.defaultColors),themeFont:((u=o==null?void 0:o.config_sections)==null?void 0:u.font)||(t==null?void 0:t.defaultFont)}),e.jsx(M,{isOpen:_,onClose:()=>c(!1),businessId:0,businessName:(o==null?void 0:o.name)||"Preview Business",themeColors:((f=o==null?void 0:o.config_sections)==null?void 0:f.colors)||(t==null?void 0:t.defaultColors),themeFont:((g=o==null?void 0:o.config_sections)==null?void 0:g.font)||(t==null?void 0:t.defaultFont)})]})}export{Ro as default};

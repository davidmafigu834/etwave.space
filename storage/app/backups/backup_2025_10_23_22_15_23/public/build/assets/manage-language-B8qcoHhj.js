import{r as o,j as s}from"./ui-DwAOVm1p.js";import{P as L}from"./page-template-8tWNB1WX.js";import{u as w,K as E,t as c,B as j,k as R,S as T,C as O,I as v}from"./app-BlWi7cIv.js";import{S as P}from"./scroll-area-BnUlm4mg.js";import{R as k}from"./react-country-flag.esm-U4UQv2PH.js";import"./vendor-CxtKjBZA.js";import"./textarea-DmNeUOf1.js";import"./select-DV03FLtq.js";import"./index-upgrZYbo.js";import"./chevron-up-DMuWaAmJ.js";import"./language-DYlIyiUn.js";import"./sparkles-tvpsAjMk.js";import"./loader-circle-DUfirWOF.js";import"./copy-Btm1-TBN.js";import"./chevron-right-CTYpggVz.js";import"./cookie-consent-BF1mYY4f.js";import"./globe-kYq37WGi.js";import"./chart-column-CrjmBQBc.js";import"./briefcase-AuRykhaE.js";import"./credit-card-CWCbalqR.js";import"./dollar-sign-B5K61QeY.js";import"./mail-B928cX0J.js";import"./settings-CXB8R1cS.js";import"./users-WU9ta9Er.js";import"./message-square-BEKBBgPS.js";import"./calendar-Jlwl64Lp.js";import"./wallet-z8Vgl1na.js";import"./user-D7_XmPgu.js";import"./use-favicon-BHKlxAc6.js";import"./utils-DBYZG17H.js";function ce(){var x;const{t:a}=w(),{languages:f,defaultLang:n,defaultData:d}=E().props,[l,S]=o.useState(n),[g,i]=o.useState(d),[b,m]=o.useState(!1),[h,u]=o.useState(!1),[p,N]=o.useState("");o.useEffect(()=>{S(n)},[n]),o.useEffect(()=>{if(l===n&&Object.keys(d).length>0){i(d);return}m(!0),fetch(`${route("language.load")}?lang=${l}`).then(e=>e.json()).then(e=>{e.data?i(e.data):i({}),m(!1)}).catch(()=>{i({}),m(!1),c.error(a("Failed to load language file"))})},[l,n,d,a]);const C=(e,r)=>{i(t=>({...t,[e]:r}))},y=e=>{var r;return e&&e.preventDefault(),u(!0),fetch(route("language.save"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||"",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({_method:"PATCH",lang:l,data:g})}).then(t=>t.json()).then(t=>{t.success?c.success(t.success||a("Language updated successfully")):t.error?c.error(t.error):c.success(a("Language updated successfully")),u(!1)}).catch(t=>{console.error("Save error:",t),c.error(a("Failed to update language file")),u(!1)}),!1};return s.jsx(L,{title:a("Manage Language"),url:"/manage-language",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[s.jsx("div",{className:"md:w-64 flex-shrink-0",children:s.jsx("div",{className:"sticky top-20",children:s.jsx(P,{className:"h-[calc(100vh-5rem)]",children:s.jsx("div",{className:"pr-4 space-y-1",children:f.map(e=>s.jsxs(j,{variant:"ghost",className:R("w-full justify-start",{"bg-muted font-medium":l===e.code}),onClick:()=>{l!==e.code&&T.get(route("manage-language",{lang:e.code}))},children:[e.countryCode&&s.jsx(k,{countryCode:e.countryCode,svg:!0,style:{width:"1.2em",height:"1.2em"}}),e.name]},e.code))})})})}),s.jsx("div",{className:"flex-1",children:s.jsxs(O,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4 gap-2",children:[s.jsxs("h2",{className:"text-lg font-semibold",children:[a("Edit Labels for")," ",(x=f.find(e=>e.code===l))==null?void 0:x.name]}),s.jsx(v,{placeholder:a("Search labels..."),value:p,onChange:e=>N(e.target.value),className:"w-full md:w-72"})]}),b?s.jsx("div",{children:a("Loading...")}):s.jsx("form",{onSubmit:e=>(e.preventDefault(),y(e),!1),children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(g).filter(([e,r])=>e.toLowerCase().includes(p.toLowerCase())||r.toLowerCase().includes(p.toLowerCase())).map(([e,r])=>s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("label",{className:"text-xs text-muted-foreground truncate mb-1",children:e}),s.jsx(v,{className:"w-full",value:r,onChange:t=>C(e,t.target.value)})]},e))}),s.jsx("div",{className:"pt-6 text-right",children:s.jsx(j,{type:"submit",disabled:h,children:h?s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"animate-spin h-4 w-4 border-2 border-t-transparent border-primary rounded-full"}),a("Saving...")]}):a("Save Changes")})})]})})]})})]})})}export{ce as default};

import{R as j,r as B,q as Lo,t as Cn,j as p}from"./ui-DwAOVm1p.js";import{u as Sn,B as ne,L as z,i as To,P as Mr,I as H,M as mt,C as Ce,m as ko,t as Gr,n as Mo,o as Wr}from"./app-BlWi7cIv.js";import{P as Go}from"./PageWrapper-eqRFcN6B.js";import{S as $r,a as Vr,b as Hr,c as Ur,d as qr}from"./select-DV03FLtq.js";import{S as $e}from"./switch-DGQ2xpqa.js";import{T as zr}from"./textarea-DmNeUOf1.js";import{f as Nn,g as Fr,P as Wo,e as $o,d as Vo,b as Ho}from"./react-redux-c4ezPUJ-.js";import{i as Uo}from"./tiny-invariant-BaFNuDhB.js";import{G as Yr}from"./grip-vertical-BmamCcl0.js";import{S as Jr}from"./square-pen-WpJU-exV.js";import{T as ot}from"./trash-2-BFqA1Oig.js";import{V as qo}from"./VCardPreview-oR94VyeL.js";import{D as zo}from"./DomainConfig-CSg1GjN0.js";import{C as Fo,A as Yo}from"./AppointmentFormModal-Dc9Oy0BF.js";import{g as Xr,b as le}from"./index-XE3nPYxI.js";import"./vendor-CxtKjBZA.js";import"./utils-DBYZG17H.js";import"./page-template-8tWNB1WX.js";import"./react-country-flag.esm-U4UQv2PH.js";import"./language-DYlIyiUn.js";import"./sparkles-tvpsAjMk.js";import"./loader-circle-DUfirWOF.js";import"./copy-Btm1-TBN.js";import"./chevron-up-DMuWaAmJ.js";import"./chevron-right-CTYpggVz.js";import"./cookie-consent-BF1mYY4f.js";import"./globe-kYq37WGi.js";import"./chart-column-CrjmBQBc.js";import"./briefcase-AuRykhaE.js";import"./credit-card-CWCbalqR.js";import"./dollar-sign-B5K61QeY.js";import"./mail-B928cX0J.js";import"./settings-CXB8R1cS.js";import"./users-WU9ta9Er.js";import"./message-square-BEKBBgPS.js";import"./calendar-Jlwl64Lp.js";import"./wallet-z8Vgl1na.js";import"./user-D7_XmPgu.js";import"./use-favicon-BHKlxAc6.js";import"./index-upgrZYbo.js";import"./play-CGlp7qj2.js";import"./SocialIcon-B3KlezrG.js";import"./browser-Cf3k5C0K.js";import"./download-Cd-5XK7j.js";import"./share-2-DhC-lz5D.js";import"./sectionHelpers-B_caUkl9.js";import"./youtube-bw428XJV.js";import"./wrench-CNaiBex1.js";import"./phone-4keuK80f.js";import"./map-pin-CqiFX9bE.js";import"./clock-C9SI5I6F.js";import"./star-BG1OP4pF.js";import"./qr-code-EmYcnpgn.js";import"./house-Bxi3yPAC.js";import"./award-DqAGCSGb.js";import"./building--nslHNr2.js";import"./smartphone-DesibTOI.js";import"./menu-DwqhxsMH.js";import"./camera-nAyPukUH.js";import"./heart-WEivgWul.js";import"./external-link-JXKp3xBD.js";import"./instagram-ByrYH2QY.js";import"./facebook-2uncl42_.js";import"./ticket-CMpHD9UK.js";import"./arrow-right-DDAEGMKC.js";import"./info-DYw6_RZC.js";import"./shield-BWPM2EMy.js";import"./circle-check-big-CMY9b2ai.js";import"./circle-check-slliUzm6.js";import"./code-D_e5rl7x.js";import"./linkedin-LFnjPlyG.js";import"./trending-up-B1kKYkX1.js";import"./zap-BHnHi5aV.js";import"./monitor-CCzvwMhI.js";import"./circle-help-Da_IgE0W.js";import"./target-vllBT5Ac.js";import"./activity-CHagUXRh.js";import"./eye-BE9GWtQY.js";import"./lightbulb-BVt4lDQ6.js";import"./circle-x-PHYE7O0q.js";import"./circle-alert-n5kUioWN.js";import"./architect-designer-N9Cq8jeR.js";var re=function(t){var r=t.top,o=t.right,n=t.bottom,s=t.left,i=o-s,a=n-r,l={top:r,right:o,bottom:n,left:s,width:i,height:a,x:s,y:r,center:{x:(o+s)/2,y:(n+r)/2}};return l},Dt=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Zr=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},Jo=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},st={top:0,right:0,bottom:0,left:0},It=function(t){var r=t.borderBox,o=t.margin,n=o===void 0?st:o,s=t.border,i=s===void 0?st:s,a=t.padding,l=a===void 0?st:a,u=re(Dt(r,n)),f=re(Zr(r,i)),c=re(Zr(f,l));return{marginBox:u,borderBox:re(r),paddingBox:f,contentBox:c,margin:n,border:i,padding:l}},K=function(t){var r=t.slice(0,-2),o=t.slice(-2);if(o!=="px")return 0;var n=Number(r);return isNaN(n)&&Uo(),n},Xo=function(){return{x:window.pageXOffset,y:window.pageYOffset}},He=function(t,r){var o=t.borderBox,n=t.border,s=t.margin,i=t.padding,a=Jo(o,r);return It({borderBox:a,border:n,margin:s,padding:i})},Ue=function(t,r){return r===void 0&&(r=Xo()),He(t,r)},En=function(t,r){var o={top:K(r.marginTop),right:K(r.marginRight),bottom:K(r.marginBottom),left:K(r.marginLeft)},n={top:K(r.paddingTop),right:K(r.paddingRight),bottom:K(r.paddingBottom),left:K(r.paddingLeft)},s={top:K(r.borderTopWidth),right:K(r.borderRightWidth),bottom:K(r.borderBottomWidth),left:K(r.borderLeftWidth)};return It({borderBox:t,margin:o,padding:n,border:s})},An=function(t){var r=t.getBoundingClientRect(),o=window.getComputedStyle(t);return En(r,o)},Ee=function(t){var r=[],o=null,n=function(){for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];r=a,!o&&(o=requestAnimationFrame(function(){o=null,t.apply(void 0,r)}))};return n.cancel=function(){o&&(cancelAnimationFrame(o),o=null)},n};function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},qe.apply(null,arguments)}function _n(e,t){}_n.bind(null,"warn");_n.bind(null,"error");function oe(){}function Zo(e,t){return{...e,...t}}function ee(e,t,r){const o=t.map(n=>{const s=Zo(r,n.options);return e.addEventListener(n.eventName,n.fn,s),function(){e.removeEventListener(n.eventName,n.fn,s)}});return function(){o.forEach(s=>{s()})}}const Qo="Invariant failed";class ze extends Error{}ze.prototype.toString=function(){return this.message};function w(e,t){throw new ze(Qo)}class Ko extends j.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=oe,this.onWindowError=r=>{const o=this.getCallbacks();o.isDragging()&&o.tryAbort(),r.error instanceof ze&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=ee(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof ze){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const es=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Fe=e=>e+1,ts=e=>`
  You have lifted an item in position ${Fe(e.source.index)}
`,Bn=(e,t)=>{const r=e.droppableId===t.droppableId,o=Fe(e.index),n=Fe(t.index);return r?`
      You have moved the item from position ${o}
      to position ${n}
    `:`
    You have moved the item from position ${o}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${n}
  `},Pn=(e,t,r)=>t.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,rs=e=>{const t=e.destination;if(t)return Bn(e.source,t);const r=e.combine;return r?Pn(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},Qr=e=>`
  The item has returned to its starting position
  of ${Fe(e.index)}
`,ns=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${Qr(e.source)}
    `;const t=e.destination,r=e.combine;return t?`
      You have dropped the item.
      ${Bn(e.source,t)}
    `:r?`
      You have dropped the item.
      ${Pn(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${Qr(e.source)}
  `},Ve={dragHandleUsageInstructions:es,onDragStart:ts,onDragUpdate:rs,onDragEnd:ns};function os(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function Rn(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!os(e[r],t[r]))return!1;return!0}function O(e,t){const r=B.useState(()=>({inputs:t,result:e()}))[0],o=B.useRef(!0),n=B.useRef(r),i=o.current||!!(t&&n.current.inputs&&Rn(t,n.current.inputs))?n.current:{inputs:t,result:e()};return B.useEffect(()=>{o.current=!1,n.current=i},[i]),i.result}function E(e,t){return O(()=>e,t)}const q={x:0,y:0},F=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),X=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),se=(e,t)=>e.x===t.x&&e.y===t.y,he=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),ue=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t},Ae=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Kr=(e,t)=>Math.min(...t.map(r=>Ae(e,r))),On=e=>t=>({x:e(t.x),y:e(t.y)});var ss=(e,t)=>{const r=re({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r};const je=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),en=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],is={top:0,right:0,bottom:0,left:0},as=(e,t)=>t?je(e,t.scroll.diff.displacement):e,ls=(e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e,cs=(e,t)=>t&&t.shouldClipSubject?ss(t.pageMarginBox,e):re(e);var fe=({page:e,withPlaceholder:t,axis:r,frame:o})=>{const n=as(e.marginBox,o),s=ls(n,r,t),i=cs(s,o);return{page:e,withPlaceholder:t,active:i}},wt=(e,t)=>{e.frame||w();const r=e.frame,o=X(t,r.scroll.initial),n=he(o),s={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:o,displacement:n},max:r.scroll.max}},i=fe({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:s});return{...e,frame:s,subject:i}};function U(e,t=Rn){let r=null;function o(...n){if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;const s=e.apply(this,n);return r={lastResult:s,lastArgs:n,lastThis:this},s}return o.clear=function(){r=null},o}const jn=U(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),Ln=U(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),Ze=U(e=>Object.values(e)),ds=U(e=>Object.values(e));var be=U((e,t)=>ds(t).filter(o=>e===o.descriptor.droppableId).sort((o,n)=>o.descriptor.index-n.descriptor.index));function Ct(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Qe(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Ke=U((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id)),us=({isMovingForward:e,draggable:t,destination:r,insideDestination:o,previousImpact:n})=>{if(!r.isCombineEnabled||!Ct(n))return null;function i(m){const g={type:"COMBINE",combine:{draggableId:m,droppableId:r.descriptor.id}};return{...n,at:g}}const a=n.displaced.all,l=a.length?a[0]:null;if(e)return l?i(l):null;const u=Ke(t,o);if(!l){if(!u.length)return null;const m=u[u.length-1];return i(m.descriptor.id)}const f=u.findIndex(m=>m.descriptor.id===l);f===-1&&w();const c=f-1;if(c<0)return null;const d=u[c];return i(d.descriptor.id)},xe=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const Tn={point:q,value:0},_e={invisible:{},visible:{},all:[]},ps={displaced:_e,displacedBy:Tn,at:null};var te=(e,t)=>r=>e<=r&&r<=t,kn=e=>{const t=te(e.top,e.bottom),r=te(e.left,e.right);return o=>{if(t(o.top)&&t(o.bottom)&&r(o.left)&&r(o.right))return!0;const s=t(o.top)||t(o.bottom),i=r(o.left)||r(o.right);if(s&&i)return!0;const l=o.top<e.top&&o.bottom>e.bottom,u=o.left<e.left&&o.right>e.right;return l&&u?!0:l&&i||u&&s}},fs=e=>{const t=te(e.top,e.bottom),r=te(e.left,e.right);return o=>t(o.top)&&t(o.bottom)&&r(o.left)&&r(o.right)};const St={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Mn={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var ms=e=>t=>{const r=te(t.top,t.bottom),o=te(t.left,t.right);return n=>e===St?r(n.top)&&r(n.bottom):o(n.left)&&o(n.right)};const gs=(e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:q;return je(e,r)},hs=(e,t,r)=>t.subject.active?r(t.subject.active)(e):!1,bs=(e,t,r)=>r(t)(e),Nt=({target:e,destination:t,viewport:r,withDroppableDisplacement:o,isVisibleThroughFrameFn:n})=>{const s=o?gs(e,t):e;return hs(s,t,n)&&bs(s,r,n)},xs=e=>Nt({...e,isVisibleThroughFrameFn:kn}),Gn=e=>Nt({...e,isVisibleThroughFrameFn:fs}),vs=e=>Nt({...e,isVisibleThroughFrameFn:ms(e.destination.axis)}),ys=(e,t,r)=>{if(typeof r=="boolean")return r;if(!t)return!0;const{invisible:o,visible:n}=t;if(o[e])return!1;const s=n[e];return s?s.shouldAnimate:!0};function Ds(e,t){const r=e.page.marginBox,o={top:t.point.y,right:0,bottom:0,left:t.point.x};return re(Dt(r,o))}function Be({afterDragging:e,destination:t,displacedBy:r,viewport:o,forceShouldAnimate:n,last:s}){return e.reduce(function(a,l){const u=Ds(l,r),f=l.descriptor.id;if(a.all.push(f),!xs({target:u,destination:t,viewport:o,withDroppableDisplacement:!0}))return a.invisible[l.descriptor.id]=!0,a;const d=ys(f,s,n),m={draggableId:f,shouldAnimate:d};return a.visible[f]=m,a},{all:[],visible:{},invisible:{}})}function Is(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function tn({insideDestination:e,inHomeList:t,displacedBy:r,destination:o}){const n=Is(e,{inHomeList:t});return{displaced:_e,displacedBy:r,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:n}}}}function Ye({draggable:e,insideDestination:t,destination:r,viewport:o,displacedBy:n,last:s,index:i,forceShouldAnimate:a}){const l=xe(e,r);if(i==null)return tn({insideDestination:t,inHomeList:l,displacedBy:n,destination:r});const u=t.find(g=>g.descriptor.index===i);if(!u)return tn({insideDestination:t,inHomeList:l,displacedBy:n,destination:r});const f=Ke(e,t),c=t.indexOf(u),d=f.slice(c);return{displaced:Be({afterDragging:d,destination:r,displacedBy:n,last:s,viewport:o.frame,forceShouldAnimate:a}),displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function ie(e,t){return!!t.effected[e]}var ws=({isMovingForward:e,destination:t,draggables:r,combine:o,afterCritical:n})=>{if(!t.isCombineEnabled)return null;const s=o.draggableId,a=r[s].descriptor.index;return ie(s,n)?e?a:a-1:e?a+1:a},Cs=({isMovingForward:e,isInHomeList:t,insideDestination:r,location:o})=>{if(!r.length)return null;const n=o.index,s=e?n+1:n-1,i=r[0].descriptor.index,a=r[r.length-1].descriptor.index,l=t?a:a+1;return s<i||s>l?null:s},Ss=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:o,destination:n,insideDestination:s,previousImpact:i,viewport:a,afterCritical:l})=>{const u=i.at;if(u||w(),u.type==="REORDER"){const c=Cs({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:s});return c==null?null:Ye({draggable:r,insideDestination:s,destination:n,viewport:a,last:i.displaced,displacedBy:i.displacedBy,index:c})}const f=ws({isMovingForward:e,destination:n,displaced:i.displaced,draggables:o,combine:u.combine,afterCritical:l});return f==null?null:Ye({draggable:r,insideDestination:s,destination:n,viewport:a,last:i.displaced,displacedBy:i.displacedBy,index:f})},Ns=({displaced:e,afterCritical:t,combineWith:r,displacedBy:o})=>{const n=!!(e.visible[r]||e.invisible[r]);return ie(r,t)?n?q:he(o.point):n?o.point:q},Es=({afterCritical:e,impact:t,draggables:r})=>{const o=Qe(t);o||w();const n=o.draggableId,s=r[n].page.borderBox.center,i=Ns({displaced:t.displaced,afterCritical:e,combineWith:n,displacedBy:t.displacedBy});return F(s,i)};const Wn=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,As=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,Et=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,rn=({axis:e,moveRelativeTo:t,isMoving:r})=>ue(e.line,t.marginBox[e.end]+Wn(e,r),Et(e,t.marginBox,r)),nn=({axis:e,moveRelativeTo:t,isMoving:r})=>ue(e.line,t.marginBox[e.start]-As(e,r),Et(e,t.marginBox,r)),_s=({axis:e,moveInto:t,isMoving:r})=>ue(e.line,t.contentBox[e.start]+Wn(e,r),Et(e,t.contentBox,r));var Bs=({impact:e,draggable:t,draggables:r,droppable:o,afterCritical:n})=>{const s=be(o.descriptor.id,r),i=t.page,a=o.axis;if(!s.length)return _s({axis:a,moveInto:o.page,isMoving:i});const{displaced:l,displacedBy:u}=e,f=l.all[0];if(f){const d=r[f];if(ie(f,n))return nn({axis:a,moveRelativeTo:d.page,isMoving:i});const m=He(d.page,u.point);return nn({axis:a,moveRelativeTo:m,isMoving:i})}const c=s[s.length-1];if(c.descriptor.id===t.descriptor.id)return i.borderBox.center;if(ie(c.descriptor.id,n)){const d=He(c.page,he(n.displacedBy.point));return rn({axis:a,moveRelativeTo:d,isMoving:i})}return rn({axis:a,moveRelativeTo:c.page,isMoving:i})},gt=(e,t)=>{const r=e.frame;return r?F(t,r.scroll.diff.displacement):t};const Ps=({impact:e,draggable:t,droppable:r,draggables:o,afterCritical:n})=>{const s=t.page.borderBox.center,i=e.at;return!r||!i?s:i.type==="REORDER"?Bs({impact:e,draggable:t,draggables:o,droppable:r,afterCritical:n}):Es({impact:e,draggables:o,afterCritical:n})};var et=e=>{const t=Ps(e),r=e.droppable;return r?gt(r,t):t},$n=(e,t)=>{const r=X(t,e.scroll.initial),o=he(r);return{frame:re({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:o}}}};function on(e,t){return e.map(r=>t[r])}function Rs(e,t){for(let r=0;r<t.length;r++){const o=t[r].visible[e];if(o)return o}return null}var Os=({impact:e,viewport:t,destination:r,draggables:o,maxScrollChange:n})=>{const s=$n(t,F(t.scroll.current,n)),i=r.frame?wt(r,F(r.frame.scroll.current,n)):r,a=e.displaced,l=Be({afterDragging:on(a.all,o),destination:r,displacedBy:e.displacedBy,viewport:s.frame,last:a,forceShouldAnimate:!1}),u=Be({afterDragging:on(a.all,o),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:a,forceShouldAnimate:!1}),f={},c={},d=[a,l,u];return a.all.forEach(g=>{const v=Rs(g,d);if(v){c[g]=v;return}f[g]=!0}),{...e,displaced:{all:a.all,invisible:f,visible:c}}},js=(e,t)=>F(e.scroll.diff.displacement,t),At=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const o=js(r,e),n=X(o,t.page.borderBox.center);return F(t.client.borderBox.center,n)},Vn=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:o,withDroppableDisplacement:n,onlyOnMainAxis:s=!1})=>{const i=X(r,e.page.borderBox.center),l={target:je(e.page.borderBox,i),destination:t,withDroppableDisplacement:n,viewport:o};return s?vs(l):Gn(l)},Ls=({isMovingForward:e,draggable:t,destination:r,draggables:o,previousImpact:n,viewport:s,previousPageBorderBoxCenter:i,previousClientSelection:a,afterCritical:l})=>{if(!r.isEnabled)return null;const u=be(r.descriptor.id,o),f=xe(t,r),c=us({isMovingForward:e,draggable:t,destination:r,insideDestination:u,previousImpact:n})||Ss({isMovingForward:e,isInHomeList:f,draggable:t,draggables:o,destination:r,insideDestination:u,previousImpact:n,viewport:s,afterCritical:l});if(!c)return null;const d=et({impact:c,draggable:t,droppable:r,draggables:o,afterCritical:l});if(Vn({draggable:t,destination:r,newPageBorderBoxCenter:d,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:At({pageBorderBoxCenter:d,draggable:t,viewport:s}),impact:c,scrollJumpRequest:null};const g=X(d,i),v=Os({impact:c,viewport:s,destination:r,draggables:o,maxScrollChange:g});return{clientSelection:a,impact:v,scrollJumpRequest:g}};const J=e=>{const t=e.subject.active;return t||w(),t};var Ts=({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:o,viewport:n})=>{const s=r.subject.active;if(!s)return null;const i=r.axis,a=te(s[i.start],s[i.end]),l=Ze(o).filter(f=>f!==r).filter(f=>f.isEnabled).filter(f=>!!f.subject.active).filter(f=>kn(n.frame)(J(f))).filter(f=>{const c=J(f);return e?s[i.crossAxisEnd]<c[i.crossAxisEnd]:c[i.crossAxisStart]<s[i.crossAxisStart]}).filter(f=>{const c=J(f),d=te(c[i.start],c[i.end]);return a(c[i.start])||a(c[i.end])||d(s[i.start])||d(s[i.end])}).sort((f,c)=>{const d=J(f)[i.crossAxisStart],m=J(c)[i.crossAxisStart];return e?d-m:m-d}).filter((f,c,d)=>J(f)[i.crossAxisStart]===J(d[0])[i.crossAxisStart]);if(!l.length)return null;if(l.length===1)return l[0];const u=l.filter(f=>te(J(f)[i.start],J(f)[i.end])(t[i.line]));return u.length===1?u[0]:u.length>1?u.sort((f,c)=>J(f)[i.start]-J(c)[i.start])[0]:l.sort((f,c)=>{const d=Kr(t,en(J(f))),m=Kr(t,en(J(c)));return d!==m?d-m:J(f)[i.start]-J(c)[i.start]})[0]};const sn=(e,t)=>{const r=e.page.borderBox.center;return ie(e.descriptor.id,t)?X(r,t.displacedBy.point):r},ks=(e,t)=>{const r=e.page.borderBox;return ie(e.descriptor.id,t)?je(r,he(t.displacedBy.point)):r};var Ms=({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:o,afterCritical:n})=>o.filter(i=>Gn({target:ks(i,n),destination:r,viewport:t.frame,withDroppableDisplacement:!0})).sort((i,a)=>{const l=Ae(e,gt(r,sn(i,n))),u=Ae(e,gt(r,sn(a,n)));return l<u?-1:u<l?1:i.descriptor.index-a.descriptor.index})[0]||null,Le=U(function(t,r){const o=r[t.line];return{value:o,point:ue(t.line,o)}});const Gs=(e,t,r)=>{const o=e.axis;if(e.descriptor.mode==="virtual")return ue(o.line,t[o.line]);const n=e.subject.page.contentBox[o.size],l=be(e.descriptor.id,r).reduce((u,f)=>u+f.client.marginBox[o.size],0)+t[o.line]-n;return l<=0?null:ue(o.line,l)},Hn=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),Un=(e,t,r)=>{const o=e.frame;xe(t,e)&&w(),e.subject.withPlaceholder&&w();const n=Le(e.axis,t.displaceBy).point,s=Gs(e,n,r),i={placeholderSize:n,increasedBy:s,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!o){const f=fe({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:f}}const a=s?F(o.scroll.max,s):o.scroll.max,l=Hn(o,a),u=fe({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:l});return{...e,subject:u,frame:l}},Ws=e=>{const t=e.subject.withPlaceholder;t||w();const r=e.frame;if(!r){const i=fe({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:i}}const o=t.oldFrameMaxScroll;o||w();const n=Hn(r,o),s=fe({page:e.subject.page,axis:e.axis,frame:n,withPlaceholder:null});return{...e,subject:s,frame:n}};var $s=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:o,draggables:n,destination:s,viewport:i,afterCritical:a})=>{if(!t){if(r.length)return null;const c={displaced:_e,displacedBy:Tn,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},d=et({impact:c,draggable:o,droppable:s,draggables:n,afterCritical:a}),m=xe(o,s)?s:Un(s,o,n);return Vn({draggable:o,destination:m,newPageBorderBoxCenter:d,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}const l=e[s.axis.line]<=t.page.borderBox.center[s.axis.line],u=(()=>{const c=t.descriptor.index;return t.descriptor.id===o.descriptor.id||l?c:c+1})(),f=Le(s.axis,o.displaceBy);return Ye({draggable:o,insideDestination:r,destination:s,viewport:i,displacedBy:f,last:_e,index:u})},Vs=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:o,draggables:n,droppables:s,viewport:i,afterCritical:a})=>{const l=Ts({isMovingForward:e,pageBorderBoxCenter:t,source:o,droppables:s,viewport:i});if(!l)return null;const u=be(l.descriptor.id,n),f=Ms({pageBorderBoxCenter:t,viewport:i,destination:l,insideDestination:u,afterCritical:a}),c=$s({previousPageBorderBoxCenter:t,destination:l,draggable:r,draggables:n,moveRelativeTo:f,insideDestination:u,viewport:i,afterCritical:a});if(!c)return null;const d=et({impact:c,draggable:r,droppable:l,draggables:n,afterCritical:a});return{clientSelection:At({pageBorderBoxCenter:d,draggable:r,viewport:i}),impact:c,scrollJumpRequest:null}},Z=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const Hs=(e,t)=>{const r=Z(e);return r?t[r]:null};var Us=({state:e,type:t})=>{const r=Hs(e.impact,e.dimensions.droppables),o=!!r,n=e.dimensions.droppables[e.critical.droppable.id],s=r||n,i=s.axis.direction,a=i==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||i==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(a&&!o)return null;const l=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,{draggables:c,droppables:d}=e.dimensions;return a?Ls({isMovingForward:l,previousPageBorderBoxCenter:f,draggable:u,destination:s,draggables:c,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):Vs({isMovingForward:l,previousPageBorderBoxCenter:f,draggable:u,isOver:s,draggables:c,droppables:d,viewport:e.viewport,afterCritical:e.afterCritical})};function de(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function qn(e){const t=te(e.top,e.bottom),r=te(e.left,e.right);return function(n){return t(n.y)&&r(n.x)}}function qs(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function zs({pageBorderBox:e,draggable:t,candidates:r}){const o=t.page.borderBox.center,n=r.map(s=>{const i=s.axis,a=ue(s.axis.line,e.center[i.line],s.page.borderBox.center[i.crossAxisLine]);return{id:s.descriptor.id,distance:Ae(o,a)}}).sort((s,i)=>i.distance-s.distance);return n[0]?n[0].id:null}function Fs({pageBorderBox:e,draggable:t,droppables:r}){const o=Ze(r).filter(n=>{if(!n.isEnabled)return!1;const s=n.subject.active;if(!s||!qs(e,s))return!1;if(qn(s)(e.center))return!0;const i=n.axis,a=s.center[i.crossAxisLine],l=e[i.crossAxisStart],u=e[i.crossAxisEnd],f=te(s[i.crossAxisStart],s[i.crossAxisEnd]),c=f(l),d=f(u);return!c&&!d?!0:c?l<a:u>a});return o.length?o.length===1?o[0].descriptor.id:zs({pageBorderBox:e,draggable:t,candidates:o}):null}const zn=(e,t)=>re(je(e,t));var Ys=(e,t)=>{const r=e.frame;return r?zn(t,r.scroll.diff.value):t};function Fn({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function Js({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var Xs=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:o,last:n,viewport:s,afterCritical:i})=>{const a=r.axis,l=Le(r.axis,t.displaceBy),u=l.value,f=e[a.start],c=e[a.end],m=Ke(t,o).find(v=>{const I=v.descriptor.id,_=v.page.borderBox.center[a.line],b=ie(I,i),h=Fn({displaced:n,id:I});return b?h?c<=_:f<_-u:h?c<=_+u:f<_})||null,g=Js({draggable:t,closest:m,inHomeList:xe(t,r)});return Ye({draggable:t,insideDestination:o,destination:r,viewport:s,last:n,displacedBy:l,index:g})};const Zs=4;var Qs=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:o,insideDestination:n,afterCritical:s})=>{if(!o.isCombineEnabled)return null;const i=o.axis,a=Le(o.axis,e.displaceBy),l=a.value,u=t[i.start],f=t[i.end],d=Ke(e,n).find(g=>{const v=g.descriptor.id,I=g.page.borderBox,b=I[i.size]/Zs,h=ie(v,s),y=Fn({displaced:r.displaced,id:v});return h?y?f>I[i.start]+b&&f<I[i.end]-b:u>I[i.start]-l+b&&u<I[i.end]-l-b:y?f>I[i.start]+l+b&&f<I[i.end]+l-b:u>I[i.start]+b&&u<I[i.end]-b});return d?{displacedBy:a,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:d.descriptor.id,droppableId:o.descriptor.id}}}:null},Yn=({pageOffset:e,draggable:t,draggables:r,droppables:o,previousImpact:n,viewport:s,afterCritical:i})=>{const a=zn(t.page.borderBox,e),l=Fs({pageBorderBox:a,draggable:t,droppables:o});if(!l)return ps;const u=o[l],f=be(u.descriptor.id,r),c=Ys(u,a);return Qs({pageBorderBoxWithDroppableScroll:c,draggable:t,previousImpact:n,destination:u,insideDestination:f,afterCritical:i})||Xs({pageBorderBoxWithDroppableScroll:c,draggable:t,destination:u,insideDestination:f,last:n.displaced,viewport:s,afterCritical:i})},_t=(e,t)=>({...e,[t.descriptor.id]:t});const Ks=({previousImpact:e,impact:t,droppables:r})=>{const o=Z(e),n=Z(t);if(!o||o===n)return r;const s=r[o];if(!s.subject.withPlaceholder)return r;const i=Ws(s);return _t(r,i)};var ei=({draggable:e,draggables:t,droppables:r,previousImpact:o,impact:n})=>{const s=Ks({previousImpact:o,impact:n,droppables:r}),i=Z(n);if(!i)return s;const a=r[i];if(xe(e,a)||a.subject.withPlaceholder)return s;const l=Un(a,e,t);return _t(s,l)},Se=({state:e,clientSelection:t,dimensions:r,viewport:o,impact:n,scrollJumpRequest:s})=>{const i=o||e.viewport,a=r||e.dimensions,l=t||e.current.client.selection,u=X(l,e.initial.client.selection),f={offset:u,selection:l,borderBoxCenter:F(e.initial.client.borderBoxCenter,u)},c={selection:F(f.selection,i.scroll.current),borderBoxCenter:F(f.borderBoxCenter,i.scroll.current),offset:F(f.offset,i.scroll.diff.value)},d={client:f,page:c};if(e.phase==="COLLECTING")return{...e,dimensions:a,viewport:i,current:d};const m=a.draggables[e.critical.draggable.id],g=n||Yn({pageOffset:c.offset,draggable:m,draggables:a.draggables,droppables:a.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),v=ei({draggable:m,impact:g,previousImpact:e.impact,draggables:a.draggables,droppables:a.droppables});return{...e,current:d,dimensions:{draggables:a.draggables,droppables:v},impact:g,viewport:i,scrollJumpRequest:s||null,forceShouldAnimate:s?!1:null}};function ti(e,t){return e.map(r=>t[r])}var Jn=({impact:e,viewport:t,draggables:r,destination:o,forceShouldAnimate:n})=>{const s=e.displaced,i=ti(s.all,r),a=Be({afterDragging:i,destination:o,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:n,last:s});return{...e,displaced:a}},Xn=({impact:e,draggable:t,droppable:r,draggables:o,viewport:n,afterCritical:s})=>{const i=et({impact:e,draggable:t,draggables:o,droppable:r,afterCritical:s});return At({pageBorderBoxCenter:i,draggable:t,viewport:n})},Zn=({state:e,dimensions:t,viewport:r})=>{e.movementMode!=="SNAP"&&w();const o=e.impact,n=r||e.viewport,s=t||e.dimensions,{draggables:i,droppables:a}=s,l=i[e.critical.draggable.id],u=Z(o);u||w();const f=a[u],c=Jn({impact:o,viewport:n,destination:f,draggables:i}),d=Xn({impact:c,draggable:l,droppable:f,draggables:i,viewport:n,afterCritical:e.afterCritical});return Se({impact:c,clientSelection:d,state:e,dimensions:s,viewport:n})},ri=e=>({index:e.index,droppableId:e.droppableId}),Qn=({draggable:e,home:t,draggables:r,viewport:o})=>{const n=Le(t.axis,e.displaceBy),s=be(t.descriptor.id,r),i=s.indexOf(e);i===-1&&w();const a=s.slice(i+1),l=a.reduce((d,m)=>(d[m.descriptor.id]=!0,d),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:n,effected:l};return{impact:{displaced:Be({afterDragging:a,destination:t,displacedBy:n,last:null,viewport:o.frame,forceShouldAnimate:!1}),displacedBy:n,at:{type:"REORDER",destination:ri(e.descriptor)}},afterCritical:u}},ni=(e,t)=>({draggables:e.draggables,droppables:_t(e.droppables,t)}),oi=({draggable:e,offset:t,initialWindowScroll:r})=>{const o=He(e.client,t),n=Ue(o,r);return{...e,placeholder:{...e.placeholder,client:o},client:o,page:n}},si=e=>{const t=e.frame;return t||w(),t},ii=({additions:e,updatedDroppables:t,viewport:r})=>{const o=r.scroll.diff.value;return e.map(n=>{const s=n.descriptor.droppableId,i=t[s],l=si(i).scroll.diff.value,u=F(o,l);return oi({draggable:n,offset:u,initialWindowScroll:r.scroll.initial})})},ai=({state:e,published:t})=>{const r=t.modified.map(_=>{const b=e.dimensions.droppables[_.droppableId];return wt(b,_.scroll)}),o={...e.dimensions.droppables,...jn(r)},n=Ln(ii({additions:t.additions,updatedDroppables:o,viewport:e.viewport})),s={...e.dimensions.draggables,...n};t.removals.forEach(_=>{delete s[_]});const i={droppables:o,draggables:s},a=Z(e.impact),l=a?i.droppables[a]:null,u=i.draggables[e.critical.draggable.id],f=i.droppables[e.critical.droppable.id],{impact:c,afterCritical:d}=Qn({draggable:u,home:f,draggables:s,viewport:e.viewport}),m=l&&l.isCombineEnabled?e.impact:c,g=Yn({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:m,viewport:e.viewport,afterCritical:d}),v={...e,phase:"DRAGGING",impact:g,onLiftImpact:c,dimensions:i,afterCritical:d,forceShouldAnimate:!1};return e.phase==="COLLECTING"?v:{...v,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const ht=e=>e.movementMode==="SNAP",it=(e,t,r)=>{const o=ni(e.dimensions,t);return!ht(e)||r?Se({state:e,dimensions:o}):Zn({state:e,dimensions:o})};function at(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const an={phase:"IDLE",completed:null,shouldFlush:!1};var li=(e=an,t)=>{if(t.type==="FLUSH")return{...an,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&w();const{critical:r,clientSelection:o,viewport:n,dimensions:s,movementMode:i}=t.payload,a=s.draggables[r.draggable.id],l=s.droppables[r.droppable.id],u={selection:o,borderBoxCenter:a.client.borderBox.center,offset:q},f={client:u,page:{selection:F(u.selection,n.scroll.initial),borderBoxCenter:F(u.selection,n.scroll.initial),offset:F(u.selection,n.scroll.diff.value)}},c=Ze(s.droppables).every(v=>!v.isFixedOnPage),{impact:d,afterCritical:m}=Qn({draggable:a,home:l,draggables:s.draggables,viewport:n});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:i,dimensions:s,initial:f,current:f,isWindowScrollAllowed:c,impact:d,afterCritical:m,onLiftImpact:d,viewport:n,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&w(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||w(),ai({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;de(e)||w();const{client:r}=t.payload;return se(r,e.current.client.selection)?e:Se({state:e,clientSelection:r,impact:ht(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return at(e);de(e)||w();const{id:r,newScroll:o}=t.payload,n=e.dimensions.droppables[r];if(!n)return e;const s=wt(n,o);return it(e,s,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;de(e)||w();const{id:r,isEnabled:o}=t.payload,n=e.dimensions.droppables[r];n||w(),n.isEnabled===o&&w();const s={...n,isEnabled:o};return it(e,s,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;de(e)||w();const{id:r,isCombineEnabled:o}=t.payload,n=e.dimensions.droppables[r];n||w(),n.isCombineEnabled===o&&w();const s={...n,isCombineEnabled:o};return it(e,s,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;de(e)||w(),e.isWindowScrollAllowed||w();const r=t.payload.newScroll;if(se(e.viewport.scroll.current,r))return at(e);const o=$n(e.viewport,r);return ht(e)?Zn({state:e,viewport:o}):Se({state:e,viewport:o})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!de(e))return e;const r=t.payload.maxScroll;if(se(r,e.viewport.scroll.max))return e;const o={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:o}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&w();const r=Us({state:e,type:t.type});return r?Se({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const r=t.payload.reason;return e.phase!=="COLLECTING"&&w(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(t.type==="DROP_ANIMATE"){const{completed:r,dropDuration:o,newHomeClientOffset:n}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||w(),{phase:"DROP_ANIMATING",completed:r,dropDuration:o,newHomeClientOffset:n,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:r}=t.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};function k(e,t){return e instanceof Object&&"type"in e&&e.type===t}const ci=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),di=e=>({type:"LIFT",payload:e}),ui=e=>({type:"INITIAL_PUBLISH",payload:e}),pi=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),fi=()=>({type:"COLLECTION_STARTING",payload:null}),mi=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),gi=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),hi=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Kn=e=>({type:"MOVE",payload:e}),bi=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),xi=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),vi=()=>({type:"MOVE_UP",payload:null}),yi=()=>({type:"MOVE_DOWN",payload:null}),Di=()=>({type:"MOVE_RIGHT",payload:null}),Ii=()=>({type:"MOVE_LEFT",payload:null}),Bt=()=>({type:"FLUSH",payload:null}),wi=e=>({type:"DROP_ANIMATE",payload:e}),Pt=e=>({type:"DROP_COMPLETE",payload:e}),eo=e=>({type:"DROP",payload:e}),Ci=e=>({type:"DROP_PENDING",payload:e}),to=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var Si=e=>({getState:t,dispatch:r})=>o=>n=>{if(!k(n,"LIFT")){o(n);return}const{id:s,clientSelection:i,movementMode:a}=n.payload,l=t();l.phase==="DROP_ANIMATING"&&r(Pt({completed:l.completed})),t().phase!=="IDLE"&&w(),r(Bt()),r(ci({draggableId:s,movementMode:a}));const f={draggableId:s,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:c,dimensions:d,viewport:m}=e.startPublishing(f);r(ui({critical:c,dimensions:d,clientSelection:i,movementMode:a,viewport:m}))},Ni=e=>()=>t=>r=>{k(r,"INITIAL_PUBLISH")&&e.dragging(),k(r,"DROP_ANIMATE")&&e.dropping(r.payload.completed.result.reason),(k(r,"FLUSH")||k(r,"DROP_COMPLETE"))&&e.resting(),t(r)};const Rt={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Pe={opacity:{drop:0,combining:.7},scale:{drop:.75}},ro={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},ce=`${ro.outOfTheWay}s ${Rt.outOfTheWay}`,Ne={fluid:`opacity ${ce}`,snap:`transform ${ce}, opacity ${ce}`,drop:e=>{const t=`${e}s ${Rt.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${ce}`,placeholder:`height ${ce}, width ${ce}, margin ${ce}`},ln=e=>se(e,q)?void 0:`translate(${e.x}px, ${e.y}px)`,bt={moveTo:ln,drop:(e,t)=>{const r=ln(e);if(r)return t?`${r} scale(${Pe.scale.drop})`:r}},{minDropTime:xt,maxDropTime:no}=ro,Ei=no-xt,cn=1500,Ai=.6;var _i=({current:e,destination:t,reason:r})=>{const o=Ae(e,t);if(o<=0)return xt;if(o>=cn)return no;const n=o/cn,s=xt+Ei*n,i=r==="CANCEL"?s*Ai:s;return Number(i.toFixed(2))},Bi=({impact:e,draggable:t,dimensions:r,viewport:o,afterCritical:n})=>{const{draggables:s,droppables:i}=r,a=Z(e),l=a?i[a]:null,u=i[t.descriptor.droppableId],f=Xn({impact:e,draggable:t,draggables:s,afterCritical:n,droppable:l||u,viewport:o});return X(f,t.client.borderBox.center)},Pi=({draggables:e,reason:t,lastImpact:r,home:o,viewport:n,onLiftImpact:s})=>!r.at||t!=="DROP"?{impact:Jn({draggables:e,impact:s,destination:o,viewport:n,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:_e},didDropInsideDroppable:!0};const Ri=({getState:e,dispatch:t})=>r=>o=>{if(!k(o,"DROP")){r(o);return}const n=e(),s=o.payload.reason;if(n.phase==="COLLECTING"){t(Ci({reason:s}));return}if(n.phase==="IDLE")return;n.phase==="DROP_PENDING"&&n.isWaiting&&w(),n.phase==="DRAGGING"||n.phase==="DROP_PENDING"||w();const a=n.critical,l=n.dimensions,u=l.draggables[n.critical.draggable.id],{impact:f,didDropInsideDroppable:c}=Pi({reason:s,lastImpact:n.impact,afterCritical:n.afterCritical,onLiftImpact:n.onLiftImpact,home:n.dimensions.droppables[n.critical.droppable.id],viewport:n.viewport,draggables:n.dimensions.draggables}),d=c?Ct(f):null,m=c?Qe(f):null,g={index:a.draggable.index,droppableId:a.droppable.id},v={draggableId:u.descriptor.id,type:u.descriptor.type,source:g,reason:s,mode:n.movementMode,destination:d,combine:m},I=Bi({impact:f,draggable:u,dimensions:l,viewport:n.viewport,afterCritical:n.afterCritical}),_={critical:n.critical,afterCritical:n.afterCritical,result:v,impact:f};if(!(!se(n.current.client.offset,I)||!!v.combine)){t(Pt({completed:_}));return}const h=_i({current:n.current.client.offset,destination:I,reason:s});t(wi({newHomeClientOffset:I,dropDuration:h,completed:_}))};var oo=()=>({x:window.pageXOffset,y:window.pageYOffset});function Oi(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function ji({onWindowScroll:e}){function t(){e(oo())}const r=Ee(t),o=Oi(r);let n=oe;function s(){return n!==oe}function i(){s()&&w(),n=ee(window,[o])}function a(){s()||w(),r.cancel(),n(),n=oe}return{start:i,stop:a,isActive:s}}const Li=e=>k(e,"DROP_COMPLETE")||k(e,"DROP_ANIMATE")||k(e,"FLUSH"),Ti=e=>{const t=ji({onWindowScroll:r=>{e.dispatch(bi({newScroll:r}))}});return r=>o=>{!t.isActive()&&k(o,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&Li(o)&&t.stop(),r(o)}};var ki=e=>{let t=!1,r=!1;const o=setTimeout(()=>{r=!0}),n=s=>{t||r||(t=!0,e(s),clearTimeout(o))};return n.wasCalled=()=>t,n},Mi=()=>{const e=[],t=n=>{const s=e.findIndex(a=>a.timerId===n);s===-1&&w();const[i]=e.splice(s,1);i.callback()};return{add:n=>{const s=setTimeout(()=>t(s)),i={timerId:s,callback:n};e.push(i)},flush:()=>{if(!e.length)return;const n=[...e];e.length=0,n.forEach(s=>{clearTimeout(s.timerId),s.callback()})}}};const Gi=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,Wi=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,$i=(e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,o=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&o},De=(e,t)=>{t()},Me=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function lt(e,t,r,o){if(!e){r(o(t));return}const n=ki(r);e(t,{announce:n}),n.wasCalled()||r(o(t))}var Vi=(e,t)=>{const r=Mi();let o=null;const n=(c,d)=>{o&&w(),De("onBeforeCapture",()=>{const m=e().onBeforeCapture;m&&m({draggableId:c,mode:d})})},s=(c,d)=>{o&&w(),De("onBeforeDragStart",()=>{const m=e().onBeforeDragStart;m&&m(Me(c,d))})},i=(c,d)=>{o&&w();const m=Me(c,d);o={mode:d,lastCritical:c,lastLocation:m.source,lastCombine:null},r.add(()=>{De("onDragStart",()=>lt(e().onDragStart,m,t,Ve.onDragStart))})},a=(c,d)=>{const m=Ct(d),g=Qe(d);o||w();const v=!$i(c,o.lastCritical);v&&(o.lastCritical=c);const I=!Gi(o.lastLocation,m);I&&(o.lastLocation=m);const _=!Wi(o.lastCombine,g);if(_&&(o.lastCombine=g),!v&&!I&&!_)return;const b={...Me(c,o.mode),combine:g,destination:m};r.add(()=>{De("onDragUpdate",()=>lt(e().onDragUpdate,b,t,Ve.onDragUpdate))})},l=()=>{o||w(),r.flush()},u=c=>{o||w(),o=null,De("onDragEnd",()=>lt(e().onDragEnd,c,t,Ve.onDragEnd))};return{beforeCapture:n,beforeStart:s,start:i,update:a,flush:l,drop:u,abort:()=>{if(!o)return;const c={...Me(o.lastCritical,o.mode),combine:null,destination:null,reason:"CANCEL"};u(c)}}},Hi=(e,t)=>{const r=Vi(e,t);return o=>n=>s=>{if(k(s,"BEFORE_INITIAL_CAPTURE")){r.beforeCapture(s.payload.draggableId,s.payload.movementMode);return}if(k(s,"INITIAL_PUBLISH")){const a=s.payload.critical;r.beforeStart(a,s.payload.movementMode),n(s),r.start(a,s.payload.movementMode);return}if(k(s,"DROP_COMPLETE")){const a=s.payload.completed.result;r.flush(),n(s),r.drop(a);return}if(n(s),k(s,"FLUSH")){r.abort();return}const i=o.getState();i.phase==="DRAGGING"&&r.update(i.critical,i.impact)}};const Ui=e=>t=>r=>{if(!k(r,"DROP_ANIMATION_FINISHED")){t(r);return}const o=e.getState();o.phase!=="DROP_ANIMATING"&&w(),e.dispatch(Pt({completed:o.completed}))},qi=e=>{let t=null,r=null;function o(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return n=>s=>{if((k(s,"FLUSH")||k(s,"DROP_COMPLETE")||k(s,"DROP_ANIMATION_FINISHED"))&&o(),n(s),!k(s,"DROP_ANIMATE"))return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(to())}};r=requestAnimationFrame(()=>{r=null,t=ee(window,[i])})}};var zi=e=>()=>t=>r=>{(k(r,"DROP_COMPLETE")||k(r,"FLUSH")||k(r,"DROP_ANIMATE"))&&e.stopPublishing(),t(r)},Fi=e=>{let t=!1;return()=>r=>o=>{if(k(o,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(o.payload.critical.draggable.id),r(o),e.tryRestoreFocusRecorded();return}if(r(o),!!t){if(k(o,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(k(o,"DROP_COMPLETE")){t=!1;const n=o.payload.completed.result;n.combine&&e.tryShiftRecord(n.draggableId,n.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const Yi=e=>k(e,"DROP_COMPLETE")||k(e,"DROP_ANIMATE")||k(e,"FLUSH");var Ji=e=>t=>r=>o=>{if(Yi(o)){e.stop(),r(o);return}if(k(o,"INITIAL_PUBLISH")){r(o);const n=t.getState();n.phase!=="DRAGGING"&&w(),e.start(n);return}r(o),e.scroll(t.getState())};const Xi=e=>t=>r=>{if(t(r),!k(r,"PUBLISH_WHILE_DRAGGING"))return;const o=e.getState();o.phase==="DROP_PENDING"&&(o.isWaiting||e.dispatch(eo({reason:o.reason})))},Zi=Vo;var Qi=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:o,announce:n,autoScroller:s})=>$o(li,Zi(Ho(Ni(r),zi(e),Si(e),Ri,Ui,qi,Xi,Ji(s),Ti,Fi(t),Hi(o,n))));const ct=()=>({additions:{},removals:{},modified:{}});function Ki({registry:e,callbacks:t}){let r=ct(),o=null;const n=()=>{o||(t.collectionStarting(),o=requestAnimationFrame(()=>{o=null;const{additions:l,removals:u,modified:f}=r,c=Object.keys(l).map(g=>e.draggable.getById(g).getDimension(q)).sort((g,v)=>g.descriptor.index-v.descriptor.index),d=Object.keys(f).map(g=>{const I=e.droppable.getById(g).callbacks.getScrollWhileDragging();return{droppableId:g,scroll:I}}),m={additions:c,removals:Object.keys(u),modified:d};r=ct(),t.publish(m)}))};return{add:l=>{const u=l.descriptor.id;r.additions[u]=l,r.modified[l.descriptor.droppableId]=!0,r.removals[u]&&delete r.removals[u],n()},remove:l=>{const u=l.descriptor;r.removals[u.id]=!0,r.modified[u.droppableId]=!0,r.additions[u.id]&&delete r.additions[u.id],n()},stop:()=>{o&&(cancelAnimationFrame(o),o=null,r=ct())}}}var so=({scrollHeight:e,scrollWidth:t,height:r,width:o})=>{const n=X({x:t,y:e},{x:o,y:r});return{x:Math.max(0,n.x),y:Math.max(0,n.y)}},io=()=>{const e=document.documentElement;return e||w(),e},ao=()=>{const e=io();return so({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},ea=()=>{const e=oo(),t=ao(),r=e.y,o=e.x,n=io(),s=n.clientWidth,i=n.clientHeight,a=o+s,l=r+i;return{frame:re({top:r,left:o,right:a,bottom:l}),scroll:{initial:e,current:e,max:t,diff:{value:q,displacement:q}}}},ta=({critical:e,scrollOptions:t,registry:r})=>{const o=ea(),n=o.scroll.current,s=e.droppable,i=r.droppable.getAllByType(s.type).map(f=>f.callbacks.getDimensionAndWatchScroll(n,t)),a=r.draggable.getAllByType(e.draggable.type).map(f=>f.getDimension(n));return{dimensions:{draggables:Ln(a),droppables:jn(i)},critical:e,viewport:o}};function dn(e,t,r){return!(r.descriptor.id===t.id||r.descriptor.type!==t.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var ra=(e,t)=>{let r=null;const o=Ki({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),n=(d,m)=>{e.droppable.exists(d)||w(),r&&t.updateDroppableIsEnabled({id:d,isEnabled:m})},s=(d,m)=>{r&&(e.droppable.exists(d)||w(),t.updateDroppableIsCombineEnabled({id:d,isCombineEnabled:m}))},i=(d,m)=>{r&&(e.droppable.exists(d)||w(),t.updateDroppableScroll({id:d,newScroll:m}))},a=(d,m)=>{r&&e.droppable.getById(d).callbacks.scroll(m)},l=()=>{if(!r)return;o.stop();const d=r.critical.droppable;e.droppable.getAllByType(d.type).forEach(m=>m.callbacks.dragStopped()),r.unsubscribe(),r=null},u=d=>{r||w();const m=r.critical.draggable;d.type==="ADDITION"&&dn(e,m,d.value)&&o.add(d.value),d.type==="REMOVAL"&&dn(e,m,d.value)&&o.remove(d.value)};return{updateDroppableIsEnabled:n,updateDroppableIsCombineEnabled:s,scrollDroppable:a,updateDroppableScroll:i,startPublishing:d=>{r&&w();const m=e.draggable.getById(d.draggableId),g=e.droppable.getById(m.descriptor.droppableId),v={draggable:m.descriptor,droppable:g.descriptor},I=e.subscribe(u);return r={critical:v,unsubscribe:I},ta({critical:v,registry:e,scrollOptions:d.scrollOptions})},stopPublishing:l}},lo=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",na=e=>{window.scrollBy(e.x,e.y)};const oa=U(e=>Ze(e).filter(t=>!(!t.isEnabled||!t.frame))),sa=(e,t)=>oa(t).find(o=>(o.frame||w(),qn(o.frame.pageMarginBox)(e)))||null;var ia=({center:e,destination:t,droppables:r})=>{if(t){const n=r[t];return n.frame?n:null}return sa(e,r)};const Re={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var aa=(e,t,r=()=>Re)=>{const o=r(),n=e[t.size]*o.startFromPercentage,s=e[t.size]*o.maxScrollAtPercentage;return{startScrollingFrom:n,maxScrollValueAt:s}},co=({startOfRange:e,endOfRange:t,current:r})=>{const o=t-e;return o===0?0:(r-e)/o},Ot=1,la=(e,t,r=()=>Re)=>{const o=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return o.maxPixelScroll;if(e===t.startScrollingFrom)return Ot;const s=1-co({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),i=o.maxPixelScroll*o.ease(s);return Math.ceil(i)},ca=(e,t,r)=>{const o=r(),n=o.durationDampening.accelerateAt,s=o.durationDampening.stopDampeningAt,i=t,a=s,u=Date.now()-i;if(u>=s)return e;if(u<n)return Ot;const f=co({startOfRange:n,endOfRange:a,current:u}),c=e*o.ease(f);return Math.ceil(c)},un=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:n})=>{const s=la(e,t,n);return s===0?0:o?Math.max(ca(s,r,n),Ot):s},pn=({container:e,distanceToEdges:t,dragStartTime:r,axis:o,shouldUseTimeDampening:n,getAutoScrollerOptions:s})=>{const i=aa(e,o,s);return t[o.end]<t[o.start]?un({distanceToEdge:t[o.end],thresholds:i,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:s}):-1*un({distanceToEdge:t[o.start],thresholds:i,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:s})},da=({container:e,subject:t,proposedScroll:r})=>{const o=t.height>e.height,n=t.width>e.width;return!n&&!o?r:n&&o?null:{x:n?0:r.x,y:o?0:r.y}};const ua=On(e=>e===0?0:e);var uo=({dragStartTime:e,container:t,subject:r,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:s})=>{const i={top:o.y-t.top,right:t.right-o.x,bottom:t.bottom-o.y,left:o.x-t.left},a=pn({container:t,distanceToEdges:i,dragStartTime:e,axis:St,shouldUseTimeDampening:n,getAutoScrollerOptions:s}),l=pn({container:t,distanceToEdges:i,dragStartTime:e,axis:Mn,shouldUseTimeDampening:n,getAutoScrollerOptions:s}),u=ua({x:l,y:a});if(se(u,q))return null;const f=da({container:t,subject:r,proposedScroll:u});return f?se(f,q)?null:f:null};const pa=On(e=>e===0?0:e>0?1:-1),jt=(()=>{const e=(t,r)=>t<0?t:t>r?t-r:0;return({current:t,max:r,change:o})=>{const n=F(t,o),s={x:e(n.x,r.x),y:e(n.y,r.y)};return se(s,q)?null:s}})(),po=({max:e,current:t,change:r})=>{const o={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},n=pa(r),s=jt({max:o,current:t,change:n});return!s||n.x!==0&&s.x===0||n.y!==0&&s.y===0},Lt=(e,t)=>po({current:e.scroll.current,max:e.scroll.max,change:t}),fa=(e,t)=>{if(!Lt(e,t))return null;const r=e.scroll.max,o=e.scroll.current;return jt({current:o,max:r,change:t})},Tt=(e,t)=>{const r=e.frame;return r?po({current:r.scroll.current,max:r.scroll.max,change:t}):!1},ma=(e,t)=>{const r=e.frame;return!r||!Tt(e,t)?null:jt({current:r.scroll.current,max:r.scroll.max,change:t})};var ga=({viewport:e,subject:t,center:r,dragStartTime:o,shouldUseTimeDampening:n,getAutoScrollerOptions:s})=>{const i=uo({dragStartTime:o,container:e.frame,subject:t,center:r,shouldUseTimeDampening:n,getAutoScrollerOptions:s});return i&&Lt(e,i)?i:null},ha=({droppable:e,subject:t,center:r,dragStartTime:o,shouldUseTimeDampening:n,getAutoScrollerOptions:s})=>{const i=e.frame;if(!i)return null;const a=uo({dragStartTime:o,container:i.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:n,getAutoScrollerOptions:s});return a&&Tt(e,a)?a:null},fn=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:o,scrollDroppable:n,getAutoScrollerOptions:s})=>{const i=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const c=e.viewport,d=ga({dragStartTime:t,viewport:c,subject:l,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:s});if(d){o(d);return}}const u=ia({center:i,destination:Z(e.impact),droppables:e.dimensions.droppables});if(!u)return;const f=ha({dragStartTime:t,droppable:u,subject:l,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:s});f&&n(u.descriptor.id,f)},ba=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>Re})=>{const o=Ee(e),n=Ee(t);let s=null;const i=u=>{s||w();const{shouldUseTimeDampening:f,dragStartTime:c}=s;fn({state:u,scrollWindow:o,scrollDroppable:n,dragStartTime:c,shouldUseTimeDampening:f,getAutoScrollerOptions:r})};return{start:u=>{s&&w();const f=Date.now();let c=!1;const d=()=>{c=!0};fn({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:d,scrollDroppable:d,getAutoScrollerOptions:r}),s={dragStartTime:f,shouldUseTimeDampening:c},c&&i(u)},stop:()=>{s&&(o.cancel(),n.cancel(),s=null)},scroll:i}},xa=({move:e,scrollDroppable:t,scrollWindow:r})=>{const o=(a,l)=>{const u=F(a.current.client.selection,l);e({client:u})},n=(a,l)=>{if(!Tt(a,l))return l;const u=ma(a,l);if(!u)return t(a.descriptor.id,l),null;const f=X(l,u);return t(a.descriptor.id,f),X(l,f)},s=(a,l,u)=>{if(!a||!Lt(l,u))return u;const f=fa(l,u);if(!f)return r(u),null;const c=X(u,f);return r(c),X(u,c)};return a=>{const l=a.scrollJumpRequest;if(!l)return;const u=Z(a.impact);u||w();const f=n(a.dimensions.droppables[u],l);if(!f)return;const c=a.viewport,d=s(a.isWindowScrollAllowed,c,f);d&&o(a,d)}},va=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:o})=>{const n=ba({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:o}),s=xa({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:l=>{if(!(o().disabled||l.phase!=="DRAGGING")){if(l.movementMode==="FLUID"){n.scroll(l);return}l.scrollJumpRequest&&s(l)}},start:n.start,stop:n.stop}};const me="data-rfd",ge=(()=>{const e=`${me}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),vt=(()=>{const e=`${me}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),ya=(()=>{const e=`${me}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),mn={contextId:`${me}-scroll-container-context-id`},Da=e=>t=>`[${t}="${e}"]`,Ie=(e,t)=>e.map(r=>{const o=r.styles[t];return o?`${r.selector} { ${o} }`:""}).join(" "),Ia="pointer-events: none;";var wa=e=>{const t=Da(e),r=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(ge.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:Ia,dropAnimating:a}}})(),o=(()=>{const a=`
      transition: ${Ne.outOfTheWay};
    `;return{selector:t(vt.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),n={selector:t(ya.contextId),styles:{always:"overflow-anchor: none;"}},i=[o,r,n,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Ie(i,"always"),resting:Ie(i,"resting"),dragging:Ie(i,"dragging"),dropAnimating:Ie(i,"dropAnimating"),userCancel:Ie(i,"userCancel")}};const Q=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?B.useLayoutEffect:B.useEffect,dt=()=>{const e=document.querySelector("head");return e||w(),e},gn=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Ca(e,t){const r=O(()=>wa(e),[e]),o=B.useRef(null),n=B.useRef(null),s=E(U(c=>{const d=n.current;d||w(),d.textContent=c}),[]),i=E(c=>{const d=o.current;d||w(),d.textContent=c},[]);Q(()=>{!o.current&&!n.current||w();const c=gn(t),d=gn(t);return o.current=c,n.current=d,c.setAttribute(`${me}-always`,e),d.setAttribute(`${me}-dynamic`,e),dt().appendChild(c),dt().appendChild(d),i(r.always),s(r.resting),()=>{const m=g=>{const v=g.current;v||w(),dt().removeChild(v),g.current=null};m(o),m(n)}},[t,i,s,r.always,r.resting,e]);const a=E(()=>s(r.dragging),[s,r.dragging]),l=E(c=>{if(c==="DROP"){s(r.dropAnimating);return}s(r.userCancel)},[s,r.dropAnimating,r.userCancel]),u=E(()=>{n.current&&s(r.resting)},[s,r.resting]);return O(()=>({dragging:a,dropping:l,resting:u}),[a,l,u])}function fo(e,t){return Array.from(e.querySelectorAll(t))}var mo=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function tt(e){return e instanceof mo(e).HTMLElement}function Sa(e,t){const r=`[${ge.contextId}="${e}"]`,o=fo(document,r);if(!o.length)return null;const n=o.find(s=>s.getAttribute(ge.draggableId)===t);return!n||!tt(n)?null:n}function Na(e){const t=B.useRef({}),r=B.useRef(null),o=B.useRef(null),n=B.useRef(!1),s=E(function(d,m){const g={id:d,focus:m};return t.current[d]=g,function(){const I=t.current;I[d]!==g&&delete I[d]}},[]),i=E(function(d){const m=Sa(e,d);m&&m!==document.activeElement&&m.focus()},[e]),a=E(function(d,m){r.current===d&&(r.current=m)},[]),l=E(function(){o.current||n.current&&(o.current=requestAnimationFrame(()=>{o.current=null;const d=r.current;d&&i(d)}))},[i]),u=E(function(d){r.current=null;const m=document.activeElement;m&&m.getAttribute(ge.draggableId)===d&&(r.current=d)},[]);return Q(()=>(n.current=!0,function(){n.current=!1;const d=o.current;d&&cancelAnimationFrame(d)}),[]),O(()=>({register:s,tryRecordFocus:u,tryRestoreFocusRecorded:l,tryShiftRecord:a}),[s,u,l,a])}function Ea(){const e={draggables:{},droppables:{}},t=[];function r(c){return t.push(c),function(){const m=t.indexOf(c);m!==-1&&t.splice(m,1)}}function o(c){t.length&&t.forEach(d=>d(c))}function n(c){return e.draggables[c]||null}function s(c){const d=n(c);return d||w(),d}const i={register:c=>{e.draggables[c.descriptor.id]=c,o({type:"ADDITION",value:c})},update:(c,d)=>{const m=e.draggables[d.descriptor.id];m&&m.uniqueId===c.uniqueId&&(delete e.draggables[d.descriptor.id],e.draggables[c.descriptor.id]=c)},unregister:c=>{const d=c.descriptor.id,m=n(d);m&&c.uniqueId===m.uniqueId&&(delete e.draggables[d],e.droppables[c.descriptor.droppableId]&&o({type:"REMOVAL",value:c}))},getById:s,findById:n,exists:c=>!!n(c),getAllByType:c=>Object.values(e.draggables).filter(d=>d.descriptor.type===c)};function a(c){return e.droppables[c]||null}function l(c){const d=a(c);return d||w(),d}const u={register:c=>{e.droppables[c.descriptor.id]=c},unregister:c=>{const d=a(c.descriptor.id);d&&c.uniqueId===d.uniqueId&&delete e.droppables[c.descriptor.id]},getById:l,findById:a,exists:c=>!!a(c),getAllByType:c=>Object.values(e.droppables).filter(d=>d.descriptor.type===c)};function f(){e.draggables={},e.droppables={},t.length=0}return{draggable:i,droppable:u,subscribe:r,clean:f}}function Aa(){const e=O(Ea,[]);return B.useEffect(()=>function(){e.clean()},[e]),e}var kt=j.createContext(null),Je=()=>{const e=document.body;return e||w(),e};const _a={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Ba=e=>`rfd-announcement-${e}`;function Pa(e){const t=O(()=>Ba(e),[e]),r=B.useRef(null);return B.useEffect(function(){const s=document.createElement("div");return r.current=s,s.id=t,s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true"),qe(s.style,_a),Je().appendChild(s),function(){setTimeout(function(){const l=Je();l.contains(s)&&l.removeChild(s),s===r.current&&(r.current=null)})}},[t]),E(n=>{const s=r.current;if(s){s.textContent=n;return}},[])}const Ra={separator:"::"};function Mt(e,t=Ra){const r=j.useId();return O(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}function Oa({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function ja({contextId:e,text:t}){const r=Mt("hidden-text",{separator:"-"}),o=O(()=>Oa({contextId:e,uniqueId:r}),[r,e]);return B.useEffect(function(){const s=document.createElement("div");return s.id=o,s.textContent=t,s.style.display="none",Je().appendChild(s),function(){const a=Je();a.contains(s)&&a.removeChild(s)}},[o,t]),o}var rt=j.createContext(null);function go(e){const t=B.useRef(e);return B.useEffect(()=>{t.current=e}),t}function La(){let e=null;function t(){return!!e}function r(i){return i===e}function o(i){e&&w();const a={abandon:i};return e=a,a}function n(){e||w(),e=null}function s(){e&&(e.abandon(),n())}return{isClaimed:t,isActive:r,claim:o,release:n,tryAbandon:s}}function Oe(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const Ta=9,ka=13,Gt=27,ho=32,Ma=33,Ga=34,Wa=35,$a=36,Va=37,Ha=38,Ua=39,qa=40,za={[ka]:!0,[Ta]:!0};var bo=e=>{za[e.keyCode]&&e.preventDefault()};const nt=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(o=>`on${o}`in document)||e})(),xo=0,hn=5;function Fa(e,t){return Math.abs(t.x-e.x)>=hn||Math.abs(t.y-e.y)>=hn}const bn={type:"IDLE"};function Ya({cancel:e,completed:t,getPhase:r,setPhase:o}){return[{eventName:"mousemove",fn:n=>{const{button:s,clientX:i,clientY:a}=n;if(s!==xo)return;const l={x:i,y:a},u=r();if(u.type==="DRAGGING"){n.preventDefault(),u.actions.move(l);return}u.type!=="PENDING"&&w();const f=u.point;if(!Fa(f,l))return;n.preventDefault();const c=u.actions.fluidLift(l);o({type:"DRAGGING",actions:c})}},{eventName:"mouseup",fn:n=>{const s=r();if(s.type!=="DRAGGING"){e();return}n.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:n=>{r().type==="DRAGGING"&&n.preventDefault(),e()}},{eventName:"keydown",fn:n=>{if(r().type==="PENDING"){e();return}if(n.keyCode===Gt){n.preventDefault(),e();return}bo(n)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:n=>{const s=r();if(s.type==="IDLE"&&w(),s.actions.shouldRespectForcePress()){e();return}n.preventDefault()}},{eventName:nt,fn:e}]}function Ja(e){const t=B.useRef(bn),r=B.useRef(oe),o=O(()=>({eventName:"mousedown",fn:function(c){if(c.defaultPrevented||c.button!==xo||c.ctrlKey||c.metaKey||c.shiftKey||c.altKey)return;const d=e.findClosestDraggableId(c);if(!d)return;const m=e.tryGetLock(d,i,{sourceEvent:c});if(!m)return;c.preventDefault();const g={x:c.clientX,y:c.clientY};r.current(),u(m,g)}}),[e]),n=O(()=>({eventName:"webkitmouseforcewillbegin",fn:f=>{if(f.defaultPrevented)return;const c=e.findClosestDraggableId(f);if(!c)return;const d=e.findOptionsForDraggable(c);d&&(d.shouldRespectForcePress||e.canGetLock(c)&&f.preventDefault())}}),[e]),s=E(function(){const c={passive:!1,capture:!0};r.current=ee(window,[n,o],c)},[n,o]),i=E(()=>{t.current.type!=="IDLE"&&(t.current=bn,r.current(),s())},[s]),a=E(()=>{const f=t.current;i(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[i]),l=E(function(){const c={capture:!0,passive:!1},d=Ya({cancel:a,completed:i,getPhase:()=>t.current,setPhase:m=>{t.current=m}});r.current=ee(window,d,c)},[a,i]),u=E(function(c,d){t.current.type!=="IDLE"&&w(),t.current={type:"PENDING",point:d,actions:c},l()},[l]);Q(function(){return s(),function(){r.current()}},[s])}function Xa(){}const Za={[Ga]:!0,[Ma]:!0,[$a]:!0,[Wa]:!0};function Qa(e,t){function r(){t(),e.cancel()}function o(){t(),e.drop()}return[{eventName:"keydown",fn:n=>{if(n.keyCode===Gt){n.preventDefault(),r();return}if(n.keyCode===ho){n.preventDefault(),o();return}if(n.keyCode===qa){n.preventDefault(),e.moveDown();return}if(n.keyCode===Ha){n.preventDefault(),e.moveUp();return}if(n.keyCode===Ua){n.preventDefault(),e.moveRight();return}if(n.keyCode===Va){n.preventDefault(),e.moveLeft();return}if(Za[n.keyCode]){n.preventDefault();return}bo(n)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:nt,fn:r}]}function Ka(e){const t=B.useRef(Xa),r=O(()=>({eventName:"keydown",fn:function(s){if(s.defaultPrevented||s.keyCode!==ho)return;const i=e.findClosestDraggableId(s);if(!i)return;const a=e.tryGetLock(i,f,{sourceEvent:s});if(!a)return;s.preventDefault();let l=!0;const u=a.snapLift();t.current();function f(){l||w(),l=!1,t.current(),o()}t.current=ee(window,Qa(u,f),{capture:!0,passive:!1})}}),[e]),o=E(function(){const s={passive:!1,capture:!0};t.current=ee(window,[r],s)},[r]);Q(function(){return o(),function(){t.current()}},[o])}const ut={type:"IDLE"},el=120,tl=.15;function rl({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(t().type!=="DRAGGING"){e();return}r.keyCode===Gt&&r.preventDefault(),e()}},{eventName:nt,fn:e}]}function nl({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:o=>{const n=r();if(n.type!=="DRAGGING"){e();return}n.hasMoved=!0;const{clientX:s,clientY:i}=o.touches[0],a={x:s,y:i};o.preventDefault(),n.actions.move(a)}},{eventName:"touchend",fn:o=>{const n=r();if(n.type!=="DRAGGING"){e();return}o.preventDefault(),n.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:o=>{if(r().type!=="DRAGGING"){e();return}o.preventDefault(),e()}},{eventName:"touchforcechange",fn:o=>{const n=r();n.type==="IDLE"&&w();const s=o.touches[0];if(!s||!(s.force>=tl))return;const a=n.actions.shouldRespectForcePress();if(n.type==="PENDING"){a&&e();return}if(a){if(n.hasMoved){o.preventDefault();return}e();return}o.preventDefault()}},{eventName:nt,fn:e}]}function ol(e){const t=B.useRef(ut),r=B.useRef(oe),o=E(function(){return t.current},[]),n=E(function(m){t.current=m},[]),s=O(()=>({eventName:"touchstart",fn:function(m){if(m.defaultPrevented)return;const g=e.findClosestDraggableId(m);if(!g)return;const v=e.tryGetLock(g,a,{sourceEvent:m});if(!v)return;const I=m.touches[0],{clientX:_,clientY:b}=I,h={x:_,y:b};r.current(),c(v,h)}}),[e]),i=E(function(){const m={capture:!0,passive:!1};r.current=ee(window,[s],m)},[s]),a=E(()=>{const d=t.current;d.type!=="IDLE"&&(d.type==="PENDING"&&clearTimeout(d.longPressTimerId),n(ut),r.current(),i())},[i,n]),l=E(()=>{const d=t.current;a(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[a]),u=E(function(){const m={capture:!0,passive:!1},g={cancel:l,completed:a,getPhase:o},v=ee(window,nl(g),m),I=ee(window,rl(g),m);r.current=function(){v(),I()}},[l,o,a]),f=E(function(){const m=o();m.type!=="PENDING"&&w();const g=m.actions.fluidLift(m.point);n({type:"DRAGGING",actions:g,hasMoved:!1})},[o,n]),c=E(function(m,g){o().type!=="IDLE"&&w();const v=setTimeout(f,el);n({type:"PENDING",point:g,actions:m,longPressTimerId:v}),u()},[u,o,n,f]);Q(function(){return i(),function(){r.current();const g=o();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),n(ut))}},[o,i,n]),Q(function(){return ee(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const sl=["input","button","textarea","select","option","optgroup","video","audio"];function vo(e,t){if(t==null)return!1;if(sl.includes(t.tagName.toLowerCase()))return!0;const o=t.getAttribute("contenteditable");return o==="true"||o===""?!0:t===e?!1:vo(e,t.parentElement)}function il(e,t){const r=t.target;return tt(r)?vo(e,r):!1}var al=e=>re(e.getBoundingClientRect()).center;function ll(e){return e instanceof mo(e).Element}const cl=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(o=>o in Element.prototype)||e})();function yo(e,t){return e==null?null:e[cl](t)?e:yo(e.parentElement,t)}function dl(e,t){return e.closest?e.closest(t):yo(e,t)}function ul(e){return`[${ge.contextId}="${e}"]`}function pl(e,t){const r=t.target;if(!ll(r))return null;const o=ul(e),n=dl(r,o);return!n||!tt(n)?null:n}function fl(e,t){const r=pl(e,t);return r?r.getAttribute(ge.draggableId):null}function ml(e,t){const r=`[${vt.contextId}="${e}"]`,n=fo(document,r).find(s=>s.getAttribute(vt.id)===t);return!n||!tt(n)?null:n}function gl(e){e.preventDefault()}function Ge({expected:e,phase:t,isLockActive:r,shouldWarn:o}){return!(!r()||e!==t)}function Do({lockAPI:e,store:t,registry:r,draggableId:o}){if(e.isClaimed())return!1;const n=r.draggable.findById(o);return!(!n||!n.options.isEnabled||!lo(t.getState(),o))}function hl({lockAPI:e,contextId:t,store:r,registry:o,draggableId:n,forceSensorStop:s,sourceEvent:i}){if(!Do({lockAPI:e,store:r,registry:o,draggableId:n}))return null;const l=o.draggable.getById(n),u=ml(t,l.descriptor.id);if(!u||i&&!l.options.canDragInteractiveElements&&il(u,i))return null;const f=e.claim(s||oe);let c="PRE_DRAG";function d(){return l.options.shouldRespectForcePress}function m(){return e.isActive(f)}function g(N,A){Ge({expected:N,phase:c,isLockActive:m,shouldWarn:!0})&&r.dispatch(A())}const v=g.bind(null,"DRAGGING");function I(N){function A(){e.release(),c="COMPLETED"}c!=="PRE_DRAG"&&(A(),w()),r.dispatch(di(N.liftActionArgs)),c="DRAGGING";function L(x,T={shouldBlockNextClick:!1}){if(N.cleanup(),T.shouldBlockNextClick){const $=ee(window,[{eventName:"click",fn:gl,options:{once:!0,passive:!1,capture:!0}}]);setTimeout($)}A(),r.dispatch(eo({reason:x}))}return{isActive:()=>Ge({expected:"DRAGGING",phase:c,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:d,drop:x=>L("DROP",x),cancel:x=>L("CANCEL",x),...N.actions}}function _(N){const A=Ee(x=>{v(()=>Kn({client:x}))});return{...I({liftActionArgs:{id:n,clientSelection:N,movementMode:"FLUID"},cleanup:()=>A.cancel(),actions:{move:A}}),move:A}}function b(){const N={moveUp:()=>v(vi),moveRight:()=>v(Di),moveDown:()=>v(yi),moveLeft:()=>v(Ii)};return I({liftActionArgs:{id:n,clientSelection:al(u),movementMode:"SNAP"},cleanup:oe,actions:N})}function h(){Ge({expected:"PRE_DRAG",phase:c,isLockActive:m,shouldWarn:!0})&&e.release()}return{isActive:()=>Ge({expected:"PRE_DRAG",phase:c,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:d,fluidLift:_,snapLift:b,abort:h}}const bl=[Ja,Ka,ol];function xl({contextId:e,store:t,registry:r,customSensors:o,enableDefaultSensors:n}){const s=[...n?bl:[],...o||[]],i=B.useState(()=>La())[0],a=E(function(I,_){Oe(I)&&!Oe(_)&&i.tryAbandon()},[i]);Q(function(){let I=t.getState();return t.subscribe(()=>{const b=t.getState();a(I,b),I=b})},[i,t,a]),Q(()=>i.tryAbandon,[i.tryAbandon]);const l=E(v=>Do({lockAPI:i,registry:r,store:t,draggableId:v}),[i,r,t]),u=E((v,I,_)=>hl({lockAPI:i,registry:r,contextId:e,store:t,draggableId:v,forceSensorStop:I||null,sourceEvent:_&&_.sourceEvent?_.sourceEvent:null}),[e,i,r,t]),f=E(v=>fl(e,v),[e]),c=E(v=>{const I=r.draggable.findById(v);return I?I.options:null},[r.draggable]),d=E(function(){i.isClaimed()&&(i.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Bt()))},[i,t]),m=E(()=>i.isClaimed(),[i]),g=O(()=>({canGetLock:l,tryGetLock:u,findClosestDraggableId:f,findOptionsForDraggable:c,tryReleaseLock:d,isLockClaimed:m}),[l,u,f,c,d,m]);for(let v=0;v<s.length;v++)s[v](g)}const vl=e=>({onBeforeCapture:t=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Cn.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),yl=e=>({...Re,...e.autoScrollerOptions,durationDampening:{...Re.durationDampening,...e.autoScrollerOptions}});function we(e){return e.current||w(),e.current}function Dl(e){const{contextId:t,setCallbacks:r,sensors:o,nonce:n,dragHandleUsageInstructions:s}=e,i=B.useRef(null),a=go(e),l=E(()=>vl(a.current),[a]),u=E(()=>yl(a.current),[a]),f=Pa(t),c=ja({contextId:t,text:s}),d=Ca(t,n),m=E($=>{we(i).dispatch($)},[]),g=O(()=>Fr({publishWhileDragging:pi,updateDroppableScroll:mi,updateDroppableIsEnabled:gi,updateDroppableIsCombineEnabled:hi,collectionStarting:fi},m),[m]),v=Aa(),I=O(()=>ra(v,g),[v,g]),_=O(()=>va({scrollWindow:na,scrollDroppable:I.scrollDroppable,getAutoScrollerOptions:u,...Fr({move:Kn},m)}),[I.scrollDroppable,m,u]),b=Na(t),h=O(()=>Qi({announce:f,autoScroller:_,dimensionMarshal:I,focusMarshal:b,getResponders:l,styleMarshal:d}),[f,_,I,b,l,d]);i.current=h;const y=E(()=>{const $=we(i);$.getState().phase!=="IDLE"&&$.dispatch(Bt())},[]),N=E(()=>{const $=we(i).getState();return $.phase==="DROP_ANIMATING"?!0:$.phase==="IDLE"?!1:$.isDragging},[]),A=O(()=>({isDragging:N,tryAbort:y}),[N,y]);r(A);const L=E($=>lo(we(i).getState(),$),[]),x=E(()=>de(we(i).getState()),[]),T=O(()=>({marshal:I,focus:b,contextId:t,canLift:L,isMovementAllowed:x,dragHandleUsageInstructionsId:c,registry:v}),[t,I,c,b,L,x,v]);return xl({contextId:t,store:h,registry:v,customSensors:o||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),B.useEffect(()=>y,[y]),j.createElement(rt.Provider,{value:T},j.createElement(Wo,{context:kt,store:h},e.children))}function Il(){return j.useId()}function wl(e){const t=Il(),r=e.dragHandleUsageInstructions||Ve.dragHandleUsageInstructions;return j.createElement(Ko,null,o=>j.createElement(Dl,{nonce:e.nonce,contextId:t,setCallbacks:o,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const xn={dragging:5e3,dropAnimating:4500},Cl=(e,t)=>t?Ne.drop(t.duration):e?Ne.snap:Ne.fluid,Sl=(e,t)=>{if(e)return t?Pe.opacity.drop:Pe.opacity.combining},Nl=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function El(e){const r=e.dimension.client,{offset:o,combineWith:n,dropping:s}=e,i=!!n,a=Nl(e),l=!!s,u=l?bt.drop(o,i):bt.moveTo(o);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Cl(a,s),transform:u,opacity:Sl(i,l),zIndex:l?xn.dropAnimating:xn.dragging,pointerEvents:"none"}}function Al(e){return{transform:bt.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function _l(e){return e.type==="DRAGGING"?El(e):Al(e)}function Bl(e,t,r=q){const o=window.getComputedStyle(t),n=t.getBoundingClientRect(),s=En(n,o),i=Ue(s,r),a={client:s,tagName:t.tagName.toLowerCase(),display:o.display},l={x:s.marginBox.width,y:s.marginBox.height};return{descriptor:e,placeholder:a,displaceBy:l,client:s,page:i}}function Pl(e){const t=Mt("draggable"),{descriptor:r,registry:o,getDraggableRef:n,canDragInteractiveElements:s,shouldRespectForcePress:i,isEnabled:a}=e,l=O(()=>({canDragInteractiveElements:s,shouldRespectForcePress:i,isEnabled:a}),[s,a,i]),u=E(m=>{const g=n();return g||w(),Bl(r,g,m)},[r,n]),f=O(()=>({uniqueId:t,descriptor:r,options:l,getDimension:u}),[r,u,l,t]),c=B.useRef(f),d=B.useRef(!0);Q(()=>(o.draggable.register(c.current),()=>o.draggable.unregister(c.current)),[o.draggable]),Q(()=>{if(d.current){d.current=!1;return}const m=c.current;c.current=f,o.draggable.update(f,m)},[f,o.draggable])}var Wt=j.createContext(null);function Xe(e){const t=B.useContext(e);return t||w(),t}function Rl(e){e.preventDefault()}const Ol=e=>{const t=B.useRef(null),r=E((A=null)=>{t.current=A},[]),o=E(()=>t.current,[]),{contextId:n,dragHandleUsageInstructionsId:s,registry:i}=Xe(rt),{type:a,droppableId:l}=Xe(Wt),u=O(()=>({id:e.draggableId,index:e.index,type:a,droppableId:l}),[e.draggableId,e.index,a,l]),{children:f,draggableId:c,isEnabled:d,shouldRespectForcePress:m,canDragInteractiveElements:g,isClone:v,mapped:I,dropAnimationFinished:_}=e;if(!v){const A=O(()=>({descriptor:u,registry:i,getDraggableRef:o,canDragInteractiveElements:g,shouldRespectForcePress:m,isEnabled:d}),[u,i,o,g,m,d]);Pl(A)}const b=O(()=>d?{tabIndex:0,role:"button","aria-describedby":s,"data-rfd-drag-handle-draggable-id":c,"data-rfd-drag-handle-context-id":n,draggable:!1,onDragStart:Rl}:null,[n,s,c,d]),h=E(A=>{I.type==="DRAGGING"&&I.dropping&&A.propertyName==="transform"&&Cn.flushSync(_)},[_,I]),y=O(()=>{const A=_l(I),L=I.type==="DRAGGING"&&I.dropping?h:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":n,"data-rfd-draggable-id":c,style:A,onTransitionEnd:L},dragHandleProps:b}},[n,b,c,I,h,r]),N=O(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return j.createElement(j.Fragment,null,f(y,I.snapshot,N))};var Io=(e,t)=>e===t,wo=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};const jl=e=>e.combine?e.combine.draggableId:null,Ll=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function Tl(){const e=U((n,s)=>({x:n,y:s})),t=U((n,s,i=null,a=null,l=null)=>({isDragging:!0,isClone:s,isDropAnimating:!!l,dropAnimation:l,mode:n,draggingOver:i,combineWith:a,combineTargetFor:null})),r=U((n,s,i,a,l=null,u=null,f=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:u,mode:s,offset:n,dimension:i,forceShouldAnimate:f,snapshot:t(s,a,l,u,null)}}));return(n,s)=>{if(Oe(n)){if(n.critical.draggable.id!==s.draggableId)return null;const i=n.current.client.offset,a=n.dimensions.draggables[s.draggableId],l=Z(n.impact),u=Ll(n.impact),f=n.forceShouldAnimate;return r(e(i.x,i.y),n.movementMode,a,s.isClone,l,u,f)}if(n.phase==="DROP_ANIMATING"){const i=n.completed;if(i.result.draggableId!==s.draggableId)return null;const a=s.isClone,l=n.dimensions.draggables[s.draggableId],u=i.result,f=u.mode,c=wo(u),d=jl(u),g={duration:n.dropDuration,curve:Rt.drop,moveTo:n.newHomeClientOffset,opacity:d?Pe.opacity.drop:null,scale:d?Pe.scale.drop:null};return{mapped:{type:"DRAGGING",offset:n.newHomeClientOffset,dimension:l,dropping:g,draggingOver:c,combineWith:d,mode:f,forceShouldAnimate:null,snapshot:t(f,a,c,d,g)}}}return null}}function Co(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const kl={mapped:{type:"SECONDARY",offset:q,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Co(null)}};function Ml(){const e=U((i,a)=>({x:i,y:a})),t=U(Co),r=U((i,a=null,l)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:a,shouldAnimateDisplacement:l,snapshot:t(a)}})),o=i=>i?r(q,i,!0):null,n=(i,a,l,u)=>{const f=l.displaced.visible[i],c=!!(u.inVirtualList&&u.effected[i]),d=Qe(l),m=d&&d.draggableId===i?a:null;if(!f){if(!c)return o(m);if(l.displaced.invisible[i])return null;const I=he(u.displacedBy.point),_=e(I.x,I.y);return r(_,m,!0)}if(c)return o(m);const g=l.displacedBy.point,v=e(g.x,g.y);return r(v,m,f.shouldAnimate)};return(i,a)=>{if(Oe(i))return i.critical.draggable.id===a.draggableId?null:n(a.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const l=i.completed;return l.result.draggableId===a.draggableId?null:n(a.draggableId,l.result.draggableId,l.impact,l.afterCritical)}return null}}const Gl=()=>{const e=Tl(),t=Ml();return(o,n)=>e(o,n)||t(o,n)||kl},Wl={dropAnimationFinished:to},$l=Nn(Gl,Wl,null,{context:kt,areStatePropsEqual:Io})(Ol);function So(e){return Xe(Wt).isUsingCloneFor===e.draggableId&&!e.isClone?null:j.createElement($l,e)}function Vl(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,o=!!e.shouldRespectForcePress;return j.createElement(So,qe({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:o}))}const No=e=>t=>e===t,Hl=No("scroll"),Ul=No("auto"),vn=(e,t)=>t(e.overflowX)||t(e.overflowY),ql=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return vn(r,Hl)||vn(r,Ul)},zl=()=>!1,Eo=e=>e==null?null:e===document.body?zl()?e:null:e===document.documentElement?null:ql(e)?e:Eo(e.parentElement);var yt=e=>({x:e.scrollLeft,y:e.scrollTop});const Ao=e=>e?window.getComputedStyle(e).position==="fixed"?!0:Ao(e.parentElement):!1;var Fl=e=>{const t=Eo(e),r=Ao(e);return{closestScrollable:t,isFixedOnPage:r}},Yl=({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:o,direction:n,client:s,page:i,closest:a})=>{const l=(()=>{if(!a)return null;const{scrollSize:d,client:m}=a,g=so({scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:m,scrollSize:d,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:g,diff:{value:q,displacement:q}}}})(),u=n==="vertical"?St:Mn,f=fe({page:i,withPlaceholder:null,axis:u,frame:l});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:o,axis:u,isEnabled:t,client:s,page:i,frame:l,subject:f}};const Jl=(e,t)=>{const r=An(e);if(!t||e!==t)return r;const o=r.paddingBox.top-t.scrollTop,n=r.paddingBox.left-t.scrollLeft,s=o+t.scrollHeight,i=n+t.scrollWidth,l=Dt({top:o,right:i,bottom:s,left:n},r.border);return It({borderBox:l,margin:r.margin,border:r.border,padding:r.padding})};var Xl=({ref:e,descriptor:t,env:r,windowScroll:o,direction:n,isDropDisabled:s,isCombineEnabled:i,shouldClipSubject:a})=>{const l=r.closestScrollable,u=Jl(e,l),f=Ue(u,o),c=(()=>{if(!l)return null;const m=An(l),g={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:m,page:Ue(m,o),scroll:yt(l),scrollSize:g,shouldClipSubject:a}})();return Yl({descriptor:t,isEnabled:!s,isCombineEnabled:i,isFixedOnPage:r.isFixedOnPage,direction:n,client:u,page:f,closest:c})};const Zl={passive:!1},Ql={passive:!0};var yn=e=>e.shouldPublishImmediately?Zl:Ql;const We=e=>e&&e.env.closestScrollable||null;function Kl(e){const t=B.useRef(null),r=Xe(rt),o=Mt("droppable"),{registry:n,marshal:s}=r,i=go(e),a=O(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),l=B.useRef(a),u=O(()=>U((y,N)=>{t.current||w();const A={x:y,y:N};s.updateDroppableScroll(a.id,A)}),[a.id,s]),f=E(()=>{const y=t.current;return!y||!y.env.closestScrollable?q:yt(y.env.closestScrollable)},[]),c=E(()=>{const y=f();u(y.x,y.y)},[f,u]),d=O(()=>Ee(c),[c]),m=E(()=>{const y=t.current,N=We(y);if(y&&N||w(),y.scrollOptions.shouldPublishImmediately){c();return}d()},[d,c]),g=E((y,N)=>{t.current&&w();const A=i.current,L=A.getDroppableRef();L||w();const x=Fl(L),T={ref:L,descriptor:a,env:x,scrollOptions:N};t.current=T;const $=Xl({ref:L,descriptor:a,env:x,windowScroll:y,direction:A.direction,isDropDisabled:A.isDropDisabled,isCombineEnabled:A.isCombineEnabled,shouldClipSubject:!A.ignoreContainerClipping}),S=x.closestScrollable;return S&&(S.setAttribute(mn.contextId,r.contextId),S.addEventListener("scroll",m,yn(T.scrollOptions))),$},[r.contextId,a,m,i]),v=E(()=>{const y=t.current,N=We(y);return y&&N||w(),yt(N)},[]),I=E(()=>{const y=t.current;y||w();const N=We(y);t.current=null,N&&(d.cancel(),N.removeAttribute(mn.contextId),N.removeEventListener("scroll",m,yn(y.scrollOptions)))},[m,d]),_=E(y=>{const N=t.current;N||w();const A=We(N);A||w(),A.scrollTop+=y.y,A.scrollLeft+=y.x},[]),b=O(()=>({getDimensionAndWatchScroll:g,getScrollWhileDragging:v,dragStopped:I,scroll:_}),[I,g,v,_]),h=O(()=>({uniqueId:o,descriptor:a,callbacks:b}),[b,a,o]);Q(()=>(l.current=h.descriptor,n.droppable.register(h),()=>{t.current&&I(),n.droppable.unregister(h)}),[b,a,I,h,s,n.droppable]),Q(()=>{t.current&&s.updateDroppableIsEnabled(l.current.id,!e.isDropDisabled)},[e.isDropDisabled,s]),Q(()=>{t.current&&s.updateDroppableIsCombineEnabled(l.current.id,e.isCombineEnabled)},[e.isCombineEnabled,s])}function pt(){}const Dn={width:0,height:0,margin:is},ec=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?Dn:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},tc=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const o=ec({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:o.width,height:o.height,marginTop:o.margin.top,marginRight:o.margin.right,marginBottom:o.margin.bottom,marginLeft:o.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?Ne.placeholder:null}},rc=e=>{const t=B.useRef(null),r=E(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:o,onTransitionEnd:n,onClose:s,contextId:i}=e,[a,l]=B.useState(e.animate==="open");B.useEffect(()=>a?o!=="open"?(r(),l(!1),pt):t.current?pt:(t.current=setTimeout(()=>{t.current=null,l(!1)}),r):pt,[o,a,r]);const u=E(c=>{c.propertyName==="height"&&(n(),o==="close"&&s())},[o,s,n]),f=tc({isAnimatingOpenOnMount:a,animate:e.animate,placeholder:e.placeholder});return j.createElement(e.placeholder.tagName,{style:f,"data-rfd-placeholder-context-id":i,onTransitionEnd:u,ref:e.innerRef})};var nc=j.memo(rc);class oc extends j.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const sc=e=>{const t=B.useContext(rt);t||w();const{contextId:r,isMovementAllowed:o}=t,n=B.useRef(null),s=B.useRef(null),{children:i,droppableId:a,type:l,mode:u,direction:f,ignoreContainerClipping:c,isDropDisabled:d,isCombineEnabled:m,snapshot:g,useClone:v,updateViewportMaxScroll:I,getContainerForClone:_}=e,b=E(()=>n.current,[]),h=E((S=null)=>{n.current=S},[]);E(()=>s.current,[]);const y=E((S=null)=>{s.current=S},[]),N=E(()=>{o()&&I({maxScroll:ao()})},[o,I]);Kl({droppableId:a,type:l,mode:u,direction:f,isDropDisabled:d,isCombineEnabled:m,ignoreContainerClipping:c,getDroppableRef:b});const A=O(()=>j.createElement(oc,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:S,data:G,animate:Y})=>j.createElement(nc,{placeholder:G,onClose:S,innerRef:y,animate:Y,contextId:r,onTransitionEnd:N})),[r,N,e.placeholder,e.shouldAnimatePlaceholder,y]),L=O(()=>({innerRef:h,placeholder:A,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":r}}),[r,a,A,h]),x=v?v.dragging.draggableId:null,T=O(()=>({droppableId:a,type:l,isUsingCloneFor:x}),[a,x,l]);function $(){if(!v)return null;const{dragging:S,render:G}=v,Y=j.createElement(So,{draggableId:S.draggableId,index:S.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(R,V)=>G(R,V,S));return Lo.createPortal(Y,_())}return j.createElement(Wt.Provider,{value:T},i(L,g),$())};function ic(){return document.body||w(),document.body}const In={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:ic},_o=e=>{let t={...e},r;for(r in In)e[r]===void 0&&(t={...t,[r]:In[r]});return t},ft=(e,t)=>e===t.droppable.type,wn=(e,t)=>t.draggables[e.draggable.id],ac=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=U(s=>({draggableId:s.id,type:s.type,source:{index:s.index,droppableId:s.droppableId}})),o=U((s,i,a,l,u,f)=>{const c=u.descriptor.id;if(u.descriptor.droppableId===s){const g=f?{render:f,dragging:r(u.descriptor)}:null,v={isDraggingOver:a,draggingOverWith:a?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:v,useClone:g}}if(!i)return t;if(!l)return e;const m={isDraggingOver:a,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}});return(s,i)=>{const a=_o(i),l=a.droppableId,u=a.type,f=!a.isDropDisabled,c=a.renderClone;if(Oe(s)){const d=s.critical;if(!ft(u,d))return t;const m=wn(d,s.dimensions),g=Z(s.impact)===l;return o(l,f,g,g,m,c)}if(s.phase==="DROP_ANIMATING"){const d=s.completed;if(!ft(u,d.critical))return t;const m=wn(d.critical,s.dimensions);return o(l,f,wo(d.result)===l,Z(d.impact)===l,m,c)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){const d=s.completed;if(!ft(u,d.critical))return t;const m=Z(d.impact)===l,g=!!(d.impact.at&&d.impact.at.type==="COMBINE"),v=d.critical.droppable.id===l;return m?g?e:t:v?e:t}return t}},lc={updateViewportMaxScroll:xi},cc=Nn(ac,lc,(e,t,r)=>({..._o(r),...e,...t}),{context:kt,areStatePropsEqual:Io})(sc);function dc({sections:e,templateConfig:t,onUpdateSection:r,onToggleSection:o,onReorderSections:n,planFeatures:s,isSuperAdmin:i}){const{t:a}=Sn(),l=b=>{if(!b||!b.startsWith("http"))return b;const h=b.indexOf("/storage/");return h!==-1?b.substring(h):b},u=b=>{var h;return!b||b.startsWith("http")?b:b.startsWith("/storage/")?`${((h=window.appSettings)==null?void 0:h.baseUrl)||window.location.origin}${b}`:b.startsWith("/")?`${window.appSettings.baseUrl}${b}`:b},[f,c]=B.useState(new Set(["header","contact"])),[d,m]=B.useState(()=>{let b=e;if(!i)if(s!=null&&s.business_template_sections&&s.business_template_sections.length>0){const h=["header","about","contact","social","business_hours","featured_products","menu_highlights","daily_specials","specials"],y=[...new Set([...s.business_template_sections,...h])];b=e.filter(N=>y.includes(N.key))}else{const h=["header","about","contact","social","featured_products","menu_highlights","daily_specials","specials"];b=e.filter(y=>h.includes(y.key))}return b.map((h,y)=>{var N,A,L,x;return{key:h.key,name:h.name,enabled:((A=(N=t.sectionSettings)==null?void 0:N[h.key])==null?void 0:A.enabled)??!0,order:((x=(L=t.sectionSettings)==null?void 0:L[h.key])==null?void 0:x.order)??y,fields:h.fields,required:h.required}}).sort((h,y)=>h.order-y.order)});j.useEffect(()=>{let b=e;if(!i)if(s!=null&&s.business_template_sections&&s.business_template_sections.length>0){const h=["header","about","contact","social","business_hours","featured_products","menu_highlights","daily_specials","specials"],y=[...new Set([...s.business_template_sections,...h])];b=e.filter(N=>y.includes(N.key))}else{const h=["header","about","contact","social","featured_products","menu_highlights","daily_specials","specials"];b=e.filter(y=>h.includes(y.key))}m(b.map((h,y)=>{var N,A,L,x;return{key:h.key,name:h.name,enabled:((A=(N=t.sectionSettings)==null?void 0:N[h.key])==null?void 0:A.enabled)??!0,order:((x=(L=t.sectionSettings)==null?void 0:L[h.key])==null?void 0:x.order)??y,fields:h.fields,required:h.required}}).sort((h,y)=>h.order-y.order))},[t.sectionSettings,e,s,i]);const g=b=>{c(h=>{const y=new Set(h);return y.has(b)?y.delete(b):y.add(b),y})},v=(b,h)=>{m(y=>y.map(N=>N.key===b?{...N,enabled:h}:N)),o(b,h)},I=b=>{if(!b.destination)return;const h=Array.from(d),[y]=h.splice(b.source.index,1);h.splice(b.destination.index,0,y);const N=h.map((A,L)=>({...A,order:L}));m(N),n(N)},_=(b,h)=>{var N,A,L,x,T;const y=((A=(N=t.sections)==null?void 0:N[b])==null?void 0:A[h.name])||"";switch(h.type){case"textarea":return p.jsx(zr,{placeholder:`Enter ${h.label}`,value:y,onChange:S=>r(b,h.name,S.target.value),className:"min-h-[80px]"});case"tags":return p.jsx(H,{placeholder:`Enter ${h.label} (comma separated)`,value:y,onChange:S=>r(b,h.name,S.target.value)});case"checkbox":return p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx($e,{checked:y||!1,onCheckedChange:S=>r(b,h.name,S)}),p.jsx("span",{className:"text-sm",children:h.label})]});case"select":let $=h.options;return h.options==="dynamic_categories"&&($=(((x=(L=t.sections)==null?void 0:L[b])==null?void 0:x.categories)||[]).map(G=>({value:G.value,label:G.label}))),p.jsxs("select",{value:y||"",onChange:S=>r(b,h.name,S.target.value),className:"w-full p-2 border rounded-md bg-background",children:[p.jsxs("option",{value:"",children:["Select ",h.label]}),$==null?void 0:$.map(S=>p.jsx("option",{value:S.value,children:S.label},S.value))]});case"repeater":return p.jsxs("div",{className:"space-y-3",children:[p.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:Array.isArray(y)&&y.map((S,G)=>{var Y;return p.jsx(Ce,{className:"p-3",children:p.jsxs("div",{className:"space-y-3",children:[(Y=h.fields)==null?void 0:Y.map(R=>p.jsxs("div",{className:"space-y-1",children:[p.jsx(z,{className:"text-xs font-medium",children:R.label}),R.type==="textarea"?p.jsx(zr,{value:S[R.name]||"",onChange:V=>{const M=[...y];M[G][R.name]=V.target.value,r(b,h.name,M)},className:"min-h-[60px]"}):R.type==="select"?p.jsxs("select",{value:S[R.name]||"",onChange:V=>{const M=[...y];M[G][R.name]=V.target.value,r(b,h.name,M)},className:"w-full p-2 border rounded-md bg-background",children:[p.jsxs("option",{value:"",children:["Select ",R.label]}),(()=>{var M,Te;let V=R.options;return R.options==="dynamic_categories"&&(V=(((Te=(M=t.sections)==null?void 0:M[b])==null?void 0:Te.categories)||[]).map(ke=>({value:ke.value,label:ke.label}))),V==null?void 0:V.map(pe=>p.jsx("option",{value:pe.value,children:pe.label},pe.value))})()]}):R.type==="checkbox"?p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx($e,{checked:S[R.name]||!1,onCheckedChange:V=>{const M=[...y];M[G][R.name]=V,r(b,h.name,M)}}),p.jsx("span",{className:"text-sm",children:R.label})]}):R.type==="file"?p.jsx(mt,{value:u(S[R.name]||""),onChange:V=>{const M=[...y];M[G][R.name]=l(V),r(b,h.name,M)},placeholder:`Select ${R.label}...`,showPreview:!0}):p.jsx(H,{type:R.type,value:S[R.name]||"",onChange:V=>{const M=[...y];M[G][R.name]=V.target.value,r(b,h.name,M)}})]},R.name)),p.jsx(ne,{type:"button",variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200",onClick:()=>{const R=y.filter((V,M)=>M!==G);r(b,h.name,R)},children:p.jsx(ot,{className:"h-4 w-4"})})]})},G)})}),p.jsxs(ne,{type:"button",className:"w-full",onClick:()=>{var Y;const S=Array.isArray(y)?y:[],G={};(Y=h.fields)==null||Y.forEach(R=>G[R.name]=""),r(b,h.name,[...S,G])},children:[p.jsx(Mr,{className:"h-4 w-4 mr-2"}),a("Add")," ",h.label]})]});case"multiselect":return p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:[a("Select multiple options (comma-separated values will be stored)"),":"]}),p.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:(T=h.options)==null?void 0:T.map(S=>{const G=(y||"").split(",").map(R=>R.trim()),Y=G.includes(S.value);return p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx($e,{checked:Y,onCheckedChange:R=>{let V=G.filter(M=>M!==S.value);R&&V.push(S.value),r(b,h.name,V.filter(M=>M).join(","))}}),p.jsx("span",{className:"text-xs",children:S.label})]},S.value)})})]});case"file":return p.jsx(mt,{value:u(y),onChange:S=>r(b,h.name,l(S)),placeholder:`Select ${h.label}...`,showPreview:!0});case"time":return p.jsx(H,{type:"time",value:y,onChange:S=>r(b,h.name,S.target.value)});case"number":return p.jsx(H,{type:"number",placeholder:`Enter ${h.label}`,value:y,onChange:S=>r(b,h.name,S.target.value)});case"email":return p.jsx(H,{type:"email",placeholder:`Enter ${h.label}`,value:y,onChange:S=>r(b,h.name,S.target.value)});case"tel":return p.jsx(H,{type:"tel",placeholder:`Enter ${h.label}`,value:y,onChange:S=>r(b,h.name,S.target.value)});case"url":return p.jsx(H,{type:"url",placeholder:`Enter ${h.label}`,value:y,onChange:S=>r(b,h.name,S.target.value)});case"color":return p.jsxs("div",{className:"flex space-x-2",children:[p.jsx(H,{type:"color",value:y||"#000000",onChange:S=>r(b,h.name,S.target.value),className:"w-16 h-8"}),p.jsx(H,{type:"text",value:y||"",onChange:S=>r(b,h.name,S.target.value),placeholder:"#000000"})]});case"range":return p.jsxs("div",{className:"space-y-2",children:[p.jsx("input",{type:"range",min:h.min||0,max:h.max||100,value:y||h.min||0,onChange:S=>r(b,h.name,S.target.value),className:"w-full"}),p.jsx("div",{className:"text-xs text-gray-500 text-center",children:y||h.min||0})]});default:return p.jsx(H,{type:h.type||"text",placeholder:`Enter ${h.label}`,value:y,onChange:S=>r(b,h.name,S.target.value)})}};return p.jsxs("div",{className:"space-y-2",children:[p.jsx(wl,{onDragEnd:I,children:p.jsx(cc,{droppableId:"sections",children:b=>p.jsxs("div",{...b.droppableProps,ref:b.innerRef,className:"space-y-2",children:[d.filter(h=>h.enabled&&!["pixels","seo"].includes(h.key)).map((h,y)=>{const N=f.has(h.key);return p.jsx(Vl,{draggableId:h.key,index:y,children:(A,L)=>p.jsxs("div",{ref:A.innerRef,...A.draggableProps,className:`border rounded-md ${L.isDragging?"shadow-md":""}`,children:[p.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800/50",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{...A.dragHandleProps,className:"cursor-grab hover:cursor-grabbing p-1 mr-1",children:p.jsx(Yr,{className:"h-3 w-3 text-gray-400"})}),p.jsx("span",{className:"text-sm font-medium",children:h.name}),h.required&&p.jsx("span",{className:"text-xs text-red-500 ml-1",children:"*"})]}),p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(ne,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>g(h.key),children:p.jsx(Jr,{className:"h-3 w-3 text-blue-500"})}),!h.required&&p.jsx(ne,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>v(h.key,!1),children:p.jsx(ot,{className:"h-3 w-3 text-red-500"})})]})]}),N&&p.jsx("div",{className:"p-2 space-y-2 border-t",children:p.jsx("div",{className:"space-y-3",children:h.fields.map(x=>p.jsxs("div",{className:`space-y-1 ${x.type==="repeater"?"col-span-full":""}`,children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(z,{htmlFor:x.name,className:"text-sm font-medium",children:x.label}),x.required&&p.jsx("span",{className:"text-xs text-red-500 ml-1",children:"*"})]}),_(h.key,x)]},x.name))})})]})},h.key)}),b.placeholder]})})}),d.filter(b=>b.enabled&&["pixels","seo"].includes(b.key)).map(b=>{const h=f.has(b.key);return p.jsxs("div",{className:"border rounded-md",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800/50",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"p-1 mr-1",children:p.jsx(Yr,{className:"h-3 w-3 text-gray-300 opacity-50"})}),p.jsx("span",{className:"text-sm font-medium",children:b.name}),b.required&&p.jsx("span",{className:"text-xs text-red-500 ml-1",children:"*"})]}),p.jsxs("div",{className:"flex items-center space-x-1",children:[p.jsx(ne,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>g(b.key),children:p.jsx(Jr,{className:"h-3 w-3 text-blue-500"})}),!b.required&&p.jsx(ne,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>v(b.key,!1),children:p.jsx(ot,{className:"h-3 w-3 text-red-500"})})]})]}),h&&p.jsx("div",{className:"p-2 space-y-2 border-t",children:p.jsx("div",{className:"space-y-3",children:b.fields.map(y=>p.jsxs("div",{className:`space-y-1 ${y.type==="repeater"?"col-span-full":""}`,children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(z,{htmlFor:y.name,className:"text-sm font-medium",children:y.label}),y.required&&p.jsx("span",{className:"text-xs text-red-500 ml-1",children:"*"})]}),_(b.key,y)]},y.name))})})]},b.key)}),d.filter(b=>!b.enabled).length>0&&p.jsxs("div",{className:"mt-3",children:[p.jsxs("div",{className:"flex items-center mb-1",children:[p.jsx(To,{variant:"outline",className:"text-xs py-0 px-1 h-5 mr-2",children:d.filter(b=>!b.enabled).length}),p.jsx("span",{className:"text-sm text-gray-500",children:a("Disabled sections")})]}),p.jsx("div",{className:"flex flex-wrap gap-1 border-t pt-2",children:d.filter(b=>!b.enabled).map(b=>p.jsxs(ne,{variant:"outline",size:"sm",className:"h-7 text-sm flex items-center gap-1 px-2",onClick:()=>v(b.key,!0),children:[p.jsx(Mr,{className:"h-3 w-3"}),b.name]},b.key))})]})]})}function Gd({business:e,userPlan:t,planFeatures:r,userRole:o}){var Vt,Ht,Ut,qt,zt,Ft,Yt,Jt,Xt,Zt,Qt,Kt,er,tr,rr,nr,or,sr,ir,ar,lr,cr,dr,ur,pr,fr,mr,gr,hr,br,xr,vr,yr,Dr,Ir,wr,Cr,Sr,Nr,Er,Ar,_r,Br,Pr,Rr,Or,jr,Lr,Tr;const{t:n}=Sn(),s=!!e,[i,a]=j.useState((e==null?void 0:e.business_type)||"freelancer"),[l,u]=j.useState({available:!0,checking:!1}),[f,c]=j.useState(!1),[d,m]=j.useState(!1),g=Xr(i),v=o==="superadmin",I=j.useMemo(()=>{if(!g||v||!(r!=null&&r.business_template_sections)||r.business_template_sections.length===0)return g;const D=r.business_template_sections,C=g.sections.filter(P=>D.includes(P.key));return{...g,sections:C}},[g,r,v,i]),_=j.useMemo(()=>v?le:t?t.themes?Array.isArray(t.themes)?t.themes.length===0?le:le.filter(C=>t.themes.includes(C.value)):le:le:le,[t,v]),b=v||(r==null?void 0:r.custom_domain)===!0,h=v||(r==null?void 0:r.custom_subdomain)===!0,y=v||(r==null?void 0:r.pwa_support)===!0,N=v||(r==null?void 0:r.password_protection)===!0,A=(Vt=g==null?void 0:g.colorPresets)==null?void 0:Vt[0],L=j.useMemo(()=>{if(!e)return{};const D={...e.config_sections},C=I||g;return C!=null&&C.sections&&C.sections.forEach((P,W)=>{var ve,ye;D[P.key]?D[P.key]={...(ve=C.defaultData)==null?void 0:ve[P.key],...D[P.key],order:D[P.key].order??P.order??W}:(ye=C.defaultData)!=null&&ye[P.key]&&(D[P.key]={...C.defaultData[P.key],order:P.order??W})}),D},[e==null?void 0:e.config_sections,g,r,v]),{data:x,setData:T,post:$,put:S,processing:G,errors:Y}=ko({name:(e==null?void 0:e.name)||((Ut=(Ht=g==null?void 0:g.defaultData)==null?void 0:Ht.header)==null?void 0:Ut.name)||n("My Business"),slug:(e==null?void 0:e.slug)||"",business_type:i,custom_domain:(e==null?void 0:e.custom_domain)||"",url_prefix:(e==null?void 0:e.url_prefix)||"v",password:"",password_enabled:(e==null?void 0:e.password_enabled)||!1,domain_type:e!=null&&e.custom_domain?"domain":"slug",favicon:(e==null?void 0:e.favicon)||"",config_sections:s?L:(()=>{const D={...(g==null?void 0:g.defaultData)||{}};return g!=null&&g.sections&&g.sections.forEach((C,P)=>{D[C.key]&&(D[C.key].order=C.order??P)}),A&&(D.colors={primary:A.primary,secondary:A.secondary,accent:A.accent,text:A.text}),!v&&(r!=null&&r.business_template_sections)&&(D._allowed_sections=r.business_template_sections),D})()});j.useEffect(()=>{Object.keys(Y).length>0&&Object.entries(Y).forEach(([D,C])=>{Gr.error(`${D}: ${C}`)})},[Y]),j.useEffect(()=>{const D=W=>{c(!0)},C=W=>{m(!0)},P=[window,document,document.body];return P.forEach(W=>{W.addEventListener("openContactModal",D,!0),W.addEventListener("openAppointmentModal",C,!0)}),()=>{P.forEach(W=>{W.removeEventListener("openContactModal",D,!0),W.removeEventListener("openAppointmentModal",C,!0)})}},[]),j.useEffect(()=>{!v&&(r!=null&&r.business_template_sections)&&!x.config_sections._allowed_sections&&T("config_sections",{...x.config_sections,_allowed_sections:r.business_template_sections})},[r,v,x.config_sections._allowed_sections]);const R=D=>{var ve,ye,kr;a(D);const C=Xr(D),P=s?x.name:((ye=(ve=C==null?void 0:C.defaultData)==null?void 0:ve.header)==null?void 0:ye.name)||n("My Business"),W=(kr=C==null?void 0:C.colorPresets)==null?void 0:kr[0];T({name:P,slug:s?x.slug:"",business_type:D,custom_domain:x.custom_domain,url_prefix:x.url_prefix,password:x.password,password_enabled:x.password_enabled,domain_type:x.domain_type,favicon:x.favicon,config_sections:s?{...(C==null?void 0:C.defaultData)||{},colors:W}:{...(C==null?void 0:C.defaultData)||{},colors:W}}),s||V(P)},V=async D=>{if(D)try{const C=await Wr.post(route("vcard-builder.generate-slug"),{name:D,business_id:e==null?void 0:e.id,url_prefix:x.url_prefix||"v"});T("slug",C.data.slug),M(C.data.slug)}catch(C){console.error("Error generating slug:",C)}},M=async(D,C)=>{if(!D){u({available:!0,checking:!1});return}u({available:!0,checking:!0});try{const P=await Wr.post(route("vcard-builder.check-slug"),{slug:D,business_id:e==null?void 0:e.id,url_prefix:C||x.url_prefix});u({available:P.data.available,checking:!1})}catch{u({available:!1,checking:!1})}},Te=D=>{T("name",D),!s&&!x.slug&&V(D)},pe=D=>{T("slug",D),M(D)},ke=D=>{x.slug&&M(x.slug,D)},ae=(D,C,P)=>{const W={...x.config_sections,[D]:{...x.config_sections[D],[C]:P}};!v&&(r!=null&&r.business_template_sections)&&(W._allowed_sections=r.business_template_sections),T("config_sections",W)},Bo=(D,C)=>{var W;const P={...x.config_sections,[D]:{...x.config_sections[D],enabled:C,order:((W=x.config_sections[D])==null?void 0:W.order)||0}};!v&&(r!=null&&r.business_template_sections)&&(P._allowed_sections=r.business_template_sections),T("config_sections",P)},Po=D=>{const C={...x.config_sections};D.forEach((P,W)=>{C[P.key]&&(C[P.key]={...C[P.key],order:W})}),T("config_sections",C)},Ro=D=>{if(D.preventDefault(),!x.slug){Gr.error(n("Slug is required"));return}const C={...x};!v&&(r!=null&&r.business_template_sections)&&(C.config_sections={...x.config_sections,_allowed_sections:r.business_template_sections}),T(C),s?S(route("vcard-builder.update",e.id)):$(route("vcard-builder.store"))},Oo=[{title:n("Dashboard"),href:route("dashboard")},{title:n("vCard Builder"),href:route("vcard-builder.index")},{title:s?e.name:n("Create Business")}],$t=s?`Edit ${e.name}`:"Create Business",jo=s?route("vcard-builder.edit",e.id):route("vcard-builder.create");return p.jsxs(Go,{title:$t,url:jo,breadcrumbs:Oo,children:[p.jsx(Mo,{title:$t}),p.jsx("div",{className:"sticky top-0 z-50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b mb-6",children:p.jsxs("div",{className:"flex items-center justify-between py-3 px-1",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[!l.available&&x.slug&&p.jsx("span",{className:"text-xs text-red-500 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded",children:n("Slug not available")}),G&&p.jsx("span",{className:"text-xs text-blue-600 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded",children:n(s?"Updating...":"Creating...")})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsxs(ne,{variant:"outline",className:"px-4 h-9 flex items-center gap-1",onClick:()=>{localStorage.setItem("vcard_preview_data",JSON.stringify({business_type:i,name:x.name,slug:x.slug||"preview",config_sections:x.config_sections,template_config:{allowedSections:v?void 0:(r==null?void 0:r.business_template_sections)||[]}})),window.open(route("vcard.preview"),"_blank")},children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 mr-1",children:[p.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),p.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),n("Preview Template")]}),p.jsx(ne,{onClick:Ro,disabled:G||!l.available&&x.slug,className:"px-6 h-9",children:n(G?s?"Updating...":"Creating...":s?"Update Business":"Create Business")})]})]})}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[p.jsxs(Ce,{children:[p.jsx("div",{className:"p-3 border-b bg-muted/30",children:p.jsxs("h3",{className:"text-base font-medium",children:[p.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-xs rounded-full h-5 w-5 inline-flex items-center justify-center mr-1.5",children:"1"}),n("Business Setup")]})}),p.jsxs("div",{className:"p-3 space-y-3",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[p.jsxs("div",{children:[p.jsxs(z,{className:"text-sm mb-1 block flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center",children:[n("Business Type"),window.isDemo&&p.jsx("span",{className:"ml-2 px-1.5 py-0.5 text-[10px] font-medium rounded-full bg-primary text-white",children:"New"})]}),p.jsxs("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded-full",children:[_.length," layouts"]})]}),p.jsxs($r,{value:i,onValueChange:R,children:[p.jsx(Vr,{className:"h-9 text-sm",children:p.jsx(Hr,{})}),p.jsx(Ur,{children:_.map((D,C)=>p.jsxs(qr,{value:D.value,children:["Theme ",C+1,": ",D.label]},D.value))})]}),!v&&_.length<le.length&&p.jsx("p",{className:"text-xs text-amber-600 mt-1",children:n("Some templates are restricted by your plan. Upgrade to access all templates.")})]}),p.jsxs("div",{children:[p.jsx(z,{className:"text-sm mb-1 block",children:n("Business Name")}),p.jsx(H,{value:x.name,onChange:D=>s?T("name",D.target.value):Te(D.target.value),className:"h-9 text-sm",placeholder:n("Enter business name"),required:!0})]})]}),p.jsxs("div",{children:[p.jsx(mt,{label:n("Business Favicon"),value:x.favicon,onChange:D=>T("favicon",D),placeholder:n("Select favicon from media library"),showPreview:!0}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n("Upload a small icon (16x16 or 32x32 pixels) to represent your business in browser tabs")})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[p.jsx(z,{className:"text-sm",children:n("Color Theme")}),p.jsx("div",{className:"flex space-x-1",children:((g==null?void 0:g.colorPresets)||[]).slice(0,5).map((D,C)=>{var P,W;return p.jsx("div",{className:"w-5 h-5 rounded-full cursor-pointer border hover:scale-110 transition-transform flex items-center justify-center",style:{backgroundColor:D.primary},onClick:()=>{T("config_sections",{...x.config_sections,colors:D})},children:((W=(P=x.config_sections)==null?void 0:P.colors)==null?void 0:W.primary)===D.primary&&p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})},C)})})]}),p.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[p.jsxs("div",{children:[p.jsx(z,{className:"text-sm mb-1 block",children:n("Primary")}),p.jsxs("div",{className:"flex",children:[p.jsx(H,{type:"color",value:((zt=(qt=x.config_sections)==null?void 0:qt.colors)==null?void 0:zt.primary)||"#3B82F6",onChange:D=>{var C;T("config_sections",{...x.config_sections,colors:{...(C=x.config_sections)==null?void 0:C.colors,primary:D.target.value}})},className:"h-6 p-0 w-full rounded-r-none"}),p.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-1 flex items-center rounded-r-md border border-l-0 border-input text-xs",children:((Jt=(Yt=(Ft=x.config_sections)==null?void 0:Ft.colors)==null?void 0:Yt.primary)==null?void 0:Jt.substring(0,7))||"#3B82F6"})]})]}),p.jsxs("div",{children:[p.jsx(z,{className:"text-sm mb-1 block",children:n("Secondary")}),p.jsxs("div",{className:"flex",children:[p.jsx(H,{type:"color",value:((Zt=(Xt=x.config_sections)==null?void 0:Xt.colors)==null?void 0:Zt.secondary)||"#1E40AF",onChange:D=>{var C;T("config_sections",{...x.config_sections,colors:{...(C=x.config_sections)==null?void 0:C.colors,secondary:D.target.value}})},className:"h-6 p-0 w-full rounded-r-none"}),p.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-1 flex items-center rounded-r-md border border-l-0 border-input text-xs",children:((er=(Kt=(Qt=x.config_sections)==null?void 0:Qt.colors)==null?void 0:Kt.secondary)==null?void 0:er.substring(0,7))||"#1E40AF"})]})]}),p.jsxs("div",{children:[p.jsx(z,{className:"text-sm mb-1 block",children:n("Accent")}),p.jsxs("div",{className:"flex",children:[p.jsx(H,{type:"color",value:((rr=(tr=x.config_sections)==null?void 0:tr.colors)==null?void 0:rr.accent)||"#F59E0B",onChange:D=>{var C;T("config_sections",{...x.config_sections,colors:{...(C=x.config_sections)==null?void 0:C.colors,accent:D.target.value}})},className:"h-6 p-0 w-full rounded-r-none"}),p.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-1 flex items-center rounded-r-md border border-l-0 border-input text-xs",children:((sr=(or=(nr=x.config_sections)==null?void 0:nr.colors)==null?void 0:or.accent)==null?void 0:sr.substring(0,7))||"#F59E0B"})]})]}),p.jsxs("div",{children:[p.jsx(z,{className:"text-sm mb-1 block",children:n("Text")}),p.jsxs("div",{className:"flex",children:[p.jsx(H,{type:"color",value:((ar=(ir=x.config_sections)==null?void 0:ir.colors)==null?void 0:ar.text)||(i==="freelancer"?"#E2E8F0":"#1E293B"),onChange:D=>{var C;T("config_sections",{...x.config_sections,colors:{...(C=x.config_sections)==null?void 0:C.colors,text:D.target.value}})},className:"h-6 p-0 w-full rounded-r-none"}),p.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-1 flex items-center rounded-r-md border border-l-0 border-input text-xs",children:((dr=(cr=(lr=x.config_sections)==null?void 0:lr.colors)==null?void 0:cr.text)==null?void 0:dr.substring(0,7))||(i==="freelancer"?"#E2E8F0":"#1E293B")})]})]})]})]}),p.jsxs("div",{children:[p.jsx(z,{className:"text-sm mb-1 block",children:n("Font Family")}),p.jsxs($r,{value:((ur=x.config_sections)==null?void 0:ur.font)||(g==null?void 0:g.defaultFont)||"Inter, sans-serif",onValueChange:D=>{T("config_sections",{...x.config_sections,font:D})},children:[p.jsx(Vr,{className:"h-9 text-sm",children:p.jsx(Hr,{})}),p.jsx(Ur,{children:((g==null?void 0:g.fontOptions)||[{name:"Inter",value:"Inter, sans-serif"},{name:"Arial",value:"Arial, sans-serif"},{name:"Georgia",value:"Georgia, serif"}]).map(D=>p.jsx(qr,{value:D.value,children:p.jsx("span",{style:{fontFamily:D.value},children:D.name})},D.value))})]})]})]})]}),p.jsx(zo,{data:{slug:x.slug,custom_domain:x.custom_domain,url_prefix:x.url_prefix,password:x.password,password_enabled:x.password_enabled,domain_type:x.domain_type},onUpdate:(D,C)=>T(D,C),slugStatus:l,onSlugChange:pe,onPrefixChange:ke,businessId:e==null?void 0:e.id,canUseCustomDomain:b,canUseSubdomain:h,canUsePasswordProtection:N,type:"business"}),p.jsxs(Ce,{children:[p.jsx("div",{className:"p-3 border-b bg-muted/30",children:p.jsxs("h3",{className:"text-base font-medium",children:[p.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-xs rounded-full h-5 w-5 inline-flex items-center justify-center mr-1.5",children:"3"}),n("Card Sections")]})}),p.jsxs("div",{className:"p-3",children:[!v&&(r==null?void 0:r.business_template_sections)&&r.business_template_sections.length>0&&p.jsx("div",{className:"mb-3 p-2 bg-amber-50 border border-amber-200 rounded-md",children:p.jsx("p",{className:"text-xs text-amber-700",children:n('Some sections are restricted by your plan. Available sections: "{{count}}"',{count:((pr=I==null?void 0:I.sections)==null?void 0:pr.length)||0})})}),p.jsx(dc,{sections:(I==null?void 0:I.sections)||(g==null?void 0:g.sections)||[],templateConfig:{sections:x.config_sections,sectionSettings:x.config_sections},onUpdateSection:ae,onToggleSection:Bo,onReorderSections:Po,planFeatures:r,isSuperAdmin:v})]})]}),p.jsxs(Ce,{children:[p.jsx("div",{className:"p-3 border-b bg-muted/30",children:p.jsxs("h3",{className:"text-base font-medium",children:[p.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-xs rounded-full h-5 w-5 inline-flex items-center justify-center mr-1.5",children:"4"}),n("PWA Settings")]})}),p.jsxs("div",{className:"p-3 space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx(z,{className:"text-sm",children:n("Enable PWA")}),!y&&p.jsx("p",{className:"text-xs text-amber-600",children:n("PWA feature requires plan upgrade")})]}),p.jsx($e,{checked:((mr=(fr=x.config_sections)==null?void 0:fr.pwa)==null?void 0:mr.enabled)||!1,onCheckedChange:D=>ae("pwa","enabled",D),disabled:!y,className:"scale-75"})]}),((hr=(gr=x.config_sections)==null?void 0:gr.pwa)==null?void 0:hr.enabled)&&y&&p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{children:[p.jsx(z,{className:"text-sm mb-1 block",children:n("App Name")}),p.jsx(H,{value:((xr=(br=x.config_sections)==null?void 0:br.pwa)==null?void 0:xr.name)||x.name||"",onChange:D=>ae("pwa","name",D.target.value),placeholder:n("My Business Card"),className:"h-9 text-sm"})]}),p.jsxs("div",{children:[p.jsx(z,{className:"text-sm mb-1 block",children:n("Short Name")}),p.jsx(H,{value:((yr=(vr=x.config_sections)==null?void 0:vr.pwa)==null?void 0:yr.short_name)||"",onChange:D=>ae("pwa","short_name",D.target.value),placeholder:n("MyCard"),className:"h-9 text-sm",maxLength:12})]}),p.jsxs("div",{children:[p.jsx(z,{className:"text-sm mb-1 block",children:n("Description")}),p.jsx(H,{value:((Ir=(Dr=x.config_sections)==null?void 0:Dr.pwa)==null?void 0:Ir.description)||"",onChange:D=>ae("pwa","description",D.target.value),placeholder:n("Digital business card"),className:"h-9 text-sm"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("div",{children:[p.jsx(z,{className:"text-sm mb-1 block",children:n("Theme Color")}),p.jsxs("div",{className:"flex",children:[p.jsx(H,{type:"color",value:((Cr=(wr=x.config_sections)==null?void 0:wr.pwa)==null?void 0:Cr.theme_color)||"#000000",onChange:D=>ae("pwa","theme_color",D.target.value),className:"h-6 p-0 w-full rounded-r-none"}),p.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-1 flex items-center rounded-r-md border border-l-0 border-input text-xs",children:((Er=(Nr=(Sr=x.config_sections)==null?void 0:Sr.pwa)==null?void 0:Nr.theme_color)==null?void 0:Er.substring(0,7))||"#000000"})]})]}),p.jsxs("div",{children:[p.jsx(z,{className:"text-sm mb-1 block",children:n("Background")}),p.jsxs("div",{className:"flex",children:[p.jsx(H,{type:"color",value:((_r=(Ar=x.config_sections)==null?void 0:Ar.pwa)==null?void 0:_r.background_color)||"#ffffff",onChange:D=>ae("pwa","background_color",D.target.value),className:"h-6 p-0 w-full rounded-r-none"}),p.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-1 flex items-center rounded-r-md border border-l-0 border-input text-xs",children:((Rr=(Pr=(Br=x.config_sections)==null?void 0:Br.pwa)==null?void 0:Pr.background_color)==null?void 0:Rr.substring(0,7))||"#ffffff"})]})]})]})]})]})]})]}),p.jsx("div",{className:"lg:col-span-1",children:p.jsxs(Ce,{className:"sticky top-4 h-[calc(100vh-2rem)]",children:[p.jsx("div",{className:"p-3 border-b bg-muted/30",children:p.jsx("h3",{className:"text-base font-medium",children:n("Live Preview")})}),p.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800/50 rounded-b-lg overflow-hidden h-[calc(100%-3.5rem)]",children:p.jsx("div",{className:"flex justify-center h-full",children:p.jsx("div",{className:"w-full max-w-[400px] overflow-y-auto h-full shadow-lg rounded-lg",children:p.jsx(qo,{businessType:i,data:{...x,template_config:{sections:x.config_sections,sectionSettings:x.config_sections,allowedSections:v?void 0:(r==null?void 0:r.business_template_sections)||[]}},template:I||g})})})})]})})]}),p.jsx(Fo,{isOpen:f,onClose:()=>c(!1),businessId:(e==null?void 0:e.id)||0,businessName:x.name||"Preview Business",themeColors:((Or=x.config_sections)==null?void 0:Or.colors)||(g==null?void 0:g.defaultColors),themeFont:((jr=x.config_sections)==null?void 0:jr.font)||(g==null?void 0:g.defaultFont)}),p.jsx(Yo,{isOpen:d,onClose:()=>m(!1),businessId:(e==null?void 0:e.id)||0,businessName:x.name||"Preview Business",themeColors:((Lr=x.config_sections)==null?void 0:Lr.colors)||(g==null?void 0:g.defaultColors),themeFont:((Tr=x.config_sections)==null?void 0:Tr.font)||(g==null?void 0:g.defaultFont)})]})}export{Gd as default};

import{r as g,j as e}from"./ui-DwAOVm1p.js";import{P as _s}from"./page-template-8tWNB1WX.js";import{S as Ps}from"./switch-DGQ2xpqa.js";import{u as A,t as P,S as G,L as K,I as X,B as v,C as S,g as R,o as re,d as $,e as L,f as ys,i as Cs,D as ks,a as Es,b as Fs,c as Ms,K as Ts,ab as oe,P as As,X as bs}from"./app-BlWi7cIv.js";import{T as zs,a as Os,b as Ns}from"./tabs-D8y1ncs-.js";import{C as Ss}from"./CrudDeleteModal-D-6F4-pE.js";import{l as Rs,E as Bs,u as Ds,a as Is,C as ws}from"./react-stripe.esm-RpGt8_k_.js";import{L as D}from"./loader-circle-DUfirWOF.js";import{C as $s}from"./copy-Btm1-TBN.js";import{C as Ne}from"./circle-check-big-CMY9b2ai.js";import{C as F}from"./credit-card-CWCbalqR.js";import{E as V}from"./external-link-JXKp3xBD.js";import{W as je}from"./wallet-z8Vgl1na.js";import{A as z,a as O}from"./alert-DtKg3qdz.js";import{C as ye,H as Ls,I as he}from"./indian-rupee-C8OIffYG.js";import{I as be}from"./info-DYw6_RZC.js";import{C as B}from"./circle-alert-n5kUioWN.js";import{T as qs}from"./tag-uteW8j4-.js";import{G as xe}from"./globe-kYq37WGi.js";import{B as Ks}from"./bot-Byy7wW_B.js";import{C as pe}from"./circle-check-slliUzm6.js";import{S as gs}from"./sparkles-tvpsAjMk.js";import{C as fe,B as Ys,P as Xs}from"./pencil-CikQTGr1.js";import{T as Us}from"./trash-2-BFqA1Oig.js";import{B as vs}from"./banknote-CYzFy0mg.js";import{Z as Ws}from"./zap-BHnHi5aV.js";import{C as Hs}from"./clock-C9SI5I6F.js";import{H as Js}from"./hard-drive-BmUAz7G1.js";import{U as Gs}from"./users-WU9ta9Er.js";import{S as Vs}from"./store-B0ZvGrkW.js";import"./vendor-CxtKjBZA.js";import"./textarea-DmNeUOf1.js";import"./select-DV03FLtq.js";import"./index-upgrZYbo.js";import"./chevron-up-DMuWaAmJ.js";import"./react-country-flag.esm-U4UQv2PH.js";import"./language-DYlIyiUn.js";import"./chevron-right-CTYpggVz.js";import"./cookie-consent-BF1mYY4f.js";import"./chart-column-CrjmBQBc.js";import"./briefcase-AuRykhaE.js";import"./dollar-sign-B5K61QeY.js";import"./mail-B928cX0J.js";import"./settings-CXB8R1cS.js";import"./message-square-BEKBBgPS.js";import"./calendar-Jlwl64Lp.js";import"./user-D7_XmPgu.js";import"./use-favicon-BHKlxAc6.js";import"./utils-DBYZG17H.js";function de(r={}){const{t:w}=A(),[u,d]=g.useState(!1),h=async(t,s)=>{d(!0);const c={stripe:"stripe.payment",paypal:"paypal.payment",bank:"bank.payment",razorpay:"razorpay.payment",mercadopago:"mercadopago.payment",paystack:"paystack.payment",flutterwave:"flutterwave.payment"}[t];if(!c){P.error(w("Invalid payment method")),d(!1);return}const n=C(t,s);G.post(route(c),n,{onSuccess:i=>{var p,j,b;(j=(p=i.props)==null?void 0:p.flash)!=null&&j.success?P.success(i.props.flash.success):P.success(w("Payment successful")),(b=r.onSuccess)==null||b.call(r)},onError:i=>{var j;const p=(i==null?void 0:i.message)||(i==null?void 0:i.error)||w("Payment failed");P.error(p),(j=r.onError)==null||j.call(r,p)},onFinish:()=>{d(!1)}})},f=(t,s)=>{const c={stripe:["payment_method_id","cardholder_name"],paypal:["order_id","payment_id"],bank:["amount"],razorpay:["payment_id","order_id","signature"],mercadopago:["payment_id","status"],paystack:["payment_id"],flutterwave:["payment_id"]}[t]||[];for(const n of c)if(!s[n])return P.error(w(`${n} is required`)),!1;return!0},C=(t,s)=>({plan_id:s.planId,billing_cycle:s.billingCycle,coupon_code:s.couponCode||"",...s});return{processing:u,processPayment:h,validatePaymentData:f,formatPaymentData:C}}const Zs=({planId:r,couponCode:w,billingCycle:u,onSuccess:d,onCancel:h})=>{const{t:f}=A(),C=Ds(),t=Is(),[s,o]=g.useState(""),{processing:c,processPayment:n}=de({onSuccess:d,onError:j=>P.error(j)}),i=async j=>{if(j.preventDefault(),!C||!t||!s.trim()){P.error(f("Please fill in all required fields"));return}const b=t.getElement(ws);if(!b)return;const{error:l,paymentMethod:x}=await C.createPaymentMethod({type:"card",card:b,billing_details:{name:s}});if(l){P.error(l.message||f("Payment failed"));return}n("stripe",{planId:r,billingCycle:u,couponCode:w,payment_method_id:x.id,cardholder_name:s})},p={style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}};return e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"cardholder-name",children:f("Name on card")}),e.jsx(X,{id:"cardholder-name",type:"text",value:s,onChange:j=>o(j.target.value),placeholder:f("Enter cardholder name"),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{children:f("Card details")}),e.jsx("div",{className:"p-3 border rounded-md",children:e.jsx(ws,{options:p})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(v,{type:"button",variant:"outline",onClick:h,disabled:c,className:"flex-1",children:f("Cancel")}),e.jsx(v,{type:"submit",disabled:!C||c,className:"flex-1",children:c?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"h-4 w-4 mr-2 animate-spin"}),f("Processing...")]}):f("Pay Now")})]})]})};function Qs({planId:r,couponCode:w,billingCycle:u,stripeKey:d,onSuccess:h,onCancel:f}){const{t:C}=A(),[t,s]=g.useState(null);return g.useEffect(()=>{d&&d.startsWith("pk_")&&s(Rs(d))},[d]),t?e.jsx(Bs,{stripe:t,children:e.jsx(Zs,{planId:r,couponCode:w,billingCycle:u,onSuccess:h,onCancel:f})}):e.jsx("div",{className:"p-4 text-center text-red-500",children:C("Stripe not configured properly")})}function ea({planId:r,planPrice:w,couponCode:u,billingCycle:d,paypalClientId:h,currency:f,onSuccess:C,onCancel:t}){const{t:s}=A(),o=g.useRef(null),{processPayment:c}=de({onSuccess:C,onError:n=>P.error(n)});return g.useEffect(()=>{if(!h||!o.current)return;const n=document.createElement("script");return n.src=`https://www.paypal.com/sdk/js?client-id=${h}&currency=${f.toUpperCase()}&disable-funding=credit,card`,n.async=!0,n.onload=()=>{window.paypal&&o.current&&window.paypal.Buttons({createOrder:(i,p)=>p.order.create({purchase_units:[{amount:{value:w.toString(),currency_code:f.toUpperCase()}}]}),onApprove:(i,p)=>p.order.capture().then(j=>{c("paypal",{planId:r,billingCycle:d,couponCode:u,order_id:i.orderID,payment_id:j.id})}),onError:i=>{console.error("PayPal error:",i),i.message&&i.message.includes("declined")?P.error(s("Card was declined. Please try a different payment method.")):P.error(s("Payment failed. Please try again."))},onCancel:()=>{t()}}).render(o.current)},document.head.appendChild(n),()=>{document.head.contains(n)&&document.head.removeChild(n)}},[h,r,d,u,f]),h?e.jsx("div",{className:"space-y-4",children:e.jsx("div",{ref:o})}):e.jsx("div",{className:"p-4 text-center text-red-500",children:s("PayPal not configured")})}function sa({planId:r,planPrice:w,couponCode:u,billingCycle:d,bankDetails:h,onSuccess:f,onCancel:C}){const{t}=A(),[s,o]=g.useState(!1),c=i=>{(j=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(j);{const b=document.createElement("textarea");return b.value=j,b.style.position="fixed",b.style.left="-999999px",b.style.top="-999999px",document.body.appendChild(b),b.focus(),b.select(),new Promise((l,x)=>{document.execCommand("copy")?(b.remove(),l()):(b.remove(),x(new Error("Copy failed")))})}})(i).then(()=>{P.success(t("Amount copied to clipboard"))}).catch(()=>{P.error(t("Failed to copy amount"))})},n=()=>{o(!0),G.post(route("bank.payment"),{plan_id:r,billing_cycle:d,coupon_code:u,amount:w},{onSuccess:()=>{f()},onError:()=>{P.error(t("Failed to submit payment request"))},onFinish:()=>{o(!1)}})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{children:e.jsxs(R,{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-3",children:t("Bank Transfer Details")}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx("div",{className:"whitespace-pre-line",children:h}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("span",{className:"font-medium",children:[t("Amount"),": $",w]}),e.jsxs(v,{variant:"outline",size:"sm",onClick:()=>c(`$${w}`),children:[e.jsx($s,{className:"h-3 w-3 mr-1"}),t("Copy")]})]})]})]})}),e.jsx(S,{className:"border-orange-200 bg-orange-50",children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ne,{className:"h-5 w-5 text-orange-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-orange-800",children:[e.jsx("p",{className:"font-medium mb-1",children:t("Important Instructions")}),e.jsxs("ul",{className:"space-y-1 text-xs",children:[e.jsxs("li",{children:["• ",t("Transfer the exact amount shown above")]}),e.jsxs("li",{children:["• ",t("Include your order reference in the transfer description")]}),e.jsxs("li",{children:["• ",t("Your plan will be activated after payment verification")]}),e.jsxs("li",{children:["• ",t("Verification may take 1-3 business days")]})]})]})]})})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:C,className:"flex-1",children:t("Cancel")}),e.jsx(v,{onClick:n,disabled:s,className:"flex-1",children:t(s?"Processing...":"I have made the payment")})]})]})}function aa({planId:r,planPrice:w,couponCode:u,billingCycle:d,razorpayKey:h,currency:f,onSuccess:C,onCancel:t}){const{t:s}=A();g.useEffect(()=>{if(window&&window.Razorpay)return;const c=document.createElement("script");return c.src="https://checkout.razorpay.com/v1/checkout.js",c.async=!0,c.onerror=()=>{P.error(s("Failed to load Razorpay checkout. Please try again."))},document.body.appendChild(c),()=>{document.body.contains(c)&&document.body.removeChild(c)}},[]);const o=async()=>{var c,n;try{const i=await re.post(route("razorpay.create-order"),{plan_id:r,billing_cycle:d,coupon_code:u});if(i.data.error){P.error(i.data.error);return}const{order_id:p,amount:j}=i.data;if(!p||!j){P.error(s("Invalid response from server"));return}const b={key:h,amount:j,currency:f,name:"vCard",description:"Plan Subscription",order_id:p,handler:function(x){re.post(route("razorpay.verify-payment"),{razorpay_payment_id:x.razorpay_payment_id,razorpay_order_id:x.razorpay_order_id,razorpay_signature:x.razorpay_signature,plan_id:r,billing_cycle:d,coupon_code:u}).then(()=>{C()}).catch(y=>{var m,_;const N=((_=(m=y.response)==null?void 0:m.data)==null?void 0:_.error)||s("Payment verification failed");P.error(N)})},prefill:{name:"",email:"",contact:""},theme:{color:"#3B82F6"},modal:{ondismiss:t}};if(!window.Razorpay){P.error(s("Razorpay SDK not loaded"));return}new window.Razorpay(b).open()}catch(i){const p=((n=(c=i.response)==null?void 0:c.data)==null?void 0:n.error)||s("Failed to initialize payment");P.error(p),console.error("Razorpay error:",i)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s("You will be redirected to Razorpay to complete your payment.")}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,className:"flex-1",children:s("Cancel")}),e.jsx(v,{onClick:o,className:"flex-1",children:s("Pay with Razorpay")})]})]})}function ra({planId:r,planPrice:w,couponCode:u,billingCycle:d,accessToken:h,currency:f="BRL",onSuccess:C,onCancel:t}){const{t:s}=A(),[o,c]=g.useState(!1),n=async()=>{var i,p;try{c(!0);const j=await re.post(route("mercadopago.create-preference"),{plan_id:r,billing_cycle:d,coupon_code:u||void 0},{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});j.data.redirect_url?window.location.href=j.data.redirect_url:(P.error(s("Failed to create payment preference")),c(!1))}catch(j){const b=((p=(i=j.response)==null?void 0:i.data)==null?void 0:p.error)||j.message||s("Failed to create payment preference");P.error(b),c(!1)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s("You will be redirected to MercadoPago to complete your payment.")}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx(v,{variant:"outline",onClick:t,className:"flex-1",disabled:o,children:s("Cancel")}),e.jsx(v,{onClick:n,className:"flex-1",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"h-4 w-4 mr-2 animate-spin"}),s("Processing...")]}):s("Pay with MercadoPago")})]})]})}function ta({planId:r,planPrice:w,couponCode:u,billingCycle:d,paystackKey:h,currency:f,onSuccess:C,onCancel:t}){var n;const{t:s}=A(),o=g.useRef(!1),{processPayment:c}=de({onSuccess:C,onError:i=>P.error(i)});return g.useEffect(()=>{if(!h||o.current)return;const i=document.createElement("script");return i.src="https://js.paystack.co/v1/inline.js",i.async=!0,i.onload=()=>{o.current=!0;const p=document.querySelector("[data-radix-dialog-overlay]");p&&(p.style.display="none"),window.PaystackPop.setup({key:h,email:"user@example.com",amount:Math.round(Number(w)*100),currency:f.toUpperCase(),callback:function(b){p&&(p.style.display=""),c("paystack",{planId:r,billingCycle:d,couponCode:u,payment_id:b.reference})},onClose:function(){p&&(p.style.display=""),t()}}).openIframe()},document.head.appendChild(i),()=>{document.head.contains(i)&&document.head.removeChild(i)}},[h,r,d,u,f]),h?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("p",{children:s("Redirecting to Paystack...")}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[s("Amount"),": ",(n=window.appSettings)!=null&&n.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`]})]}):e.jsx("div",{className:"p-4 text-center text-red-500",children:s("Paystack not configured")})}function na({planId:r,planPrice:w,couponCode:u,billingCycle:d,flutterwaveKey:h,currency:f,onSuccess:C,onCancel:t}){const{t:s}=A(),o=g.useRef(!1),{processPayment:c}=de({onSuccess:C,onError:n=>P.error(n)});return g.useEffect(()=>{if(!h||o.current)return;const n=document.createElement("script");return n.src="https://checkout.flutterwave.com/v3.js",n.async=!0,n.onload=()=>{o.current=!0,window.FlutterwaveCheckout({public_key:h,tx_ref:`plan_${r}_${Date.now()}`,amount:w,currency:f.toUpperCase(),payment_options:"card,mobilemoney,ussd",customer:{email:"user@example.com",phone_number:"",name:"Customer"},customizations:{title:"Plan Subscription",description:"Payment for subscription plan",logo:""},callback:function(i){i.status==="successful"?c("flutterwave",{planId:r,billingCycle:d,couponCode:u,payment_id:i.transaction_id,tx_ref:i.tx_ref}):(P.error(s("Payment was not completed")),t())},onclose:function(){t()}})},document.head.appendChild(n),()=>{document.head.contains(n)&&document.head.removeChild(n)}},[h,r,d,u,f]),h?e.jsx("div",{className:"p-4 text-center",children:e.jsx("p",{children:s("Redirecting to Flutterwave...")})}):e.jsx("div",{className:"p-4 text-center text-red-500",children:s("Flutterwave not configured")})}function la({planId:r,couponCode:w,billingCycle:u,planPrice:d,paytabsClientKey:h,currency:f,onSuccess:C,onCancel:t}){var i,p;const{t:s}=A(),[o,c]=g.useState(!1),n=async()=>{var j,b,l,x,y,N;c(!0);try{const m={plan_id:r,billing_cycle:u,coupon_code:w||null,payment_id:`pt_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,transaction_id:`txn_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,_token:(j=document.querySelector('meta[name="csrf-token"]'))==null?void 0:j.getAttribute("content")},_=await re.post(route("paytabs.payment"),m,{headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},timeout:3e4});if(_.data.success&&_.data.redirect_url)P.success(s("Redirecting to PayTabs payment page...")),setTimeout(()=>{window.location.href=_.data.redirect_url},1e3);else throw new Error(_.data.message||"Payment initialization failed")}catch(m){console.error("PayTabs payment error:",m);let _=s("Payment failed. Please try again.");((b=m.response)==null?void 0:b.status)===400?_=((l=m.response.data)==null?void 0:l.message)||s("Invalid payment request. Please check your details."):((x=m.response)==null?void 0:x.status)===500?_=s("Server error. Please try again later."):(N=(y=m.response)==null?void 0:y.data)!=null&&N.message?_=m.response.data.message:m.message?_=m.message:m.code==="ECONNABORTED"&&(_=s("Request timeout. Please try again.")),P.error(_),c(!1)}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("PayTabs Payment")]})}),e.jsx(R,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(V,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:s("Secure Payment with PayTabs")}),e.jsx("p",{className:"text-sm text-blue-700",children:s("You will be redirected to PayTabs secure payment page to complete your transaction.")})]})]})}),e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[s("Plan"),":"]}),e.jsx("span",{className:"text-sm text-gray-900",children:s("Subscription Plan")})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[s("Billing Cycle"),":"]}),e.jsx("span",{className:"text-sm text-gray-900 capitalize",children:u})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[s("Amount"),":"]}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:(i=window.appSettings)!=null&&i.formatCurrency?window.appSettings.formatCurrency(d,{showSymbol:!0}):`${f} ${d}`})]}),w&&e.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t",children:[e.jsxs("span",{className:"text-sm font-medium text-green-600",children:[s("Coupon Applied"),":"]}),e.jsx("span",{className:"text-sm text-green-700 font-medium",children:w})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(v,{type:"button",variant:"outline",onClick:t,className:"flex-1",disabled:o,children:s("Cancel")}),e.jsx(v,{type:"button",onClick:n,disabled:o,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Redirecting...")]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),s("Pay {{amount}}",{amount:(p=window.appSettings)!=null&&p.formatCurrency?window.appSettings.formatCurrency(d,{showSymbol:!0}):`${f} ${d}`})]})})]})]})})]})}function ia({planId:r,couponCode:w,billingCycle:u,planPrice:d,skrillMerchantId:h,currency:f,onSuccess:C,onCancel:t}){var j;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(""),p=async b=>{if(b.preventDefault(),!n){P.error(s("Please enter your email address"));return}c(!0);try{const l={plan_id:r,billing_cycle:u,coupon_code:w||null,payment_id:`skrill_${Date.now()}`,transaction_id:`txn_${Date.now()}`,email:n};G.post(route("skrill.payment"),l,{onSuccess:()=>{P.success(s("Payment successful!")),C()},onError:x=>{console.error("Skrill payment error:",x),P.error(s("Payment failed. Please try again."))},onFinish:()=>{c(!1)}})}catch(l){console.error("Skrill payment error:",l),P.error(s("Payment failed. Please try again.")),c(!1)}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5"}),s("Skrill Payment")]})}),e.jsx(R,{children:e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"email",children:s("Email Address")}),e.jsx(X,{id:"email",type:"email",value:n,onChange:b=>i(b.target.value),placeholder:s("Enter your email address"),required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("You will be redirected to Skrill to complete the payment")})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(v,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:s("Cancel")}),e.jsx(v,{type:"submit",disabled:o,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Processing...")]}):s("Pay {{amount}}",{amount:(j=window.appSettings)!=null&&j.formatCurrency?window.appSettings.formatCurrency(d,{showSymbol:!0}):`${f} ${d}`})})]})]})})]})}function ca({planId:r,couponCode:w,billingCycle:u,planPrice:d,currency:h,onSuccess:f,onCancel:C}){var n;const{t}=A(),[s,o]=g.useState(!1),c=i=>{var l;i.preventDefault(),o(!0);const p=document.createElement("form");p.method="POST",p.action=route("coingate.payment");const j=(l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content");if(j){const x=document.createElement("input");x.type="hidden",x.name="_token",x.value=j,p.appendChild(x)}Object.entries({plan_id:r,billing_cycle:u,coupon_code:w||"",crypto_currency:"BTC"}).forEach(([x,y])=>{const N=document.createElement("input");N.type="hidden",N.name=x,N.value=String(y),p.appendChild(N)}),document.body.appendChild(p),p.submit()};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-5 w-5 text-orange-500"}),t("CoinGate Cryptocurrency Payment")]})}),e.jsxs(R,{children:[e.jsxs(z,{className:"mb-4",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsx(O,{children:t("You will be redirected to CoinGate to complete your cryptocurrency payment securely.")})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:t("Plan")}),e.jsxs("span",{className:"text-sm",children:[t(u)," ",t("billing")]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:t("Amount")}),e.jsx("span",{className:"text-lg font-bold",children:((n=window.appSettings)==null?void 0:n.formatCurrency(d,{showSymbol:!0}))||`₦${d.toFixed(2)}`})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:t("Final cryptocurrency amount will be calculated at checkout based on current exchange rates")})]}),e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(be,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:t("Payment Process:")}),e.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[e.jsx("li",{children:t('Click "Pay with Crypto" to proceed to CoinGate')}),e.jsx("li",{children:t("Complete payment using your selected cryptocurrency")}),e.jsx("li",{children:t("You will be redirected back after payment completion")})]})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(v,{type:"button",variant:"outline",onClick:C,className:"flex-1",disabled:s,children:t("Cancel")}),e.jsx(v,{type:"submit",disabled:s,className:"flex-1 bg-orange-600 hover:bg-orange-700",children:s?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),t("Redirecting...")]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"mr-2 h-4 w-4"}),t("Pay with Crypto")]})})]})]})]})]})}function oa({planId:r,couponCode:w,billingCycle:u,planPrice:d,payfastMerchantId:h,currency:f,onSuccess:C,onCancel:t}){var x,y,N;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState({firstName:"",lastName:"",email:""}),[p,j]=g.useState({}),b=()=>{const m={};return n.firstName.trim()||(m.firstName=s("First name is required")),n.lastName.trim()||(m.lastName=s("Last name is required")),n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(m.email=s("Please enter a valid email address")):m.email=s("Email is required"),m},l=async m=>{var T;m.preventDefault();const _=b();if(j(_),Object.keys(_).length>0){P.error(s("Please fix the errors below"));return}if(d<5){P.error(s("Minimum payment amount is R5.00"));return}c(!0);try{const Y=await(await fetch(route("payfast.payment"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((T=document.querySelector('meta[name="csrf-token"]'))==null?void 0:T.getAttribute("content"))||""},body:JSON.stringify({plan_id:r,billing_cycle:u,coupon_code:w,customer_details:n})})).json();if(Y.success){const U=document.createElement("form");U.method="POST",U.action=Y.action,U.innerHTML=Y.inputs,document.body.appendChild(U),U.submit()}else P.error(Y.error||s("Payment failed")),c(!1)}catch(I){console.error("PayFast payment error:",I),P.error(s("Payment failed. Please try again.")),c(!1)}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("Payfast Payment")]})}),e.jsx(R,{children:e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsx("input",{type:"hidden",name:"_token",value:((x=document.querySelector('meta[name="csrf-token"]'))==null?void 0:x.getAttribute("content"))||""}),e.jsx("input",{type:"hidden",name:"plan_id",value:r}),e.jsx("input",{type:"hidden",name:"billing_cycle",value:u}),e.jsx("input",{type:"hidden",name:"coupon_code",value:w||""}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"firstName",children:s("First Name")}),e.jsx(X,{id:"firstName",name:"customer_details[firstName]",value:n.firstName,onChange:m=>{i(_=>({..._,firstName:m.target.value})),p.firstName&&j(_=>({..._,firstName:""}))},placeholder:s("Enter first name"),className:p.firstName?"border-red-500":"",required:!0}),p.firstName&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:p.firstName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"lastName",children:s("Last Name")}),e.jsx(X,{id:"lastName",name:"customer_details[lastName]",value:n.lastName,onChange:m=>{i(_=>({..._,lastName:m.target.value})),p.lastName&&j(_=>({..._,lastName:""}))},placeholder:s("Enter last name"),className:p.lastName?"border-red-500":"",required:!0}),p.lastName&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:p.lastName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"email",children:s("Email Address")}),e.jsx(X,{id:"email",name:"customer_details[email]",type:"email",value:n.email,onChange:m=>{i(_=>({..._,email:m.target.value})),p.email&&j(_=>({..._,email:""}))},placeholder:s("Enter email address"),className:p.email?"border-red-500":"",required:!0}),p.email&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:p.email}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("You will be redirected to Payfast to complete the payment")})]}),d<5&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:s("PayFast requires a minimum payment of R5.00. Current amount: {{currency}} {{amount}}",{currency:f,amount:d})})]}),e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:s("Amount")}),e.jsx("span",{className:"text-sm font-bold",children:((y=window.appSettings)==null?void 0:y.formatCurrency(d,{showSymbol:!0}))||`₦${d.toFixed(2)}`})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s("Secure payment processing via PayFast")})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(v,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:s("Cancel")}),e.jsx(v,{type:"submit",disabled:o||d<5,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Processing...")]}):s("Pay {{amount}}",{amount:((N=window.appSettings)==null?void 0:N.formatCurrency(d,{showSymbol:!0}))||`₦${d.toFixed(2)}`})})]})]})})]})}function da({planId:r,couponCode:w,billingCycle:u,planPrice:d,toyyibpayCategoryCode:h,currency:f,onSuccess:C,onCancel:t}){var y;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState({name:"",email:"",phone:""}),[p,j]=g.useState({}),b=()=>{const N={};return n.name.trim()||(N.name=s("Full name is required")),n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(N.email=s("Please enter a valid email address")):N.email=s("Email address is required"),n.phone.trim()?n.phone.length<10&&(N.phone=s("Please enter a valid Malaysian phone number")):N.phone=s("Phone number is required"),j(N),Object.keys(N).length===0},l=async N=>{var m;if(N.preventDefault(),!b()){P.error(s("Please fix the form errors"));return}c(!0),j({});try{const _={plan_id:r,billing_cycle:u,coupon_code:w||"",billName:`Plan Subscription - ${r}`,billDescription:`${u} subscription for ${n.name}`,billAmount:d,billTo:n.name.trim(),billEmail:n.email.trim(),billPhone:n.phone.trim()},T=document.createElement("form");T.method="POST",T.action=route("toyyibpay.payment");const I=document.createElement("input");I.type="hidden",I.name="_token",I.value=((m=document.querySelector('meta[name="csrf-token"]'))==null?void 0:m.getAttribute("content"))||"",T.appendChild(I),Object.entries(_).forEach(([Y,U])=>{const q=document.createElement("input");q.type="hidden",q.name=Y,q.value=U.toString(),T.appendChild(q)}),document.body.appendChild(T),T.submit()}catch(_){console.error("ToyyibPay payment error:",_),P.error(s("Payment failed. Please try again.")),c(!1)}},x=N=>{const m=N.replace(/[^0-9]/g,"");return m.startsWith("60")?m.slice(0,12):m.startsWith("0")?"60"+m.slice(1,11):"60"+m.slice(0,10)};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("toyyibPay Payment")]})}),e.jsxs(R,{children:[e.jsxs(z,{className:"mb-4",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:s("You will be redirected to toyyibPay to complete your payment securely via FPX (Malaysian Online Banking)")})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"name",children:[s("Full Name")," *"]}),e.jsx(X,{id:"name",value:n.name,onChange:N=>{i(m=>({...m,name:N.target.value})),p.name&&j(m=>({...m,name:""}))},placeholder:s("Enter your full name"),className:p.name?"border-red-500":"",required:!0}),p.name&&e.jsx("p",{className:"text-sm text-red-500",children:p.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"email",children:[s("Email Address")," *"]}),e.jsx(X,{id:"email",type:"email",value:n.email,onChange:N=>{i(m=>({...m,email:N.target.value})),p.email&&j(m=>({...m,email:""}))},placeholder:s("Enter your email address"),className:p.email?"border-red-500":"",required:!0}),p.email&&e.jsx("p",{className:"text-sm text-red-500",children:p.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"phone",children:[s("Phone Number")," *"]}),e.jsx(X,{id:"phone",value:n.phone,onChange:N=>{const m=x(N.target.value);i(_=>({..._,phone:m})),p.phone&&j(_=>({..._,phone:""}))},placeholder:"60123456789",className:p.phone?"border-red-500":"",maxLength:12,required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("Malaysian format: 60123456789 (numbers only)")}),p.phone&&e.jsx("p",{className:"text-sm text-red-500",children:p.phone})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(F,{className:"h-4 w-4 text-primary"}),e.jsx("p",{className:"text-sm font-medium",children:s("Payment Method: FPX (Online Banking)")})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("Secure payment via Malaysian banks including Maybank, CIMB, Public Bank, RHB, and more")})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s("Total Amount"),":"]}),e.jsx("span",{className:"text-lg font-bold",children:(y=window.appSettings)!=null&&y.formatCurrency?window.appSettings.formatCurrency(d,{showSymbol:!0}):`${f} ${d}`})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{type:"button",variant:"outline",onClick:t,className:"flex-1",disabled:o,children:s("Cancel")}),e.jsx(v,{type:"submit",disabled:o,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Processing...")]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),s("Pay Now")]})})]})]})]})]})]})}function ma({planId:r,couponCode:w,billingCycle:u,planPrice:d,paytrMerchantId:h,currency:f,onSuccess:C,onCancel:t}){var N;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(!1),[p,j]=g.useState(""),b=g.useRef(null),[l,x]=g.useState({name:"",email:"",phone:"",address:""});g.useEffect(()=>{const m=_=>{_.origin==="https://www.paytr.com"&&(_.data==="success"?(i(!1),C()):_.data==="fail"&&(i(!1),P.error(s("Payment failed"))))};return window.addEventListener("message",m),()=>window.removeEventListener("message",m)},[C,s]);const y=async m=>{var _,T;if(m.preventDefault(),!l.name||!l.email||!l.phone){P.error(s("Please fill in required customer details"));return}c(!0);try{const I=await re.post(route("paytr.create-token"),{plan_id:r,billing_cycle:u,coupon_code:w,user_name:l.name,user_email:l.email,user_phone:l.phone,user_address:l.address});if(I.data.success)j(I.data.iframe_url),i(!0);else throw new Error(I.data.error||"Token creation failed")}catch(I){console.error("PayTR payment error:",I),P.error(((T=(_=I.response)==null?void 0:_.data)==null?void 0:T.error)||s("Payment failed. Please try again."))}finally{c(!1)}};return n?e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("PayTR Payment")]}),e.jsx(v,{variant:"outline",size:"sm",onClick:()=>i(!1),children:s("Back")})]})}),e.jsxs(R,{children:[e.jsx("div",{className:"w-full h-[600px] border rounded-lg overflow-hidden",children:e.jsx("iframe",{ref:b,src:p,width:"100%",height:"100%",frameBorder:"0",scrolling:"auto",title:"PayTR Payment"})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:s("Complete your payment in the secure PayTR iframe above")})]})]}):e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("PayTR Payment")]})}),e.jsx(R,{children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"name",children:[s("Full Name")," *"]}),e.jsx(X,{id:"name",value:l.name,onChange:m=>x(_=>({..._,name:m.target.value})),placeholder:s("Enter full name"),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"email",children:[s("Email Address")," *"]}),e.jsx(X,{id:"email",type:"email",value:l.email,onChange:m=>x(_=>({..._,email:m.target.value})),placeholder:s("Enter email address"),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(K,{htmlFor:"phone",children:[s("Phone Number")," *"]}),e.jsx(X,{id:"phone",value:l.phone,onChange:m=>x(_=>({..._,phone:m.target.value})),placeholder:"+905xxxxxxxxx",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s("Turkish phone number format: +905xxxxxxxxx")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"address",children:s("Address")}),e.jsx(X,{id:"address",value:l.address,onChange:m=>x(_=>({..._,address:m.target.value})),placeholder:s("Enter address (optional)")})]}),e.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium",children:s("Secure Payment via PayTR")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s("Credit Card, Debit Card - Real-time payment processing")})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(v,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:s("Cancel")}),e.jsx(v,{type:"submit",disabled:o,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Processing...")]}):s("Pay {{amount}}",{amount:(N=window.appSettings)!=null&&N.formatCurrency?window.appSettings.formatCurrency(d,{showSymbol:!0}):`${f} ${d}`})})]})]})})]})}function ua({planId:r,couponCode:w,billingCycle:u,planPrice:d,mollieApiKey:h,currency:f,onSuccess:C,onCancel:t}){var j,b;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState({firstName:"",lastName:"",email:""}),p=l=>{if(!n.firstName||!n.lastName||!n.email){l.preventDefault(),alert(s("Please fill in all customer details"));return}c(!0)};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("Mollie Payment")]})}),e.jsx(R,{children:e.jsxs("form",{action:route("mollie.payment"),method:"POST",onSubmit:p,className:"space-y-4",children:[e.jsx("input",{type:"hidden",name:"_token",value:((j=document.querySelector('meta[name="csrf-token"]'))==null?void 0:j.getAttribute("content"))||""}),e.jsx("input",{type:"hidden",name:"plan_id",value:r}),e.jsx("input",{type:"hidden",name:"billing_cycle",value:u}),e.jsx("input",{type:"hidden",name:"coupon_code",value:w||""}),e.jsx("input",{type:"hidden",name:"payment_id",value:`mollie_${Date.now()}`}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"firstName",children:s("First Name")}),e.jsx(X,{id:"firstName",name:"customer_details[firstName]",value:n.firstName,onChange:l=>i(x=>({...x,firstName:l.target.value})),placeholder:s("Enter first name"),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"lastName",children:s("Last Name")}),e.jsx(X,{id:"lastName",name:"customer_details[lastName]",value:n.lastName,onChange:l=>i(x=>({...x,lastName:l.target.value})),placeholder:s("Enter last name"),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"email",children:s("Email Address")}),e.jsx(X,{id:"email",name:"customer_details[email]",type:"email",value:n.email,onChange:l=>i(x=>({...x,email:l.target.value})),placeholder:s("Enter email address"),required:!0})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(v,{type:"button",variant:"outline",onClick:t,className:"flex-1",children:s("Cancel")}),e.jsx(v,{type:"submit",disabled:o,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Processing...")]}):s("Pay {{amount}}",{amount:(b=window.appSettings)!=null&&b.formatCurrency?window.appSettings.formatCurrency(d,{showSymbol:!0}):`${f} ${d}`})})]})]})})]})}function ha({planId:r,planPrice:w,couponCode:u,billingCycle:d,cashfreeAppId:h,mode:f="sandbox",currency:C,onSuccess:t,onCancel:s}){const{t:o}=A();g.useEffect(()=>{if(window&&window.Cashfree)return;const n=document.createElement("script");return n.src="https://sdk.cashfree.com/js/v3/cashfree.js",n.async=!0,n.onerror=()=>{P.error(o("Failed to load Cashfree SDK. Please try again."))},document.body.appendChild(n),()=>{document.body.contains(n)&&document.body.removeChild(n)}},[f]);const c=async()=>{var n,i,p;try{const j=await re.post(route("cashfree.create-session"),{plan_id:r,billing_cycle:d,coupon_code:u,_token:(n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content")});if(j.data.error){P.error(j.data.error);return}const{payment_session_id:b,order_id:l,amount:x,mode:y}=j.data;if(!b||!l){P.error(o("Invalid response from server"));return}if(!y){P.error(o("Payment mode not configured"));return}if(!window.Cashfree){P.error(o("Cashfree SDK not loaded"));return}const N=y==="production"?"PROD":"SANDBOX";try{const T=window.Cashfree({mode:N})}catch(T){P.error("Failed to initialize Cashfree: "+T.message);return}const m=window.Cashfree({mode:N}),_={paymentSessionId:b,returnUrl:window.appSettings.baseUrl+route("dashboard"),redirectTarget:"_modal",mode:N,style:{zIndex:99999}};m.checkout(_).then(T=>{var I,Y;if(T.error){P.error(T.error.message||o("Payment failed"));return}T.paymentDetails?re.post(route("cashfree.verify-payment"),{order_id:l,cf_payment_id:(I=T.paymentDetails)==null?void 0:I.paymentId,plan_id:r,billing_cycle:d,coupon_code:u,_token:(Y=document.querySelector('meta[name="csrf-token"]'))==null?void 0:Y.getAttribute("content")}).then(U=>{t()}).catch(U=>{var Q,E;const q=((E=(Q=U.response)==null?void 0:Q.data)==null?void 0:E.error)||o("Payment verification failed");P.error(q)}):P.error(o("Payment status unclear"))}).catch(T=>{P.error(T.message||o("Payment initialization failed"))})}catch(j){const b=((p=(i=j.response)==null?void 0:i.data)==null?void 0:p.error)||o("Failed to initialize payment");P.error(b)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:o("You will be redirected to Cashfree to complete your payment.")}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:s,className:"flex-1",children:o("Cancel")}),e.jsx(v,{onClick:c,className:"flex-1",children:o("Pay with Cashfree")})]})]})}function xa({planId:r,planPrice:w,couponCode:u,billingCycle:d,iyzipayPublicKey:h,currency:f="USD",onSuccess:C,onCancel:t}){var l;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(null),[p,j]=g.useState(null),b=async()=>{var x;if(!h){i(s("Iyzipay configuration is missing"));return}c(!0),i(null);try{const N=await(await fetch(route("iyzipay.create-form"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((x=document.querySelector('meta[name="csrf-token"]'))==null?void 0:x.getAttribute("content"))||""},body:JSON.stringify({plan_id:r,billing_cycle:d,coupon_code:u})})).json();if(N.success)window.location.href=N.redirect_url;else throw new Error(N.error||s("Failed to create payment form"))}catch(y){console.error("Iyzipay payment error:",y),i(y instanceof Error?y.message:s("Payment initialization failed"))}finally{c(!1)}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("Iyzipay Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[n&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:n})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:(l=window.appSettings)!=null&&l.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[s("Billing Cycle"),": ",s(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[s("Coupon Applied"),": ",u]})]}),o?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(D,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{children:s("Redirecting to payment page...")})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs(z,{children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:s("You will be redirected to Iyzipay secure payment page to complete your payment.")})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,disabled:o,className:"flex-1",children:s("Cancel")}),e.jsx(v,{onClick:b,disabled:o||!h,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Processing...")]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),s("Pay with Iyzipay")]})})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:s("Powered by Iyzipay - Secure payment processing")})]})]})}function pa({planId:r,planPrice:w,couponCode:u,billingCycle:d,benefitPublicKey:h,currency:f="BHD",onSuccess:C,onCancel:t}){var j;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(null),p=async()=>{var b;if(!h){i(s("Benefit payment configuration is missing"));return}c(!0),i(null);try{const x=await(await fetch(route("benefit.create-session"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"))||""},body:JSON.stringify({plan_id:r,billing_cycle:d,coupon_code:u})})).json();if(x.success)window.location.href=x.payment_url;else throw new Error(x.error||s("Failed to create payment session"))}catch(l){console.error("Benefit payment error:",l),i(l instanceof Error?l.message:s("Payment initialization failed")),c(!1)}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("Benefit Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[n&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:n})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:(j=window.appSettings)!=null&&j.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[s("Billing Cycle"),": ",s(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[s("Coupon Applied"),": ",u]})]}),e.jsxs(z,{children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:s("You will be redirected to Benefit to complete your payment securely. Benefit is the leading payment gateway in Bahrain.")})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:s("Supported Payment Methods")}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:["• ",s("Benefit Debit Cards")]}),e.jsxs("li",{children:["• ",s("Visa Credit/Debit Cards")]}),e.jsxs("li",{children:["• ",s("Mastercard Credit/Debit Cards")]}),e.jsxs("li",{children:["• ",s("Benefit Pay Mobile Wallet")]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,disabled:o,className:"flex-1",children:s("Cancel")}),e.jsx(v,{onClick:p,disabled:o||!h,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Redirecting...")]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),s("Pay with Benefit")]})})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:s("Powered by Benefit - Bahrain's trusted payment gateway")})]})]})}function fa({planId:r,planPrice:w,couponCode:u,billingCycle:d,ozowSiteKey:h,currency:f="ZAR",onSuccess:C,onCancel:t}){var j;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(null),p=async()=>{var b;if(!h){i(s("Ozow not configured"));return}c(!0),i(null);try{const x=await(await fetch(route("ozow.create-payment"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"))||""},body:JSON.stringify({plan_id:r,billing_cycle:d,coupon_code:u})})).json();if(x.success)window.location.href=x.payment_url;else throw new Error(x.error||s("Payment creation failed"))}catch(l){console.error("Ozow payment error:",l),i(l instanceof Error?l.message:s("Payment initialization failed")),c(!1)}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("Ozow Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[n&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:n})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:(j=window.appSettings)!=null&&j.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[s("Billing Cycle"),": ",s(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[s("Coupon Applied"),": ",u]})]}),e.jsxs(z,{children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:s("You will be redirected to Ozow to complete your payment securely. Ozow is South Africa's trusted instant payment gateway.")})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:s("Supported Banks")}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:["• ",s("Standard Bank")]}),e.jsxs("li",{children:["• ",s("FNB")]}),e.jsxs("li",{children:["• ",s("ABSA")]}),e.jsxs("li",{children:["• ",s("Nedbank")]}),e.jsxs("li",{children:["• ",s("Capitec Bank")]}),e.jsxs("li",{children:["• ",s("And more South African banks")]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,disabled:o,className:"flex-1",children:s("Cancel")}),e.jsx(v,{onClick:p,disabled:o||!h,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Redirecting...")]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),s("Pay with Ozow")]})})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:s("Powered by Ozow - South Africa's instant payment gateway")})]})]})}function ja({planId:r,planPrice:w,couponCode:u,billingCycle:d,easebuzzMerchantKey:h,currency:f="INR",onSuccess:C,onCancel:t}){var j;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(null),p=async()=>{var b;if(!h){i(s("Easebuzz not configured"));return}c(!0),i(null);try{const x=await(await fetch(route("easebuzz.create-payment"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"))||""},body:JSON.stringify({plan_id:r,billing_cycle:d,coupon_code:u})})).json();if(x.success)window.location.href=x.payment_url;else throw new Error(x.error||s("Payment creation failed"))}catch(l){console.error("Easebuzz payment error:",l),i(l instanceof Error?l.message:s("Payment initialization failed")),c(!1)}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("Easebuzz Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[n&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:n})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:(j=window.appSettings)!=null&&j.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[s("Billing Cycle"),": ",s(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[s("Coupon Applied"),": ",u]})]}),e.jsxs(z,{children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:s("You will be redirected to Easebuzz to complete your payment securely.")})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:s("Supported Payment Methods")}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:["• ",s("Credit/Debit Cards")]}),e.jsxs("li",{children:["• ",s("Net Banking")]}),e.jsxs("li",{children:["• ",s("UPI")]}),e.jsxs("li",{children:["• ",s("Wallets")]}),e.jsxs("li",{children:["• ",s("EMI Options")]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,disabled:o,className:"flex-1",children:s("Cancel")}),e.jsx(v,{onClick:p,disabled:o||!h,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Redirecting...")]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),s("Pay with Easebuzz")]})})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:s("Powered by Easebuzz - Secure payment processing")})]})]})}function ya({planId:r,planPrice:w,couponCode:u,billingCycle:d,khaltiPublicKey:h,currency:f="NPR",onSuccess:C,onCancel:t}){var x;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(null),p=async()=>{var y;if(!h){i(s("Khalti not configured"));return}c(!0),i(null);try{const m=await(await fetch(route("khalti.create-payment"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((y=document.querySelector('meta[name="csrf-token"]'))==null?void 0:y.getAttribute("content"))||""},body:JSON.stringify({plan_id:r,billing_cycle:d,coupon_code:u})})).json();if(m.success)j(m);else throw new Error(m.error||s("Payment creation failed"))}catch(N){console.error("Khalti payment error:",N),i(N instanceof Error?N.message:s("Payment initialization failed")),c(!1)}},j=y=>{if(window.KhaltiCheckout)b(y);else{const N=document.createElement("script");N.src="https://khalti.s3.ap-south-1.amazonaws.com/KPG/dist/2020.12.17.0.0.0/khalti-checkout.iffe.js",N.onload=()=>{b(y)},document.head.appendChild(N)}},b=y=>{const N={publicKey:y.public_key,productIdentity:y.product_identity,productName:y.product_name,productUrl:y.product_url,paymentPreference:["KHALTI","EBANKING","MOBILE_BANKING","CONNECT_IPS","SCT"],eventHandler:{onSuccess(_){l(_.token,_.amount)},onError(_){console.error("Khalti payment error:",_),i(s("Payment failed")),c(!1)},onClose(){c(!1)}}};new window.KhaltiCheckout(N).show({amount:y.amount})},l=(y,N)=>{G.post(route("khalti.payment"),{plan_id:r,billing_cycle:d,coupon_code:u,token:y,amount:N/100},{onSuccess:()=>{P.success(s("Payment successful")),C()},onError:m=>{console.error("Payment processing error:",m),i(Object.values(m).flat().join(", ")),c(!1)}})};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("Khalti Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[n&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:n})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:(x=window.appSettings)!=null&&x.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[s("Billing Cycle"),": ",s(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[s("Coupon Applied"),": ",u]})]}),e.jsxs(z,{children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:s("Khalti is Nepal's most popular digital wallet and payment gateway.")})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-medium text-purple-900 mb-2",children:s("Supported Payment Methods")}),e.jsxs("ul",{className:"text-sm text-purple-800 space-y-1",children:[e.jsxs("li",{children:["• ",s("Khalti Wallet")]}),e.jsxs("li",{children:["• ",s("eBanking")]}),e.jsxs("li",{children:["• ",s("Mobile Banking")]}),e.jsxs("li",{children:["• ",s("Connect IPS")]}),e.jsxs("li",{children:["• ",s("SCT Cards")]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,disabled:o,className:"flex-1",children:s("Cancel")}),e.jsx(v,{onClick:p,disabled:o||!h,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Processing...")]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),s("Pay with Khalti")]})})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:s("Powered by Khalti - Nepal's digital wallet")})]})]})}function ba({planId:r,planPrice:w,couponCode:u,billingCycle:d,authorizenetMerchantId:h,currency:f="USD",isSandbox:C=!1,supportedCountries:t=["US","CA","GB","AU"],supportedCurrencies:s=["USD","CAD","CHF","DKK","EUR","GBP","NOK","PLN","SEK","AUD","NZD"],onSuccess:o,onCancel:c}){var Z;const{t:n}=A(),[i,p]=g.useState(!1),[j,b]=g.useState(null),[l,x]=g.useState({}),[y,N]=g.useState({card_number:"",expiry_month:"",expiry_year:"",cvv:"",cardholder_name:""}),m=M=>{const W=M.replace(/\s/g,"");return/^[0-9]{13,19}$/.test(W)},_=M=>/^(0[1-9]|1[0-2])$/.test(M),T=M=>{if(!/^[0-9]{2}$/.test(M))return!1;const W=new Date().getFullYear()%100,J=parseInt(M);return J>=W&&J<=W+20},I=M=>/^[0-9]{3,4}$/.test(M),Y=M=>M.trim().length>=2&&M.trim().length<=50,U=M=>{const W=M.replace(/\s/g,""),J=W.match(/.{1,4}/g);return J?J.join(" "):W},q=(M,W)=>{let J=W;M==="card_number"?J=U(W.replace(/\s/g,"").slice(0,19)):M==="expiry_month"?J=W.replace(/\D/g,"").slice(0,2):M==="expiry_year"?J=W.replace(/\D/g,"").slice(0,2):M==="cvv"&&(J=W.replace(/\D/g,"").slice(0,4)),N(se=>({...se,[M]:J})),l[M]&&x(se=>({...se,[M]:""}))},Q=()=>{const M={};return m(y.card_number)||(M.card_number=n("Please enter a valid card number (13-19 digits)")),_(y.expiry_month)||(M.expiry_month=n("Please enter a valid month (01-12)")),T(y.expiry_year)||(M.expiry_year=n("Please enter a valid year (current year or later)")),I(y.cvv)||(M.cvv=n("Please enter a valid CVV (3-4 digits)")),Y(y.cardholder_name)||(M.cardholder_name=n("Please enter a valid cardholder name (2-50 characters)")),x(M),Object.keys(M).length===0},E=async()=>{if(!h){b(n("AuthorizeNet not configured"));return}if(!Q()){b(n("Please correct the errors below"));return}p(!0),b(null),G.post(route("authorizenet.payment"),{plan_id:r,billing_cycle:d,coupon_code:u,...y},{onSuccess:()=>{P.success(n("Payment successful")),o()},onError:M=>{console.error("Payment processing error:",M),b(Object.values(M).flat().join(", ")),p(!1)}})};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),n("AuthorizeNet Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[j&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:j})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:n("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:((Z=window.appSettings)==null?void 0:Z.formatCurrency(w,{showSymbol:!0}))||`₦${w.toFixed(2)}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[n("Billing Cycle"),": ",n(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[n("Coupon Applied"),": ",u]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"cardholder_name",children:n("Cardholder Name")}),e.jsx(X,{id:"cardholder_name",value:y.cardholder_name,onChange:M=>q("cardholder_name",M.target.value),placeholder:n("Enter cardholder name"),className:l.cardholder_name?"border-red-500":""}),l.cardholder_name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.cardholder_name})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"card_number",children:n("Card Number")}),e.jsx(X,{id:"card_number",value:y.card_number,onChange:M=>q("card_number",M.target.value),placeholder:"1234 5678 9012 3456",maxLength:23,className:l.card_number?"border-red-500":""}),l.card_number&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.card_number})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{htmlFor:"expiry_month",children:n("Month")}),e.jsx(X,{id:"expiry_month",value:y.expiry_month,onChange:M=>q("expiry_month",M.target.value),placeholder:"MM",maxLength:2,className:l.expiry_month?"border-red-500":""}),l.expiry_month&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.expiry_month})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"expiry_year",children:n("Year")}),e.jsx(X,{id:"expiry_year",value:y.expiry_year,onChange:M=>q("expiry_year",M.target.value),placeholder:"YY",maxLength:2,className:l.expiry_year?"border-red-500":""}),l.expiry_year&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.expiry_year})]}),e.jsxs("div",{children:[e.jsx(K,{htmlFor:"cvv",children:n("CVV")}),e.jsx(X,{id:"cvv",value:y.cvv,onChange:M=>q("cvv",M.target.value),placeholder:"123",maxLength:4,className:l.cvv?"border-red-500":""}),l.cvv&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.cvv})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:c,disabled:i,className:"flex-1",children:n("Cancel")}),e.jsx(v,{onClick:E,disabled:i||!h,className:"flex-1",children:i?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),n("Processing...")]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),n("Pay with AuthorizeNet")]})})]}),e.jsxs("div",{className:"space-y-2",children:[C&&e.jsxs(z,{children:[e.jsx(be,{className:"h-4 w-4"}),e.jsx(O,{children:n("Test Mode: This is a sandbox transaction. No real money will be charged.")})]}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(Ne,{className:"h-3 w-3 text-green-500"}),n("Powered by AuthorizeNet - Secure payment processing")]}),e.jsxs("div",{children:[n("Supported currencies"),": ",s.join(", ")]}),e.jsxs("div",{children:[n("Supported countries"),": ",t.join(", ")]})]})]})]})]})}function Na({planId:r,planPrice:w,couponCode:u,billingCycle:d,fedapayPublicKey:h,currency:f="XOF",onSuccess:C,onCancel:t}){var j;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(null),p=async()=>{var b;if(!h){i(s("FedaPay not configured"));return}c(!0),i(null);try{const x=await(await fetch(route("fedapay.create-payment"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"))||""},body:JSON.stringify({plan_id:r,billing_cycle:d,coupon_code:u})})).json();if(x.success)window.location.href=x.payment_url;else throw new Error(x.error||s("Payment creation failed"))}catch(l){console.error("FedaPay payment error:",l),i(l instanceof Error?l.message:s("Payment initialization failed")),c(!1)}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("FedaPay Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[n&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:n})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:(j=window.appSettings)!=null&&j.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[s("Billing Cycle"),": ",s(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[s("Coupon Applied"),": ",u]})]}),e.jsxs(z,{children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:s("You will be redirected to FedaPay to complete your payment securely.")})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-medium text-green-900 mb-2",children:s("Supported Payment Methods")}),e.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[e.jsxs("li",{children:["• ",s("Mobile Money (MTN, Moov, Orange)")]}),e.jsxs("li",{children:["• ",s("Visa/Mastercard")]}),e.jsxs("li",{children:["• ",s("Bank Transfers")]}),e.jsxs("li",{children:["• ",s("Digital Wallets")]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,disabled:o,className:"flex-1",children:s("Cancel")}),e.jsx(v,{onClick:p,disabled:o||!h,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Redirecting...")]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),s("Pay with FedaPay")]})})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:s("Powered by FedaPay - West Africa's payment gateway")})]})]})}function wa({planId:r,planPrice:w,couponCode:u,billingCycle:d,payhereMerchantId:h,currency:f="LKR",onSuccess:C,onCancel:t}){var j;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(null),p=async()=>{var b;if(!h){i(s("PayHere not configured"));return}c(!0),i(null);try{const x=await(await fetch(route("payhere.create-payment"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"))||""},body:JSON.stringify({plan_id:r,billing_cycle:d,coupon_code:u})})).json();if(x.success){const y=document.createElement("form");y.method="POST",y.action=x.payment_url,Object.keys(x.payment_data).forEach(N=>{const m=document.createElement("input");m.type="hidden",m.name=N,m.value=x.payment_data[N],y.appendChild(m)}),document.body.appendChild(y),y.submit()}else throw new Error(x.error||s("Payment creation failed"))}catch(l){console.error("PayHere payment error:",l),i(l instanceof Error?l.message:s("Payment initialization failed")),c(!1)}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("PayHere Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[n&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:n})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:(j=window.appSettings)!=null&&j.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[s("Billing Cycle"),": ",s(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[s("Coupon Applied"),": ",u]})]}),e.jsxs(z,{children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:s("You will be redirected to PayHere to complete your payment securely.")})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[e.jsx("h4",{className:"font-medium text-orange-900 mb-2",children:s("Supported Payment Methods")}),e.jsxs("ul",{className:"text-sm text-orange-800 space-y-1",children:[e.jsxs("li",{children:["• ",s("Visa/Mastercard")]}),e.jsxs("li",{children:["• ",s("Lanka QR")]}),e.jsxs("li",{children:["• ",s("eZ Cash")]}),e.jsxs("li",{children:["• ",s("mCash")]}),e.jsxs("li",{children:["• ",s("Bank Transfers")]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,disabled:o,className:"flex-1",children:s("Cancel")}),e.jsx(v,{onClick:p,disabled:o||!h,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Redirecting...")]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),s("Pay with PayHere")]})})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:s("Powered by PayHere - Sri Lanka's payment gateway")})]})]})}function ga({planId:r,planPrice:w,couponCode:u,billingCycle:d,cinetpaySiteId:h,currency:f="XOF",onSuccess:C,onCancel:t}){var j;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(null),p=async()=>{var b;if(!h){i(s("CinetPay not configured"));return}c(!0),i(null);try{const x=await(await fetch(route("cinetpay.create-payment"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"))||""},body:JSON.stringify({plan_id:r,billing_cycle:d,coupon_code:u})})).json();if(x.success){const y=document.createElement("form");y.method="POST",y.action=x.payment_url,Object.keys(x.payment_data).forEach(N=>{const m=document.createElement("input");m.type="hidden",m.name=N,m.value=x.payment_data[N],y.appendChild(m)}),document.body.appendChild(y),y.submit()}else throw new Error(x.error||s("Payment creation failed"))}catch(l){console.error("CinetPay payment error:",l),i(l instanceof Error?l.message:s("Payment initialization failed")),c(!1)}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("CinetPay Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[n&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:n})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:(j=window.appSettings)!=null&&j.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[s("Billing Cycle"),": ",s(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[s("Coupon Applied"),": ",u]})]}),e.jsxs(z,{children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:s("You will be redirected to CinetPay to complete your payment securely.")})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:s("Supported Payment Methods")}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[e.jsxs("li",{children:["• ",s("Mobile Money (Orange, MTN, Moov)")]}),e.jsxs("li",{children:["• ",s("Visa/Mastercard")]}),e.jsxs("li",{children:["• ",s("Bank Transfers")]}),e.jsxs("li",{children:["• ",s("Digital Wallets")]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,disabled:o,className:"flex-1",children:s("Cancel")}),e.jsx(v,{onClick:p,disabled:o||!h,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Redirecting...")]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),s("Pay with CinetPay")]})})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:s("Powered by CinetPay - African payment gateway")})]})]})}function va({planId:r,planPrice:w,couponCode:u,billingCycle:d,paiementMerchantId:h,currency:f="XOF",onSuccess:C,onCancel:t}){var j;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(null),p=async()=>{var b;if(!h){i(s("Paiement Pro not configured"));return}c(!0),i(null);try{const x=await(await fetch(route("paiement.create-payment"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"))||""},body:JSON.stringify({plan_id:r,billing_cycle:d,coupon_code:u})})).json();if(x.success){const y=document.createElement("form");y.method="POST",y.action=x.payment_url,Object.keys(x.payment_data).forEach(N=>{const m=document.createElement("input");m.type="hidden",m.name=N,m.value=x.payment_data[N],y.appendChild(m)}),document.body.appendChild(y),y.submit()}else throw new Error(x.error||s("Payment creation failed"))}catch(l){console.error("Paiement Pro payment error:",l),i(l instanceof Error?l.message:s("Payment initialization failed")),c(!1)}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("Paiement Pro Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[n&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:n})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:(j=window.appSettings)!=null&&j.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[s("Billing Cycle"),": ",s(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[s("Coupon Applied"),": ",u]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:s("Supported Payment Methods")}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:["• ",s("Mobile Money")]}),e.jsxs("li",{children:["• ",s("Bank Cards")]}),e.jsxs("li",{children:["• ",s("Bank Transfers")]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,disabled:o,className:"flex-1",children:s("Cancel")}),e.jsx(v,{onClick:p,disabled:o||!h,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Redirecting...")]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),s("Pay with Paiement Pro")]})})]})]})]})}function _a({planId:r,planPrice:w,couponCode:u,billingCycle:d,nepalstePublicKey:h,currency:f="NPR",onSuccess:C,onCancel:t}){var j;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(null),p=async()=>{var b;if(!h){i(s("Nepalste not configured"));return}c(!0),i(null);try{const x=await(await fetch(route("nepalste.create-payment"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"))||""},body:JSON.stringify({plan_id:r,billing_cycle:d,coupon_code:u})})).json();if(x.success){const y=document.createElement("form");y.method="POST",y.action=x.payment_url,Object.keys(x.payment_data).forEach(N=>{const m=document.createElement("input");m.type="hidden",m.name=N,m.value=typeof x.payment_data[N]=="object"?JSON.stringify(x.payment_data[N]):x.payment_data[N],y.appendChild(m)}),document.body.appendChild(y),y.submit()}else throw new Error(x.error||s("Payment creation failed"))}catch(l){console.error("Nepalste payment error:",l),i(l instanceof Error?l.message:s("Payment initialization failed")),c(!1)}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("Nepalste Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[n&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:n})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:(j=window.appSettings)!=null&&j.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[s("Billing Cycle"),": ",s(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[s("Coupon Applied"),": ",u]})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[e.jsx("h4",{className:"font-medium text-red-900 mb-2",children:s("Supported Payment Methods")}),e.jsxs("ul",{className:"text-sm text-red-800 space-y-1",children:[e.jsxs("li",{children:["• ",s("eSewa")]}),e.jsxs("li",{children:["• ",s("Khalti")]}),e.jsxs("li",{children:["• ",s("IME Pay")]}),e.jsxs("li",{children:["• ",s("Bank Transfers")]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,disabled:o,className:"flex-1",children:s("Cancel")}),e.jsx(v,{onClick:p,disabled:o||!h,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Redirecting...")]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),s("Pay with Nepalste")]})})]})]})]})}function Pa({planId:r,planPrice:w,couponCode:u,billingCycle:d,yookassaShopId:h,currency:f="RUB",onSuccess:C,onCancel:t}){var j;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(null),p=async()=>{var b;if(!h){i(s("YooKassa not configured"));return}c(!0),i(null);try{const x=await(await fetch(route("yookassa.create-payment"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"))||""},body:JSON.stringify({plan_id:r,billing_cycle:d,coupon_code:u})})).json();if(x.success)window.location.href=x.payment_url;else throw new Error(x.error||s("Payment creation failed"))}catch(l){console.error("YooKassa payment error:",l),i(l instanceof Error?l.message:s("Payment initialization failed")),c(!1)}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("YooKassa Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[n&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:n})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:(j=window.appSettings)!=null&&j.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[s("Billing Cycle"),": ",s(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[s("Coupon Applied"),": ",u]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-medium text-purple-900 mb-2",children:s("Supported Payment Methods")}),e.jsxs("ul",{className:"text-sm text-purple-800 space-y-1",children:[e.jsxs("li",{children:["• ",s("Bank Cards")]}),e.jsxs("li",{children:["• ",s("YooMoney")]}),e.jsxs("li",{children:["• ",s("Qiwi")]}),e.jsxs("li",{children:["• ",s("Sberbank Online")]}),e.jsxs("li",{children:["• ",s("Alfa-Click")]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,disabled:o,className:"flex-1",children:s("Cancel")}),e.jsx(v,{onClick:p,disabled:o||!h,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Redirecting...")]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),s("Pay with YooKassa")]})})]})]})]})}function Ca({planId:r,planPrice:w,couponCode:u,billingCycle:d,aamarpayStoreId:h,currency:f,onSuccess:C,onCancel:t}){var j;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(null),p=async()=>{var b;if(!h){i(s("Aamarpay not configured"));return}c(!0),i(null);try{const l=document.createElement("form");l.method="POST",l.action=route("aamarpay.create-payment");const x=document.createElement("input");x.type="hidden",x.name="_token",x.value=((b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"))||"",l.appendChild(x);const y=document.createElement("input");y.type="hidden",y.name="plan_id",y.value=r.toString(),l.appendChild(y);const N=document.createElement("input");if(N.type="hidden",N.name="billing_cycle",N.value=d,l.appendChild(N),u){const m=document.createElement("input");m.type="hidden",m.name="coupon_code",m.value=u,l.appendChild(m)}document.body.appendChild(l),l.submit()}catch(l){console.error("Aamarpay payment error:",l),i(l instanceof Error?l.message:s("Payment initialization failed")),c(!1)}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("Aamarpay Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[n&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:n})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:(j=window.appSettings)!=null&&j.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[s("Billing Cycle"),": ",s(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[s("Coupon Applied"),": ",u]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-medium text-green-900 mb-2",children:s("Supported Payment Methods")}),e.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[e.jsxs("li",{children:["• ",s("bKash")]}),e.jsxs("li",{children:["• ",s("Nagad")]}),e.jsxs("li",{children:["• ",s("Rocket")]}),e.jsxs("li",{children:["• ",s("Bank Cards")]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,disabled:o,className:"flex-1",children:s("Cancel")}),e.jsx(v,{onClick:p,disabled:o||!h,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Redirecting...")]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),s("Pay with Aamarpay")]})})]})]})]})}function ka({planId:r,planPrice:w,couponCode:u,billingCycle:d,midtransSecretKey:h,currency:f="IDR",onSuccess:C,onCancel:t}){var x;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(null),p=async()=>{var y;if(!h){i(s("Midtrans not configured"));return}c(!0),i(null);try{const m=await(await fetch(route("midtrans.create-payment"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((y=document.querySelector('meta[name="csrf-token"]'))==null?void 0:y.getAttribute("content"))||""},body:JSON.stringify({plan_id:r,billing_cycle:d,coupon_code:u})})).json();if(m.success)j(m.snap_token,m.order_id);else throw new Error(m.error||s("Payment creation failed"))}catch(N){console.error("Midtrans payment error:",N),i(N instanceof Error?N.message:s("Payment initialization failed")),c(!1)}},j=(y,N)=>{if(window.snap)b(y,N);else{const m=document.createElement("script");m.src="https://app.sandbox.midtrans.com/snap/snap.js",m.setAttribute("data-client-key",h),m.onload=()=>{b(y,N)},m.onerror=()=>{i(s("Failed to load Midtrans script")),c(!1)},document.head.appendChild(m)}},b=(y,N)=>{window.snap.pay(y,{onSuccess:m=>{l(m,N)},onPending:m=>{c(!1)},onError:m=>{i(s("Payment failed")),c(!1)},onClose:()=>{c(!1)}})},l=(y,N)=>{G.post(route("midtrans.payment"),{plan_id:r,billing_cycle:d,coupon_code:u,transaction_status:y.transaction_status,order_id:N},{onSuccess:()=>{C()},onError:m=>{console.error("Payment processing error:",m),i(Object.values(m).flat().join(", ")),c(!1)}})};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("Midtrans Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[n&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:n})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:(x=window.appSettings)!=null&&x.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[s("Billing Cycle"),": ",s(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[s("Coupon Applied"),": ",u]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:s("Supported Payment Methods")}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:["• ",s("Credit/Debit Cards")]}),e.jsxs("li",{children:["• ",s("Bank Transfer")]}),e.jsxs("li",{children:["• ",s("E-Wallets (GoPay, OVO, DANA)")]}),e.jsxs("li",{children:["• ",s("Convenience Stores")]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,disabled:o,className:"flex-1",children:s("Cancel")}),e.jsx(v,{onClick:p,disabled:o||!h,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Processing...")]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),s("Pay with Midtrans")]})})]})]})]})}function Ea({planId:r,planPrice:w,couponCode:u,billingCycle:d,paymentwallPublicKey:h,currency:f,onSuccess:C,onCancel:t}){var N,m;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(null),[p,j]=g.useState(!1),[b,l]=g.useState(null),x=g.useRef(null);g.useEffect(()=>{(()=>{if(window.Brick){j(!0);return}const T=document.createElement("script");T.src="https://api.paymentwall.com/brick/build/brick-default.1.5.0.min.js",T.async=!0,T.onload=()=>{j(!0)},T.onerror=()=>{i(s("Failed to load PaymentWall payment form"))},document.head.appendChild(T)})()},[s]),g.useEffect(()=>{p&&h&&!b&&y()},[p,h,b]);const y=async()=>{var _;try{const I=await(await fetch(route("paymentwall.create-payment"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((_=document.querySelector('meta[name="csrf-token"]'))==null?void 0:_.getAttribute("content"))||""},body:JSON.stringify({plan_id:r,billing_cycle:d,coupon_code:u})})).json();if(I.success&&I.brick_config){const Y=I.brick_config,U=new window.Brick({public_key:Y.public_key,amount:Y.amount,currency:Y.currency,container:"paymentwall-form-container",action:route("paymentwall.process"),form:{merchant:"PaymentWall",product:Y.plan_name,pay_button:s("Pay Now"),show_zip:!0,show_cardholder:!0}});U.showPaymentForm(q=>{C()},q=>{console.error("Payment error:",q),q&&q.length>0?i(q[0].message||s("Payment failed")):i(s("Payment failed")),c(!1)}),l(U)}else throw new Error(I.error||s("Failed to initialize payment form"))}catch(T){console.error("PaymentWall initialization error:",T),i(T instanceof Error?T.message:s("Payment initialization failed"))}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("PaymentWall Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[n&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:n})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:(N=window.appSettings)!=null&&N.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[s("Billing Cycle"),": ",s(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[s("Coupon Applied"),": ",u]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{id:"paymentwall-form-container",ref:x,className:"min-h-[300px]",children:!p&&e.jsxs("div",{className:"flex items-center justify-center h-32",children:[e.jsx(D,{className:"h-6 w-6 animate-spin mr-2"}),e.jsx("span",{children:s("Loading payment form...")})]})}),e.jsxs("form",{id:"brick-form",style:{display:"none"},children:[e.jsx("input",{type:"hidden",name:"plan_id",value:r}),e.jsx("input",{type:"hidden",name:"billing_cycle",value:d}),e.jsx("input",{type:"hidden",name:"coupon_code",value:u||""}),e.jsx("input",{type:"hidden",name:"_token",value:((m=document.querySelector('meta[name="csrf-token"]'))==null?void 0:m.getAttribute("content"))||""})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:s("Secure Payment")}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:["• ",s("SSL Encrypted & PCI DSS Compliant")]}),e.jsxs("li",{children:["• ",s("Multiple Payment Methods Supported")]}),e.jsxs("li",{children:["• ",s("Powered by PaymentWall")]})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,disabled:o,className:"flex-1",children:s("Cancel")}),!p&&e.jsxs(v,{disabled:!0,className:"flex-1",children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Loading...")]})]})]})]})}function Fa({planId:r,planPrice:w,couponCode:u,billingCycle:d,sspaySecretKey:h,currency:f="MYR",onSuccess:C,onCancel:t}){var j;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(null),p=async()=>{var b;if(!h){i(s("SSPay not configured"));return}c(!0),i(null);try{const x=await(await fetch(route("sspay.create-payment"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"))||""},body:JSON.stringify({plan_id:r,billing_cycle:d,coupon_code:u})})).json();if(x.success){const y=document.createElement("form");y.method="POST",y.action=x.payment_url,Object.keys(x.payment_data).forEach(N=>{const m=document.createElement("input");m.type="hidden",m.name=N,m.value=x.payment_data[N],y.appendChild(m)}),document.body.appendChild(y),y.submit()}else throw new Error(x.error||s("Payment creation failed"))}catch(l){console.error("SSPay payment error:",l),i(l instanceof Error?l.message:s("Payment initialization failed")),c(!1)}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("SSPay Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[n&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:n})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:(j=window.appSettings)!=null&&j.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[s("Billing Cycle"),": ",s(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[s("Coupon Applied"),": ",u]})]}),e.jsxs("div",{className:"bg-teal-50 p-4 rounded-lg border border-teal-200",children:[e.jsx("h4",{className:"font-medium text-teal-900 mb-2",children:s("Supported Payment Methods")}),e.jsxs("ul",{className:"text-sm text-teal-800 space-y-1",children:[e.jsxs("li",{children:["• ",s("Online Banking")]}),e.jsxs("li",{children:["• ",s("Credit/Debit Cards")]}),e.jsxs("li",{children:["• ",s("E-Wallets")]}),e.jsxs("li",{children:["• ",s("FPX")]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,disabled:o,className:"flex-1",children:s("Cancel")}),e.jsx(v,{onClick:p,disabled:o||!h,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Redirecting...")]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),s("Pay with SSPay")]})})]})]})]})}function Ma({planId:r,planPrice:w,couponCode:u,billingCycle:d,tapSecretKey:h,currency:f="USD",onSuccess:C,onCancel:t}){var j;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(null),p=async()=>{var b;if(!h){i(s("Tap not configured"));return}c(!0),i(null);try{const l=document.createElement("form");l.method="POST",l.action=route("tap.create-payment");const x=document.createElement("input");x.type="hidden",x.name="_token",x.value=((b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"))||"",l.appendChild(x);const y=document.createElement("input");y.type="hidden",y.name="plan_id",y.value=r.toString(),l.appendChild(y);const N=document.createElement("input");if(N.type="hidden",N.name="billing_cycle",N.value=d,l.appendChild(N),u){const m=document.createElement("input");m.type="hidden",m.name="coupon_code",m.value=u,l.appendChild(m)}document.body.appendChild(l),l.submit()}catch(l){console.error("Tap payment error:",l),i(l instanceof Error?l.message:s("Payment initialization failed")),c(!1)}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("Tap Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[n&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:n})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:(j=window.appSettings)!=null&&j.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[s("Billing Cycle"),": ",s(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[s("Coupon Applied"),": ",u]})]}),e.jsxs(z,{children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:s("You will be redirected to Tap to complete your payment securely.")})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:s("Supported Payment Methods")}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:["• ",s("Credit/Debit Cards")]}),e.jsxs("li",{children:["• ",s("Apple Pay")]}),e.jsxs("li",{children:["• ",s("Google Pay")]}),e.jsxs("li",{children:["• ",s("KNET")]}),e.jsxs("li",{children:["• ",s("Benefit Pay")]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,disabled:o,className:"flex-1",children:s("Cancel")}),e.jsx(v,{onClick:p,disabled:o||!h,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Redirecting...")]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),s("Pay with Tap")]})})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:s("Powered by Tap - Secure payment processing")})]})]})}function Ta({planId:r,planPrice:w,couponCode:u,billingCycle:d,xenditApiKey:h,currency:f="PHP",onSuccess:C,onCancel:t}){var j;const{t:s}=A(),[o,c]=g.useState(!1),[n,i]=g.useState(null),p=async()=>{var b;if(!h){i(s("Xendit not configured"));return}c(!0),i(null);try{const x=await(await fetch(route("xendit.create-payment"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"))||""},body:JSON.stringify({plan_id:r,billing_cycle:d,coupon_code:u})})).json();if(x.success)window.location.href=x.payment_url;else throw new Error(x.error||s("Payment creation failed"))}catch(l){console.error("Xendit payment error:",l),i(l instanceof Error?l.message:s("Payment initialization failed")),c(!1)}};return e.jsxs(S,{children:[e.jsx($,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5"}),s("Xendit Payment")]})}),e.jsxs(R,{className:"space-y-4",children:[n&&e.jsxs(z,{variant:"destructive",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:n})]}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:s("Total Amount")}),e.jsx("span",{className:"text-lg font-bold",children:(j=window.appSettings)!=null&&j.formatCurrency?window.appSettings.formatCurrency(w,{showSymbol:!0}):`${f} ${w}`})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[s("Billing Cycle"),": ",s(d)]}),u&&e.jsxs("div",{className:"text-sm text-green-600 mt-1",children:[s("Coupon Applied"),": ",u]})]}),e.jsxs(z,{children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:s("You will be redirected to Xendit to complete your payment securely.")})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:s("Supported Payment Methods")}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:["• ",s("Credit/Debit Cards")]}),e.jsxs("li",{children:["• ",s("Bank Transfer")]}),e.jsxs("li",{children:["• ",s("E-Wallets (OVO, DANA, LinkAja)")]}),e.jsxs("li",{children:["• ",s("Virtual Accounts")]}),e.jsxs("li",{children:["• ",s("Retail Outlets")]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:t,disabled:o,className:"flex-1",children:s("Cancel")}),e.jsx(v,{onClick:p,disabled:o||!h,className:"flex-1",children:o?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),s("Redirecting...")]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),s("Pay with Xendit")]})})]}),e.jsx("div",{className:"text-xs text-muted-foreground text-center",children:s("Powered by Xendit - Secure payment processing")})]})]})}function Aa({formData:r,onSuccess:w,onError:u,processing:d=!1}){const{t:h}=A(),[f,C]=g.useState(!1),[t,s]=g.useState(!1),o=async c=>{var n,i,p;c.preventDefault(),s(!0);try{const j=typeof route<"u"?route("manual.payment"):"/payments/manual",b={plan_id:r.planId,billing_cycle:r.billingCycle,coupon_code:r.couponCode||null},l=await fetch(j,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))||""},body:JSON.stringify(b)}),x=await l.json();if(l.ok&&x.success)C(!0),P.success(x.message||h("Order created successfully")),w(x);else{const y=x.message||((p=(i=x.errors)==null?void 0:i.subscription)==null?void 0:p[0])||h("Failed to create manual payment order");console.error("Manual payment error:",y,x),u(y)}}catch(j){console.error("Manual payment error:",j),u(h("An error occurred while processing your request"))}finally{s(!1)}};return f?e.jsxs(S,{children:[e.jsxs($,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Ne,{className:"h-6 w-6 text-green-600"})}),e.jsx(L,{className:"text-green-600",children:h("Order Created Successfully")}),e.jsx(ys,{children:h("Your order has been created and is pending approval")})]}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs(z,{children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:h("Your order is now pending manual approval. You will receive an email confirmation once your payment has been verified and your subscription is activated.")})]}),e.jsx("div",{className:"text-center",children:e.jsx(v,{onClick:()=>window.location.href=route("dashboard"),className:"w-full",children:h("Go to Dashboard")})})]})]}):e.jsxs(S,{children:[e.jsxs($,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Ls,{className:"h-6 w-6 text-blue-600"})}),e.jsx(L,{children:h("Manual Payment")}),e.jsx(ys,{children:h("Submit your order for manual processing")})]}),e.jsx(R,{children:e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs(z,{children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(O,{children:h("By submitting this order, you agree to pay manually. Your subscription will be activated after payment verification by our team.")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:h("Order Summary")}),e.jsxs("div",{className:"bg-muted p-3 rounded-lg space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[h("Plan"),":"]}),e.jsxs("span",{className:"font-medium",children:["Plan #",r.planId]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[h("Billing Cycle"),":"]}),e.jsx("span",{className:"font-medium capitalize",children:r.billingCycle})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[h("Amount"),":"]}),e.jsx("span",{className:"font-medium",children:window.appSettings.formatCurrency(r.planPrice)})]}),r.couponCode&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[h("Coupon"),":"]}),e.jsx("span",{className:"font-medium",children:r.couponCode})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:h("Next Steps")}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 list-disc list-inside",children:[e.jsx("li",{children:h("Submit your order using the button below")}),e.jsx("li",{children:h("You will receive an email with payment instructions")}),e.jsx("li",{children:h("Complete the payment using the provided details")}),e.jsx("li",{children:h("Your subscription will be activated after verification")})]})]}),e.jsx(v,{type:"submit",className:"w-full",disabled:d||t,onClick:c=>{c.preventDefault(),o(c)},children:h(d||t?"Processing...":"Submit Order")})]})})]})}function za({plan:r,billingCycle:w,paymentMethods:u,onSuccess:d,onCancel:h}){var q,Q;const{t:f}=A(),[C,t]=g.useState(""),[s,o]=g.useState(""),[c,n]=g.useState(null),[i,p]=g.useState(!1),[j,b]=g.useState(!1),l=Number(r.price)||0,x=c?c.type==="percentage"?l*(Number(c.value)||0)/100:Number(c.value)||0:0,y=Math.max(0,l-x),N=y<=0,m=async()=>{var E;if(!s.trim()){P.error(f("Please enter a coupon code"));return}p(!0);try{const Z=await fetch(route("coupons.validate"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((E=document.querySelector('meta[name="csrf-token"]'))==null?void 0:E.getAttribute("content"))||""},body:JSON.stringify({coupon_code:s,plan_id:r.id,amount:l})}),M=await Z.json();Z.ok&&M.valid?(n(M.coupon),P.success(f("Coupon applied successfully"))):(P.error(M.message||f("Invalid coupon code")),n(null))}catch{P.error(f("Failed to validate coupon")),n(null)}finally{p(!1)}},_=()=>{n(null),o("")},T=()=>{if(N){b(!0);return}if(!C){P.error(f("Please select a payment method"));return}b(!0)},I=()=>{b(!1),t("")},Y=u.filter(E=>E.enabled),U=()=>{var Z,M,W,J,se,ne,le,ie,ee,a,k,H,ae,te,we,ge,ve,_e,Pe,Ce,ke,Ee,Fe,Me,Te,Ae,ze,Oe,Se,Re,Be,De,Ie,$e,Le,qe,Ke,Ye,Xe,Ue,We,He,Je,Ge,Ve,Ze,Qe,es,ss,as,rs,ts,ns,ls,is,cs,os,ds,ms,us,hs,xs,ps,fs;const E={planId:r.id,couponCode:s,billingCycle:w,onSuccess:d,onCancel:I};if(N&&C){const me=async()=>{var js;try{const ue=await fetch(route("free-plan.subscribe"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((js=document.querySelector('meta[name="csrf-token"]'))==null?void 0:js.getAttribute("content"))||""},body:JSON.stringify({plan_id:r.id,billing_cycle:w,coupon_code:(c==null?void 0:c.code)||null})}),ce=await ue.json();ue.ok&&ce.success?(P.success(ce.message||f("Free plan activated successfully")),G.visit(window.location.href),d(ce)):P.error(ce.message||f("Failed to activate free plan"))}catch{P.error(f("An error occurred while activating your free plan"))}};return e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-green-800",children:f("Ready to Activate Free Plan")}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:f("Click the button below to activate your free plan instantly")})]}),e.jsx(v,{onClick:me,className:"w-full",children:f("Activate Free Plan")})]})}switch(C){case"manually":return e.jsx(Aa,{formData:{planId:r.id,planPrice:y,billingCycle:w,couponCode:c==null?void 0:c.code},onSuccess:d,onError:me=>P.error(me)});case"stripe":return e.jsx(Qs,{...E,stripeKey:((Z=r.paymentMethods)==null?void 0:Z.stripe_key)||""});case"paypal":return e.jsx(ea,{...E,planPrice:Number(r.price),paypalClientId:((M=r.paymentMethods)==null?void 0:M.paypal_client_id)||"",currency:((W=r.paymentMethods)==null?void 0:W.defaultCurrency)||"USD"});case"bank":return e.jsx(sa,{...E,planPrice:Number(r.price),bankDetails:((J=r.paymentMethods)==null?void 0:J.bank_detail)||""});case"razorpay":return e.jsx(aa,{...E,planPrice:Number(r.price),razorpayKey:((se=r.paymentMethods)==null?void 0:se.razorpay_key)||"",currency:((ne=r.paymentMethods)==null?void 0:ne.defaultCurrency)||"INR"});case"mercadopago":return e.jsx(ra,{...E,planPrice:Number(r.price),accessToken:((le=r.paymentMethods)==null?void 0:le.mercadopago_access_token)||"",currency:((ie=r.paymentMethods)==null?void 0:ie.defaultCurrency)||"BRL"});case"paystack":return e.jsx(ta,{...E,planPrice:Number(r.price),paystackKey:((ee=r.paymentMethods)==null?void 0:ee.paystack_public_key)||"",currency:((a=r.paymentMethods)==null?void 0:a.defaultCurrency)||"NGN"});case"flutterwave":return e.jsx(na,{...E,planPrice:Number(r.price),flutterwaveKey:((k=r.paymentMethods)==null?void 0:k.flutterwave_public_key)||"",currency:((H=r.paymentMethods)==null?void 0:H.defaultCurrency)||"NGN"});case"paytabs":return e.jsx(la,{...E,planPrice:Number(r.price),paytabsClientKey:"",currency:((ae=r.paymentMethods)==null?void 0:ae.defaultCurrency)||"USD"});case"skrill":return e.jsx(ia,{...E,planPrice:Number(r.price),skrillMerchantId:((te=r.paymentMethods)==null?void 0:te.skrill_merchant_id)||"",currency:((we=r.paymentMethods)==null?void 0:we.defaultCurrency)||"USD"});case"coingate":return e.jsx(ca,{...E,planPrice:Number(r.price),coinGateApiToken:((ge=r.paymentMethods)==null?void 0:ge.coingate_api_token)||"",currency:((ve=r.paymentMethods)==null?void 0:ve.defaultCurrency)||"USD"});case"payfast":return e.jsx(oa,{...E,planPrice:Number(r.price),payfastMerchantId:((_e=r.paymentMethods)==null?void 0:_e.payfast_merchant_id)||"",currency:((Pe=r.paymentMethods)==null?void 0:Pe.defaultCurrency)||"ZAR"});case"toyyibpay":return e.jsx(da,{...E,planPrice:Number(r.price),toyyibpayCategoryCode:((Ce=r.paymentMethods)==null?void 0:Ce.toyyibpay_category_code)||"",currency:((ke=r.paymentMethods)==null?void 0:ke.defaultCurrency)||"MYR"});case"paytr":return e.jsx(ma,{...E,planPrice:Number(r.price),paytrMerchantId:((Ee=r.paymentMethods)==null?void 0:Ee.paytr_merchant_id)||"",currency:((Fe=r.paymentMethods)==null?void 0:Fe.defaultCurrency)||"TRY"});case"mollie":return e.jsx(ua,{...E,planPrice:Number(r.price),mollieApiKey:((Me=r.paymentMethods)==null?void 0:Me.mollie_api_key)||"",currency:((Te=r.paymentMethods)==null?void 0:Te.defaultCurrency)||"EUR"});case"cashfree":return e.jsx(ha,{...E,planPrice:Number(r.price),cashfreeAppId:((Ae=r.paymentMethods)==null?void 0:Ae.cashfree_public_key)||"",mode:((ze=r.paymentMethods)==null?void 0:ze.cashfree_mode)||"sandbox",currency:((Oe=r.paymentMethods)==null?void 0:Oe.defaultCurrency)||"INR"});case"iyzipay":return e.jsx(xa,{...E,planPrice:Number(r.price),iyzipayPublicKey:((Se=r.paymentMethods)==null?void 0:Se.iyzipay_public_key)||"",currency:((Re=r.paymentMethods)==null?void 0:Re.defaultCurrency)||"USD"});case"benefit":return e.jsx(pa,{...E,planPrice:Number(r.price),benefitPublicKey:((Be=r.paymentMethods)==null?void 0:Be.benefit_public_key)||"",currency:((De=r.paymentMethods)==null?void 0:De.defaultCurrency)||"BHD"});case"ozow":return e.jsx(fa,{...E,planPrice:Number(r.price),ozowSiteKey:((Ie=r.paymentMethods)==null?void 0:Ie.ozow_site_key)||"",currency:(($e=r.paymentMethods)==null?void 0:$e.defaultCurrency)||"ZAR"});case"easebuzz":return e.jsx(ja,{...E,planPrice:Number(r.price),easebuzzMerchantKey:((Le=r.paymentMethods)==null?void 0:Le.easebuzz_merchant_key)||"",currency:((qe=r.paymentMethods)==null?void 0:qe.defaultCurrency)||"INR"});case"khalti":return e.jsx(ya,{...E,planPrice:Number(r.price),khaltiPublicKey:((Ke=r.paymentMethods)==null?void 0:Ke.khalti_public_key)||"",currency:((Ye=r.paymentMethods)==null?void 0:Ye.defaultCurrency)||"NPR"});case"authorizenet":return e.jsx(ba,{...E,planPrice:Number(r.price),authorizenetMerchantId:((Xe=r.paymentMethods)==null?void 0:Xe.authorizenet_merchant_id)||"",currency:((Ue=r.paymentMethods)==null?void 0:Ue.defaultCurrency)||"USD"});case"fedapay":return e.jsx(Na,{...E,planPrice:Number(r.price),fedapayPublicKey:((We=r.paymentMethods)==null?void 0:We.fedapay_public_key)||"",currency:((He=r.paymentMethods)==null?void 0:He.defaultCurrency)||"XOF"});case"payhere":return e.jsx(wa,{...E,planPrice:Number(r.price),payhereMerchantId:((Je=r.paymentMethods)==null?void 0:Je.payhere_merchant_id)||"",currency:((Ge=r.paymentMethods)==null?void 0:Ge.defaultCurrency)||"LKR"});case"cinetpay":return e.jsx(ga,{...E,planPrice:Number(r.price),cinetpaySiteId:((Ve=r.paymentMethods)==null?void 0:Ve.cinetpay_site_id)||"",currency:((Ze=r.paymentMethods)==null?void 0:Ze.defaultCurrency)||"XOF"});case"paiement":return e.jsx(va,{...E,planPrice:Number(r.price),paiementMerchantId:((Qe=r.paymentMethods)==null?void 0:Qe.paiement_merchant_id)||"",currency:((es=r.paymentMethods)==null?void 0:es.defaultCurrency)||"XOF"});case"nepalste":return e.jsx(_a,{...E,planPrice:Number(r.price),nepalstePublicKey:((ss=r.paymentMethods)==null?void 0:ss.nepalste_public_key)||"",currency:((as=r.paymentMethods)==null?void 0:as.defaultCurrency)||"NPR"});case"yookassa":return e.jsx(Pa,{...E,planPrice:Number(r.price),yookassaShopId:((rs=r.paymentMethods)==null?void 0:rs.yookassa_shop_id)||"",currency:((ts=r.paymentMethods)==null?void 0:ts.defaultCurrency)||"RUB"});case"aamarpay":return e.jsx(Ca,{...E,planPrice:Number(r.price),aamarpayStoreId:((ns=r.paymentMethods)==null?void 0:ns.aamarpay_store_id)||"",currency:((ls=r.paymentMethods)==null?void 0:ls.defaultCurrency)||"BDT"});case"midtrans":return e.jsx(ka,{...E,planPrice:Number(r.price),midtransSecretKey:((is=r.paymentMethods)==null?void 0:is.midtrans_secret_key)||"",currency:((cs=r.paymentMethods)==null?void 0:cs.defaultCurrency)||"IDR"});case"paymentwall":return e.jsx(Ea,{...E,planPrice:Number(r.price),paymentwallPublicKey:((os=r.paymentMethods)==null?void 0:os.paymentwall_public_key)||"",currency:((ds=r.paymentMethods)==null?void 0:ds.defaultCurrency)||"USD"});case"sspay":return e.jsx(Fa,{...E,planPrice:Number(r.price),sspaySecretKey:((ms=r.paymentMethods)==null?void 0:ms.sspay_secret_key)||"",currency:((us=r.paymentMethods)==null?void 0:us.defaultCurrency)||"MYR"});case"tap":return e.jsx(Ma,{...E,planPrice:Number(r.price),tapSecretKey:((hs=r.paymentMethods)==null?void 0:hs.tap_secret_key)||"",currency:((xs=r.paymentMethods)==null?void 0:xs.defaultCurrency)||"USD"});case"xendit":return e.jsx(Ta,{...E,planPrice:Number(r.price),xenditApiKey:((ps=r.paymentMethods)==null?void 0:ps.xendit_api_key)||"",currency:((fs=r.paymentMethods)==null?void 0:fs.defaultCurrency)||"PHP"});default:return null}};return j?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium",children:f("Complete Payment")}),e.jsx(v,{variant:"outline",size:"sm",onClick:I,children:f("Back")})]}),U()]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(S,{children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:r.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[f(w)," ",f("subscription")]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold",children:window.appSettings.formatCurrency(r.price)}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["/",f(r.duration.toLowerCase())]})]})]})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(K,{children:f("Select Payment Method")}),Y.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:f("No payment methods available")}):e.jsx("div",{className:"space-y-2",children:Y.map((E,Z)=>e.jsx(S,{className:`cursor-pointer transition-colors ${C===E.id?"border-primary bg-primary/5":"hover:border-gray-300"}`,onClick:()=>t(E.id),children:e.jsx(R,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-primary",children:E.icon}),e.jsx("span",{className:"font-medium",children:E.name}),C===E.id&&e.jsx(Cs,{variant:"secondary",className:"ml-auto",children:f("Selected")})]})})},`${E.id}-${Z}`))}),N&&C&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mt-3",children:e.jsx("p",{className:"text-sm text-green-700",children:f("This plan is free! You can activate it instantly.")})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(K,{htmlFor:"coupon",children:[f("Coupon Code")," (",f("Optional"),")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(X,{id:"coupon",value:s,onChange:E=>o(E.target.value),placeholder:f("Enter coupon code"),className:"pr-10",disabled:!!c}),e.jsx(qs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"})]}),c?e.jsx(v,{type:"button",variant:"outline",onClick:_,children:f("Remove")}):e.jsx(v,{type:"button",variant:"outline",onClick:m,disabled:!s.trim()||i,children:i?e.jsx(D,{className:"h-4 w-4 animate-spin"}):f("Apply")})]}),c&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-green-700 font-medium",children:[f("Coupon Applied"),": ",c.code]}),e.jsxs("span",{className:"text-green-600",children:["-",c.type==="percentage"?`${c.value}%`:`${((Q=(q=window==null?void 0:window.appSettings)==null?void 0:q.currencySettings)==null?void 0:Q.currencySymbol)||"$"}${c.value}`]})]})})]}),e.jsx(S,{children:e.jsx(R,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:f("Subtotal")}),e.jsx("span",{children:window.appSettings.formatCurrency(Number(l)||0)})]}),c&&e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:f("Discount")}),e.jsx("span",{children:window.appSettings.formatCurrency(Number(x)||0)})]}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:f("Total")}),e.jsx("span",{children:window.appSettings.formatCurrency(Number(y)||0)})]})})]})})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{variant:"outline",onClick:h,className:"flex-1",children:f("Cancel")}),e.jsx(v,{onClick:E=>{E.preventDefault(),T()},disabled:!N&&Y.length===0,className:"flex-1",type:"button",children:N?f("Activate Free Plan"):`${f("Pay")} ${window.appSettings.formatCurrency(Number(y)||0)}`})]})]})}function Oa({isOpen:r,onClose:w,plan:u,billingCycle:d,paymentMethods:h}){const{t:f}=A(),C=()=>{w()},t=h.filter(s=>s.enabled);return e.jsx(ks,{open:r,onOpenChange:w,children:e.jsxs(Es,{className:"max-w-md max-h-[90vh] flex flex-col",children:[e.jsx(Fs,{className:"flex-shrink-0",children:e.jsx(Ms,{children:f("Subscribe to {{planName}}",{planName:u.name})})}),e.jsx("div",{className:"overflow-y-auto flex-1 pr-2",children:e.jsx(za,{plan:u,billingCycle:d,paymentMethods:t,onSuccess:C,onCancel:w})})]})})}function Mr({plans:r,billingCycle:w="monthly",hasDefaultPlan:u,isAdmin:d=!1,currentPlan:h,userTrialUsed:f,paymentMethods:C=[]}){const{t}=A(),{flash:s}=Ts().props,[o,c]=g.useState(r),[n,i]=g.useState(w),[p,j]=g.useState(!1),[b,l]=g.useState(null),[x,y]=g.useState(!1),[N,m]=g.useState(null),[_,T]=g.useState(!1),I=a=>{var k;if(typeof window<"u"&&((k=window.appSettings)!=null&&k.formatCurrency)){const H=typeof a=="number"?a:parseFloat(a);return window.appSettings.formatCurrency(H,{showSymbol:!0})}return a};g.useEffect(()=>{c(r)},[r]),g.useEffect(()=>{s!=null&&s.error&&P.error(s.error),s!=null&&s.success&&P.success(s.success)},[s]);const Y=a=>{i(a),G.get(route("plans.index"),{billing_cycle:a},{preserveState:!0})},U=a=>{T(!0),G.post(route("plans.request"),{plan_id:a,billing_cycle:n},{onFinish:()=>T(!1)})},q=a=>{G.post(route("plans.cancel-request"),{request_id:a})},Q=a=>{T(!0),G.post(route("plans.trial"),{plan_id:a},{onFinish:()=>T(!1)})},E=async a=>{const k=o.find(H=>H.id===a);if(k)try{const ae=await(await fetch(route("payment.methods"))).json();m({...k,paymentMethods:ae}),y(!0)}catch{P.error(t("Failed to load payment methods"))}},Z=a=>{const k=[];return((a==null?void 0:a.is_manually_enabled)===!0||(a==null?void 0:a.is_manually_enabled)==="1")&&k.push({id:"manually",name:t("Manual Payment"),icon:e.jsx(vs,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_bank_enabled)===!0||(a==null?void 0:a.is_bank_enabled)==="1")&&k.push({id:"bank",name:t("Bank Transfer"),icon:e.jsx(vs,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_stripe_enabled)===!0||(a==null?void 0:a.is_stripe_enabled)==="1")&&k.push({id:"stripe",name:t("Stripe"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_paypal_enabled)===!0||(a==null?void 0:a.is_paypal_enabled)==="1")&&k.push({id:"paypal",name:t("PayPal"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_razorpay_enabled)===!0||(a==null?void 0:a.is_razorpay_enabled)==="1")&&k.push({id:"razorpay",name:t("Razorpay"),icon:e.jsx(he,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_mercadopago_enabled)===!0||(a==null?void 0:a.is_mercadopago_enabled)==="1")&&(a!=null&&a.mercadopago_access_token)&&k.push({id:"mercadopago",name:t("MercadoPago"),icon:e.jsx(je,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_paystack_enabled)===!0||(a==null?void 0:a.is_paystack_enabled)==="1")&&k.push({id:"paystack",name:t("Paystack"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_flutterwave_enabled)===!0||(a==null?void 0:a.is_flutterwave_enabled)==="1")&&k.push({id:"flutterwave",name:t("Flutterwave"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_paytabs_enabled)===!0||(a==null?void 0:a.is_paytabs_enabled)==="1")&&k.push({id:"paytabs",name:t("PayTabs"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_skrill_enabled)===!0||(a==null?void 0:a.is_skrill_enabled)==="1")&&k.push({id:"skrill",name:t("Skrill"),icon:e.jsx(je,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_coingate_enabled)===!0||(a==null?void 0:a.is_coingate_enabled)==="1")&&k.push({id:"coingate",name:t("CoinGate"),icon:e.jsx(ye,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_payfast_enabled)===!0||(a==null?void 0:a.is_payfast_enabled)==="1")&&k.push({id:"payfast",name:t("Payfast"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_tap_enabled)===!0||(a==null?void 0:a.is_tap_enabled)==="1")&&k.push({id:"tap",name:t("Tap"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_xendit_enabled)===!0||(a==null?void 0:a.is_xendit_enabled)==="1")&&k.push({id:"xendit",name:t("Xendit"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_paytr_enabled)===!0||(a==null?void 0:a.is_paytr_enabled)==="1")&&k.push({id:"paytr",name:t("PayTR"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_mollie_enabled)===!0||(a==null?void 0:a.is_mollie_enabled)==="1")&&k.push({id:"mollie",name:t("Mollie"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_toyyibpay_enabled)===!0||(a==null?void 0:a.is_toyyibpay_enabled)==="1")&&k.push({id:"toyyibpay",name:t("toyyibPay"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_cashfree_enabled)===!0||(a==null?void 0:a.is_cashfree_enabled)==="1")&&k.push({id:"cashfree",name:t("Cashfree"),icon:e.jsx(he,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_khalti_enabled)===!0||(a==null?void 0:a.is_khalti_enabled)==="1")&&k.push({id:"khalti",name:t("Khalti"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_iyzipay_enabled)===!0||(a==null?void 0:a.is_iyzipay_enabled)==="1")&&k.push({id:"iyzipay",name:t("Iyzipay"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_benefit_enabled)===!0||(a==null?void 0:a.is_benefit_enabled)==="1")&&k.push({id:"benefit",name:t("Benefit"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_ozow_enabled)===!0||(a==null?void 0:a.is_ozow_enabled)==="1")&&k.push({id:"ozow",name:t("Ozow"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_easebuzz_enabled)===!0||(a==null?void 0:a.is_easebuzz_enabled)==="1")&&k.push({id:"easebuzz",name:t("Easebuzz"),icon:e.jsx(he,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_authorizenet_enabled)===!0||(a==null?void 0:a.is_authorizenet_enabled)==="1")&&k.push({id:"authorizenet",name:t("AuthorizeNet"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_fedapay_enabled)===!0||(a==null?void 0:a.is_fedapay_enabled)==="1")&&k.push({id:"fedapay",name:t("FedaPay"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_payhere_enabled)===!0||(a==null?void 0:a.is_payhere_enabled)==="1")&&k.push({id:"payhere",name:t("PayHere"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_cinetpay_enabled)===!0||(a==null?void 0:a.is_cinetpay_enabled)==="1")&&k.push({id:"cinetpay",name:t("CinetPay"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_paiement_enabled)===!0||(a==null?void 0:a.is_paiement_enabled)==="1")&&k.push({id:"paiement",name:t("Paiement Pro"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_nepalste_enabled)===!0||(a==null?void 0:a.is_nepalste_enabled)==="1")&&k.push({id:"nepalste",name:t("Nepalste"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_yookassa_enabled)===!0||(a==null?void 0:a.is_yookassa_enabled)==="1")&&k.push({id:"yookassa",name:t("YooKassa"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_aamarpay_enabled)===!0||(a==null?void 0:a.is_aamarpay_enabled)==="1")&&k.push({id:"aamarpay",name:t("Aamarpay"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_midtrans_enabled)===!0||(a==null?void 0:a.is_midtrans_enabled)==="1")&&k.push({id:"midtrans",name:t("Midtrans"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_paymentwall_enabled)===!0||(a==null?void 0:a.is_paymentwall_enabled)==="1")&&k.push({id:"paymentwall",name:t("PaymentWall"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),((a==null?void 0:a.is_sspay_enabled)===!0||(a==null?void 0:a.is_sspay_enabled)==="1")&&k.push({id:"sspay",name:t("SSPay"),icon:e.jsx(F,{className:"h-5 w-5"}),enabled:!0}),k},M=a=>h&&h.id===a.id&&h.expires_at&&new Date(h.expires_at)>new Date?e.jsxs(v,{disabled:!0,className:"w-full bg-green-100 text-green-800 border-green-200",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),t("Already Subscribed")]}):a.is_current?e.jsxs(v,{disabled:!0,className:"w-full",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),t("Current Plan")]}):a.is_trial_available&&!f?e.jsxs("div",{className:"space-y-2",children:[e.jsxs(v,{onClick:k=>{k.preventDefault(),Q(a.id)},disabled:_,variant:"outline",className:"w-full",type:"button",children:[e.jsx(Ws,{className:"h-4 w-4 mr-2"}),t("Start {{days}} Day Trial",{days:a.trial_days})]}),e.jsx(v,{onClick:k=>{k.preventDefault(),E(a.id)},disabled:_,className:"w-full",type:"button",children:t("Subscribe Now")})]}):e.jsxs("div",{className:"space-y-2",children:[a.has_pending_request?e.jsxs(v,{onClick:()=>q(a.request_id),disabled:_,variant:"outline",className:"w-full border-red-200 text-red-600 hover:bg-red-50",children:[e.jsx(bs,{className:"h-4 w-4 mr-2"}),t("Cancel Request")]}):e.jsxs(v,{onClick:()=>U(a.id),disabled:_,variant:"outline",className:"w-full",children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),t("Request Plan")]}),e.jsx(v,{onClick:()=>E(a.id),disabled:_||h&&h.id===a.id&&h.expires_at&&new Date(h.expires_at)>new Date,className:"w-full",children:h&&h.id===a.id&&h.expires_at&&new Date(h.expires_at)>new Date?t("Already Subscribed"):t("Subscribe Now")})]}),W=(a,k)=>Array.isArray(a.features)?k==="Template Sections"?a.features.some(H=>H.startsWith(t("Template Sections"))):a.features.includes(k):typeof a.features=="object"&&a.features!==null?a.features[k]===!0:!1,J=a=>Array.isArray(a.features)&&a.features.find(H=>H.startsWith(t("Template Sections")))||"Template Sections",se=a=>{G.post(route("plans.toggle-status",a),{},{preserveState:!0,onSuccess:()=>{c(o.map(k=>k.id===a?{...k,status:!k.status}:k))}})},ne=a=>{l(a),j(!0)},le=()=>{b&&G.delete(route("plans.destroy",b.id),{onSuccess:()=>{j(!1),l(null)}})},ie=[{key:"Custom Domain",label:t("Custom Domain"),icon:e.jsx(xe,{className:"h-4 w-4"})},{key:"Subdomain",label:t("Custom Subdomain"),icon:e.jsx(xe,{className:"h-4 w-4"})},{key:"PWA",label:t("PWA Support"),icon:e.jsx(oe,{className:"h-4 w-4"})},{key:"AI Integration",label:t("AI Integration"),icon:e.jsx(Ks,{className:"h-4 w-4"})},{key:"Password Protection",label:t("Password Protection"),icon:e.jsx(pe,{className:"h-4 w-4"})},{key:"Template Sections",label:t("Template Sections"),icon:e.jsx(oe,{className:"h-4 w-4"})}],ee={businesses:e.jsx(Vs,{className:"h-5 w-5"}),users:e.jsx(Gs,{className:"h-5 w-5"}),storage:e.jsx(Js,{className:"h-5 w-5"}),templates:e.jsx(oe,{className:"h-5 w-5"}),bio_links:e.jsx(xe,{className:"h-5 w-5"}),bio_links_templates:e.jsx(oe,{className:"h-5 w-5"})};return e.jsx(_s,{title:t("Plans"),description:t("Manage subscription plans for your customers"),url:"/plans",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-2",children:t(d?"Subscription Plans":"Choose Your Plan")}),e.jsx("p",{className:"text-muted-foreground max-w-2xl",children:t(d?"Create and manage subscription plans to offer different service tiers to your customers.":"Select the perfect plan for your business needs")})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[e.jsx(zs,{value:n,onValueChange:a=>Y(a),className:"w-full sm:w-[400px]",children:e.jsxs(Os,{className:"grid w-full grid-cols-2",children:[e.jsx(Ns,{value:"monthly",children:t("Monthly")}),e.jsx(Ns,{value:"yearly",children:t("Yearly")})]})}),d&&e.jsxs(v,{className:"w-full sm:w-auto",onClick:()=>G.get(route("plans.create")),children:[e.jsx(As,{className:"h-4 w-4 mr-2"}),t("Add Plan")]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map(a=>{var k;return e.jsxs("div",{className:`group relative h-full flex flex-col ${a.recommended?"z-10 scale-[1.02]":""}`,children:[e.jsxs("div",{className:`
                absolute inset-0 rounded-2xl 
                ${a.recommended?"bg-gradient-to-br from-primary/20 via-primary/10 to-transparent border-primary/30":"bg-gradient-to-br from-gray-100/80 via-gray-50/50 to-transparent border-gray-200/80"} 
                border shadow-lg transition-all duration-300 
                group-hover:shadow-xl group-hover:shadow-primary/5
                overflow-hidden
              `,children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-primary/10 to-transparent rounded-full -mr-16 -mt-16 opacity-70"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-primary/10 to-transparent rounded-full -ml-12 -mb-12 opacity-50"})]}),a.recommended&&e.jsx("div",{className:"absolute -top-4 left-0 right-0 flex justify-center z-20",children:e.jsxs("div",{className:"bg-primary text-primary-foreground px-4 py-1.5 rounded-full shadow-lg flex items-center gap-1.5 text-sm font-medium",children:[e.jsx(gs,{className:"h-4 w-4"}),t("Recommended")]})}),d&&e.jsxs("div",{className:"absolute top-4 right-4 z-10 flex gap-2",children:[a.is_default&&e.jsx("div",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:t("Default")}),e.jsxs("div",{className:`
                    flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium
                    ${a.status?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}
                  `,children:[e.jsx("span",{className:`
                      w-2 h-2 rounded-full 
                      ${a.status?"bg-emerald-500":"bg-red-500"}
                    `}),a.status?t("Active"):t("Inactive")]})]}),!d&&a.is_current&&e.jsx("div",{className:"absolute top-4 right-4 z-10",children:e.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary",children:[e.jsx(fe,{className:"h-3 w-3"}),t("Current")]})}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full p-6 pt-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:`
                    text-2xl font-bold mb-2 
                    ${a.recommended?"text-primary":""}
                  `,children:a.name}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-3",children:[e.jsx("span",{className:`
                      text-3xl font-extrabold 
                      ${a.recommended?"text-primary":""}
                    `,children:I(a.price)}),e.jsxs("span",{className:"text-muted-foreground text-sm",children:["/",t(a.duration.toLowerCase())]})]}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed line-clamp-2 mb-3",children:a.description}),a.trial_days>0&&e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-primary",children:[e.jsx(gs,{className:"h-3.5 w-3.5"}),t("{{days}} days free trial",{days:a.trial_days})]})]}),e.jsxs("div",{className:"relative flex items-center my-4",children:[e.jsx("div",{className:"flex-grow border-t border-gray-200"}),e.jsx("div",{className:"mx-3 bg-primary/10 text-primary p-1.5 rounded-full",children:e.jsx(pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex-grow border-t border-gray-200"})]}),e.jsxs("div",{className:"mb-6 flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:t("Features")}),e.jsx("ul",{className:"space-y-2.5",children:ie.map((H,ae)=>{const te=W(a,H.key);return e.jsxs("li",{className:"flex items-center gap-3",children:[te?e.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-primary/10 text-primary flex items-center justify-center",children:e.jsx(pe,{className:"h-3.5 w-3.5"})}):e.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-gray-100 text-gray-400 flex items-center justify-center",children:e.jsx(bs,{className:"h-3.5 w-3.5"})}),e.jsx("span",{className:`text-sm ${te?"font-medium":"text-muted-foreground"}`,children:H.key==="Template Sections"?J(a):t(H.label)})]},ae)})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:t("Usage Limits")}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"relative overflow-hidden bg-white rounded-xl border border-gray-200 p-3 group-hover:border-primary/30 transition-colors",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-transparent opacity-70"}),e.jsxs("div",{className:"relative flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"p-1.5 rounded-full bg-blue-100 text-blue-600",children:ee.businesses}),e.jsx("div",{className:"text-xl font-bold text-blue-700",children:a.stats.businesses})]}),e.jsx("div",{className:"relative text-xs font-medium text-blue-600 uppercase tracking-wide",children:t("Businesses")})]}),e.jsxs("div",{className:"relative overflow-hidden bg-white rounded-xl border border-gray-200 p-3 group-hover:border-primary/30 transition-colors",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-50 to-transparent opacity-70"}),e.jsxs("div",{className:"relative flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"p-1.5 rounded-full bg-emerald-100 text-emerald-600",children:ee.users}),e.jsx("div",{className:"text-xl font-bold text-emerald-700",children:a.stats.users})]}),e.jsx("div",{className:"relative text-xs font-medium text-emerald-600 uppercase tracking-wide",children:t("Users")})]}),e.jsxs("div",{className:"relative overflow-hidden bg-white rounded-xl border border-gray-200 p-3 group-hover:border-primary/30 transition-colors",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-50 to-transparent opacity-70"}),e.jsxs("div",{className:"relative flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"p-1.5 rounded-full bg-amber-100 text-amber-600",children:ee.storage}),e.jsx("div",{className:"text-xl font-bold text-amber-700",children:a.stats.storage})]}),e.jsx("div",{className:"relative text-xs font-medium text-amber-600 uppercase tracking-wide",children:t("Storage")})]}),e.jsxs("div",{className:"relative overflow-hidden bg-white rounded-xl border border-gray-200 p-3 group-hover:border-primary/30 transition-colors",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50 to-transparent opacity-70"}),e.jsxs("div",{className:"relative flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"p-1.5 rounded-full bg-purple-100 text-purple-600",children:ee.templates}),e.jsx("div",{className:"text-xl font-bold text-purple-700",children:a.stats.templates})]}),e.jsx("div",{className:"relative text-xs font-medium text-purple-600 uppercase tracking-wide",children:t("Templates")})]}),e.jsxs("div",{className:"relative overflow-hidden bg-white rounded-xl border border-gray-200 p-3 group-hover:border-primary/30 transition-colors",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-teal-50 to-transparent opacity-70"}),e.jsxs("div",{className:"relative flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"p-1.5 rounded-full bg-teal-100 text-teal-600",children:ee.bio_links}),e.jsx("div",{className:"text-xl font-bold text-teal-700",children:a.stats.bio_links})]}),e.jsx("div",{className:"relative text-xs font-medium text-teal-600 uppercase tracking-wide",children:t("Bio Links")})]}),e.jsxs("div",{className:"relative overflow-hidden bg-white rounded-xl border border-gray-200 p-3 group-hover:border-primary/30 transition-colors",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-rose-50 to-transparent opacity-70"}),e.jsxs("div",{className:"relative flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"p-1.5 rounded-full bg-rose-100 text-rose-600",children:ee.bio_links_templates}),e.jsx("div",{className:"text-xl font-bold text-rose-700",children:a.stats.bio_links_templates})]}),e.jsx("div",{className:"relative text-xs font-medium text-rose-600 uppercase tracking-wide",children:t("Bio Templates")})]})]}),a.stats.addons>0&&a.stats.addon_names&&a.stats.addon_names.length>0&&e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:"relative overflow-hidden bg-white rounded-xl border border-gray-200 p-3 group-hover:border-primary/30 transition-colors",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-50 to-transparent opacity-50"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-1.5 rounded-full bg-gray-100 text-gray-600",children:e.jsx(Ys,{className:"h-4 w-4"})}),e.jsxs("div",{className:"text-sm font-semibold text-gray-700",children:[t("Included Addons")," (",a.stats.addons,")"]})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(k=a.stats.addon_names)==null?void 0:k.map((H,ae)=>e.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium",children:H},ae))})]})]})})]}),e.jsx("div",{className:"mt-auto pt-4 border-t border-gray-200",children:d?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ps,{checked:a.status,onCheckedChange:()=>se(a.id),className:a.status?"data-[state=checked]:bg-primary":""}),e.jsx("span",{className:"text-sm text-muted-foreground",children:a.status?t("Active"):t("Inactive")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{variant:"outline",size:"sm",className:"h-9 w-9 p-0 border-gray-200 hover:border-primary hover:text-primary",title:t("Edit"),onClick:()=>G.get(route("plans.edit",a.id)),children:e.jsx(Xs,{className:"h-4 w-4"})}),!a.is_default&&e.jsx(v,{variant:"outline",size:"sm",className:"h-9 w-9 p-0 border-gray-200 hover:border-red-400 hover:text-red-600",title:t("Delete"),onClick:()=>ne(a),children:e.jsx(Us,{className:"h-4 w-4"})})]})]}):M(a)})]})]},a.id)})}),d&&e.jsx(Ss,{isOpen:p,onClose:()=>j(!1),onConfirm:le,itemName:(b==null?void 0:b.name)||"",entityName:"plan"}),!d&&N&&e.jsx(Oa,{isOpen:x,onClose:()=>{y(!1),m(null)},plan:N,billingCycle:n,paymentMethods:Z(N.paymentMethods)})]})})}export{Mr as default};

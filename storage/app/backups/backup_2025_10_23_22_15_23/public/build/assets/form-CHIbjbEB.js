import{R as y,j as e}from"./ui-DwAOVm1p.js";import{u as ge,m as xe,t as q,n as ue,B as N,C as g,L as c,I as u,M as he,o as V}from"./app-BlWi7cIv.js";import{P as pe}from"./PageWrapper-eqRFcN6B.js";import{S as Y,a as z,b as J,c as H,d as Z}from"./select-DV03FLtq.js";import{S as fe}from"./switch-DGQ2xpqa.js";import{D as be}from"./DomainConfig-CSg1GjN0.js";import je from"./BioLinkPreview-wTC_ried.js";import ve from"./form-seo-section-eXrJKYYy.js";import ye from"./form-analytics-section-DDHMe2eu.js";import Ne from"./form-social-section-Bkd9lwsE.js";import ke from"./form-background-section-F5V7Rf6o.js";import{b as h,g as T,a as I,i as G}from"./index-BD2kI5zs.js";import we from"./form-profile-section-BBtKcSEY.js";/* empty css                    */import"./vendor-CxtKjBZA.js";import"./utils-DBYZG17H.js";import"./page-template-8tWNB1WX.js";import"./textarea-DmNeUOf1.js";import"./react-country-flag.esm-U4UQv2PH.js";import"./language-DYlIyiUn.js";import"./sparkles-tvpsAjMk.js";import"./loader-circle-DUfirWOF.js";import"./copy-Btm1-TBN.js";import"./chevron-up-DMuWaAmJ.js";import"./chevron-right-CTYpggVz.js";import"./cookie-consent-BF1mYY4f.js";import"./globe-kYq37WGi.js";import"./chart-column-CrjmBQBc.js";import"./briefcase-AuRykhaE.js";import"./credit-card-CWCbalqR.js";import"./dollar-sign-B5K61QeY.js";import"./mail-B928cX0J.js";import"./settings-CXB8R1cS.js";import"./users-WU9ta9Er.js";import"./message-square-BEKBBgPS.js";import"./calendar-Jlwl64Lp.js";import"./wallet-z8Vgl1na.js";import"./user-D7_XmPgu.js";import"./use-favicon-BHKlxAc6.js";import"./index-upgrZYbo.js";import"./SocialIcon-B3KlezrG.js";import"./trash-2-BFqA1Oig.js";import"./radio-group-DtFQEo9I.js";import"./circle-BwHibmlx.js";function hs({bioLink:l,userPlan:p,planFeatures:d,userRole:K}){var M,D,E,A,O,R;const{t:a}=ge(),m=!!l,[f,Q]=y.useState((l==null?void 0:l.link_type)||"personal"),[k,v]=y.useState({available:!0,checking:!1}),b=K==="superadmin",w=y.useMemo(()=>b?h:p?p.bio_links_themes?Array.isArray(p.bio_links_themes)?p.bio_links_themes.length===0?h:h.filter(r=>p.bio_links_themes.includes(r.value)):h:h:h,[p,b]),X=b||(d==null?void 0:d.custom_domain)===!0,F=b||(d==null?void 0:d.custom_subdomain)===!0,L=b||(d==null?void 0:d.password_protection)===!0,x=T(f),ee=[{name:"Inter",value:"Inter, sans-serif"},{name:"Roboto",value:"Roboto, sans-serif"},{name:"Poppins",value:"Poppins, sans-serif"},{name:"Montserrat",value:"Montserrat, sans-serif"},{name:"Open Sans",value:"Open Sans, sans-serif"}],{data:s,setData:n,post:se,put:te,processing:C,errors:_}=xe({name:(l==null?void 0:l.name)||"My Bio Link",slug:(l==null?void 0:l.slug)||"",link_type:f,custom_domain:(l==null?void 0:l.custom_domain)||"",url_prefix:(l==null?void 0:l.url_prefix)||"bio",password:"",password_enabled:(l==null?void 0:l.password_enabled)||!1,domain_type:l!=null&&l.custom_domain?"domain":"slug",config:(l==null?void 0:l.config)||{theme:f,preset:0,background:{type:"image",color:x.colorPresets[0].background.color,gradient:x.colorPresets[0].background.gradient,image:I(f,0)},buttonColor:x.colorPresets[0].buttonColor,buttonTextColor:x.colorPresets[0].buttonTextColor,textColor:x.colorPresets[0].textColor,font:x.font,header:{name:"John Doe",tagline:"Digital Creator",profile_image:"",email:"",phone:"",description:""},links:[{text:"My Website",url:"https://example.com",description:"Check out my website",icon:""},{text:"Instagram",url:"https://instagram.com",description:"Follow me on Instagram",icon:""}],social:{items:[{platform:"facebook",url:"",icon:"facebook"},{platform:"x",url:"",icon:"x"},{platform:"instagram",url:"",icon:"instagram"}],display:!0},copyright:{enabled:!0,text:`© ${new Date().getFullYear()} ${f==="business"?"YourBrand":"YourName"}. All rights reserved.`},seo:{title:"",description:"",keywords:"",og_image:""},analytics:{google_analytics:"",facebook_pixel:"",custom_code:""}}});y.useEffect(()=>{Object.keys(_).length>0&&Object.entries(_).forEach(([t,r])=>{q.error(`${t}: ${r}`)})},[_]);const re=async t=>{if(t)try{const r=await V.post(route("bio-link.generate-slug"),{name:t,bio_link_id:l==null?void 0:l.id,url_prefix:s.url_prefix||"bio"});n("slug",r.data.slug),S(r.data.slug)}catch(r){console.error("Error generating slug:",r)}},S=async(t,r)=>{if(!t){v({available:!0,checking:!1});return}v({available:!0,checking:!0});try{const o=await V.post(route("bio-link.check-slug"),{slug:t,bio_link_id:l==null?void 0:l.id,url_prefix:r||s.url_prefix});v({available:o.data.available,checking:!1})}catch{v({available:!1,checking:!1})}},ae=t=>{n("name",t),!m&&!s.slug&&re(t)},le=t=>{n("slug",t),S(t)},oe=t=>{s.slug&&S(s.slug,t)},ne=t=>{var j;Q(t);const r=T(t),o=r.colorPresets[r.defaultPreset],i=((j=s.config.background)==null?void 0:j.image)||"",P=G(i)?i:I(t,r.defaultPreset);n({...s,link_type:t,config:{...s.config,theme:t,preset:r.defaultPreset,background:{type:"image",color:o.background.color,gradient:o.background.gradient,image:P},buttonColor:o.buttonColor,buttonTextColor:o.buttonTextColor,textColor:o.textColor,font:r.font}})},ie=t=>{var W,$;const o=T(s.link_type).colorPresets[t],i=((W=s.config.background)==null?void 0:W.type)||"image",B=(($=s.config.background)==null?void 0:$.image)||"",P=G(B);let j="";i==="image"&&(P?j=B:j=I(s.link_type,t)),n({...s,config:{...s.config,preset:t,background:{type:i,color:o.background.color,gradient:o.background.gradient,image:j},buttonColor:o.buttonColor,buttonTextColor:o.buttonTextColor,textColor:o.textColor}})},ce=t=>{if(t.preventDefault(),!s.slug){q.error(a("Slug is required"));return}m?te(route("bio-link.update",l.id)):se(route("bio-link.store"))},de=[{title:a("Dashboard"),href:route("dashboard")},{title:a("Bio Links"),href:route("link-bio-builder.index")},{title:m?l.name:a("Create Bio Link")}],U=m?`Edit ${l==null?void 0:l.name}`:"Create Bio Link",me=m?route("link-bio-builder.edit",l.id):route("link-bio-builder.create");return e.jsxs(pe,{title:U,url:me,breadcrumbs:de,children:[e.jsx(ue,{title:U}),e.jsx("div",{className:"sticky top-0 z-50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b mb-6",children:e.jsxs("div",{className:"flex items-center justify-between py-3 px-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[!k.available&&s.slug&&e.jsx("span",{className:"text-xs text-red-500 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded",children:a("Slug not available")}),C&&e.jsx("span",{className:"text-xs text-blue-600 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded",children:a(m?"Updating...":"Creating...")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(N,{variant:"outline",className:"px-4 h-9 flex items-center gap-1",onClick:()=>{localStorage.setItem("biolink_preview_data",JSON.stringify({link_type:f,name:s.name,slug:s.slug||"preview",config:s.config})),window.open(route("bio-link.preview"),"_blank")},children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 mr-1",children:[e.jsx("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),a("Preview")]}),e.jsx(N,{onClick:ce,disabled:C||!k.available&&s.slug,className:"px-6 h-9",children:a(C?m?"Updating...":"Creating...":m?"Update Bio Link":"Create Bio Link")})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs(g,{children:[e.jsx("div",{className:"p-3 border-b bg-muted/30",children:e.jsxs("h3",{className:"text-base font-medium",children:[e.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-xs rounded-full h-5 w-5 inline-flex items-center justify-center mr-1.5",children:"1"}),a("Bio Link Setup")]})}),e.jsxs("div",{className:"p-3 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs(c,{className:"text-sm mb-1 block flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[a("Link Type"),window.isDemo&&e.jsx("span",{className:"ml-2 px-1.5 py-0.5 text-[10px] font-medium rounded-full bg-primary text-white",children:"New"})]}),e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded-full",children:[w.length," layouts"]})]}),e.jsxs(Y,{value:s.link_type,onValueChange:ne,children:[e.jsx(z,{className:"h-9 text-sm",children:e.jsx(J,{})}),e.jsx(H,{children:w.map((t,r)=>e.jsxs(Z,{value:t.value,children:["Theme ",r+1,": ",t.label]},t.value))})]}),!b&&w.length<h.length&&e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:a("Some themes are restricted by your plan. Upgrade to access all themes.")})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-sm mb-1 block",children:a("Link Name")}),e.jsx(u,{value:s.name,onChange:t=>m?n("name",t.target.value):ae(t.target.value),className:"h-9 text-sm",placeholder:a("Enter link name"),required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[e.jsx(c,{className:"text-sm",children:a("Color Theme")}),e.jsx("div",{className:"flex space-x-1",children:x.colorPresets.slice(0,5).map((t,r)=>e.jsx("div",{className:"w-5 h-5 rounded-full cursor-pointer border hover:scale-110 transition-transform flex items-center justify-center",style:{background:t.background.type==="gradient"?t.background.gradient:t.background.color,boxShadow:s.config.preset===r?"0 0 0 2px white, 0 0 0 4px "+t.buttonColor:"none"},onClick:()=>ie(r),children:s.config.preset===r&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})},r))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx(c,{className:"text-sm mb-1 block",children:a("Button Color")}),e.jsxs("div",{className:"flex",children:[e.jsx(u,{type:"color",value:s.config.buttonColor,onChange:t=>{n("config",{...s.config,buttonColor:t.target.value})},className:"h-6 p-0 w-full rounded-r-none"}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-1 flex items-center rounded-r-md border border-l-0 border-input text-xs",children:(M=s.config.buttonColor)==null?void 0:M.substring(0,7)})]})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-sm mb-1 block",children:a("Button Text Color")}),e.jsxs("div",{className:"flex",children:[e.jsx(u,{type:"color",value:s.config.buttonTextColor,onChange:t=>{n("config",{...s.config,buttonTextColor:t.target.value})},className:"h-6 p-0 w-full rounded-r-none"}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-1 flex items-center rounded-r-md border border-l-0 border-input text-xs",children:(D=s.config.buttonTextColor)==null?void 0:D.substring(0,7)})]})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-sm mb-1 block",children:a("Text Color")}),e.jsxs("div",{className:"flex",children:[e.jsx(u,{type:"color",value:s.config.textColor,onChange:t=>{n("config",{...s.config,textColor:t.target.value})},className:"h-6 p-0 w-full rounded-r-none"}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-1 flex items-center rounded-r-md border border-l-0 border-input text-xs",children:(E=s.config.textColor)==null?void 0:E.substring(0,7)})]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx(c,{className:"text-sm mb-2 block",children:a("Background Settings")}),e.jsx(ke,{background:s.config.background,theme:s.link_type,onUpdate:(t,r)=>{n("config",{...s.config,background:{...s.config.background,[t]:r}})}})]})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-sm mb-1 block",children:a("Font Family")}),e.jsxs(Y,{value:s.config.font||"Inter, sans-serif",onValueChange:t=>{n("config",{...s.config,font:t})},children:[e.jsx(z,{className:"h-9 text-sm",children:e.jsx(J,{})}),e.jsx(H,{children:ee.map(t=>e.jsx(Z,{value:t.value,children:e.jsx("span",{style:{fontFamily:t.value},children:t.name})},t.value))})]})]})]})]}),e.jsx(be,{data:{slug:s.slug,custom_domain:s.custom_domain,url_prefix:s.url_prefix,password:s.password,password_enabled:s.password_enabled,domain_type:s.domain_type},onUpdate:(t,r)=>n(t,r),slugStatus:k,onSlugChange:le,onPrefixChange:oe,businessId:l==null?void 0:l.id,canUseCustomDomain:X,canUseSubdomain:F,canUsePasswordProtection:L,type:"biolink"}),e.jsxs(g,{children:[e.jsx("div",{className:"p-3 border-b bg-muted/30",children:e.jsxs("h3",{className:"text-base font-medium",children:[e.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-xs rounded-full h-5 w-5 inline-flex items-center justify-center mr-1.5",children:"3"}),a("Profile Information")]})}),e.jsx("div",{className:"p-3 space-y-4",children:e.jsx(we,{header:s.config.header,onUpdate:(t,r)=>{n("config",{...s.config,header:{...s.config.header,[t]:r}})},profileFields:x.profileFields||[{name:"name",label:"Name",type:"text",placeholder:"Enter your name",required:!0,section:"Basic Information",cols:1},{name:"tagline",label:"Tagline",type:"text",placeholder:"Enter a short description",required:!1,section:"Basic Information",cols:1},{name:"profile_image",label:"Profile Picture",type:"image",placeholder:"Select profile picture",required:!1,section:"Basic Information",cols:2}]})})]}),e.jsxs(g,{children:[e.jsx("div",{className:"p-3 border-b bg-muted/30",children:e.jsxs("h3",{className:"text-base font-medium",children:[e.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-xs rounded-full h-5 w-5 inline-flex items-center justify-center mr-1.5",children:"4"}),a("Links")]})}),e.jsxs("div",{className:"p-3 space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx(c,{className:"text-sm font-medium",children:a("Bio Links")})}),e.jsxs("div",{className:"space-y-3",children:[s.config.links.map((t,r)=>e.jsx(g,{className:"p-3",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Link #",r+1]}),e.jsx(N,{type:"button",variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200 h-7 w-7 p-0",onClick:()=>{const o=[...s.config.links];o.splice(r,1),n("config",{...s.config,links:o})},children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:[e.jsx("path",{d:"M3 6h18"}),e.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),e.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-xs mb-1 block",children:a("Link Text")}),e.jsx(u,{value:t.text,onChange:o=>{const i=[...s.config.links];i[r].text=o.target.value,n("config",{...s.config,links:i})},className:"h-8 text-sm",placeholder:a("Enter link text")})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-xs mb-1 block",children:a("URL")}),e.jsx(u,{value:t.url,onChange:o=>{const i=[...s.config.links];i[r].url=o.target.value,n("config",{...s.config,links:i})},className:"h-8 text-sm",placeholder:a("https://example.com")})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-xs mb-1 block",children:a("Description")}),e.jsx(u,{value:t.description,onChange:o=>{const i=[...s.config.links];i[r].description=o.target.value,n("config",{...s.config,links:i})},className:"h-8 text-sm",placeholder:a("Enter description (optional)")})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-xs mb-1 block",children:a("Icon URL (optional)")}),e.jsx(he,{value:t.icon,onChange:o=>{const i=[...s.config.links];i[r].icon=o,n("config",{...s.config,links:i})},placeholder:a("Select icon"),showPreview:!0})]})]})},r)),e.jsxs(N,{type:"button",className:"w-full",onClick:()=>{const t=[...s.config.links];t.push({text:"",url:"",description:"",icon:""}),n("config",{...s.config,links:t})},children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 mr-1",children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"M12 5v14"})]}),a("Add Link")]})]})]})]}),e.jsxs(g,{children:[e.jsx("div",{className:"p-3 border-b bg-muted/30",children:e.jsxs("h3",{className:"text-base font-medium",children:[e.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-xs rounded-full h-5 w-5 inline-flex items-center justify-center mr-1.5",children:"5"}),a("Social Media")]})}),e.jsx("div",{className:"p-3",children:e.jsx(Ne,{social:s.config.social,onUpdate:(t,r)=>{n("config",{...s.config,social:{...s.config.social,[t]:r}})}})})]}),e.jsxs(g,{children:[e.jsx("div",{className:"p-3 border-b bg-muted/30",children:e.jsxs("h3",{className:"text-base font-medium",children:[e.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-xs rounded-full h-5 w-5 inline-flex items-center justify-center mr-1.5",children:"6"}),a("SEO Settings")]})}),e.jsx("div",{className:"p-3",children:e.jsx(ve,{seo:s.config.seo,onUpdate:(t,r)=>{n("config",{...s.config,seo:{...s.config.seo,[t]:r}})}})})]}),e.jsxs(g,{children:[e.jsx("div",{className:"p-3 border-b bg-muted/30",children:e.jsxs("h3",{className:"text-base font-medium",children:[e.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-xs rounded-full h-5 w-5 inline-flex items-center justify-center mr-1.5",children:"7"}),a("Copyright")]})}),e.jsxs("div",{className:"p-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{className:"text-sm",children:a("Show Copyright")}),e.jsx(fe,{checked:((A=s.config.copyright)==null?void 0:A.enabled)!==!1,onCheckedChange:t=>{n("config",{...s.config,copyright:{...s.config.copyright,enabled:t}})}})]}),((O=s.config.copyright)==null?void 0:O.enabled)!==!1&&e.jsxs("div",{children:[e.jsx(c,{className:"text-sm mb-1 block",children:a("Copyright Text")}),e.jsx(u,{value:((R=s.config.copyright)==null?void 0:R.text)||`© ${new Date().getFullYear()} All rights reserved.`,onChange:t=>{n("config",{...s.config,copyright:{...s.config.copyright,text:t.target.value}})},className:"h-9 text-sm",placeholder:a("© 2025 All rights reserved.")})]})]})]}),e.jsxs(g,{children:[e.jsx("div",{className:"p-3 border-b bg-muted/30",children:e.jsxs("h3",{className:"text-base font-medium",children:[e.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-xs rounded-full h-5 w-5 inline-flex items-center justify-center mr-1.5",children:"8"}),a("Analytics")]})}),e.jsx("div",{className:"p-3",children:e.jsx(ye,{analytics:s.config.analytics,onUpdate:(t,r)=>{n("config",{...s.config,analytics:{...s.config.analytics,[t]:r}})}})})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(g,{className:"sticky top-4 h-[calc(100vh-2rem)] overflow-hidden",children:[e.jsx("div",{className:"p-3 border-b bg-muted/30",children:e.jsx("h3",{className:"text-base font-medium",children:a("Live Preview")})}),e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800/50 rounded-b-lg overflow-hidden h-[calc(100%-3.5rem)]",children:e.jsx("div",{className:"flex justify-center h-full",children:e.jsx("div",{className:"w-full max-w-[400px] overflow-y-auto h-full shadow-lg rounded-lg",style:{overflowY:"auto",WebkitOverflowScrolling:"touch"},children:e.jsx(je,{data:s})})})})]})})]})]})}export{hs as default};

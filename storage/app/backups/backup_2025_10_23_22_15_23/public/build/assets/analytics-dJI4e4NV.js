import{r as v,j as e}from"./ui-DwAOVm1p.js";import{u as H,K as M,S as w,C as l,d as c,e as o,g as n,L as R,B as W,i as J,f as x}from"./app-BlWi7cIv.js";import{P as Q}from"./page-template-8tWNB1WX.js";import{D as E}from"./date-picker-DFYTG7KS.js";import{T as Z,a as ee,b as m,c as h}from"./tabs-D8y1ncs-.js";import{A as se}from"./arrow-left-DIS7QkEf.js";import{E as ae}from"./eye-BE9GWtQY.js";import{U as te}from"./users-WU9ta9Er.js";import{G as re}from"./globe-kYq37WGi.js";import{R as j,C as D,X as k,Y as C}from"./CartesianChart-CPQpRJy1.js";import{L as ie,a as le}from"./LineChart-DkPvVOaW.js";import{T as p,P as U,a as I,C as b}from"./PieChart-CThUPzNB.js";import{L as u,B as O,a as G}from"./BarChart-BkaPfpfa.js";import"./vendor-CxtKjBZA.js";import"./utils-DBYZG17H.js";import"./textarea-DmNeUOf1.js";import"./select-DV03FLtq.js";import"./index-upgrZYbo.js";import"./chevron-up-DMuWaAmJ.js";import"./react-country-flag.esm-U4UQv2PH.js";import"./language-DYlIyiUn.js";import"./sparkles-tvpsAjMk.js";import"./loader-circle-DUfirWOF.js";import"./copy-Btm1-TBN.js";import"./chevron-right-CTYpggVz.js";import"./cookie-consent-BF1mYY4f.js";import"./chart-column-CrjmBQBc.js";import"./briefcase-AuRykhaE.js";import"./credit-card-CWCbalqR.js";import"./dollar-sign-B5K61QeY.js";import"./mail-B928cX0J.js";import"./settings-CXB8R1cS.js";import"./message-square-BEKBBgPS.js";import"./calendar-Jlwl64Lp.js";import"./wallet-z8Vgl1na.js";import"./user-D7_XmPgu.js";import"./use-favicon-BHKlxAc6.js";import"./react-redux-c4ezPUJ-.js";import"./tiny-invariant-BaFNuDhB.js";function Ye(){var V,_,A,K;const{t:s}=H(),{bioLink:r,analytics:i,filters:f}=M().props,[y,B]=v.useState(f.start_date?new Date(f.start_date):new Date(i.startDate)),[N,S]=v.useState(f.end_date?new Date(f.end_date):new Date(i.endDate)),[g,T]=v.useState(!1),q=()=>{!y||!N||(T(!0),w.get(route("link-bio-builder.analytics",r.id),{start_date:y.toISOString().split("T")[0],end_date:N.toISOString().split("T")[0]},{preserveState:!0,onFinish:()=>T(!1)}))};v.useEffect(()=>{const a=setInterval(()=>{g||w.reload({only:["analytics"]})},3e5);return()=>clearInterval(a)},[g]);const d=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"],X=a=>{const t=new Date(a);return`${t.getMonth()+1}/${t.getDate()}`},L=((V=i.devices)==null?void 0:V.length)>0?i.devices.map((a,t)=>({name:a.device_type||"Unknown",value:a.count})):[{name:"No Data",value:1}],P=((_=i.referrers)==null?void 0:_.length)>0?i.referrers.map(a=>({name:a.referrer||"Direct",value:a.count})):[{name:"No Data",value:1}],$=((A=i.platforms)==null?void 0:A.length)>0?i.platforms.map(a=>({name:a.platform_name||"Unknown",value:a.count})):[{name:"No Data",value:1}],F=((K=i.browsers)==null?void 0:K.length)>0?i.browsers.map(a=>({name:a.browser_name||"Unknown",value:a.count})):[{name:"No Data",value:1}],Y=[{label:s("Back to Bio Links"),icon:e.jsx(se,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:()=>w.get(route("link-bio-builder.index"))}],z=[{title:s("Dashboard"),href:route("dashboard")},{title:s("Bio Link Builder"),href:route("link-bio-builder.index")},{title:(r==null?void 0:r.name)||"Bio Link",href:route("link-bio-builder.edit",r==null?void 0:r.id)},{title:s("Analytics")}];return e.jsx(Q,{title:`${r==null?void 0:r.name} - ${s("Analytics")}`,url:route("link-bio-builder.analytics",r==null?void 0:r.id),actions:Y,breadcrumbs:z,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(o,{className:"text-sm",children:s("Date Range")})}),e.jsx(n,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{children:s("Start Date")}),e.jsx(E,{selected:y,onSelect:B,onChange:a=>B(a)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{children:s("End Date")}),e.jsx(E,{selected:N,onSelect:S,onChange:a=>S(a)})]}),e.jsx(W,{onClick:q,disabled:g,children:s(g?"Loading...":"Apply")})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(l,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Page Views")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:i.pageViews})]}),e.jsx("div",{className:"rounded-full bg-blue-100 p-3 dark:bg-blue-900",children:e.jsx(ae,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})})]})})}),e.jsx(l,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Unique Visitors")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:i.uniqueVisitors})]}),e.jsx("div",{className:"rounded-full bg-purple-100 p-3 dark:bg-purple-900",children:e.jsx(te,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})})]})})}),e.jsx(l,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Link Type")}),e.jsx("h3",{className:"mt-2 text-lg font-bold",children:e.jsx(J,{variant:"outline",className:"capitalize",children:r.link_type})})]}),e.jsx("div",{className:"rounded-full bg-green-100 p-3 dark:bg-green-900",children:e.jsx(re,{className:"h-5 w-5 text-green-600 dark:text-green-400"})})]})})})]}),e.jsxs(Z,{defaultValue:"traffic",children:[e.jsxs(ee,{className:"mb-4 w-full justify-start overflow-x-auto",children:[e.jsx(m,{value:"traffic",children:s("Traffic")}),e.jsx(m,{value:"devices",children:s("Devices")}),e.jsx(m,{value:"platforms",children:s("Platforms")}),e.jsx(m,{value:"browsers",children:s("Browsers")}),e.jsx(m,{value:"referrers",children:s("Referrers")})]}),e.jsx(h,{value:"traffic",children:e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:s("Daily Page Views")}),e.jsx(x,{className:"text-xs",children:s("Page views over the selected time period")})]}),e.jsx(n,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(ie,{data:i.dailyPageViews||[],margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(k,{dataKey:"date",tickFormatter:X}),e.jsx(C,{}),e.jsx(p,{}),e.jsx(u,{}),e.jsx(le,{type:"monotone",dataKey:"views",name:"Page Views",stroke:"#8884d8",activeDot:{r:8}})]})})})})]})}),e.jsx(h,{value:"devices",children:e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:s("Device Types")}),e.jsx(x,{className:"text-xs",children:s("Breakdown of visitors by device type")})]}),e.jsx(n,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(U,{children:[e.jsx(I,{data:L,cx:"50%",cy:"50%",labelLine:!1,outerRadius:100,fill:"#8884d8",dataKey:"value",label:({name:a,percent:t})=>`${a}: ${(t*100).toFixed(0)}%`,children:L.map((a,t)=>e.jsx(b,{fill:d[t%d.length]},`cell-${t}`))}),e.jsx(p,{}),e.jsx(u,{})]})})})})]})}),e.jsx(h,{value:"platforms",children:e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:s("Operating Systems")}),e.jsx(x,{className:"text-xs",children:s("Breakdown of visitors by operating system")})]}),e.jsx(n,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(U,{children:[e.jsx(I,{data:$,cx:"50%",cy:"50%",labelLine:!1,outerRadius:100,fill:"#8884d8",dataKey:"value",label:({name:a,percent:t})=>`${a}: ${(t*100).toFixed(0)}%`,children:$.map((a,t)=>e.jsx(b,{fill:d[t%d.length]},`cell-${t}`))}),e.jsx(p,{}),e.jsx(u,{})]})})})})]})}),e.jsx(h,{value:"browsers",children:e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:s("Web Browsers")}),e.jsx(x,{className:"text-xs",children:s("Breakdown of visitors by web browser")})]}),e.jsx(n,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(O,{data:F,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(k,{dataKey:"name"}),e.jsx(C,{}),e.jsx(p,{}),e.jsx(u,{}),e.jsx(G,{dataKey:"value",name:"Visits",fill:"#8884d8",children:F.map((a,t)=>e.jsx(b,{fill:d[t%d.length]},`cell-${t}`))})]})})})})]})}),e.jsx(h,{value:"referrers",children:e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:s("Top Referrers")}),e.jsx(x,{className:"text-xs",children:s("Sources of traffic to your bio link")})]}),e.jsx(n,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(O,{data:P,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(k,{dataKey:"name"}),e.jsx(C,{}),e.jsx(p,{}),e.jsx(u,{}),e.jsx(G,{dataKey:"value",name:"Visits",fill:"#8884d8",children:P.map((a,t)=>e.jsx(b,{fill:d[t%d.length]},`cell-${t}`))})]})})})})]})})]})]})})}export{Ye as default};

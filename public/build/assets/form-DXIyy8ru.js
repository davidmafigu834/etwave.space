import{r as j,j as e}from"./ui-XtzbmeJx.js";import{P as Y}from"./page-template-l6fMhetb.js";import{u as H,K as R,L as o,I as h,B as m,S as N}from"./app-CHRIhyY0.js";import{T as V}from"./textarea-aJ3buVnx.js";import{S as p}from"./switch-Bs9N4aMe.js";import{C}from"./checkbox-DY0HpajK.js";import{S as G,a as W,b as Q,c as K,d as S}from"./select-DVebJzi_.js";import{b as w}from"./index-Zk2FuNHf.js";import{b as k}from"./index-Grq6z87q.js";import"./vendor-CxtKjBZA.js";import"./app-layout-Bpd3XWn2.js";import"./app-sidebar-layout-DTBrRaJF.js";import"./react-country-flag.esm-B3QM5-4S.js";import"./language-DYlIyiUn.js";import"./sparkles-CWM6veXP.js";import"./loader-circle-CU4vh_jx.js";import"./copy-_TD738Qf.js";import"./chevron-up-CWYfEUVP.js";import"./chevron-right-4OzdI5Hc.js";import"./language-switcher-DlUYSL3d.js";import"./globe-DnSDzBxp.js";import"./chart-column-C3hnsquQ.js";import"./briefcase-DFRvW6SB.js";import"./package-CVcIKtJX.js";import"./credit-card-D2Mnc2f1.js";import"./dollar-sign-CEEAnrcL.js";import"./mail-uU9WM_iR.js";import"./users-DVhUqNZg.js";import"./settings-D1jKjqmC.js";import"./message-square-CzRq4BMj.js";import"./calendar-CuyjcLRJ.js";import"./wallet-B8MIIno5.js";import"./shopping-bag-DIpJi4I3.js";import"./user-UtdwWo_w.js";import"./arrow-left-hltsWyVL.js";import"./use-favicon-DDTtBI2L.js";import"./cookie-consent-KmXGJKj8.js";import"./utils-CCVAIzGD.js";import"./index-C0g6bluz.js";import"./borehole-drilling-DO2azVu5.js";import"./SocialIcon-qOmKQ0wb.js";function $e({plan:t,hasDefaultPlan:z=!1,otherDefaultPlanExists:J=!1,availableAddons:y=[]}){const{t:s}=H(),{errors:c}=R().props,[A,g]=j.useState(!1),[L,F]=j.useState(""),[T,P]=j.useState(""),[B,q]=j.useState(""),[b,D]=j.useState(""),u=!!t,I=u&&(t==null?void 0:t.price)===0,[r,l]=j.useState({name:(t==null?void 0:t.name)||"",price:(t==null?void 0:t.price)||0,yearly_price:(t==null?void 0:t.yearly_price)||0,duration:(t==null?void 0:t.duration)||"monthly",description:(t==null?void 0:t.description)||"",business:(t==null?void 0:t.business)||0,bio_links:(t==null?void 0:t.bio_links)||0,max_users:(t==null?void 0:t.max_users)||0,storage_limit:(t==null?void 0:t.storage_limit)||0,enable_custdomain:(t==null?void 0:t.enable_custdomain)||"off",enable_custsubdomain:(t==null?void 0:t.enable_custsubdomain)||"off",pwa_business:(t==null?void 0:t.pwa_business)||"off",enable_chatgpt:(t==null?void 0:t.enable_chatgpt)||"off",themes:Array.isArray(t==null?void 0:t.themes)?t.themes:t!=null&&t.themes?[t.themes]:[],bio_links_themes:Array.isArray(t==null?void 0:t.bio_links_themes)?t.bio_links_themes:t!=null&&t.bio_links_themes?[t.bio_links_themes]:[],addons:Array.isArray(t==null?void 0:t.addons)?t.addons:[],features:(t==null?void 0:t.features)||{},is_trial:(t==null?void 0:t.is_trial)||null,trial_day:(t==null?void 0:t.trial_day)||0,is_plan_enable:(t==null?void 0:t.is_plan_enable)||"on",is_default:(t==null?void 0:t.is_default)||!1}),_=i=>{const{name:a,value:n}=i.target;l(d=>({...d,[a]:n}))},$=(i,a)=>{l(n=>({...n,[i]:a}))},M=(i,a)=>{l(n=>({...n,[i]:a?"on":"off"}))},E=i=>{l(a=>({...a,is_default:i}))},f=(i,a)=>{l(n=>({...n,features:{...n.features,[i]:a}}))},O=(i,a)=>{l(n=>{const d=n.features.business_template_sections||[],x=a?[...d,i]:d.filter(v=>v!==i);return{...n,features:{...n.features,business_template_sections:x}}})},U=i=>{if(i.preventDefault(),g(!0),!r.name.trim()){alert(s("Plan name is required")),g(!1);return}if(!r.duration){alert(s("Plan type is required")),g(!1);return}if((r.duration==="monthly"||r.duration==="both")&&r.price!==0&&(r.price<=0||!r.price)){alert(s("Monthly price must be greater than 0")),g(!1);return}if((r.duration==="yearly"||r.duration==="both")&&r.yearly_price!==0&&(r.yearly_price<=0||!r.yearly_price)){alert(s("Yearly price is required and must be greater than 0 for yearly/both plans")),g(!1);return}const a={...r,price:parseFloat(r.price)||0,yearly_price:r.duration==="yearly"||r.duration==="both"?parseFloat(r.yearly_price)||0:null,business:parseInt(r.business)||0,bio_links:parseInt(r.bio_links)||0,max_users:parseInt(r.max_users)||0,storage_limit:parseFloat(r.storage_limit)||0,trial_day:r.trial_day?parseInt(r.trial_day):0,themes:Array.isArray(r.themes)?r.themes:[],bio_links_themes:Array.isArray(r.bio_links_themes)?r.bio_links_themes:[],addons:Array.isArray(r.addons)?r.addons:[],features:r.features||{}};u?N.put(route("plans.update",t.id),a,{onFinish:()=>g(!1)}):N.post(route("plans.store"),a,{onFinish:()=>g(!1)})};return e.jsx(Y,{title:s(u?"Edit Plan":"Create Plan"),description:s(u?"Update subscription plan details":"Add a new subscription plan"),url:u?route("plans.update",t.id):"/plans/create",breadcrumbs:[{title:s("Dashboard"),href:route("dashboard")},{title:s("Plans"),href:route("plans.index")},{title:s(u?"Edit Plan":"Create Plan")}],children:e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("form",{onSubmit:U,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"name",children:s("Plan Name")}),e.jsx(h,{id:"name",name:"name",value:r.name,onChange:_,required:!0}),c.name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.name})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"duration",children:s("Plan Type")}),e.jsxs(G,{value:r.duration,onValueChange:i=>$("duration",i),children:[e.jsx(W,{children:e.jsx(Q,{placeholder:s("Select plan type")})}),e.jsxs(K,{children:[e.jsx(S,{value:"monthly",children:s("Monthly")}),e.jsx(S,{value:"yearly",children:s("Yearly")}),e.jsx(S,{value:"both",children:s("Both")})]})]})]}),!(u&&I)&&(r.duration==="monthly"||r.duration==="both")&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"price",children:s("Monthly Price")}),e.jsx(h,{id:"price",name:"price",type:"number",step:"0.01",value:r.price,onChange:_,required:!0}),c.price&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.price}),r.price>0&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[s("Monthly price"),": $",Number(r.price).toFixed(2)]})]}),!(u&&I)&&(r.duration==="yearly"||r.duration==="both")&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"yearly_price",children:s("Yearly Price")}),e.jsx(h,{id:"yearly_price",name:"yearly_price",type:"number",step:"0.01",value:r.yearly_price,onChange:_,required:!0}),c.yearly_price&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.yearly_price}),e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[s("Yearly price"),": $",Number(r.yearly_price).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"description",children:s("Description")}),e.jsx(V,{id:"description",name:"description",value:r.description,onChange:_,rows:3})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"business",children:s("Number of Businesses")}),e.jsx(h,{id:"business",name:"business",type:"number",value:r.business,onChange:_,required:!0}),c.business&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.business})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"bio_links",children:s("Number of Bio Links")}),e.jsx(h,{id:"bio_links",name:"bio_links",type:"number",value:r.bio_links,onChange:_,required:!0}),c.bio_links&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.bio_links})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"max_users",children:s("Maximum Users")}),e.jsx(h,{id:"max_users",name:"max_users",type:"number",value:r.max_users,onChange:_,required:!0}),c.max_users&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.max_users})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"storage_limit",children:s("Storage Limit (GB)")}),e.jsx(h,{id:"storage_limit",name:"storage_limit",type:"number",step:"0.01",value:r.storage_limit,onChange:_,required:!0}),c.storage_limit&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.storage_limit})]}),r.is_trial==="on"&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"trial_day",children:s("Trial Days")}),e.jsx(h,{id:"trial_day",name:"trial_day",type:"number",value:r.trial_day,onChange:_,required:!0})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[e.jsx("h3",{className:"font-medium",children:s("Features")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{htmlFor:"custom_domain",children:s("Custom Domain")}),e.jsx(p,{id:"custom_domain",checked:r.features.custom_domain||!1,onCheckedChange:i=>f("custom_domain",i)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{htmlFor:"custom_subdomain",children:s("Custom Subdomain")}),e.jsx(p,{id:"custom_subdomain",checked:r.features.custom_subdomain||!1,onCheckedChange:i=>f("custom_subdomain",i)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{htmlFor:"pwa_support",children:s("PWA Support")}),e.jsx(p,{id:"pwa_support",checked:r.features.pwa_support||!1,onCheckedChange:i=>f("pwa_support",i)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{htmlFor:"ai_integration",children:s("AI Integration")}),e.jsx(p,{id:"ai_integration",checked:r.features.ai_integration||!1,onCheckedChange:i=>f("ai_integration",i)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{htmlFor:"password_protection",children:s("Password Protection")}),e.jsx(p,{id:"password_protection",checked:r.features.password_protection||!1,onCheckedChange:i=>f("password_protection",i)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{htmlFor:"is_trial",children:s("Enable Trial")}),e.jsx(p,{id:"is_trial",checked:r.is_trial==="on",onCheckedChange:i=>M("is_trial",i)})]})]}),e.jsxs("div",{children:[e.jsx(o,{children:s("Business Template Sections")}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:s("Select which sections users can access in their business templates. Leave empty to allow all sections.")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{placeholder:s("Search sections..."),value:B,onChange:i=>q(i.target.value),className:"flex-1"}),e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>q(""),children:s("Clear")}),e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>{const i=Object.keys({header:s("Header & Logo"),about:s("About Section"),contact:s("Contact Information"),social:s("Social Media Links"),services:s("Services & Offerings"),portfolio:s("Portfolio & Gallery"),videos:s("Videos"),youtube:s("YouTube Channel"),business_hours:s("Business Hours"),appointments:s("Appointment Booking"),testimonials:s("Testimonials & Reviews"),google_map:s("Location & Maps"),app_download:s("App Download Links"),contact_form:s("Contact Form"),whatsapp:s("WhatsApp Call-to-Action"),custom_html:s("Custom HTML Content"),qr_share:s("QR Code Sharing"),language:s("Language Settings"),thank_you:s("Thank You Message"),seo:s("SEO Settings"),pixels:s("Analytics & Pixels"),copyright:s("Copyright Information")});l(a=>({...a,features:{...a.features,business_template_sections:i}}))},children:s("Select All")}),e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>{l(i=>({...i,features:{...i.features,business_template_sections:[]}}))},children:s("Unselect All")})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-lg p-3",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-2",children:Object.entries({header:s("Header & Logo"),about:s("About Section"),contact:s("Contact Information"),social:s("Social Media Links"),services:s("Services & Offerings"),portfolio:s("Portfolio & Gallery"),videos:s("Videos"),youtube:s("YouTube Channel"),business_hours:s("Business Hours"),appointments:s("Appointment Booking"),testimonials:s("Testimonials & Reviews"),google_map:s("Location & Maps"),app_download:s("App Download Links"),contact_form:s("Contact Form"),whatsapp:s("WhatsApp Call-to-Action"),custom_html:s("Custom HTML Content"),qr_share:s("QR Code Sharing"),language:s("Language Settings"),thank_you:s("Thank You Message"),seo:s("SEO Settings"),pixels:s("Analytics & Pixels"),copyright:s("Copyright Information")}).filter(([i,a])=>a.toLowerCase().includes(B.toLowerCase())).map(([i,a])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{id:"section_".concat(i),checked:(r.features.business_template_sections||[]).includes(i),onCheckedChange:n=>O(i,n)}),e.jsx("label",{htmlFor:"section_".concat(i),className:"text-sm cursor-pointer",children:s(a)})]},i))})})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[e.jsx("h3",{className:"font-medium",children:s("Business Templates")}),e.jsxs("div",{children:[e.jsxs(o,{children:[s("Available Business Templates")," (",Array.isArray(r.themes)?r.themes.length:0,"/",w.length,")"]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:s("Select business templates to include in this plan. Leave empty to allow all templates.")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{placeholder:s("Search business themes..."),value:L,onChange:i=>F(i.target.value),className:"flex-1"}),e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>F(""),children:s("Clear")}),e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>l(i=>({...i,themes:w.map(a=>a.value)})),children:s("Select All")}),e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>l(i=>({...i,themes:[]})),children:s("Unselect All")})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-lg p-3",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-2",children:w.filter(i=>i.label.toLowerCase().includes(L.toLowerCase())).map((i,a)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{id:i.value,checked:Array.isArray(r.themes)&&r.themes.includes(i.value),onCheckedChange:n=>{const d=Array.isArray(r.themes)?r.themes:[];l(n?x=>({...x,themes:[...d,i.value]}):x=>({...x,themes:d.filter(v=>v!==i.value)}))}}),e.jsxs("label",{htmlFor:i.value,className:"text-sm cursor-pointer",children:["Theme ",a+1,": ",i.label]})]},i.value))})})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[e.jsx("h3",{className:"font-medium",children:s("Bio Links Templates")}),e.jsxs("div",{children:[e.jsxs(o,{children:[s("Available Bio Links Templates")," (",Array.isArray(r.bio_links_themes)?r.bio_links_themes.length:0,"/",k.length,")"]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:s("Select bio links templates to include in this plan. Leave empty to allow all templates.")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{placeholder:s("Search bio themes..."),value:T,onChange:i=>P(i.target.value),className:"flex-1"}),e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>P(""),children:s("Clear")}),e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>l(i=>({...i,bio_links_themes:k.map(a=>a.value)})),children:s("Select All")}),e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>l(i=>({...i,bio_links_themes:[]})),children:s("Unselect All")})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-lg p-3",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-2",children:k.filter(i=>i.label.toLowerCase().includes(T.toLowerCase())).map((i,a)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{id:"bio_".concat(i.value),checked:Array.isArray(r.bio_links_themes)&&r.bio_links_themes.includes(i.value),onCheckedChange:n=>{const d=Array.isArray(r.bio_links_themes)?r.bio_links_themes:[];l(n?x=>({...x,bio_links_themes:[...d,i.value]}):x=>({...x,bio_links_themes:d.filter(v=>v!==i.value)}))}}),e.jsxs("label",{htmlFor:"bio_".concat(i.value),className:"text-sm cursor-pointer",children:["Theme ",k.indexOf(i)+1,": ",i.label]})]},"bio_".concat(i.value)))})})]})]})]}),y.length>0&&e.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[e.jsx("h3",{className:"font-medium",children:s("Addons")}),e.jsxs("div",{children:[e.jsxs(o,{children:[s("Available Addons")," (",Array.isArray(r.addons)?r.addons.length:0,"/",y.length,")"]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:s("Select addons to include in this plan. Only selected addons will be available to users with this plan.")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{placeholder:s("Search addons..."),value:b,onChange:i=>D(i.target.value),className:"flex-1"}),e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>D(""),children:s("Clear")}),e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>l(i=>({...i,addons:y.map(a=>a.package_name)})),children:s("Select All")}),e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>l(i=>({...i,addons:[]})),children:s("Unselect All")})]}),e.jsxs("div",{className:"max-h-64 overflow-y-auto border rounded-lg p-3",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-2",children:y.filter(i=>i.name.toLowerCase().includes(b.toLowerCase())||i.description.toLowerCase().includes(b.toLowerCase())||i.category.toLowerCase().includes(b.toLowerCase())).map(i=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{id:"addon_".concat(i.id),checked:Array.isArray(r.addons)&&r.addons.includes(i.package_name),onCheckedChange:a=>{const n=Array.isArray(r.addons)?r.addons:[];l(a?d=>({...d,addons:[...n,i.package_name]}):d=>({...d,addons:n.filter(x=>x!==i.package_name)}))}}),e.jsx("label",{htmlFor:"addon_".concat(i.id),className:"text-sm cursor-pointer",children:i.name})]},"addon_".concat(i.id)))}),y.filter(i=>i.name.toLowerCase().includes(b.toLowerCase())||i.description.toLowerCase().includes(b.toLowerCase())||i.category.toLowerCase().includes(b.toLowerCase())).length===0&&e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:s(b?"No addons found matching your search.":"No addons available.")})]})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[e.jsx("h3",{className:"font-medium",children:s("Settings")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{htmlFor:"is_plan_enable",children:s("Active")}),e.jsx(p,{id:"is_plan_enable",checked:r.is_plan_enable==="on",onCheckedChange:i=>M("is_plan_enable",i)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"is_default",children:s("Default Plan")}),(u?!(t!=null&&t.is_default):z)&&e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:s("Setting this as default will remove default status from the current default plan.")})]}),e.jsx(p,{id:"is_default",checked:r.is_default,onCheckedChange:E})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>N.get(route("plans.index")),children:s("Cancel")}),e.jsx(m,{type:"submit",disabled:A,children:s(A?u?"Updating...":"Creating...":u?"Update Plan":"Create Plan")})]})]})})})}export{$e as default};

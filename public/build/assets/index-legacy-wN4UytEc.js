!function(){function e(l){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(l)}function l(e,l){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);l&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,t)}return n}function n(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?l(Object(a),!0).forEach(function(l){t(e,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(a,l))})}return e}function t(l,n,t){return(n=function(l){var n=function(l,n){if("object"!=e(l)||!l)return l;var t=l[Symbol.toPrimitive];if(void 0!==t){var a=t.call(l,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(l)}(l,"string");return"symbol"==e(n)?n:n+""}(n))in l?Object.defineProperty(l,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):l[n]=t,l}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,l,n="function"==typeof Symbol?Symbol:{},t=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function u(n,t,a,o){var u=t&&t.prototype instanceof s?t:s,i=Object.create(u.prototype);return r(i,"_invoke",function(n,t,a){var r,o,u,s=0,i=a||[],p=!1,y={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(l,n){return r=l,o=0,u=e,y.n=n,c}};function d(n,t){for(o=n,u=t,l=0;!p&&s&&!a&&l<i.length;l++){var a,r=i[l],d=y.p,g=r[2];n>3?(a=g===t)&&(u=r[(o=r[4])?5:(o=3,3)],r[4]=r[5]=e):r[0]<=d&&((a=n<2&&d<r[1])?(o=0,y.v=t,y.n=r[1]):d<g&&(a=n<3||r[0]>t||t>g)&&(r[4]=n,r[5]=t,y.n=g,o=0))}if(a||n>1)return c;throw p=!0,t}return function(a,i,g){if(s>1)throw TypeError("Generator is already running");for(p&&1===i&&d(i,g),o=i,u=g;(l=o<2?e:u)||!p;){r||(o?o<3?(o>1&&(y.n=-1),d(o,u)):y.n=u:y.v=u);try{if(s=2,r){if(o||(a="next"),l=r[a]){if(!(l=l.call(r,u)))throw TypeError("iterator result is not an object");if(!l.done)return l;u=l.value,o<2&&(o=0)}else 1===o&&(l=r.return)&&l.call(r),o<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),o=1);r=e}else if((l=(p=y.n<0)?u:n.call(t,y))!==c)break}catch(l){r=e,o=1,u=l}finally{s=1}}return{value:l,done:p}}}(n,a,o),!0),i}var c={};function s(){}function i(){}function p(){}l=Object.getPrototypeOf;var y=[][t]?l(l([][t]())):(r(l={},t,function(){return this}),l),d=p.prototype=s.prototype=Object.create(y);function g(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,r(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return i.prototype=p,r(d,"constructor",p),r(p,"constructor",i),i.displayName="GeneratorFunction",r(p,o,"GeneratorFunction"),r(d),r(d,o,"Generator"),r(d,t,function(){return this}),r(d,"toString",function(){return"[object Generator]"}),(a=function(){return{w:u,m:g}})()}function r(e,l,n,t){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}r=function(e,l,n,t){function o(l,n){r(e,l,function(e){return this._invoke(l,n,e)})}l?a?a(e,l,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[l]=n:(o("next",0),o("throw",1),o("return",2))},r(e,l,n,t)}function o(e,l,n,t,a,r,o){try{var u=e[r](o),c=u.value}catch(e){return void n(e)}u.done?l(c):Promise.resolve(c).then(t,a)}function u(e,l){return function(e){if(Array.isArray(e))return e}(e)||function(e,l){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,r,o,u=[],c=!0,s=!1;try{if(r=(n=n.call(e)).next,0===l){if(Object(n)!==n)return;c=!1}else for(;!(c=(t=r.call(n)).done)&&(u.push(t.value),u.length!==l);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return u}}(e,l)||function(e,l){if(e){if("string"==typeof e)return c(e,l);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,l):void 0}}(e,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,l){(null==l||l>e.length)&&(l=e.length);for(var n=0,t=Array(l);n<l;n++)t[n]=e[n];return t}System.register(["./ui-legacy-Df76W54t.js","./PageCrudWrapper-legacy-C9KBP6IA.js","./switch-legacy-t_Z_CqVY.js","./app-legacy-Ct73uABr.js","./i18n-legacy-tKfG81Pa.js","./vendor-legacy-DNs0y6R6.js","./page-template-legacy-et8O2PIf.js","./app-layout-legacy-BbvocKkk.js","./app-sidebar-layout-legacy-DjGq5XwB.js","./textarea-legacy-DhpF_zd4.js","./select-legacy-DJ7KqnGK.js","./index-legacy-BrP_l-Mm.js","./chevron-up-legacy-C3cU62dz.js","./react-country-flag.esm-legacy-C8Qm_EdK.js","./language-legacy-CPKUrWoi.js","./sparkles-legacy-DXvM6dmp.js","./loader-circle-legacy-BAWBSNTr.js","./copy-legacy-CyY0zsNU.js","./chevron-right-legacy-D5fLjpJA.js","./language-switcher-legacy-BfnK_KLk.js","./globe-legacy-D167FJxM.js","./chart-column-legacy-xaxxIszB.js","./briefcase-legacy-fFmYMQCB.js","./package-legacy-BXVFs7qu.js","./credit-card-legacy-oVK_vO6r.js","./dollar-sign-legacy-De4_eAPE.js","./mail-legacy-DchUy0NJ.js","./users-legacy-CIHfY2gt.js","./settings-legacy-BXGYMxCJ.js","./message-square-legacy-CVHCr5Dt.js","./calendar-legacy-DdDaxKxU.js","./wallet-legacy-DOeLcv8c.js","./shopping-bag-legacy-BRpvr-V3.js","./building-2-legacy-Dj3cFBKu.js","./user-legacy-cMI1gv9J.js","./arrow-left-legacy-CqQR3bfj.js","./use-favicon-legacy-CbpIBPd5.js","./cookie-consent-legacy-BD_speLP.js","./pagination-legacy-C5GfrDQP.js","./search-and-filter-bar-legacy-CmRxlo_P.js","./date-picker-legacy-Cpc8-hXR.js","./utils-legacy-4AQaPo1J.js","./filter-legacy-BAhWbv77.js","./list-legacy-D-kIW24o.js","./CrudTable-legacy-CnYddiyU.js","./table-legacy-DMkF8XyN.js","./activity-legacy-qEFGj3ED.js","./unlink-legacy-B-z4dptl.js","./arrow-up-legacy-pwFWK0Nm.js","./arrow-right-legacy-Cfkqbzln.js","./arrow-up-down-legacy-DADQmmAj.js","./arrow-up-right-legacy-DhqDNMSc.js","./award-legacy-1YF8hGuu.js","./banknote-legacy-DvdjeEGr.js","./bell-ring-legacy-C_ZRzTvz.js","./bot-legacy-Cq7Fvcb_.js","./crown-legacy-BOlfPL-z.js","./building-legacy-Cd7zlonT.js","./youtube-legacy-CFlSkXto.js","./camera-legacy-Dd-Wp0pf.js","./wrench-legacy-DDEScOmL.js","./chart-pie-legacy-D_jHmHdg.js","./chevron-left-legacy-CBzzFiYy.js","./circle-check-big-legacy-Dccr4Wi1.js","./circle-check-legacy-BQGACsTH.js","./circle-help-legacy-_6ND9uDH.js","./pencil-line-legacy-C-iBrfpN.js","./circle-x-legacy-BdJQBC_9.js","./circle-legacy-BZU12gvH.js","./clock-legacy-OYgw2bvN.js","./code-legacy-CD7E-MSX.js","./indian-rupee-legacy-DvIWk5Aw.js","./compass-legacy-Cib5yt8q.js","./download-legacy-DkH8e7Wo.js","./droplet-legacy-BKwjobrI.js","./ellipsis-vertical-legacy-j4YSGbwm.js","./ellipsis-legacy-DBG1h6S6.js","./external-link-legacy-ByGyBoEL.js","./eye-off-legacy-BsSxS_Hc.js","./eye-legacy-Bjr5hUAR.js","./facebook-legacy-DrnaedmE.js","./power-legacy-Dv2Ix3iz.js","./graduation-cap-legacy-DUNA-Z3b.js","./navigation-legacy-BtmYfG94.js","./grip-vertical-legacy-4mYFDKFJ.js","./hammer-legacy-kJY1ntOM.js","./hard-drive-legacy-C2FYzfP2.js","./heart-legacy-D0LbDgyZ.js","./house-legacy-CsiLg80O.js","./instagram-legacy-CXTRGjkL.js","./lock-open-legacy-DtJ2AF9u.js","./layers-legacy-B_4hYWjh.js","./leaf-legacy-_8yl_EOv.js","./lightbulb-legacy-C1U_GpYo.js","./link-2-legacy-ChlCC2ap.js","./linkedin-legacy-iG5PF7m5.js","./lock-legacy-CiAXJP-P.js","./map-pin-legacy-C8q_6w13.js","./menu-legacy-D4E1bl_9.js","./message-circle-legacy-xY-4Lg5Y.js","./monitor-legacy-zlm-zjjO.js","./pencil-legacy-BhqsOyIl.js","./shield-check-legacy-DU0LL7Mi.js","./phone-legacy-Bw_bEeHz.js","./play-legacy-go6--FBd.js","./qr-code-legacy-BXob85p2.js","./quote-legacy-CA3k2GyX.js","./refresh-cw-legacy-ByjSkNji.js","./rocket-legacy-BfeBCF9C.js","./send-legacy-CbzSH1sf.js","./server-legacy-DQuN1-Ol.js","./share-2-legacy-D3gH8VZe.js","./shield-legacy-DQ5qNese.js","./shopping-cart-legacy-BNMDMyko.js","./smartphone-legacy-HSi3blOa.js","./square-pen-legacy-Bg3q-gjR.js","./star-legacy-H9DVfP6_.js","./sticky-note-legacy-9f1os5Gw.js","./store-legacy-Ca4Gm8Mw.js","./sun-medium-legacy-Dqp_z2t2.js","./tag-legacy-DfJrCzG8.js","./target-legacy-DTCKFHXT.js","./ticket-legacy-vDMhl5Iy.js","./trash-2-legacy-ZzhgHTxS.js","./trending-up-legacy-mdgqrkTY.js","./twitter-legacy-ok4-c2gy.js","./type-legacy-z3nQea3c.js","./user-x-legacy-gG1nfv5r.js","./video-legacy-CpBS_ohJ.js","./waves-legacy-0TsdQcdR.js","./webhook-legacy-MypP2g6T.js","./wifi-legacy-NUNRk_Rd.js","./zap-legacy-B-66XYlF.js","./CrudFormModal-legacy-Ba-bBMtP.js","./radio-group-legacy-DcsT9vco.js","./checkbox-legacy-w9Z93p4k.js","./scroll-area-legacy-BQLfOKaF.js","./CrudDeleteModal-legacy-BjIGkHEP.js"],function(e,l){"use strict";var t,r,c,s,i,p,y,d,g;return{setters:[function(e){t=e.R,r=e.r,c=e.j},function(e){s=e.P},function(e){i=e.S},function(e){p=e.t,y=e.u,d=e.K},function(e){g=e.t},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){e("default",function(){var e=y().t,l=d().props.flash,t=u(r.useState(m),2),a=t[0],o=t[1];r.useEffect(function(){null!=l&&l.success&&p.success(l.success),null!=l&&l.error&&p.error(l.error)},[l]),r.useEffect(function(){var l;o(n(n({},m),{},{table:n(n({},m.table),{},{columns:m.table.columns.map(function(l){return n(n({},l),{},{label:e(l.label)})})}),form:n(n({},m.form),{},{fields:m.form.fields.map(function(l){return n(n({},l),{},{label:e(l.label),placeholder:l.placeholder?e(l.placeholder):void 0,options:l.options?l.options.map(function(l){return n(n({},l),{},{label:e(l.label)})}):void 0})})}),filters:null===(l=m.filters)||void 0===l?void 0:l.map(function(l){return n(n({},l),{},{label:e(l.label),options:l.options?l.options.map(function(l){return n(n({},l),{},{label:e(l.label)})}):void 0})}),hooks:{beforeCreate:function(e){return e.code_type||(e.code_type="manual"),void 0!==e.status&&null!==e.status||(e.status=!0),e.minimum_spend&&(e.minimum_spend=parseFloat(e.minimum_spend)),e.maximum_spend&&(e.maximum_spend=parseFloat(e.maximum_spend)),e.discount_amount&&(e.discount_amount=parseFloat(e.discount_amount)),e.use_limit_per_coupon&&(e.use_limit_per_coupon=parseInt(e.use_limit_per_coupon)),e.use_limit_per_user&&(e.use_limit_per_user=parseInt(e.use_limit_per_user)),e},beforeUpdate:function(e){return void 0!==e.status&&null!==e.status||(e.status=!0),e.minimum_spend&&(e.minimum_spend=parseFloat(e.minimum_spend)),e.maximum_spend&&(e.maximum_spend=parseFloat(e.maximum_spend)),e.discount_amount&&(e.discount_amount=parseFloat(e.discount_amount)),e.use_limit_per_coupon&&(e.use_limit_per_coupon=parseInt(e.use_limit_per_coupon)),e.use_limit_per_user&&(e.use_limit_per_user=parseInt(e.use_limit_per_user)),e}}}))},[e]);var i=[{title:e("Dashboard"),href:route("dashboard")},{title:e("Coupons")}];return c.jsx(s,{config:a,url:"/coupons",breadcrumbs:i})});var l=function(e){var l=e.initialValue,n=e.rowId,r=u(t.useState(l),2),c=r[0],s=r[1],y=function(){var e,l=(e=a().m(function e(){var l,t,r,o,u;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch(route("coupons.toggle-status",n),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(null===(l=document.querySelector('meta[name="csrf-token"]'))||void 0===l?void 0:l.getAttribute("content"))||"",Accept:"application/json"}});case 1:if(!(t=e.v).ok){e.n=3;break}return e.n=2,t.json();case 2:r=e.v,s(r.status),p.success(r.message||"Status updated successfully"),e.n=5;break;case 3:return e.n=4,t.text();case 4:o=e.v,console.error("Error response:",t.status,o),p.error("Failed to update status: ".concat(t.status));case 5:e.n=7;break;case 6:e.p=6,u=e.v,console.error("Network error:",u),p.error("Network error updating status");case 7:return e.a(2)}},e,null,[[0,6]])}),function(){var l=this,n=arguments;return new Promise(function(t,a){var r=e.apply(l,n);function u(e){o(r,t,a,u,c,"next",e)}function c(e){o(r,t,a,u,c,"throw",e)}u(void 0)})});return function(){return l.apply(this,arguments)}}();return t.createElement("div",{className:"flex items-center justify-center"},[t.createElement(i,{key:"status-switch",checked:c,onCheckedChange:y})])},m={entity:{name:"coupons",endpoint:route("coupons.index"),permissions:{view:"view-coupons",create:"create-coupons",edit:"create-coupons",delete:"delete-coupons"}},modalSize:"4xl",description:g("Manage discount coupons and promotional codes"),table:{columns:[{key:"name",label:g("Name"),sortable:!0},{key:"type",label:g("Type"),sortable:!0,render:function(e){return g("percentage"===e?"Percentage":"Flat Amount")}},{key:"minimum_spend",label:g("Min Spend"),render:function(e){var l;return e?(null===(l=window.appSettings)||void 0===l?void 0:l.formatCurrency(e))||"$".concat(parseFloat(e).toFixed(2)):"-"}},{key:"maximum_spend",label:g("Max Spend"),render:function(e){var l;return e?(null===(l=window.appSettings)||void 0===l?void 0:l.formatCurrency(e))||"$".concat(parseFloat(e).toFixed(2)):"-"}},{key:"discount_amount",label:g("Discount"),render:function(e,l){var n,t=parseFloat(e);return"percentage"===l.type?"".concat(t,"%"):(null===(n=window.appSettings)||void 0===n?void 0:n.formatCurrency(t))||"$".concat(t.toFixed(2))}},{key:"use_limit_per_coupon",label:g("Coupon Limit"),render:function(e){return e||g("Unlimited")}},{key:"use_limit_per_user",label:g("User Limit"),render:function(e){return e||g("Unlimited")}},{key:"expiry_date",label:g("Expiry Date"),sortable:!0,render:function(e){return"".concat(window.appSettings.formatDateTime(e,!1))}},{key:"code",label:g("Code"),sortable:!0},{key:"status",label:g("Status"),render:function(e,n){return t.createElement(l,{initialValue:!!e,rowId:n.id})}}],actions:[{label:g("View Details"),icon:"Eye",action:"view-details",href:function(e){return route("coupons.show",e.id)},className:"text-blue-500"},{label:g("Edit"),icon:"Edit",action:"edit",className:"text-amber-500"},{label:g("Delete"),icon:"Trash2",action:"delete",className:"text-red-500"}]},search:{enabled:!0,placeholder:g("Search coupons..."),fields:["name","code"]},filters:[{key:"type",label:g("Type"),type:"select",options:[{value:"all",label:g("All Types")},{value:"percentage",label:g("Percentage")},{value:"flat",label:g("Flat Amount")}]},{key:"status",label:g("Status"),type:"select",options:[{value:"all",label:g("All Status")},{value:"1",label:g("Active")},{value:"0",label:g("Inactive")}]}],form:{fields:[{name:"name",label:g("Coupon Name"),type:"text",required:!0,colSpan:12,placeholder:g("Enter coupon name")},{name:"type",label:g("Discount Type"),type:"select",required:!0,colSpan:6,options:[{value:"percentage",label:g("Percentage (%)")},{value:"flat",get label(){var e;return"".concat(g("Fixed Amount")," (").concat((null===(e=window)||void 0===e||null===(e=e.appSettings)||void 0===e||null===(e=e.currencySettings)||void 0===e?void 0:e.currencySymbol)||"$",")")}}]},{name:"discount_amount",label:g("Discount Value"),type:"number",required:!0,colSpan:6,min:0,max:99,step:.01,placeholder:g("Enter value")},{name:"code_type",label:g("Code Generation"),type:"radio",required:!0,colSpan:12,options:[{value:"manual",label:g("Manual Entry")},{value:"auto",label:g("Auto Generate")}],defaultValue:"manual"},{name:"code",label:g("Coupon Code"),type:"custom",colSpan:12,render:function(e,l,n){var a="auto"===l.code_type;return t.createElement("div",{className:"space-y-2"},[t.createElement("div",{className:a?"flex gap-2":"",key:"input-group"},a?[t.createElement("input",{key:"code-input",type:"text",value:l.code||"",onChange:function(e){return n("code",e.target.value.toUpperCase())},placeholder:g("Click generate to create code"),className:"flex-1 px-3 py-2 border rounded-md"}),t.createElement("button",{key:"generate-btn",type:"button",onClick:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",l="",t=0;t<10;t++)l+=e.charAt(Math.floor(36*Math.random()));n("code",l)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"},g("Generate"))]:[t.createElement("input",{key:"code-input-manual",type:"text",value:l.code||"",onChange:function(e){return n("code",e.target.value.toUpperCase())},placeholder:g("Enter coupon code"),className:"w-full px-3 py-2 border rounded-md"})])])}},{name:"minimum_spend",get label(){var e;return"".concat(g("Minimum Spend")," (").concat((null===(e=window)||void 0===e||null===(e=e.appSettings)||void 0===e||null===(e=e.currencySettings)||void 0===e?void 0:e.currencySymbol)||"$",")")},type:"number",colSpan:6,min:0,step:.01,placeholder:g("Optional")},{name:"maximum_spend",get label(){var e;return"".concat(g("Maximum Spend")," (").concat((null===(e=window)||void 0===e||null===(e=e.appSettings)||void 0===e||null===(e=e.currencySettings)||void 0===e?void 0:e.currencySymbol)||"$",")")},type:"number",colSpan:6,min:0,step:.01,placeholder:g("Optional")},{name:"use_limit_per_coupon",label:g("Total Usage Limit"),type:"number",colSpan:6,min:1,placeholder:g("Leave empty for unlimited")},{name:"use_limit_per_user",label:g("Usage Limit Per User"),type:"number",colSpan:6,min:1,placeholder:g("Leave empty for unlimited")},{name:"expiry_date",label:g("Expiry Date"),type:"date",colSpan:6},{name:"status",label:g("Status"),type:"switch",colSpan:6,defaultValue:!0,placeholder:g("Enable or disable this coupon")}]}}}}})}();

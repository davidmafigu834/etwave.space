import{r,j as e}from"./ui-XtzbmeJx.js";import{u as j,n as C}from"./app--U2u_Nco.js";import{V as v}from"./VCardPreview-B-3-9RRU.js";import{C as M,A as E}from"./AppointmentFormModal-BeQcsMRN.js";import{g as h}from"./index-Zk2FuNHf.js";import{u as N}from"./use-favicon-8c0NNY31.js";import"./vendor-CxtKjBZA.js";import"./utils-CCVAIzGD.js";import"./play-CzmLNGkG.js";import"./SocialIcon-qOmKQ0wb.js";import"./browser-VK1alZgc.js";import"./download-qOMTGgoX.js";import"./copy-C3tPhgbj.js";import"./share-2-BGp5KMyc.js";import"./sectionHelpers-Dniuxp0X.js";import"./language-DYlIyiUn.js";import"./calendar-BvntvMDr.js";import"./mail-CeMU5Fvk.js";import"./youtube-DXE-N2gM.js";import"./wrench-C6JwxTjL.js";import"./phone-COl4jx2I.js";import"./globe-D7cjKJp0.js";import"./map-pin-DxMgzEhH.js";import"./clock-xep4wtUq.js";import"./video-HQyazN4q.js";import"./star-CqVDJCm0.js";import"./qr-code-Xe7U5vUN.js";import"./message-square-PGEHhf8N.js";import"./house-CqUuNaPT.js";import"./award-D6629Jkq.js";import"./user-Cz4gw8yj.js";import"./briefcase-D8uqggDK.js";import"./building-CMFnWZJY.js";import"./dollar-sign-iDXPpovF.js";import"./package-sLSwB21j.js";import"./smartphone-BI0mEukO.js";import"./menu-3BZjilQo.js";import"./camera-C1nJE7oi.js";import"./heart-DruUkTIh.js";import"./external-link-B0R81TS6.js";import"./chevron-right-BNDDuqe9.js";import"./chevron-up-Cb1PVDjg.js";import"./users-DAfK_cju.js";import"./instagram-BTUQhcSt.js";import"./facebook-DRGQg9wC.js";import"./sparkles-CjzlGYDC.js";import"./shopping-bag-D4ViwlKW.js";import"./shield-check-BSI5fqAy.js";import"./refresh-cw-fGgpmSVQ.js";import"./compass-DX-UQoor.js";import"./arrow-right-CCjyLt8g.js";import"./shield-B_IGYjvT.js";import"./circle-check-big-DSNGn9d6.js";import"./circle-check-CMhcrXW7.js";import"./code-ISD4AiG3.js";import"./linkedin-BYUBOtcS.js";import"./trending-up-tx68hqrB.js";import"./settings-DvHmCXCi.js";import"./zap-DxDsyCFD.js";import"./monitor-CFaALvzS.js";import"./ticket-D2nMOEAu.js";import"./circle-help-BHytYlpv.js";import"./chart-column-I-WbOlTU.js";import"./target-PODz-u1M.js";import"./shopping-cart-CsJEO-d_.js";import"./activity-C-2LC5Lh.js";import"./eye-B7sLO0GV.js";import"./lightbulb-BvqZDP27.js";import"./layers-fpFmt8xu.js";import"./sun-medium-BKMQ_Yaz.js";import"./RetailShopTemplate-uD_HY-Y3.js";import"./BoreholeDrillingTemplate-cnT30Nlm.js";import"./waves-d_RlzlC-.js";import"./message-circle-DZD8sA73.js";import"./droplet-Ds13c3rf.js";import"./quote-xRyyLMD6.js";import"./textarea-DI5KsTzY.js";import"./circle-x-DvH4-sm2.js";import"./borehole-drilling-DO2azVu5.js";function Do(){var l,d,u,f,g;N();const{t:p}=j(),[o,x]=r.useState(null),[t,b]=r.useState(null),[_,a]=r.useState(!1),[y,c]=r.useState(!1);return r.useEffect(()=>{const n=localStorage.getItem("vcard_preview_data");if(n)try{const s=JSON.parse(n);if(x(s),s.business_type){const m=h(s.business_type);console.log("Template lookup for:",s.business_type,"Result:",m),b(m||h("freelancer"))}}catch(s){console.error("Error parsing preview data:",s)}},[]),r.useEffect(()=>{const n=i=>{a(!0)},s=i=>{c(!0)},m=[window,document,document.body];return m.forEach(i=>{i.addEventListener("openContactModal",n,!0),i.addEventListener("openAppointmentModal",s,!0)}),()=>{m.forEach(i=>{i.removeEventListener("openContactModal",n,!0),i.removeEventListener("openAppointmentModal",s,!0)})}},[]),!o||!t?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:p("Loading Preview...")}),e.jsx("p",{className:"text-gray-600",children:p("If nothing loads, please go back and try again.")})]})}):e.jsxs(e.Fragment,{children:[e.jsx(C,{title:"Preview: ".concat(o.name||"Business Card")}),e.jsx("div",{className:"min-h-screen bg-gray-100",children:e.jsx("div",{className:"max-w-md mx-auto py-8",children:e.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:e.jsx(v,{businessType:o.business_type,data:{name:o.name,slug:"preview",business_type:o.business_type,config_sections:o.config_sections,template_config:{sections:o.config_sections,sectionSettings:o.config_sections,allowedSections:(l=o.template_config)==null?void 0:l.allowedSections}},template:t})})})}),e.jsx(M,{isOpen:_,onClose:()=>a(!1),businessId:0,businessName:(o==null?void 0:o.name)||"Preview Business",themeColors:((d=o==null?void 0:o.config_sections)==null?void 0:d.colors)||(t==null?void 0:t.defaultColors),themeFont:((u=o==null?void 0:o.config_sections)==null?void 0:u.font)||(t==null?void 0:t.defaultFont)}),e.jsx(E,{isOpen:y,onClose:()=>c(!1),businessId:0,businessName:(o==null?void 0:o.name)||"Preview Business",themeColors:((f=o==null?void 0:o.config_sections)==null?void 0:f.colors)||(t==null?void 0:t.defaultColors),themeFont:((g=o==null?void 0:o.config_sections)==null?void 0:g.font)||(t==null?void 0:t.defaultFont)})]})}export{Do as default};

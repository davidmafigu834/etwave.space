!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,a,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(t,r,s,i){var o=r&&r.prototype instanceof l?r:l,u=Object.create(o.prototype);return n(u,"_invoke",function(t,n,r){var s,i,o,l=0,u=r||[],d=!1,m={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return s=t,i=0,o=e,m.n=n,c}};function p(t,n){for(i=t,o=n,a=0;!d&&l&&!r&&a<u.length;a++){var r,s=u[a],p=m.p,f=s[2];t>3?(r=f===n)&&(o=s[(i=s[4])?5:(i=3,3)],s[4]=s[5]=e):s[0]<=p&&((r=t<2&&p<s[1])?(i=0,m.v=n,m.n=s[1]):p<f&&(r=t<3||s[0]>n||n>f)&&(s[4]=t,s[5]=n,m.n=f,i=0))}if(r||t>1)return c;throw d=!0,n}return function(r,u,f){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,f),i=u,o=f;(a=i<2?e:o)||!d;){s||(i?i<3?(i>1&&(m.n=-1),p(i,o)):m.n=o:m.v=o);try{if(l=2,s){if(i||(r="next"),a=s[r]){if(!(a=a.call(s,o)))throw TypeError("iterator result is not an object");if(!a.done)return a;o=a.value,i<2&&(i=0)}else 1===i&&(a=s.return)&&a.call(s),i<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),i=1);s=e}else if((a=(d=m.n<0)?o:t.call(n,m))!==c)break}catch(a){s=e,i=1,o=a}finally{l=1}}return{value:a,done:d}}}(t,s,i),!0),u}var c={};function l(){}function u(){}function d(){}a=Object.getPrototypeOf;var m=[][s]?a(a([][s]())):(n(a={},s,function(){return this}),a),p=d.prototype=l.prototype=Object.create(m);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,n(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=d,n(p,"constructor",d),n(d,"constructor",u),u.displayName="GeneratorFunction",n(d,i,"GeneratorFunction"),n(p),n(p,i,"Generator"),n(p,s,function(){return this}),n(p,"toString",function(){return"[object Generator]"}),(t=function(){return{w:o,m:f}})()}function n(e,t,a,r){var s=Object.defineProperty;try{s({},"",{})}catch(e){s=0}n=function(e,t,a,r){function i(t,a){n(e,t,function(e){return this._invoke(t,a,e)})}t?s?s(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a:(i("next",0),i("throw",1),i("return",2))},n(e,t,a,r)}function a(t,n,a){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,n||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function r(e,t,n,a,r,s,i){try{var o=e[s](i),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(a,r)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,s,i,o=[],c=!0,l=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(e){l=!0,r=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}System.register(["./ui-legacy-Df76W54t.js","./app-legacy-Ct73uABr.js","./switch-legacy-t_Z_CqVY.js"],function(e,n){"use strict";var i,o,c,l,u,d,m,p;return{setters:[function(e){i=e.R,o=e.j},function(e){c=e.u,l=e.C,u=e.L,d=e.I,m=e.B},function(e){p=e.S}],execute:function(){e("D",function(e){var n=e.data,f=e.onUpdate,h=e.slugStatus,b=e.onSlugChange,x=e.onPrefixChange,v=e.businessId,g=e.canUseCustomDomain,y=void 0===g||g,j=e.canUseSubdomain,N=void 0===j||j,w=e.canUsePasswordProtection,k=void 0===w||w,S=e.type,_=void 0===S?"business":S,C=c().t,P=s(i.useState(n.domain_type||"slug"),2),O=P[0],T=P[1],U=s(i.useState({available:!0,checking:!1}),2),A=U[0],E=U[1];i.useEffect(function(){var e=n.domain_type||"slug";"domain"===e&&!y||"subdomain"===e&&!N?(T("slug"),f("domain_type","slug")):T(e)},[n.domain_type,y,N]);var L=i.useCallback((R=function(){var e,n=(e=t().m(function e(n){var r,s,i,o,c;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n&&!(n.length<3)){e.n=1;break}return E({available:!0,checking:!1}),e.a(2);case 1:return E({available:!0,checking:!0}),e.p=2,s="biolink"===_?"api.bio-link.check-domain":"check-domain",i="biolink"===_?"bio_link_id":"business_id",e.n=3,fetch(route(s),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(null===(r=document.querySelector('meta[name="csrf-token"]'))||void 0===r?void 0:r.getAttribute("content"))||""},body:JSON.stringify(a({domain:n},i,v))});case 3:return o=e.v,e.n=4,o.json();case 4:c=e.v,E({available:c.available,checking:!1}),e.n=6;break;case 5:e.p=5,e.v,E({available:!0,checking:!1});case 6:return e.a(2)}},e,null,[[2,5]])}),function(){var t=this,n=arguments;return new Promise(function(a,s){var i=e.apply(t,n);function o(e){r(i,a,s,o,c,"next",e)}function c(e){r(i,a,s,o,c,"throw",e)}o(void 0)})});return function(e){return n.apply(this,arguments)}}(),F=500,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];clearTimeout(G),G=setTimeout(function(){clearTimeout(G),R.apply(void 0,t)},F)}),[v]);var R,F,G;i.useEffect(function(){"domain"===O&&n.custom_domain&&L(n.custom_domain)},[n.custom_domain,O,L]);var D=function(){switch(O){case"domain":return n.custom_domain?"https://".concat(n.custom_domain):"https://yourdomain.com";case"subdomain":return n.slug?"https://".concat(n.slug,".").concat(window.location.hostname):"https://your-slug.".concat(window.location.hostname);default:return n.url_prefix?"".concat(window.appSettings.baseUrl,"/").concat(n.url_prefix,"/").concat(n.slug||"your-slug"):"".concat(window.appSettings.baseUrl,"/").concat(n.slug||"your-slug")}};return o.jsxs(l,{children:[o.jsx("div",{className:"p-3 border-b bg-muted/30",children:o.jsxs("h3",{className:"text-base font-medium",children:[o.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-xs rounded-full h-5 w-5 inline-flex items-center justify-center mr-1.5",children:"2"}),C("Domain & URL Settings")]})}),o.jsxs("div",{className:"p-3 space-y-3",children:[o.jsxs("div",{children:[o.jsx(u,{className:"text-sm mb-1 block",children:C("URL Type")}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"radio",id:"slug",name:"domain_type",value:"slug",checked:"slug"===O,onChange:function(){T("slug"),f("domain_type","slug")},className:"h-3 w-3 text-blue-600"}),o.jsx(u,{htmlFor:"slug",className:"text-sm cursor-pointer ml-1",children:C("Slug")})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"radio",id:"subdomain",name:"domain_type",value:"subdomain",checked:"subdomain"===O,disabled:!N,onChange:function(){T("subdomain"),f("domain_type","subdomain")},className:"h-3 w-3 text-blue-600 disabled:opacity-50"}),o.jsxs(u,{htmlFor:"subdomain",className:"text-sm cursor-pointer ml-1 ".concat(N?"":"opacity-50"),children:[C("Subdomain"),!N&&o.jsxs("span",{className:"text-xs text-amber-600 ml-1",children:["(",C("Plan upgrade required"),")"]})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"radio",id:"domain",name:"domain_type",value:"domain",checked:"domain"===O,disabled:!y,onChange:function(){T("domain"),f("domain_type","domain")},className:"h-3 w-3 text-blue-600 disabled:opacity-50"}),o.jsxs(u,{htmlFor:"domain",className:"text-sm cursor-pointer ml-1 ".concat(y?"":"opacity-50"),children:[C("Domain"),!y&&o.jsxs("span",{className:"text-xs text-amber-600 ml-1",children:["(",C("Plan upgrade required"),")"]})]})]})]})]}),o.jsxs("div",{className:"space-y-3",children:["domain"===O&&o.jsxs("div",{children:[o.jsx(u,{className:"text-sm mb-1 block",children:C("Custom Domain")}),o.jsx(d,{value:n.custom_domain||"",onChange:function(e){f("custom_domain",e.target.value),L(e.target.value)},placeholder:"yourdomain.com",className:"h-9 text-sm ".concat(A&&!A.available?"border-red-500":"")}),A&&o.jsxs("div",{className:"mt-1 flex items-center",children:[A.checking&&o.jsx("span",{className:"text-xs text-gray-500",children:C("Checking...")}),!A.checking&&!A.available&&o.jsx("span",{className:"text-xs text-red-500",children:C("Not available")}),!A.checking&&A.available&&n.custom_domain&&o.jsx("span",{className:"text-xs text-green-500",children:C("Available")})]})]}),"slug"===O&&o.jsxs("div",{children:[o.jsx(u,{className:"text-sm mb-1 block",children:C("URL Prefix")}),o.jsx(d,{value:n.url_prefix||"",onChange:function(e){f("url_prefix",e.target.value),x&&x(e.target.value)},placeholder:"v",className:"h-9 text-sm"})]}),("slug"===O||"subdomain"===O)&&o.jsxs("div",{children:[o.jsx(u,{className:"text-sm mb-1 block",children:C("slug"===O?"URL Path":"Slug")}),o.jsx(d,{value:n.slug||"",onChange:function(e){var t=e.target.value.replace(/[^a-zA-Z0-9-_]/g,"-").replace(/-+/g,"-");b?b(t):f("slug",t)},placeholder:C("slug"===O?"your-url-path":"your-slug"),className:"h-9 text-sm ".concat(h&&!h.available?"border-red-500":"")}),h&&o.jsxs("div",{className:"mt-1 flex items-center",children:[h.checking&&o.jsx("span",{className:"text-xs text-gray-500",children:C("Checking...")}),!h.checking&&!h.available&&o.jsx("span",{className:"text-xs text-red-500",children:C("slug"===O?"URL path not available":"Slug not available")}),!h.checking&&h.available&&n.slug&&o.jsx("span",{className:"text-xs text-green-500",children:C("slug"===O?"URL path available":"Slug available")})]})]})]}),o.jsxs("div",{className:"border-t pt-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx(u,{className:"text-sm",children:C("Password Protection")}),!k&&o.jsx("p",{className:"text-xs text-amber-600",children:C("Password protection requires plan upgrade")})]}),o.jsx(p,{checked:n.password_enabled||!1,onCheckedChange:function(e){return f("password_enabled",e)},disabled:!k,className:"scale-75"})]}),n.password_enabled&&o.jsxs("div",{children:[o.jsx(u,{className:"text-sm mb-1 block",children:C("Password")}),o.jsx(d,{type:"password",value:n.password||"",onChange:function(e){return f("password",e.target.value)},placeholder:C("Enter password"),className:"h-9 text-sm",minLength:4})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx(u,{className:"text-sm",children:C("Public URL")}),o.jsx(m,{type:"button",variant:"outline",size:"sm",className:"h-7 px-2 text-sm",onClick:function(){navigator.clipboard.writeText(D())},children:C("Copy")})]}),o.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-2 rounded border text-sm",children:o.jsxs("p",{className:"font-mono text-blue-600 dark:text-blue-400 break-all",children:[D(),n.password_enabled&&o.jsx("span",{className:"text-orange-500 ml-1",children:"ðŸ”’"})]})})]})]})]})})}}})}();

import{r as A,j as e}from"./ui-XtzbmeJx.js";import{u as U,C as t,d,e as n,g as a,i as j,I as E,B as v,F as B,t as b}from"./app-BNDAg-x0.js";import{U as m}from"./users-dhNqMrnE.js";import{C as D}from"./clock-DkagGUmf.js";import{D as w}from"./dollar-sign-Cilvu6Pq.js";import{T as O}from"./trending-up-i79bn84M.js";import{A as $}from"./award-C8ej-wRP.js";import{C as z}from"./copy-DrIsvEfV.js";import"./vendor-CxtKjBZA.js";import"./utils-CCVAIzGD.js";function K({userType:C,stats:i,referralLink:o,recentReferredUsers:h}){var u,f,p,N,g,y;const{t:s}=U(),[S,F]=A.useState(!1),k=l=>{(x=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(x);{const r=document.createElement("textarea");return r.value=x,r.style.position="fixed",r.style.left="-999999px",r.style.top="-999999px",document.body.appendChild(r),r.focus(),r.select(),new Promise((R,P)=>{document.execCommand("copy")?(r.remove(),R()):(r.remove(),P(new Error("Copy failed")))})}})(l).then(()=>{b.success(s("Link copied to clipboard"))}).catch(()=>{b.error(s("Failed to copy link"))})},T=()=>{o&&k(o)};return C==="superadmin"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(t,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:s("Total Referral Users")}),e.jsx(m,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:i.totalReferralUsers})})]}),e.jsxs(t,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:s("Pending Payouts")}),e.jsx(D,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:i.pendingPayouts})})]}),e.jsxs(t,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:s("Total Commission Paid")}),e.jsx(w,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(a,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[((f=(u=window==null?void 0:window.appSettings)==null?void 0:u.currencySettings)==null?void 0:f.currencySymbol)||"$",i.totalCommissionPaid]})})]}),e.jsxs(t,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:s("Active Companies")}),e.jsx(O,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:((p=i.topCompanies)==null?void 0:p.length)||0})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsx(d,{children:e.jsx(n,{children:s("Top Referring Companies")})}),e.jsx(a,{children:e.jsx("div",{className:"space-y-4",children:(N=i.topCompanies)==null?void 0:N.slice(0,5).map((l,c)=>{var x,r;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(j,{variant:"outline",className:"w-6 h-6 rounded-full p-0 flex items-center justify-center",children:c+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:l.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.email})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:[l.referral_count," ",s("referrals")]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[((r=(x=window==null?void 0:window.appSettings)==null?void 0:x.currencySettings)==null?void 0:r.currencySymbol)||"$",l.total_earned]})]})]},l.id)})})})]}),e.jsxs(t,{children:[e.jsx(d,{children:e.jsx(n,{children:s("Monthly Performance")})}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:s("Referral Signups")}),e.jsx("div",{className:"text-2xl font-bold",children:Object.values(i.monthlyReferrals||{}).reduce((l,c)=>l+c,0)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("This year")})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:s("Payouts Processed")}),e.jsxs("div",{className:"text-2xl font-bold",children:[((y=(g=window==null?void 0:window.appSettings)==null?void 0:g.currencySettings)==null?void 0:y.currencySymbol)||"$",Object.values(i.monthlyPayouts||{}).reduce((l,c)=>l+c,0)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("This year")})]})]})})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(t,{children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Total Referrals")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:i.totalReferrals})]}),e.jsx("div",{className:"rounded-full bg-green-100 p-3 dark:bg-green-900",children:e.jsx(m,{className:"h-5 w-5 text-green-600 dark:text-green-400"})})]})})}),e.jsx(t,{children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Referred Users")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:i.referredUsersCount||0})]}),e.jsx("div",{className:"rounded-full bg-blue-100 p-3 dark:bg-blue-900",children:e.jsx(m,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})})]})})}),e.jsx(t,{children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Total Earned")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:window.appSettings.formatCurrency(i.totalEarned)})]}),e.jsx("div",{className:"rounded-full bg-yellow-100 p-3 dark:bg-yellow-900",children:e.jsx(w,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})})]})})}),e.jsx(t,{children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Available Balance")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:window.appSettings.formatCurrency(i.availableBalance)})]}),e.jsx("div",{className:"rounded-full bg-purple-100 p-3 dark:bg-purple-900",children:e.jsx($,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsx(d,{children:e.jsx(n,{children:s("Your Referral Link")})}),e.jsxs(a,{children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(E,{value:o||"",readOnly:!0,className:"flex-1"}),e.jsx(v,{onClick:T,variant:"outline",size:"icon",children:S?e.jsx(B,{className:"h-4 w-4"}):e.jsx(z,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:s("Share this link to earn commissions when users sign up and purchase plans")})]})]}),e.jsxs(t,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between",children:[e.jsx(n,{children:s("Recent Referred Users")}),e.jsx(v,{variant:"outline",size:"sm",asChild:!0,children:e.jsx("a",{href:route("referral.referred-users"),children:s("View All")})})]}),e.jsx(a,{children:h&&h.length>0?e.jsx("div",{className:"space-y-3",children:h.map(l=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-primary",children:l.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:l.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:l.email})]})]}),e.jsx("div",{className:"text-right",children:l.plan?e.jsx(j,{variant:"default",className:"text-xs",children:l.plan.name}):e.jsx(j,{variant:"secondary",className:"text-xs",children:s("No Plan")})})]},l.id))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(m,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("No referred users yet")})]})})]})]})]})}export{K as default};

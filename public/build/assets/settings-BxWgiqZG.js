import{r as x,j as r}from"./ui-XtzbmeJx.js";import{P as B}from"./page-template-l6fMhetb.js";import{k as q,B as N,L as P,P as A,I as j,u as V,K as F,t as f,q as R,w as M,S as O}from"./app-CHRIhyY0.js";import{T as z}from"./textarea-aJ3buVnx.js";import{S as G,a as J,b as L,c as K,d as C}from"./select-DVebJzi_.js";import{S as H}from"./switch-Bs9N4aMe.js";import{G as Q}from"./grip-vertical-2tN12qh1.js";import{T as U}from"./trash-2-DV11Ow7E.js";import{S as W}from"./scroll-area-RBjlp-Q2.js";import{S as X}from"./settings-D1jKjqmC.js";import"./vendor-CxtKjBZA.js";import"./app-layout-Bpd3XWn2.js";import"./app-sidebar-layout-DTBrRaJF.js";import"./react-country-flag.esm-B3QM5-4S.js";import"./language-DYlIyiUn.js";import"./sparkles-CWM6veXP.js";import"./loader-circle-CU4vh_jx.js";import"./copy-_TD738Qf.js";import"./chevron-up-CWYfEUVP.js";import"./chevron-right-4OzdI5Hc.js";import"./language-switcher-DlUYSL3d.js";import"./globe-DnSDzBxp.js";import"./chart-column-C3hnsquQ.js";import"./briefcase-DFRvW6SB.js";import"./package-CVcIKtJX.js";import"./credit-card-D2Mnc2f1.js";import"./dollar-sign-CEEAnrcL.js";import"./mail-uU9WM_iR.js";import"./users-DVhUqNZg.js";import"./message-square-CzRq4BMj.js";import"./calendar-CuyjcLRJ.js";import"./wallet-B8MIIno5.js";import"./shopping-bag-DIpJi4I3.js";import"./user-UtdwWo_w.js";import"./arrow-left-hltsWyVL.js";import"./use-favicon-DDTtBI2L.js";import"./cookie-consent-KmXGJKj8.js";import"./utils-CCVAIzGD.js";import"./index-C0g6bluz.js";function Y({fields:i,value:l=[],onChange:s,minItems:g=0,maxItems:d=10,addButtonText:h="Add Item",removeButtonText:v="Remove",className:S,itemClassName:k,showItemNumbers:_=!0,allowReorder:w=!1,emptyMessage:y="No items added yet."}){const[m,c]=x.useState(l.length>0?l:[]);x.useEffect(()=>{l&&JSON.stringify(l)!==JSON.stringify(m)&&c(l)},[l]);const p=()=>{const e={};return i.forEach(t=>{e[t.name]=t.defaultValue||(t.type==="switch"?!1:"")}),e},b=()=>{if(d===-1||m.length<d){const e=[...m,p()];c(e),s==null||s(e)}},E=e=>{if(m.length>g){const t=m.filter((a,o)=>o!==e);c(t),s==null||s(t)}},D=(e,t,a)=>{const o=[...m];o[e]={...o[e],[t]:a},c(o),s==null||s(o)},$=(e,t,a,o)=>{var I;const u="".concat(e.name,"_").concat(o);switch(e.type){case"textarea":return r.jsx(z,{id:u,placeholder:e.placeholder,value:t||"",onChange:n=>a(n.target.value),required:e.required,disabled:e.disabled,className:e.className});case"number":return r.jsx(j,{id:u,type:"number",placeholder:e.placeholder,value:t||"",onChange:n=>a(n.target.value),required:e.required,disabled:e.disabled,min:e.min,max:e.max,step:e.step,className:e.className});case"file":return r.jsx(j,{id:u,type:"file",accept:e.accept,onChange:n=>{var T;return a(((T=n.target.files)==null?void 0:T[0])||null)},required:e.required,disabled:e.disabled,className:e.className});case"select":return r.jsxs(G,{value:t||"",onValueChange:a,disabled:e.disabled,children:[r.jsx(J,{className:e.className,children:r.jsx(L,{placeholder:e.placeholder})}),r.jsx(K,{children:(I=e.options)==null?void 0:I.map(n=>r.jsx(C,{value:n.value.toString(),children:n.label},n.value))})]});case"switch":return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(H,{id:u,checked:!!t,onCheckedChange:a,disabled:e.disabled}),r.jsx(P,{htmlFor:u,className:"text-sm",children:e.placeholder||"Enable"})]});case"date":case"time":case"datetime-local":return r.jsx(j,{id:u,type:e.type,value:t||"",onChange:n=>a(n.target.value),required:e.required,disabled:e.disabled,min:e.min,max:e.max,className:e.className});default:return r.jsx(j,{id:u,type:e.type,placeholder:e.placeholder,value:t||"",onChange:n=>a(n.target.value),required:e.required,disabled:e.disabled,className:e.className})}};return r.jsxs("div",{className:q("space-y-4",S),children:[m.length===0&&r.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-lg",children:y}),m.map((e,t)=>r.jsxs("div",{className:q("relative border rounded-lg p-4 space-y-4 bg-white dark:bg-gray-800 dark:border-gray-700",k),children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[w&&r.jsx("div",{className:"cursor-move text-gray-400",children:r.jsx(Q,{className:"h-4 w-4"})}),_&&r.jsxs("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:["Item #",t+1]})]}),m.length>g&&r.jsxs(N,{type:"button",variant:"outline",size:"sm",onClick:()=>E(t),className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-900/20 dark:border-gray-600",children:[r.jsx(U,{className:"h-4 w-4 mr-1"}),v]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(a=>r.jsxs("div",{className:"space-y-2",children:[r.jsxs(P,{htmlFor:"".concat(a.name,"_").concat(t),className:"text-sm font-medium dark:text-gray-200",children:[a.label,a.required&&r.jsx("span",{className:"text-red-500 dark:text-red-400 ml-1",children:"*"})]}),$(a,e[a.name],o=>D(t,a.name,o),t)]},a.name))})]},t)),(d===-1||m.length<d)&&r.jsxs(N,{type:"button",variant:"outline",onClick:b,className:"w-full border-dashed border-2 hover:border-primary hover:bg-primary/5 dark:border-gray-700 dark:hover:border-primary dark:text-gray-200",children:[r.jsx(A,{className:"h-4 w-4 mr-2"}),h]}),m.length>0&&r.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:[m.length," of ",d===-1?r.jsx("span",{className:"text-lg font-medium dark:text-gray-300",children:"âˆž"}):d," items",g>0&&" (minimum ".concat(g," required)")]})]})}function Re(){var y,m;const{t:i}=V(),{settings:l,flash:s}=F().props,[g,d]=x.useState("pricing-settings"),[h,v]=x.useState({pricing_tiers:(l==null?void 0:l.pricing_tiers)||[{min_days:1,max_days:30,per_day_price:15},{min_days:31,max_days:90,per_day_price:12},{min_days:91,max_days:365,per_day_price:10}]});x.useEffect(()=>{s!=null&&s.success&&f.success(s.success),s!=null&&s.error&&f.error(s.error)},[s]);const S=c=>{c.preventDefault(),O.post(route("campaigns.settings.update"),{pricing_tiers:h.pricing_tiers},{onSuccess:()=>{},onError:p=>{f.error("Failed to update settings: ".concat(Object.values(p).join(", ")))}})},k=[{title:i("Pricing Settings"),href:"#pricing-settings",icon:r.jsx(X,{className:"h-4 w-4 mr-2"})}],_=c=>{const p=c.replace("#",""),b=document.getElementById(p);b&&(b.scrollIntoView({behavior:"smooth"}),d(p))},w=[{title:i("Dashboard"),href:route("dashboard")},{title:i("Campaigns"),href:route("campaigns.index")},{title:i("Settings")}];return r.jsx(B,{title:i("Campaign Settings"),url:"/campaigns/settings",breadcrumbs:w,children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[r.jsx("div",{className:"md:w-64 flex-shrink-0",children:r.jsx("div",{className:"sticky top-20",children:r.jsx(W,{className:"h-[calc(100vh-5rem)]",children:r.jsx("div",{className:"pr-4 space-y-1",children:k.map(c=>r.jsxs(N,{variant:"ghost",className:q("w-full justify-start",{"bg-muted font-medium":g===c.href.replace("#","")}),onClick:()=>_(c.href),children:[c.icon,c.title]},c.href))})})})}),r.jsx("div",{className:"flex-1",children:r.jsx("section",{id:"pricing-settings",className:"mb-8",children:r.jsx(R,{title:i("Pricing Tiers Settings"),description:i("Configure multiple pricing tiers based on campaign duration"),action:r.jsxs(N,{type:"submit",form:"pricing-settings-form",size:"sm",children:[r.jsx(M,{className:"h-4 w-4 mr-2"}),i("Save Changes")]}),children:r.jsx("form",{id:"pricing-settings-form",onSubmit:S,className:"space-y-6",children:r.jsx(Y,{fields:[{name:"min_days",label:i("Minimum Days"),type:"number",placeholder:"1",required:!0,min:1},{name:"max_days",label:i("Maximum Days"),type:"number",placeholder:"365",required:!0,min:1},{name:"per_day_price",label:i("Price Per Day ({{symbol}})",{symbol:((m=(y=window==null?void 0:window.appSettings)==null?void 0:y.currencySettings)==null?void 0:m.currencySymbol)||"$"}),type:"number",placeholder:"10.00",required:!0,min:0,step:.01}],value:h.pricing_tiers,onChange:c=>v(p=>({...p,pricing_tiers:c})),minItems:1,maxItems:-1,addButtonText:i("Add Pricing Tier"),removeButtonText:i("Remove Tier"),showItemNumbers:!0,emptyMessage:i("No pricing tiers configured. Add at least one tier."),itemClassName:""})})})})})]})})}export{Re as default};

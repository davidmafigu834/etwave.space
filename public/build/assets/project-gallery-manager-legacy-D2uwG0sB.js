!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",a=i.toStringTag||"@@toStringTag";function s(t,i,l,a){var s=i&&i.prototype instanceof c?i:c,u=Object.create(s.prototype);return r(u,"_invoke",function(t,r,i){var l,a,s,c=0,u=i||[],d=!1,m={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return l=t,a=0,s=e,m.n=r,o}};function p(t,r){for(a=t,s=r,n=0;!d&&c&&!i&&n<u.length;n++){var i,l=u[n],p=m.p,f=l[2];t>3?(i=f===r)&&(s=l[(a=l[4])?5:(a=3,3)],l[4]=l[5]=e):l[0]<=p&&((i=t<2&&p<l[1])?(a=0,m.v=r,m.n=l[1]):p<f&&(i=t<3||l[0]>r||r>f)&&(l[4]=t,l[5]=r,m.n=f,a=0))}if(i||t>1)return o;throw d=!0,r}return function(i,u,f){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,f),a=u,s=f;(n=a<2?e:s)||!d;){l||(a?a<3?(a>1&&(m.n=-1),p(a,s)):m.n=s:m.v=s);try{if(c=2,l){if(a||(i="next"),n=l[i]){if(!(n=n.call(l,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,a<2&&(a=0)}else 1===a&&(n=l.return)&&n.call(l),a<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),a=1);l=e}else if((n=(d=m.n<0)?s:t.call(r,m))!==o)break}catch(n){l=e,a=1,s=n}finally{c=1}}return{value:n,done:d}}}(t,l,a),!0),u}var o={};function c(){}function u(){}function d(){}n=Object.getPrototypeOf;var m=[][l]?n(n([][l]())):(r(n={},l,function(){return this}),n),p=d.prototype=c.prototype=Object.create(m);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,r(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=d,r(p,"constructor",d),r(d,"constructor",u),u.displayName="GeneratorFunction",r(d,a,"GeneratorFunction"),r(p),r(p,a,"Generator"),r(p,l,function(){return this}),r(p,"toString",function(){return"[object Generator]"}),(t=function(){return{w:s,m:f}})()}function r(e,t,n,i){var l=Object.defineProperty;try{l({},"",{})}catch(e){l=0}r=function(e,t,n,i){function a(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?l?l(e,t,{value:n,enumerable:!i,configurable:!i,writable:!i}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},r(e,t,n,i)}function n(e,t,r,n,i,l,a){try{var s=e[l](a),o=s.value}catch(e){return void r(e)}s.done?t(o):Promise.resolve(o).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise(function(i,l){var a=e.apply(t,r);function s(e){n(a,i,l,s,o,"next",e)}function o(e){n(a,i,l,s,o,"throw",e)}s(void 0)})}}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(t,r,n){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function o(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,l,a,s=[],o=!0,c=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=l.call(r)).done)&&(s.push(n.value),s.length!==t);o=!0);}catch(e){c=!0,i=e}finally{try{if(!o&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./ui-legacy-Df76W54t.js","./app-legacy--_EH1FA6.js","./page-template-legacy-vdr7rymY.js","./textarea-legacy-C9BYI3_s.js","./select-legacy-CnS4pGYt.js","./switch-legacy-DR4XdF-9.js","./loader-circle-legacy-BeSZcCZ2.js","./video-legacy-h4grc_mK.js","./arrow-up-legacy-DGCDD9E3.js","./pencil-legacy-ZcRT5tb0.js","./trash-2-legacy-BHziuAts.js","./vendor-legacy-DNs0y6R6.js","./utils-legacy-4AQaPo1J.js","./app-layout-legacy-Ddjw4cyv.js","./app-sidebar-layout-legacy-DNUIHr2c.js","./react-country-flag.esm-legacy-C8Qm_EdK.js","./language-legacy-CPKUrWoi.js","./sparkles-legacy-CpybO37S.js","./copy-legacy-B65eKCL5.js","./chevron-up-legacy-COSjq7BD.js","./chevron-right-legacy-BajxNCtJ.js","./language-switcher-legacy-DyZl0IOB.js","./globe-legacy-D5ETsV0D.js","./chart-column-legacy-pf9KtNzA.js","./briefcase-legacy-qN8cP4rv.js","./package-legacy-BhxOSnhZ.js","./credit-card-legacy-D9le2VX2.js","./dollar-sign-legacy-Bra6CllU.js","./mail-legacy-BRLD7bu-.js","./users-legacy-CHx64N_f.js","./settings-legacy-C4yHeyf-.js","./message-square-legacy-tsOtqq3E.js","./calendar-legacy-iowv-fv-.js","./wallet-legacy-DkvJP23h.js","./shopping-bag-legacy-CZi31-ql.js","./user-legacy-NZm5tz0X.js","./arrow-left-legacy-DNBUkron.js","./use-favicon-legacy-CK09Bl0i.js","./cookie-consent-legacy-Dhln_i9Y.js","./index-legacy-BrP_l-Mm.js"],function(e,r){"use strict";var n,l,u,d,m,p,f,y,h,v,j,g,x,b,w,_,N,S,O,P,k,C,T,A,E,F,I,G,D,M;return{setters:[function(e){n=e.r,l=e.j},function(e){u=e.u,d=e.n,m=e.C,p=e.d,f=e.e,y=e.g,h=e.L,v=e.I,j=e.M,g=e.B,x=e.t,b=e.o,w=e.k,_=e.v},function(e){N=e.P},function(e){S=e.T},function(e){O=e.S,P=e.a,k=e.b,C=e.c,T=e.d},function(e){A=e.S},function(e){E=e.L},function(e){F=e.V},function(e){I=e.a,G=e.A},function(e){D=e.P},function(e){M=e.T},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var r={media_type:"image",media_url:"",thumbnail_url:"",title:"",description:"",order_index:""},U=(e("default",function(e){var w=e.business,_=e.gallery,L=e.items,V=u().t,z=c(n.useState(function(){return null!=L?L:[]}),2),R=z[0],B=z[1],$=c(n.useState(r),2),q=$[0],H=$[1],K=c(n.useState(!1),2),Q=K[0],W=K[1],X=c(n.useState(null),2),Y=X[0],Z=X[1],J=c(n.useState(null),2),ee=J[0],te=J[1],re=c(n.useState(!0),2),ne=re[0],ie=re[1],le=n.useMemo(function(){return o(R).sort(function(e,t){var r,n;return(null!==(r=e.order_index)&&void 0!==r?r:0)-(null!==(n=t.order_index)&&void 0!==n?n:0)})},[R]),ae=function(){H(r),te(null),ie(!0)},se=function(e,t){H(function(r){return a(a({},r),{},s({},e,t))})},oe=function(e,t){H(function(r){return a(a({},r),{},s({},t,e))})},ce=function(){var e=i(t().m(function e(r){var n,i,l,a,s,o,c,u,d,m,p;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r.preventDefault(),q.media_url){e.n=1;break}return x.error("image"===q.media_type?V("Please select an image."):V("Please provide a video URL.")),e.a(2);case 1:return W(!0),n={media_type:q.media_type,media_url:q.media_url.trim(),thumbnail_url:q.thumbnail_url.trim()||null,title:q.title.trim()||null,description:q.description.trim()||null,order_index:ne&&""!==q.order_index.trim()?Number(q.order_index.trim()):null},Number.isNaN(n.order_index)&&(n.order_index=null),e.p=2,s=ee?route("vcard-builder.gallery.items.update",[w.id,_.id,ee.id]):route("vcard-builder.gallery.items.store",[w.id,_.id]),o=ee?"put":"post",e.n=3,b({method:o,url:s,data:n,headers:{Accept:"application/json"}});case 3:c=e.v,u=null!==(i=null===(l=c.data)||void 0===l?void 0:l.items)&&void 0!==i?i:[],B(u),x.success((null===(a=c.data)||void 0===a?void 0:a.message)||V("Gallery saved successfully.")),window.dispatchEvent(new CustomEvent("catalog:updated",{detail:{businessId:w.id}})),ae(),e.n=5;break;case 4:e.p=4,p=e.v,m=(null==p||null===(d=p.response)||void 0===d||null===(d=d.data)||void 0===d?void 0:d.message)||V("Failed to save gallery item."),x.error(m);case 5:return e.p=5,W(!1),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=i(t().m(function e(r){var n,i,l,a,s,o,c,u;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(confirm(V("Remove this gallery item?"))){e.n=1;break}return e.a(2);case 1:return Z(r.id),e.p=2,a=route("vcard-builder.gallery.items.destroy",[w.id,_.id,r.id]),e.n=3,b.delete(a,{headers:{Accept:"application/json"}});case 3:s=e.v,B(null!==(n=null===(i=s.data)||void 0===i?void 0:i.items)&&void 0!==n?n:[]),x.success((null===(l=s.data)||void 0===l?void 0:l.message)||V("Gallery item removed successfully.")),window.dispatchEvent(new CustomEvent("catalog:updated",{detail:{businessId:w.id}})),(null==ee?void 0:ee.id)===r.id&&ae(),e.n=5;break;case 4:e.p=4,u=e.v,c=(null==u||null===(o=u.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.message)||V("Failed to remove gallery item."),x.error(c);case 5:return e.p=5,Z(null),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=i(t().m(function e(r,n){var i,l,a,s,u,d,m,p,f,y,h;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!((i=r+n)<0||i>=le.length)){e.n=1;break}return e.a(2);case 1:return l=o(le),a=l.splice(r,1),s=c(a,1),u=s[0],l.splice(i,0,u),B(l),e.p=2,e.n=3,b.post(route("vcard-builder.gallery.items.reorder",[w.id,_.id]),{order:l.map(function(e){return e.id})},{headers:{Accept:"application/json"}});case 3:f=e.v,B(null!==(d=null===(m=f.data)||void 0===m?void 0:m.items)&&void 0!==d?d:l),x.success((null===(p=f.data)||void 0===p?void 0:p.message)||V("Gallery order updated.")),window.dispatchEvent(new CustomEvent("catalog:updated",{detail:{businessId:w.id}})),e.n=5;break;case 4:e.p=4,h=e.v,x.error((null==h||null===(y=h.response)||void 0===y||null===(y=y.data)||void 0===y?void 0:y.message)||V("Failed to update order.")),B(le);case 5:return e.a(2)}},e,null,[[2,4]])}));return function(t,r){return e.apply(this,arguments)}}();return l.jsxs(l.Fragment,{children:[l.jsx(d,{title:V("Project Gallery")}),l.jsx(N,{title:V("Media Gallery"),description:V("Manage the images and videos for your vCard."),url:route("vcard-builder.gallery.manage",w.id),children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs(m,{children:[l.jsx(p,{children:l.jsx(f,{children:V(ee?"Edit gallery item":"Add gallery item")})}),l.jsx(y,{children:l.jsxs("form",{onSubmit:ce,className:"space-y-6",children:[l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(h,{htmlFor:"media_type",children:V("Media type")}),l.jsxs(O,{value:q.media_type,onValueChange:function(e){return se("media_type",e)},children:[l.jsx(P,{id:"media_type",children:l.jsx(k,{placeholder:V("Select media type")})}),l.jsxs(C,{children:[l.jsx(T,{value:"image",children:V("Image")}),l.jsx(T,{value:"video",children:V("Video")})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(h,{htmlFor:"order_index",children:V("Custom order")}),l.jsxs("div",{className:"flex items-center justify-between rounded border px-3 py-2",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium",children:V("Set custom display order")}),l.jsx("p",{className:"text-xs text-muted-foreground",children:V("Disable to append automatically to the end.")})]}),l.jsx(A,{checked:ne,onCheckedChange:function(e){return ie(e)}})]}),ne&&l.jsx(v,{id:"order_index",type:"number",min:"0",value:q.order_index,onChange:function(e){return se("order_index",e.target.value)},placeholder:V("e.g. 3")})]})]}),"image"===q.media_type?l.jsxs("div",{className:"space-y-2",children:[l.jsx(h,{children:V("Image")}),l.jsx(j,{value:q.media_url,onChange:function(e){return oe(e,"media_url")},placeholder:V("Select an image")})]}):l.jsxs("div",{className:"space-y-2",children:[l.jsx(h,{htmlFor:"media_url",children:V("Video URL")}),l.jsx(v,{id:"media_url",value:q.media_url,onChange:function(e){return se("media_url",e.target.value)},placeholder:"https://www.youtube.com/watch?v=..."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(h,{children:V("Thumbnail")}),l.jsx(j,{value:q.thumbnail_url,onChange:function(e){return oe(e,"thumbnail_url")},placeholder:V("Thumbnail image (optional)")})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(h,{htmlFor:"title",children:V("Title")}),l.jsx(v,{id:"title",value:q.title,onChange:function(e){return se("title",e.target.value)},placeholder:V("Title (optional)")})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(h,{htmlFor:"description",children:V("Description")}),l.jsx(S,{id:"description",value:q.description,onChange:function(e){return se("description",e.target.value)},placeholder:V("Description (optional)"),rows:3})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs(g,{type:"submit",disabled:Q,children:[Q&&l.jsx(E,{className:"mr-2 h-4 w-4 animate-spin"}),V(ee?"Update item":"Add item")]}),ee&&l.jsx(g,{type:"button",variant:"outline",onClick:ae,disabled:Q,children:V("Cancel edit")})]})]})})]}),l.jsx("div",{className:"space-y-4",children:0===le.length?l.jsx(m,{children:l.jsx(y,{className:"py-8 text-center text-sm text-muted-foreground",children:l.jsx("p",{children:V("No media items yet. Add images or videos to showcase your work.")})})}):le.map(function(e,t){var r;return l.jsx(m,{className:"overflow-hidden border border-dashed",children:l.jsxs("div",{className:"flex flex-col sm:flex-row",children:[l.jsx("div",{className:"sm:w-40 bg-muted/40 flex items-center justify-center",children:"image"===e.media_type&&e.media_url?l.jsx("img",{src:e.thumbnail_url||e.media_url,alt:e.title||"",className:"h-32 w-full object-cover"}):l.jsxs("div",{className:"flex h-32 w-full flex-col items-center justify-center text-muted-foreground",children:[l.jsx(F,{className:"h-6 w-6"}),l.jsx("span",{className:"text-xs mt-1",children:V("Video")})]})}),l.jsxs(y,{className:"flex-1 space-y-3 p-4",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(U,{type:e.media_type}),l.jsx("p",{className:"text-sm font-semibold",children:e.title||V("Untitled item")})]}),e.description&&l.jsx("p",{className:"text-xs text-muted-foreground whitespace-pre-line",children:e.description})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(g,{type:"button",variant:"outline",size:"icon",onClick:function(){return de(t,-1)},disabled:0===t,title:V("Move up"),children:l.jsx(I,{className:"h-4 w-4"})}),l.jsx(g,{type:"button",variant:"outline",size:"icon",onClick:function(){return de(t,1)},disabled:t===le.length-1,title:V("Move down"),children:l.jsx(G,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{className:"grid gap-2 text-xs text-muted-foreground sm:grid-cols-2",children:[l.jsxs("div",{children:[l.jsxs("span",{className:"font-medium",children:[V("Media URL"),":"]}),l.jsx("p",{className:"truncate",title:e.media_url,children:e.media_url})]}),e.thumbnail_url&&l.jsxs("div",{children:[l.jsxs("span",{className:"font-medium",children:[V("Thumbnail"),":"]}),l.jsx("p",{className:"truncate",title:e.thumbnail_url,children:e.thumbnail_url})]}),l.jsxs("div",{children:[l.jsxs("span",{className:"font-medium",children:[V("Order"),":"]})," ",null!==(r=e.order_index)&&void 0!==r?r:"â€”"]})]}),l.jsxs("div",{className:"flex items-center justify-end gap-2 border-t pt-3",children:[l.jsxs(g,{variant:"outline",size:"sm",onClick:function(){return function(e){var t;te(e),H({media_type:e.media_type,media_url:e.media_url||"",thumbnail_url:e.thumbnail_url||"",title:e.title||"",description:e.description||"",order_index:String(null!==(t=e.order_index)&&void 0!==t?t:"")}),ie(null!==e.order_index&&void 0!==e.order_index),window.scrollTo({top:0,behavior:"smooth"})}(e)},children:[l.jsx(D,{className:"mr-2 h-4 w-4"}),V("Edit")]}),l.jsxs(g,{variant:"destructive",size:"sm",onClick:function(){return ue(e)},disabled:Y===e.id,children:[Y===e.id?l.jsx(E,{className:"mr-2 h-4 w-4 animate-spin"}):l.jsx(M,{className:"mr-2 h-4 w-4"}),V("Delete")]})]})]})]})},e.id)})})]})})]})}),function(e){var t=e.type,r="h-3 w-3";return l.jsxs("span",{className:w("inline-flex items-center gap-1 rounded-full px-2 py-1 text-[10px] font-medium uppercase","image"===t?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"),children:["image"===t?l.jsx(_,{className:r}):l.jsx(F,{className:r}),t]})})}}})}();

import{r,j as e}from"./ui-XtzbmeJx.js";import{u as j,n as C}from"./app-CHRIhyY0.js";import{V as v}from"./VCardPreview-C57HNq1V.js";import{C as M,A as E}from"./AppointmentFormModal-CuRyNkTE.js";import{g as h}from"./index-Zk2FuNHf.js";import{u as N}from"./use-favicon-DDTtBI2L.js";import"./vendor-CxtKjBZA.js";import"./utils-CCVAIzGD.js";import"./play-DoYNRCEZ.js";import"./SocialIcon-qOmKQ0wb.js";import"./browser-VK1alZgc.js";import"./download-Be_RfnEn.js";import"./copy-_TD738Qf.js";import"./share-2-BNKjSkRX.js";import"./sectionHelpers-Dniuxp0X.js";import"./language-DYlIyiUn.js";import"./calendar-CuyjcLRJ.js";import"./mail-uU9WM_iR.js";import"./youtube-CL-RENWY.js";import"./wrench-CR8E37N8.js";import"./phone-E4lF8m1x.js";import"./globe-DnSDzBxp.js";import"./map-pin-DafcC9zB.js";import"./clock-krPbraWS.js";import"./video-Bj4pFXlS.js";import"./star-6rmBTYFH.js";import"./qr-code-SFHa6FnN.js";import"./message-square-CzRq4BMj.js";import"./house-DJOkmhdc.js";import"./award-CMCEVH9T.js";import"./user-UtdwWo_w.js";import"./briefcase-DFRvW6SB.js";import"./building-D73mAJQG.js";import"./dollar-sign-CEEAnrcL.js";import"./package-CVcIKtJX.js";import"./smartphone-Be7zfCy6.js";import"./menu-CvZMwQ6e.js";import"./camera-BW80hVHm.js";import"./heart-Cuw0UGRP.js";import"./external-link-DvDG2v64.js";import"./chevron-right-4OzdI5Hc.js";import"./chevron-up-CWYfEUVP.js";import"./users-DVhUqNZg.js";import"./instagram-Bt6zqC6P.js";import"./facebook-CTlg0zrj.js";import"./sparkles-CWM6veXP.js";import"./shopping-bag-DIpJi4I3.js";import"./shield-check-Dogjb4zv.js";import"./refresh-cw-dlJt5tLk.js";import"./compass-CCA2Sxe0.js";import"./arrow-right-x-AVi3UN.js";import"./shield-BnMu4cTL.js";import"./circle-check-big-Blx2zDWr.js";import"./circle-check-Cb_RhFjb.js";import"./code-BV0gK-Qt.js";import"./linkedin-C1W7pnrA.js";import"./trending-up-Bf4hc79k.js";import"./settings-D1jKjqmC.js";import"./zap-DA8HZ38f.js";import"./monitor-CWaLLWt8.js";import"./ticket-wGHGmMxk.js";import"./circle-help-DOUqk_g4.js";import"./chart-column-C3hnsquQ.js";import"./target-kh3kRFVQ.js";import"./shopping-cart-CBVm-rlp.js";import"./activity-C9O0pEhI.js";import"./eye-_GBMIZ3h.js";import"./lightbulb-pECSF8Y8.js";import"./layers-CUnKsR1M.js";import"./sun-medium-30SLn0i3.js";import"./RetailShopTemplate-CQCDIoO9.js";import"./BoreholeDrillingTemplate-DtHeVdnB.js";import"./waves-DaEpyRR2.js";import"./message-circle-DtdnJwHO.js";import"./droplet-DfKZ9flC.js";import"./quote-Bt0vZkBF.js";import"./textarea-aJ3buVnx.js";import"./circle-x-CHxqvcy2.js";import"./borehole-drilling-DO2azVu5.js";function Do(){var l,d,u,f,g;N();const{t:p}=j(),[o,x]=r.useState(null),[t,b]=r.useState(null),[_,a]=r.useState(!1),[y,c]=r.useState(!1);return r.useEffect(()=>{const n=localStorage.getItem("vcard_preview_data");if(n)try{const s=JSON.parse(n);if(x(s),s.business_type){const m=h(s.business_type);console.log("Template lookup for:",s.business_type,"Result:",m),b(m||h("freelancer"))}}catch(s){console.error("Error parsing preview data:",s)}},[]),r.useEffect(()=>{const n=i=>{a(!0)},s=i=>{c(!0)},m=[window,document,document.body];return m.forEach(i=>{i.addEventListener("openContactModal",n,!0),i.addEventListener("openAppointmentModal",s,!0)}),()=>{m.forEach(i=>{i.removeEventListener("openContactModal",n,!0),i.removeEventListener("openAppointmentModal",s,!0)})}},[]),!o||!t?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:p("Loading Preview...")}),e.jsx("p",{className:"text-gray-600",children:p("If nothing loads, please go back and try again.")})]})}):e.jsxs(e.Fragment,{children:[e.jsx(C,{title:"Preview: ".concat(o.name||"Business Card")}),e.jsx("div",{className:"min-h-screen bg-gray-100",children:e.jsx("div",{className:"max-w-md mx-auto py-8",children:e.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:e.jsx(v,{businessType:o.business_type,data:{name:o.name,slug:"preview",business_type:o.business_type,config_sections:o.config_sections,template_config:{sections:o.config_sections,sectionSettings:o.config_sections,allowedSections:(l=o.template_config)==null?void 0:l.allowedSections}},template:t})})})}),e.jsx(M,{isOpen:_,onClose:()=>a(!1),businessId:0,businessName:(o==null?void 0:o.name)||"Preview Business",themeColors:((d=o==null?void 0:o.config_sections)==null?void 0:d.colors)||(t==null?void 0:t.defaultColors),themeFont:((u=o==null?void 0:o.config_sections)==null?void 0:u.font)||(t==null?void 0:t.defaultFont)}),e.jsx(E,{isOpen:y,onClose:()=>c(!1),businessId:0,businessName:(o==null?void 0:o.name)||"Preview Business",themeColors:((f=o==null?void 0:o.config_sections)==null?void 0:f.colors)||(t==null?void 0:t.defaultColors),themeFont:((g=o==null?void 0:o.config_sections)==null?void 0:g.font)||(t==null?void 0:t.defaultFont)})]})}export{Do as default};

!function(){function e(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,l){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,s,t,c,r=[],u=!0,i=!1;try{if(t=(a=a.call(e)).next,0===l){if(Object(a)!==a)return;u=!1}else for(;!(u=(n=t.call(a)).done)&&(r.push(n.value),r.length!==l);u=!0);}catch(e){i=!0,s=e}finally{try{if(!u&&null!=a.return&&(c=a.return(),Object(c)!==c))return}finally{if(i)throw s}}return r}}(e,a)||function(e,a){if(e){if("string"==typeof e)return l(e,a);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,a):void 0}}(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,l){(null==l||l>e.length)&&(l=e.length);for(var a=0,n=Array(l);a<l;a++)n[a]=e[a];return n}System.register(["./ui-legacy-Df76W54t.js","./app-legacy-Ct73uABr.js","./page-template-legacy-et8O2PIf.js","./select-legacy-DJ7KqnGK.js","./CrudTable-legacy-CnYddiyU.js","./CrudFormModal-legacy-Ba-bBMtP.js","./CrudDeleteModal-legacy-BjIGkHEP.js","./ContactReplyModal-legacy-D2e8lj1a.js","./filter-legacy-BAhWbv77.js","./arrow-left-legacy-CqQR3bfj.js","./vendor-legacy-DNs0y6R6.js","./utils-legacy-4AQaPo1J.js","./app-layout-legacy-BbvocKkk.js","./app-sidebar-layout-legacy-DjGq5XwB.js","./textarea-legacy-DhpF_zd4.js","./react-country-flag.esm-legacy-C8Qm_EdK.js","./language-legacy-CPKUrWoi.js","./sparkles-legacy-DXvM6dmp.js","./loader-circle-legacy-BAWBSNTr.js","./copy-legacy-CyY0zsNU.js","./chevron-up-legacy-C3cU62dz.js","./chevron-right-legacy-D5fLjpJA.js","./language-switcher-legacy-BfnK_KLk.js","./globe-legacy-D167FJxM.js","./chart-column-legacy-xaxxIszB.js","./briefcase-legacy-fFmYMQCB.js","./package-legacy-BXVFs7qu.js","./credit-card-legacy-oVK_vO6r.js","./dollar-sign-legacy-De4_eAPE.js","./mail-legacy-DchUy0NJ.js","./users-legacy-CIHfY2gt.js","./settings-legacy-BXGYMxCJ.js","./message-square-legacy-CVHCr5Dt.js","./calendar-legacy-DdDaxKxU.js","./wallet-legacy-DOeLcv8c.js","./shopping-bag-legacy-BRpvr-V3.js","./building-2-legacy-Dj3cFBKu.js","./user-legacy-cMI1gv9J.js","./use-favicon-legacy-CbpIBPd5.js","./cookie-consent-legacy-BD_speLP.js","./index-legacy-BrP_l-Mm.js","./table-legacy-DMkF8XyN.js","./activity-legacy-qEFGj3ED.js","./unlink-legacy-B-z4dptl.js","./arrow-up-legacy-pwFWK0Nm.js","./arrow-right-legacy-Cfkqbzln.js","./arrow-up-down-legacy-DADQmmAj.js","./arrow-up-right-legacy-DhqDNMSc.js","./award-legacy-1YF8hGuu.js","./banknote-legacy-DvdjeEGr.js","./bell-ring-legacy-C_ZRzTvz.js","./bot-legacy-Cq7Fvcb_.js","./crown-legacy-BOlfPL-z.js","./building-legacy-Cd7zlonT.js","./youtube-legacy-CFlSkXto.js","./camera-legacy-Dd-Wp0pf.js","./wrench-legacy-DDEScOmL.js","./chart-pie-legacy-D_jHmHdg.js","./chevron-left-legacy-CBzzFiYy.js","./circle-check-big-legacy-Dccr4Wi1.js","./circle-check-legacy-BQGACsTH.js","./circle-help-legacy-_6ND9uDH.js","./pencil-line-legacy-C-iBrfpN.js","./circle-x-legacy-BdJQBC_9.js","./circle-legacy-BZU12gvH.js","./clock-legacy-OYgw2bvN.js","./code-legacy-CD7E-MSX.js","./indian-rupee-legacy-DvIWk5Aw.js","./compass-legacy-Cib5yt8q.js","./download-legacy-DkH8e7Wo.js","./droplet-legacy-BKwjobrI.js","./ellipsis-vertical-legacy-j4YSGbwm.js","./ellipsis-legacy-DBG1h6S6.js","./external-link-legacy-ByGyBoEL.js","./eye-off-legacy-BsSxS_Hc.js","./eye-legacy-Bjr5hUAR.js","./facebook-legacy-DrnaedmE.js","./power-legacy-Dv2Ix3iz.js","./graduation-cap-legacy-DUNA-Z3b.js","./navigation-legacy-BtmYfG94.js","./grip-vertical-legacy-4mYFDKFJ.js","./hammer-legacy-kJY1ntOM.js","./hard-drive-legacy-C2FYzfP2.js","./heart-legacy-D0LbDgyZ.js","./house-legacy-CsiLg80O.js","./instagram-legacy-CXTRGjkL.js","./lock-open-legacy-DtJ2AF9u.js","./layers-legacy-B_4hYWjh.js","./leaf-legacy-_8yl_EOv.js","./lightbulb-legacy-C1U_GpYo.js","./link-2-legacy-ChlCC2ap.js","./linkedin-legacy-iG5PF7m5.js","./list-legacy-D-kIW24o.js","./lock-legacy-CiAXJP-P.js","./map-pin-legacy-C8q_6w13.js","./menu-legacy-D4E1bl_9.js","./message-circle-legacy-xY-4Lg5Y.js","./monitor-legacy-zlm-zjjO.js","./pencil-legacy-BhqsOyIl.js","./shield-check-legacy-DU0LL7Mi.js","./phone-legacy-Bw_bEeHz.js","./play-legacy-go6--FBd.js","./qr-code-legacy-BXob85p2.js","./quote-legacy-CA3k2GyX.js","./refresh-cw-legacy-ByjSkNji.js","./rocket-legacy-BfeBCF9C.js","./send-legacy-CbzSH1sf.js","./server-legacy-DQuN1-Ol.js","./share-2-legacy-D3gH8VZe.js","./shield-legacy-DQ5qNese.js","./shopping-cart-legacy-BNMDMyko.js","./smartphone-legacy-HSi3blOa.js","./square-pen-legacy-Bg3q-gjR.js","./star-legacy-H9DVfP6_.js","./sticky-note-legacy-9f1os5Gw.js","./store-legacy-Ca4Gm8Mw.js","./sun-medium-legacy-Dqp_z2t2.js","./tag-legacy-DfJrCzG8.js","./target-legacy-DTCKFHXT.js","./ticket-legacy-vDMhl5Iy.js","./trash-2-legacy-ZzhgHTxS.js","./trending-up-legacy-mdgqrkTY.js","./twitter-legacy-ok4-c2gy.js","./type-legacy-z3nQea3c.js","./user-x-legacy-gG1nfv5r.js","./video-legacy-CpBS_ohJ.js","./waves-legacy-0TsdQcdR.js","./webhook-legacy-MypP2g6T.js","./wifi-legacy-NUNRk_Rd.js","./zap-legacy-B-66XYlF.js","./radio-group-legacy-DcsT9vco.js","./checkbox-legacy-w9Z93p4k.js","./switch-legacy-t_Z_CqVY.js","./scroll-area-legacy-BQLfOKaF.js"],function(l,a){"use strict";var n,s,t,c,r,u,i,o,d,g,y,j,p,m,f,h,v,x,b,w,S,N,C;return{setters:[function(e){n=e.r,s=e.j},function(e){t=e.u,c=e.K,r=e.S,u=e.p,i=e.I,o=e.B,d=e.L,g=e.t,y=e.P},function(e){j=e.P},function(e){p=e.S,m=e.a,f=e.b,h=e.c,v=e.d},function(e){x=e.C},function(e){b=e.C},function(e){w=e.C},function(e){S=e.C},function(e){N=e.F},function(e){C=e.A},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){l("default",function(){var l,a,k=t().t,_=c().props,q=_.business,A=_.contacts,F=_.filters,O=void 0===F?{}:F,P=e(n.useState(O.search||""),2),D=P[0],E=P[1],M=e(n.useState(O.status||"all"),2),z=M[0],I=M[1],B=e(n.useState(!1),2),R=B[0],T=B[1],U=e(n.useState(!1),2),V=U[0],H=U[1],L=e(n.useState(!1),2),Q=L[0],K=L[1],$=e(n.useState(!1),2),G=$[0],J=$[1],W=e(n.useState(null),2),X=W[0],Y=W[1],Z=e(n.useState("create"),2),ee=Z[0],le=Z[1],ae=function(){return"all"!==z||""!==D},ne=function(){var e={page:1};D&&(e.search=D),"all"!==z&&(e.status=z),O.per_page&&(e.per_page=O.per_page),r.get(route("vcard-builder.contacts",q.slug),e,{preserveState:!0,preserveScroll:!0})},se=[{label:"Back to Businesses",icon:s.jsx(C,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:function(){return r.get(route("vcard-builder.index"))}},{label:"Create Contact",icon:s.jsx(y,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:function(){return Y(null),le("create"),void H(!0)}}],te=[{title:k("Dashboard"),href:route("dashboard")},{title:k("vCard Builder"),href:route("vcard-builder.index")},{title:(null==q?void 0:q.name)||"Business",href:route("vcard-builder.edit",null==q?void 0:q.id)},{title:k("Contacts")}],ce=[{key:"name",label:k("Name"),sortable:!0},{key:"email",label:k("Email"),sortable:!0,render:function(e){return e||"N/A"}},{key:"phone",label:k("Phone"),render:function(e){return e||"N/A"}},{key:"message",label:k("Message"),render:function(e){return e?e.length>50?"".concat(e.substring(0,50),"..."):e:"N/A"}},{key:"status",label:k("Status"),sortable:!0,render:function(e){return s.jsx("span",{className:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ring-gray-500/10 ".concat({new:"bg-blue-100 text-blue-800",contacted:"bg-yellow-100 text-yellow-800",qualified:"bg-purple-100 text-purple-800",converted:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800"}[e]||"bg-gray-100 text-gray-800"),children:e.charAt(0).toUpperCase()+e.slice(1)})}}],re=[{label:k("Reply"),icon:"MessageSquare",action:"reply",className:"text-blue-500"},{label:k("Delete"),icon:"Trash2",action:"delete",className:"text-red-500"}];return s.jsxs(j,{title:"".concat(null==q?void 0:q.name," - ").concat(k("Contacts")),url:route("vcard-builder.contacts",null==q?void 0:q.slug),actions:se,breadcrumbs:te,noPadding:!0,children:[s.jsx("div",{className:"bg-white rounded-lg shadow mb-4",children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("form",{onSubmit:function(e){e.preventDefault(),ne()},className:"flex gap-2",children:[s.jsxs("div",{className:"relative w-64",children:[s.jsx(u,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(i,{placeholder:k("Search contacts..."),value:D,onChange:function(e){return E(e.target.value)},className:"w-full pl-9"})]}),s.jsxs(o,{type:"submit",size:"sm",children:[s.jsx(u,{className:"h-4 w-4 mr-1.5"}),k("Search")]})]}),s.jsx("div",{className:"ml-2",children:s.jsxs(o,{variant:ae()?"default":"outline",size:"sm",className:"h-8 px-2 py-1",onClick:function(){return T(!R)},children:[s.jsx(N,{className:"h-3.5 w-3.5 mr-1.5"}),R?"Hide Filters":"Filters",ae()&&s.jsx("span",{className:"ml-1 bg-primary-foreground text-primary rounded-full w-5 h-5 flex items-center justify-center text-xs",children:("all"!==z?1:0)+(D?1:0)})]})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(d,{className:"text-xs text-muted-foreground",children:k("Per Page:")}),s.jsxs(p,{value:(null===(l=O.per_page)||void 0===l?void 0:l.toString())||"10",onValueChange:function(e){var l={page:1,per_page:parseInt(e)};D&&(l.search=D),"all"!==z&&(l.status=z),r.get(route("vcard-builder.contacts",q.slug),l,{preserveState:!0,preserveScroll:!0})},children:[s.jsx(m,{className:"w-16 h-8",children:s.jsx(f,{})}),s.jsxs(h,{children:[s.jsx(v,{value:"10",children:"10"}),s.jsx(v,{value:"25",children:"25"}),s.jsx(v,{value:"50",children:"50"}),s.jsx(v,{value:"100",children:"100"})]})]})]})]}),R&&s.jsx("div",{className:"w-full mt-3 p-4 bg-gray-50 border rounded-md",children:s.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(d,{children:k("Status")}),s.jsxs(p,{value:z,onValueChange:function(e){I(e);var l={page:1};D&&(l.search=D),"all"!==e&&(l.status=e),O.per_page&&(l.per_page=O.per_page),r.get(route("vcard-builder.contacts",q.slug),l,{preserveState:!0,preserveScroll:!0})},children:[s.jsx(m,{className:"w-40",children:s.jsx(f,{placeholder:k("All Statuses")})}),s.jsxs(h,{children:[s.jsx(v,{value:"all",children:k("All Statuses")}),s.jsx(v,{value:"new",children:k("New")}),s.jsx(v,{value:"contacted",children:k("Contacted")}),s.jsx(v,{value:"qualified",children:k("Qualified")}),s.jsx(v,{value:"converted",children:k("Converted")}),s.jsx(v,{value:"closed",children:k("Closed")})]})]})]}),s.jsx(o,{variant:"outline",size:"sm",className:"h-9",onClick:function(){I("all"),E(""),T(!1),r.get(route("vcard-builder.contacts",q.slug),{page:1,per_page:O.per_page},{preserveState:!0,preserveScroll:!0})},disabled:!ae(),children:k("Reset Filters")})]})})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsx(x,{columns:ce,actions:re,data:(null==A?void 0:A.data)||[],from:(null==A?void 0:A.from)||1,onAction:function(e,l){switch(Y(l),e){case"reply":if(!l.email)return void g.error("Contact has no email address");J(!0);break;case"delete":K(!0)}},sortField:O.sort_field,sortDirection:O.sort_direction,onSort:function(e){var l={sort_field:e,sort_direction:O.sort_field===e&&"asc"===O.sort_direction?"desc":"asc",page:1};D&&(l.search=D),"all"!==z&&(l.status=z),O.per_page&&(l.per_page=O.per_page),r.get(route("vcard-builder.contacts",q.slug),l,{preserveState:!0,preserveScroll:!0})},permissions:[],entityPermissions:{view:"view-contacts",create:"create-contacts",edit:"edit-contacts",delete:"delete-contacts"}}),s.jsxs("div",{className:"p-4 border-t flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:[k("Showing")," ",s.jsx("span",{className:"font-medium",children:(null==A?void 0:A.from)||0})," ",k("to")," ",s.jsx("span",{className:"font-medium",children:(null==A?void 0:A.to)||0})," ",k("of")," ",s.jsx("span",{className:"font-medium",children:(null==A?void 0:A.total)||0})," ",k("contacts")]}),s.jsx("div",{className:"flex gap-1",children:null==A||null===(a=A.links)||void 0===a?void 0:a.map(function(e,l){var a="&laquo; Previous"===e.label||"Next &raquo;"===e.label,n=e.label.replace("&laquo; ","").replace(" &raquo;","");return s.jsx(o,{variant:e.active?"default":"outline",size:a?"sm":"icon",className:a?"px-3":"h-8 w-8",disabled:!e.url,onClick:function(){e.url&&r.get(e.url)},children:a?n:s.jsx("span",{dangerouslySetInnerHTML:{__html:e.label}})},l)})})]})]}),s.jsx(b,{isOpen:V,onClose:function(){return H(!1)},onSubmit:function(e){e.business_id=q.id,"create"===ee?(g.loading(k("Creating contact...")),r.post(route("contacts.store"),e,{onSuccess:function(){H(!1),g.dismiss(),g.success(k("Contact created successfully"))},onError:function(e){g.dismiss(),g.error("Failed to create contact: ".concat(Object.values(e).join(", ")))}})):"edit"===ee&&(g.loading(k("Updating contact...")),r.put(route("contacts.update",X.id),e,{onSuccess:function(){H(!1),g.dismiss(),g.success(k("Contact updated successfully"))},onError:function(e){g.dismiss(),g.error("Failed to update contact: ".concat(Object.values(e).join(", ")))}}))},formConfig:{fields:[{name:"name",label:"Name",type:"text",required:!0},{name:"email",label:"Email",type:"email"},{name:"phone",label:"Phone",type:"text"},{name:"message",label:"Message",type:"textarea"},{name:"status",label:"Status",type:"select",required:!0,options:[{value:"new",label:"New"},{value:"contacted",label:"Contacted"},{value:"qualified",label:"Qualified"},{value:"converted",label:"Converted"},{value:"closed",label:"Closed"}]},{name:"notes",label:"Notes",type:"textarea"}],modalSize:"lg"},initialData:X,title:k("create"===ee?"Create Contact":"edit"===ee?"Edit Contact":"View Contact"),mode:ee}),s.jsx(S,{isOpen:G,onClose:function(){J(!1),Y(null)},onSubmit:function(e){g.loading("Sending reply..."),r.post(route("contacts.reply",X.id),e,{onSuccess:function(){J(!1),Y(null),g.dismiss(),g.success("Reply sent successfully")},onError:function(e){g.dismiss(),g.error("Failed to send reply: ".concat(Object.values(e).join(", ")))}})},contact:X}),s.jsx(w,{isOpen:Q,onClose:function(){return K(!1)},onConfirm:function(){g.loading(k("Deleting contact...")),r.delete(route("contacts.destroy",X.id),{onSuccess:function(){K(!1),g.dismiss(),g.success(k("Contact deleted successfully"))},onError:function(e){g.dismiss(),g.error("Failed to delete contact: ".concat(Object.values(e).join(", ")))}})},itemName:(null==X?void 0:X.name)||"",entityName:"contact"})]})})}}})}();

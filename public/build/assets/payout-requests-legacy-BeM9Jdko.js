!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,s,i,l=[],o=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(a=s.call(n)).done)&&(l.push(a.value),l.length!==t);o=!0);}catch(e){c=!0,r=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}System.register(["./ui-legacy-Df76W54t.js","./app-legacy--_EH1FA6.js","./table-legacy-CMQ1r_Ix.js","./textarea-legacy-C9BYI3_s.js","./vendor-legacy-DNs0y6R6.js","./utils-legacy-4AQaPo1J.js"],function(t,n){"use strict";var a,r,s,i,l,o,c,u,d,m,h,j,x,p,f,y,v,g,b,S,C,w,q,N,A,R,k,P;return{setters:[function(e){a=e.r,r=e.j},function(e){s=e.u,i=e.m,l=e.C,o=e.d,c=e.e,u=e.D,d=e.aq,m=e.B,h=e.P,j=e.a,x=e.b,p=e.c,f=e.L,y=e.I,v=e.g,g=e.F,b=e.X,S=e.t,C=e.i},function(e){w=e.T,q=e.a,N=e.b,A=e.c,R=e.d,k=e.e},function(e){P=e.T},null,null],execute:function(){t("default",function(t){var n,_,B,D,$,O=t.userType,T=t.payoutRequests,I=t.settings,M=t.stats,F=s().t,Y=e(a.useState(!1),2),z=Y[0],E=Y[1],L=e(a.useState(!1),2),U=L[0],X=L[1],G=e(a.useState(null),2),H=G[0],J=G[1],K=i({amount:""}),Q=K.data,V=K.setData,W=K.post,Z=K.processing,ee=K.errors,te=K.reset,ne=i({notes:""}),ae=ne.data,re=ne.setData,se=ne.post,ie=ne.processing;return r.jsxs("div",{className:"space-y-6",children:["company"===O&&r.jsxs(l,{children:[r.jsxs(o,{className:"flex flex-row items-center justify-between",children:[r.jsx(c,{children:F("Create Payout Request")}),r.jsxs(u,{open:z,onOpenChange:E,children:[r.jsx(d,{asChild:!0,children:r.jsxs(m,{disabled:M.availableBalance<I.threshold_amount,children:[r.jsx(h,{className:"h-4 w-4 mr-2"}),F("Request Payout")]})}),r.jsxs(j,{children:[r.jsx(x,{children:r.jsx(p,{children:F("Create Payout Request")})}),r.jsxs("form",{onSubmit:function(e){e.preventDefault(),W(route("referral.payout-request.create"),{onSuccess:function(){E(!1),te(),S.success(F("Payout request submitted successfully"))}})},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(f,{htmlFor:"amount",children:F("Amount")}),r.jsx(y,{id:"amount",type:"number",step:"0.01",min:I.threshold_amount,max:M.availableBalance,value:Q.amount,onChange:function(e){return V("amount",e.target.value)},placeholder:"Min: $".concat(I.threshold_amount)}),ee.amount&&r.jsx("p",{className:"text-sm text-red-500",children:ee.amount})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsxs("p",{children:[F("Available Balance"),": ",(null===(n=window.appSettings)||void 0===n?void 0:n.formatCurrency(M.availableBalance))||"$".concat(M.availableBalance)]}),r.jsxs("p",{children:[F("Minimum Amount"),": ",(null===(_=window.appSettings)||void 0===_?void 0:_.formatCurrency(I.threshold_amount))||"$".concat(I.threshold_amount)]})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(m,{type:"button",variant:"outline",onClick:function(){return E(!1)},children:F("Cancel")}),r.jsx(m,{type:"submit",disabled:Z,children:F("Submit Request")})]})]})]})]})]}),r.jsx(v,{children:r.jsx("p",{className:"text-sm text-muted-foreground",children:M.availableBalance<I.threshold_amount?F("You need at least {{amount}} to request a payout",{amount:(null===(B=window.appSettings)||void 0===B?void 0:B.formatCurrency(I.threshold_amount))||"$".concat(I.threshold_amount)}):F("You can request up to {{amount}} for payout",{amount:(null===(D=window.appSettings)||void 0===D?void 0:D.formatCurrency(M.availableBalance))||"$".concat(M.availableBalance)})})})]}),r.jsxs(l,{children:[r.jsx(o,{children:r.jsx(c,{children:F("superadmin"===O?"All Payout Requests":"Your Payout Requests")})}),r.jsx(v,{children:r.jsxs(w,{children:[r.jsx(q,{children:r.jsxs(N,{className:"dark:bg-gray-800 dark:border-gray-700",children:["superadmin"===O&&r.jsx(A,{children:F("Company")}),r.jsx(A,{children:F("Amount")}),r.jsx(A,{children:F("Status")}),r.jsx(A,{children:F("Date")}),"superadmin"===O&&r.jsx(A,{children:F("Actions")})]})}),r.jsx(R,{children:null===($=T.data)||void 0===$?void 0:$.map(function(e){var t,n,a,s,i;return r.jsxs(N,{className:"dark:bg-gray-900 dark:border-gray-700 dark:hover:bg-gray-800",children:["superadmin"===O&&r.jsx(k,{children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:null===(t=e.company)||void 0===t?void 0:t.name}),r.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-400",children:null===(n=e.company)||void 0===n?void 0:n.email})]})}),r.jsx(k,{children:(null===(a=window.appSettings)||void 0===a?void 0:a.formatCurrency(e.amount))||"$".concat(e.amount)}),r.jsx(k,{children:(i=e.status,r.jsx(C,{variant:{pending:"default",approved:"success",rejected:"destructive"}[i]||"default",children:F(i.charAt(0).toUpperCase()+i.slice(1))}))}),r.jsx(k,{children:(null===(s=window.appSettings)||void 0===s?void 0:s.formatDateTime(e.created_at,!1))||new Date(e.created_at).toLocaleDateString()}),"superadmin"===O&&"pending"===e.status&&r.jsx(k,{children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(m,{size:"sm",variant:"outline",onClick:function(){return function(e){W(route("referral.payout-request.approve",e.id),{onSuccess:function(){S.success(F("Payout request approved"))}})}(e)},children:[r.jsx(g,{className:"h-4 w-4 mr-1"}),F("Approve")]}),r.jsxs(m,{size:"sm",variant:"outline",onClick:function(){J(e),X(!0)},children:[r.jsx(b,{className:"h-4 w-4 mr-1"}),F("Reject")]})]})})]},e.id)})})]})})]}),r.jsx(u,{open:U,onOpenChange:X,children:r.jsxs(j,{children:[r.jsx(x,{children:r.jsx(p,{children:F("Reject Payout Request")})}),r.jsxs("form",{onSubmit:function(e){e.preventDefault(),H&&se(route("referral.payout-request.reject",H.id),{onSuccess:function(){X(!1),J(null),re("notes",""),S.success(F("Payout request rejected"))}})},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(f,{htmlFor:"notes",children:F("Rejection Reason")}),r.jsx(P,{id:"notes",value:ae.notes,onChange:function(e){return re("notes",e.target.value)},placeholder:F("Enter reason for rejection...")})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(m,{type:"button",variant:"outline",onClick:function(){return X(!1)},children:F("Cancel")}),r.jsx(m,{type:"submit",variant:"destructive",disabled:ie,children:F("Reject Request")})]})]})]})})]})})}}})}();

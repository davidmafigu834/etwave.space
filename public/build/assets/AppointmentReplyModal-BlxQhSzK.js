import{r as x,j as e}from"./ui-XtzbmeJx.js";import{u as M,D as E,a as R,b as _,c as $,A as k,L as S,E as V,B as o}from"./app-BNDAg-x0.js";import{T as F}from"./textarea-BAxIzAY1.js";import{S as I,a as L,b as U,c as B,d as c}from"./select-CWuHpsTP.js";import{C as O}from"./calendar-Calahg4u.js";import{M as P}from"./mail-Dom0Io57.js";import{P as q}from"./phone-DR_qe593.js";import{C as z}from"./clock-DkagGUmf.js";import{M as H}from"./message-square-BWj-TB69.js";function p({isOpen:C,onClose:h,onSubmit:D,appointment:s}){var f,y,b,N;const{t:r}=M(),[u,g]=x.useState(""),[j,i]=x.useState("");x.useEffect(()=>{s&&(g(s.notes||""),i(s.status||"scheduled"))},[s]);const w=l=>{l.preventDefault(),D({notes:u,status:j})},T=(l,d)=>{var v;if(!l)return"N/A";try{const a=new Date(l).toISOString().split("T")[0],t=d||"00:00",A="".concat(a," ").concat(t,":00");return((v=window.appSettings)==null?void 0:v.formatDateTime(A,!0))||"".concat(new Date(l).toLocaleDateString()," ").concat(d||"00:00")}catch(a){return console.error("Date formatting error:",a),"Invalid Date"}},m=l=>({scheduled:"bg-blue-100 text-blue-800",confirmed:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800",no_show:"bg-orange-100 text-orange-800"})[l]||"bg-gray-100 text-gray-800";return e.jsx(E,{open:C,onOpenChange:h,children:e.jsxs(R,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs(_,{children:[e.jsx($,{children:r("Reply to Appointment")}),e.jsx(k,{children:r("Update status and send a reply to this appointment")})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-md mb-4",children:[e.jsx("div",{className:"flex items-center mb-2",children:e.jsx("span",{className:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ring-gray-500/10 ".concat(m((s==null?void 0:s.status)||"scheduled")),children:((f=s==null?void 0:s.status)==null?void 0:f.charAt(0).toUpperCase())+((y=s==null?void 0:s.status)==null?void 0:y.slice(1).replace("_"," "))||"Scheduled"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:(s==null?void 0:s.name)||(s==null?void 0:s.title)||""}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("span",{children:T((s==null?void 0:s.appointment_date)||(s==null?void 0:s.date),(s==null?void 0:s.appointment_time)||(s==null?void 0:s.time))})]}),(s==null?void 0:s.email)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("span",{children:s==null?void 0:s.email})]}),(s==null?void 0:s.phone)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("span",{children:s==null?void 0:s.phone})]}),(((b=s==null?void 0:s.business)==null?void 0:b.name)||(s==null?void 0:s.business))&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"h-4 w-4 mr-2 text-gray-500"}),e.jsx("span",{children:typeof(s==null?void 0:s.business)=="string"?s==null?void 0:s.business:(N=s==null?void 0:s.business)==null?void 0:N.name})]})]}),(s==null?void 0:s.message)&&e.jsx("div",{className:"mt-3 border-t border-gray-200 dark:border-gray-700 pt-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(H,{className:"h-4 w-4 mr-2 text-gray-500 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-sm mb-1",children:[r("Client Message"),":"]}),e.jsx("p",{className:"text-sm",children:s==null?void 0:s.message})]})]})})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"status",children:r("Update Status")}),e.jsxs(I,{value:j,onValueChange:i,children:[e.jsx(L,{children:e.jsx(U,{placeholder:r("Select status")})}),e.jsxs(B,{children:[e.jsx(c,{value:"scheduled",children:r("Scheduled")}),e.jsx(c,{value:"confirmed",children:r("Confirmed")}),e.jsx(c,{value:"completed",children:r("Completed")}),e.jsx(c,{value:"cancelled",children:r("Cancelled")}),e.jsx(c,{value:"no_show",children:r("No Show")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"notes",children:r("Your Reply")}),e.jsx(F,{id:"notes",placeholder:r("Enter your reply here..."),value:u,onChange:l=>g(l.target.value),rows:5,className:"resize-none"})]})]}),e.jsxs(V,{className:"pt-2",children:[e.jsx(o,{type:"button",variant:"outline",onClick:h,children:r("Cancel")}),e.jsx(o,{type:"submit",children:r("Send Reply")})]})]})]})})}export{p as A};

import{r,j as e}from"./ui-XtzbmeJx.js";import{u as j,n as C}from"./app-BNDAg-x0.js";import{V as v}from"./VCardPreview-D3RJlNog.js";import{C as M,A as E}from"./AppointmentFormModal-DbrqsuuM.js";import{g as h}from"./index-CO6jniE0.js";import{u as N}from"./use-favicon-B5hfZCZO.js";import"./vendor-CxtKjBZA.js";import"./utils-CCVAIzGD.js";import"./play-DoCzCOfb.js";import"./SocialIcon-qOmKQ0wb.js";import"./browser-VK1alZgc.js";import"./download-D0_w8mHD.js";import"./copy-DrIsvEfV.js";import"./share-2-C5tufTUg.js";import"./sectionHelpers-Dniuxp0X.js";import"./language-DYlIyiUn.js";import"./calendar-Calahg4u.js";import"./mail-Dom0Io57.js";import"./youtube-qcPb_Nsa.js";import"./wrench-CC3Gd12W.js";import"./phone-DR_qe593.js";import"./globe-Wz67MOVh.js";import"./map-pin-96bacp2H.js";import"./clock-DkagGUmf.js";import"./video-CmKPlxf2.js";import"./star-DzqcSj_M.js";import"./qr-code-CQ8236PS.js";import"./message-square-BWj-TB69.js";import"./house-DU4ZKfa7.js";import"./award-C8ej-wRP.js";import"./user-D1kIaiAN.js";import"./briefcase-BSRomG9M.js";import"./building-CgWQ2SoN.js";import"./dollar-sign-Cilvu6Pq.js";import"./package-DifSoftz.js";import"./smartphone-CNm8VAQ8.js";import"./menu-BeeeYSFI.js";import"./camera-C-UQKom4.js";import"./heart-C-sT4fnZ.js";import"./external-link-aX1h0ANF.js";import"./chevron-right-Bd-0PcYb.js";import"./chevron-up-DUlTmMPd.js";import"./users-dhNqMrnE.js";import"./instagram-cV-N76_q.js";import"./facebook-CwgMUPmw.js";import"./sparkles-DpD6ndVc.js";import"./shopping-bag-CblcqTrH.js";import"./shield-check-DMwzabF4.js";import"./refresh-cw-C_rZszMM.js";import"./compass-Bprd_yd6.js";import"./arrow-right-Pl_Cz_hR.js";import"./shield-miDYeZjR.js";import"./circle-check-big-CQAe5LhS.js";import"./circle-check-DWFyzZat.js";import"./code-O43MSYvJ.js";import"./linkedin-ojqsVbzp.js";import"./trending-up-i79bn84M.js";import"./settings-CPdYUYGM.js";import"./zap-DDbCAESS.js";import"./monitor-C8YWkyx4.js";import"./ticket-D2-8zKy1.js";import"./circle-help-9NdNeTGO.js";import"./chart-column-c4hbpdne.js";import"./target-sc6z-tl4.js";import"./shopping-cart-D_c8Mwgj.js";import"./activity-Boh3tFUU.js";import"./eye-3VLs8-F7.js";import"./lightbulb-DtxT_Re5.js";import"./layers-E5PjcZZt.js";import"./SolarInstallationTemplate-kqtlfLfw.js";import"./leaf-HDC9qo8p.js";import"./sun-medium-BtKuymUY.js";import"./building-2-DMMUyCqJ.js";import"./borehole-drilling-DMk3_hv2.js";import"./RetailShopTemplate-BL-3WsOt.js";import"./BoreholeDrillingTemplate-D38dctzu.js";import"./waves-DDwyigPY.js";import"./message-circle-zaP7lS8a.js";import"./droplet-u9UhRTkF.js";import"./quote-x2bY6ZX9.js";import"./textarea-BAxIzAY1.js";import"./circle-x-DWakLtmf.js";function et(){var l,d,u,f,g;N();const{t:p}=j(),[o,x]=r.useState(null),[t,b]=r.useState(null),[_,a]=r.useState(!1),[y,c]=r.useState(!1);return r.useEffect(()=>{const n=localStorage.getItem("vcard_preview_data");if(n)try{const s=JSON.parse(n);if(x(s),s.business_type){const m=h(s.business_type);console.log("Template lookup for:",s.business_type,"Result:",m),b(m||h("freelancer"))}}catch(s){console.error("Error parsing preview data:",s)}},[]),r.useEffect(()=>{const n=i=>{a(!0)},s=i=>{c(!0)},m=[window,document,document.body];return m.forEach(i=>{i.addEventListener("openContactModal",n,!0),i.addEventListener("openAppointmentModal",s,!0)}),()=>{m.forEach(i=>{i.removeEventListener("openContactModal",n,!0),i.removeEventListener("openAppointmentModal",s,!0)})}},[]),!o||!t?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:p("Loading Preview...")}),e.jsx("p",{className:"text-gray-600",children:p("If nothing loads, please go back and try again.")})]})}):e.jsxs(e.Fragment,{children:[e.jsx(C,{title:"Preview: ".concat(o.name||"Business Card")}),e.jsx("div",{className:"min-h-screen bg-gray-100",children:e.jsx("div",{className:"max-w-md mx-auto py-8",children:e.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:e.jsx(v,{businessType:o.business_type,data:{name:o.name,slug:"preview",business_type:o.business_type,config_sections:o.config_sections,template_config:{sections:o.config_sections,sectionSettings:o.config_sections,allowedSections:(l=o.template_config)==null?void 0:l.allowedSections}},template:t})})})}),e.jsx(M,{isOpen:_,onClose:()=>a(!1),businessId:0,businessName:(o==null?void 0:o.name)||"Preview Business",themeColors:((d=o==null?void 0:o.config_sections)==null?void 0:d.colors)||(t==null?void 0:t.defaultColors),themeFont:((u=o==null?void 0:o.config_sections)==null?void 0:u.font)||(t==null?void 0:t.defaultFont)}),e.jsx(E,{isOpen:y,onClose:()=>c(!1),businessId:0,businessName:(o==null?void 0:o.name)||"Preview Business",themeColors:((f=o==null?void 0:o.config_sections)==null?void 0:f.colors)||(t==null?void 0:t.defaultColors),themeFont:((g=o==null?void 0:o.config_sections)==null?void 0:g.font)||(t==null?void 0:t.defaultFont)})]})}export{et as default};

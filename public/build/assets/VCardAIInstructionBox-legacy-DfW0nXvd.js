!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,r,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function s(e,o,a,i){var s=o&&o.prototype instanceof l?o:l,c=Object.create(s.prototype);return n(c,"_invoke",function(e,n,o){var a,i,s,l=0,c=o||[],d=!1,f={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,n){return a=e,i=0,s=t,f.n=n,u}};function v(e,n){for(i=e,s=n,r=0;!d&&l&&!o&&r<c.length;r++){var o,a=c[r],v=f.p,p=a[2];e>3?(o=p===n)&&(s=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=v&&((o=e<2&&v<a[1])?(i=0,f.v=n,f.n=a[1]):v<p&&(o=e<3||a[0]>n||n>p)&&(a[4]=e,a[5]=n,f.n=p,i=0))}if(o||e>1)return u;throw d=!0,n}return function(o,c,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===c&&v(c,p),i=c,s=p;(r=i<2?t:s)||!d;){a||(i?i<3?(i>1&&(f.n=-1),v(i,s)):f.n=s:f.v=s);try{if(l=2,a){if(i||(o="next"),r=a[o]){if(!(r=r.call(a,s)))throw TypeError("iterator result is not an object");if(!r.done)return r;s=r.value,i<2&&(i=0)}else 1===i&&(r=a.return)&&r.call(a),i<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((r=(d=f.n<0)?s:e.call(n,f))!==u)break}catch(r){a=t,i=1,s=r}finally{l=1}}return{value:r,done:d}}}(e,a,i),!0),c}var u={};function l(){}function c(){}function d(){}r=Object.getPrototypeOf;var f=[][a]?r(r([][a]())):(n(r={},a,function(){return this}),r),v=d.prototype=l.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,n(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return c.prototype=d,n(v,"constructor",d),n(d,"constructor",c),c.displayName="GeneratorFunction",n(d,i,"GeneratorFunction"),n(v),n(v,i,"Generator"),n(v,a,function(){return this}),n(v,"toString",function(){return"[object Generator]"}),(e=function(){return{w:s,m:p}})()}function n(e,t,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}n=function(e,t,r,o){function i(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},n(e,t,r,o)}function t(e,n,t,r,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void t(e)}s.done?n(u):Promise.resolve(u).then(r,o)}function r(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,s=[],u=!0,l=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=a.call(t)).done)&&(s.push(r.value),s.length!==n);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}(e,n)||function(e,n){if(e){if("string"==typeof e)return o(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}System.register(["./ui-legacy-Df76W54t.js","./app-legacy-Ccoue2ey.js","./textarea-legacy-CJiaJOZ9.js","./vendor-legacy-DNs0y6R6.js","./utils-legacy-4AQaPo1J.js"],function(n,o){"use strict";var a,i,s,u,l,c,d,f,v;return{setters:[function(e){a=e.R,i=e.j},function(e){s=e.u,u=e.C,l=e.L,c=e.B,d=e.t,f=e.o},function(e){v=e.T},null,null],execute:function(){n("default",function(n){var o=n.userPlan,p=n.planFeatures,m=n.userRole,y=n.onboardingProfile,h=n.sections,b=n.businessName,g=n.businessType,j=n.templateSections,x=n.onResult,w=s().t,S=r(a.useState(""),2),O=S[0],_=S[1],k=r(a.useState(!1),2),A=k[0],N=k[1],T=a.useMemo(function(){return"superadmin"===m||!0===(null==p?void 0:p.ai_integration)},[null==p?void 0:p.ai_integration,m]),P=a.useMemo(function(){return T?null:null!=o&&o.name?w("AI content generation is not included in your current plan ({{plan}}).",{plan:o.name}):w("AI content generation is not available for your account.")},[T,w,null==o?void 0:o.name]),I=function(){var n,r=(n=e().m(function n(){var t,r,o,a,i,s,u,l,c,v,p,m,S,k;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if((t=O.trim())&&T&&!A){e.n=1;break}return t||d.error(w("Please provide some details about your business before generating.")),e.a(2);case 1:return N(!0),e.p=2,u={business_name:null!==(r=null!=b?b:null==y?void 0:y.business_name)&&void 0!==r?r:void 0,business_type:null!==(o=null!=g?g:null==y?void 0:y.business_category)&&void 0!==o?o:void 0,tone:"professional",language:"en",sections:null!=h?h:{},template_sections:j&&j.length>0?j:void 0,chat:[{role:"user",content:t}]},e.n=3,f.post(route("vcard-builder.ai.chat"),u);case 3:if(l=e.v,null!==(a=l.data)&&void 0!==a&&a.success){e.n=4;break}throw new Error((null===(c=l.data)||void 0===c?void 0:c.message)||"Unable to generate content.");case 4:v=null!==(i=l.data.data)&&void 0!==i?i:{},p=null!==(s=v.sections)&&void 0!==s?s:{},null==x||x(p,v),d.success(w("Draft content created. Review and adjust any sections you need.")),_(""),e.n=6;break;case 5:e.p=5,k=e.v,S=(null==k||null===(m=k.response)||void 0===m||null===(m=m.data)||void 0===m?void 0:m.message)||(null==k?void 0:k.message)||w("Unable to generate AI content. Please try again."),d.error(S);case 6:return e.p=6,N(!1),e.f(6);case 7:return e.a(2)}},n,null,[[2,5,6,7]])}),function(){var e=this,r=arguments;return new Promise(function(o,a){var i=n.apply(e,r);function s(e){t(i,o,a,s,u,"next",e)}function u(e){t(i,o,a,s,u,"throw",e)}s(void 0)})});return function(){return r.apply(this,arguments)}}();return i.jsx(u,{className:"border-dashed bg-muted/30",children:i.jsxs("div",{className:"flex flex-col gap-4 p-6",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("h2",{className:"text-lg font-semibold",children:w("AI Content Assistant")}),i.jsx("p",{className:"text-sm text-muted-foreground",children:w("Share the key details about your business, services, projects, and offers. The assistant will use this to fill every section automatically.")})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(l,{htmlFor:"ai-brief",children:w("Tell us about your business")}),i.jsx(v,{id:"ai-brief",value:O,onChange:function(e){return _(e.target.value)},placeholder:w("For example: We are a construction company specialising in painting services, renovations, and home maintenance packages. Our hero call-to-action should invite visitors to request a quote. Include 3 core services, 2 featured projects, customer testimonials, package tiers, and contact details including phone, email, and address."),rows:6,maxLength:1900,disabled:!T||A}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[i.jsx("span",{children:w("{{count}} characters remaining",{count:1900-O.length})}),!T&&P?i.jsx("span",{className:"text-amber-600",children:P}):null]})]}),i.jsx("div",{className:"flex items-center justify-end gap-3",children:i.jsx(c,{type:"button",onClick:I,disabled:!T||A||!O.trim(),children:w(A?"Working...":"Generate all sections")})})]})})})}}})}();

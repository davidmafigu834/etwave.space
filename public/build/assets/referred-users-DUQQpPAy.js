import{j as e}from"./ui-XtzbmeJx.js";import{P as u}from"./page-template-l6fMhetb.js";import{u as j,K as g,$ as N,B as y,C as l,g as n,d as v,e as b,i as x,S as w}from"./app-CHRIhyY0.js";import{P as C}from"./pagination-ZAaySqLp.js";import{A as S}from"./arrow-left-hltsWyVL.js";import{U as o}from"./users-DVhUqNZg.js";import{D as U}from"./dollar-sign-CEEAnrcL.js";import{C as k}from"./calendar-CuyjcLRJ.js";import{a as P}from"./utils-CCVAIzGD.js";import"./vendor-CxtKjBZA.js";import"./app-layout-Bpd3XWn2.js";import"./app-sidebar-layout-DTBrRaJF.js";import"./textarea-aJ3buVnx.js";import"./select-DVebJzi_.js";import"./index-C0g6bluz.js";import"./chevron-up-CWYfEUVP.js";import"./react-country-flag.esm-B3QM5-4S.js";import"./language-DYlIyiUn.js";import"./sparkles-CWM6veXP.js";import"./loader-circle-CU4vh_jx.js";import"./copy-_TD738Qf.js";import"./chevron-right-4OzdI5Hc.js";import"./language-switcher-DlUYSL3d.js";import"./globe-DnSDzBxp.js";import"./chart-column-C3hnsquQ.js";import"./briefcase-DFRvW6SB.js";import"./package-CVcIKtJX.js";import"./credit-card-D2Mnc2f1.js";import"./mail-uU9WM_iR.js";import"./settings-D1jKjqmC.js";import"./message-square-CzRq4BMj.js";import"./wallet-B8MIIno5.js";import"./shopping-bag-DIpJi4I3.js";import"./user-UtdwWo_w.js";import"./use-favicon-DDTtBI2L.js";import"./cookie-consent-KmXGJKj8.js";function ce(){const{t:r}=j(),{props:p}=g(),{referredUsers:a,userType:c}=p,f=s=>P(new Date(s),{addSuffix:!0}),m=s=>{var t;return((t=s.referrals)==null?void 0:t.reduce((i,d)=>i+(Number(d.amount)||0),0))||0},h=s=>{var i;if(!s.plan)return null;const t=(i=s.plan_orders)==null?void 0:i[0];if(t){const d=t.billing_cycle==="yearly";return{name:s.plan.name,price:t.final_price,cycle:d?"year":"month"}}return{name:s.plan.name,price:s.plan.price,cycle:"month"}};return e.jsx(u,{title:r("Referred Users"),url:"/referral/referred-users",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(N,{href:route("referral.index"),children:e.jsxs(y,{variant:"outline",size:"sm",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),r("Back to Referral Dashboard")]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:r("Referred Users")}),e.jsx("p",{className:"text-muted-foreground",children:r(c==="superadmin"?"All users who registered using referral codes":"Users who registered using your referral code")})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(l,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:r("Total Referred Users")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:a.total})]}),e.jsx("div",{className:"rounded-full bg-green-100 p-3 dark:bg-green-900",children:e.jsx(o,{className:"h-5 w-5 text-green-600 dark:text-green-400"})})]})})}),e.jsx(l,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:r("Users with Plans")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:a.data.filter(s=>s.plan).length})]}),e.jsx("div",{className:"rounded-full bg-blue-100 p-3 dark:bg-blue-900",children:e.jsx(o,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})})]})})}),e.jsx(l,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:r("Total Commission Earned")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:window.appSettings.formatCurrency((a.data.reduce((s,t)=>s+m(t),0)||0).toFixed(2))})]}),e.jsx("div",{className:"rounded-full bg-yellow-100 p-3 dark:bg-yellow-900",children:e.jsx(U,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})})]})})})]}),e.jsxs(l,{children:[e.jsx(v,{children:e.jsx(b,{children:r("Referred Users List")})}),e.jsx(n,{children:a.data.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(o,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:r("No referred users yet")}),e.jsx("p",{className:"text-muted-foreground",children:r(c==="superadmin"?"No users have registered using referral codes yet.":"Share your referral link to start earning commissions.")})]}):e.jsx("div",{className:"space-y-4",children:a.data.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-primary",children:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(k,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[r("Registered")," ",f(s.created_at)]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-right",children:(()=>{const t=h(s);return t?e.jsxs("div",{children:[e.jsx(x,{variant:"default",className:"mb-1",children:t.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[window.appSettings.formatCurrency(t.price),"/",r(t.cycle)]})]}):e.jsx(x,{variant:"secondary",children:r("No Plan")})})()}),m(s)>0&&e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium text-green-600",children:["+",window.appSettings.formatCurrency(m(s))]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r("Commission")})]})]})]}),s.referrals&&s.referrals.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:r("Commission History")}),e.jsx("div",{className:"space-y-1",children:s.referrals.map(t=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[t.commission_percentage,"% commission"]}),e.jsxs("span",{className:"font-medium text-green-600",children:["+",window.appSettings.formatCurrency(t.amount)]})]},t.id))})]})]},s.id))})})]}),a.last_page>1&&e.jsx(C,{from:a.from,to:a.to,total:a.total,links:a.links,currentPage:a.current_page,lastPage:a.last_page,entityName:r("users"),onPageChange:s=>{w.visit(s,{preserveState:!0,preserveScroll:!0})}})]})})}export{ce as default};

import{r as v,j as e}from"./ui-XtzbmeJx.js";import{u as H,K as M,S as w,C as l,d as c,e as o,g as n,L as R,B as W,i as J,f as x}from"./app--U2u_Nco.js";import{P as Q}from"./page-template-_w_TezBb.js";import{D as E}from"./date-picker-BjqS6To-.js";import{T as Z,a as ee,b as m,c as h}from"./tabs-CUnSuE_W.js";import{A as se}from"./arrow-left-DKs6FA6H.js";import{E as te}from"./eye-B7sLO0GV.js";import{U as ae}from"./users-DAfK_cju.js";import{G as re}from"./globe-D7cjKJp0.js";import{R as j,C as D,X as k,Y as C}from"./CartesianChart-Bd-FNbfR.js";import{L as ie,a as le}from"./LineChart-lIzyjbX7.js";import{T as p,P as U,a as I,C as b}from"./PieChart-BhqwjD_2.js";import{L as u,B as O,a as G}from"./BarChart-B3JUZK-G.js";import"./vendor-CxtKjBZA.js";import"./utils-CCVAIzGD.js";import"./app-layout-2q3qeuPG.js";import"./app-sidebar-layout-B8sCBDfP.js";import"./textarea-DI5KsTzY.js";import"./select-DPTsfyZo.js";import"./index-C0g6bluz.js";import"./chevron-up-Cb1PVDjg.js";import"./react-country-flag.esm-B3QM5-4S.js";import"./language-DYlIyiUn.js";import"./sparkles-CjzlGYDC.js";import"./loader-circle-sCJ-o5H7.js";import"./copy-C3tPhgbj.js";import"./chevron-right-BNDDuqe9.js";import"./language-switcher-CoqxIfsY.js";import"./chart-column-I-WbOlTU.js";import"./briefcase-D8uqggDK.js";import"./package-sLSwB21j.js";import"./credit-card-BnHKQyNb.js";import"./dollar-sign-iDXPpovF.js";import"./mail-CeMU5Fvk.js";import"./settings-DvHmCXCi.js";import"./message-square-PGEHhf8N.js";import"./calendar-BvntvMDr.js";import"./wallet-BJ9Z1Mvd.js";import"./shopping-bag-D4ViwlKW.js";import"./user-Cz4gw8yj.js";import"./use-favicon-8c0NNY31.js";import"./cookie-consent-CREhfCi9.js";import"./react-redux-DgYNU6LW.js";import"./tiny-invariant-BaFNuDhB.js";function Je(){var V,_,A,K;const{t:s}=H(),{bioLink:r,analytics:i,filters:f}=M().props,[y,B]=v.useState(f.start_date?new Date(f.start_date):new Date(i.startDate)),[N,S]=v.useState(f.end_date?new Date(f.end_date):new Date(i.endDate)),[g,T]=v.useState(!1),q=()=>{!y||!N||(T(!0),w.get(route("link-bio-builder.analytics",r.id),{start_date:y.toISOString().split("T")[0],end_date:N.toISOString().split("T")[0]},{preserveState:!0,onFinish:()=>T(!1)}))};v.useEffect(()=>{const t=setInterval(()=>{g||w.reload({only:["analytics"]})},3e5);return()=>clearInterval(t)},[g]);const d=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"],X=t=>{const a=new Date(t);return"".concat(a.getMonth()+1,"/").concat(a.getDate())},L=((V=i.devices)==null?void 0:V.length)>0?i.devices.map((t,a)=>({name:t.device_type||"Unknown",value:t.count})):[{name:"No Data",value:1}],P=((_=i.referrers)==null?void 0:_.length)>0?i.referrers.map(t=>({name:t.referrer||"Direct",value:t.count})):[{name:"No Data",value:1}],$=((A=i.platforms)==null?void 0:A.length)>0?i.platforms.map(t=>({name:t.platform_name||"Unknown",value:t.count})):[{name:"No Data",value:1}],F=((K=i.browsers)==null?void 0:K.length)>0?i.browsers.map(t=>({name:t.browser_name||"Unknown",value:t.count})):[{name:"No Data",value:1}],Y=[{label:s("Back to Bio Links"),icon:e.jsx(se,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:()=>w.get(route("link-bio-builder.index"))}],z=[{title:s("Dashboard"),href:route("dashboard")},{title:s("Bio Link Builder"),href:route("link-bio-builder.index")},{title:(r==null?void 0:r.name)||"Bio Link",href:route("link-bio-builder.edit",r==null?void 0:r.id)},{title:s("Analytics")}];return e.jsx(Q,{title:"".concat(r==null?void 0:r.name," - ").concat(s("Analytics")),url:route("link-bio-builder.analytics",r==null?void 0:r.id),actions:Y,breadcrumbs:z,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(o,{className:"text-sm",children:s("Date Range")})}),e.jsx(n,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{children:s("Start Date")}),e.jsx(E,{selected:y,onSelect:B,onChange:t=>B(t)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{children:s("End Date")}),e.jsx(E,{selected:N,onSelect:S,onChange:t=>S(t)})]}),e.jsx(W,{onClick:q,disabled:g,children:s(g?"Loading...":"Apply")})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(l,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Page Views")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:i.pageViews})]}),e.jsx("div",{className:"rounded-full bg-blue-100 p-3 dark:bg-blue-900",children:e.jsx(te,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})})]})})}),e.jsx(l,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Unique Visitors")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:i.uniqueVisitors})]}),e.jsx("div",{className:"rounded-full bg-purple-100 p-3 dark:bg-purple-900",children:e.jsx(ae,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})})]})})}),e.jsx(l,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Link Type")}),e.jsx("h3",{className:"mt-2 text-lg font-bold",children:e.jsx(J,{variant:"outline",className:"capitalize",children:r.link_type})})]}),e.jsx("div",{className:"rounded-full bg-green-100 p-3 dark:bg-green-900",children:e.jsx(re,{className:"h-5 w-5 text-green-600 dark:text-green-400"})})]})})})]}),e.jsxs(Z,{defaultValue:"traffic",children:[e.jsxs(ee,{className:"mb-4 w-full justify-start overflow-x-auto",children:[e.jsx(m,{value:"traffic",children:s("Traffic")}),e.jsx(m,{value:"devices",children:s("Devices")}),e.jsx(m,{value:"platforms",children:s("Platforms")}),e.jsx(m,{value:"browsers",children:s("Browsers")}),e.jsx(m,{value:"referrers",children:s("Referrers")})]}),e.jsx(h,{value:"traffic",children:e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:s("Daily Page Views")}),e.jsx(x,{className:"text-xs",children:s("Page views over the selected time period")})]}),e.jsx(n,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(ie,{data:i.dailyPageViews||[],margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(k,{dataKey:"date",tickFormatter:X}),e.jsx(C,{}),e.jsx(p,{}),e.jsx(u,{}),e.jsx(le,{type:"monotone",dataKey:"views",name:"Page Views",stroke:"#8884d8",activeDot:{r:8}})]})})})})]})}),e.jsx(h,{value:"devices",children:e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:s("Device Types")}),e.jsx(x,{className:"text-xs",children:s("Breakdown of visitors by device type")})]}),e.jsx(n,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(U,{children:[e.jsx(I,{data:L,cx:"50%",cy:"50%",labelLine:!1,outerRadius:100,fill:"#8884d8",dataKey:"value",label:({name:t,percent:a})=>"".concat(t,": ").concat((a*100).toFixed(0),"%"),children:L.map((t,a)=>e.jsx(b,{fill:d[a%d.length]},"cell-".concat(a)))}),e.jsx(p,{}),e.jsx(u,{})]})})})})]})}),e.jsx(h,{value:"platforms",children:e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:s("Operating Systems")}),e.jsx(x,{className:"text-xs",children:s("Breakdown of visitors by operating system")})]}),e.jsx(n,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(U,{children:[e.jsx(I,{data:$,cx:"50%",cy:"50%",labelLine:!1,outerRadius:100,fill:"#8884d8",dataKey:"value",label:({name:t,percent:a})=>"".concat(t,": ").concat((a*100).toFixed(0),"%"),children:$.map((t,a)=>e.jsx(b,{fill:d[a%d.length]},"cell-".concat(a)))}),e.jsx(p,{}),e.jsx(u,{})]})})})})]})}),e.jsx(h,{value:"browsers",children:e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:s("Web Browsers")}),e.jsx(x,{className:"text-xs",children:s("Breakdown of visitors by web browser")})]}),e.jsx(n,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(O,{data:F,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(k,{dataKey:"name"}),e.jsx(C,{}),e.jsx(p,{}),e.jsx(u,{}),e.jsx(G,{dataKey:"value",name:"Visits",fill:"#8884d8",children:F.map((t,a)=>e.jsx(b,{fill:d[a%d.length]},"cell-".concat(a)))})]})})})})]})}),e.jsx(h,{value:"referrers",children:e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:s("Top Referrers")}),e.jsx(x,{className:"text-xs",children:s("Sources of traffic to your bio link")})]}),e.jsx(n,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(O,{data:P,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(D,{strokeDasharray:"3 3"}),e.jsx(k,{dataKey:"name"}),e.jsx(C,{}),e.jsx(p,{}),e.jsx(u,{}),e.jsx(G,{dataKey:"value",name:"Visits",fill:"#8884d8",children:P.map((t,a)=>e.jsx(b,{fill:d[a%d.length]},"cell-".concat(a)))})]})})})})]})})]})]})})}export{Je as default};

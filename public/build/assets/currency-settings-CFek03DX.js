import{r as v,j as e}from"./ui-XtzbmeJx.js";import{u as O,K as R,q,C as H,d as K,g as U,I as W,B as h,L as d,i as _,am as p,x as f,y,r as S,z as N,F as g,w as G,t as m,S as J}from"./app--U2u_Nco.js";import{S as C,a as w,b as F,c as P,d as l}from"./select-DPTsfyZo.js";import{S as M}from"./switch-DN11QdvS.js";import{D as Q}from"./dollar-sign-iDXPpovF.js";import"./vendor-CxtKjBZA.js";import"./utils-CCVAIzGD.js";import"./index-C0g6bluz.js";import"./chevron-up-Cb1PVDjg.js";function le(){var T,$,I,B;const{t:a}=O(),{currencies:n=[],systemSettings:o={}}=R().props,[r,b]=v.useState({decimalFormat:o.decimalFormat||"2",defaultCurrency:o.defaultCurrency||"USD",decimalSeparator:o.decimalSeparator||".",thousandsSeparator:o.thousandsSeparator||",",floatNumber:o.floatNumber!=="0",currencySymbolSpace:o.currencySymbolSpace==="1",currencySymbolPosition:o.currencySymbolPosition||"before",currencyName:""}),[D,k]=v.useState(1234.56);v.useEffect(()=>{if(n&&n.length>0){const s=n.find(t=>t.code===r.defaultCurrency);s&&b(t=>({...t,currencyName:s.name}))}},[n,r.defaultCurrency]);const i=(s,t)=>{b(c=>({...c,[s]:t}))},V=s=>{const t=n.find(c=>c.code===s);b(c=>({...c,defaultCurrency:s,currencyName:(t==null?void 0:t.name)||s}))},z=()=>{try{let s=Number(D)||0;const t=parseInt(r.decimalFormat)||2;r.floatNumber||(s=Math.floor(s));const c=Number(s).toFixed(t).split(".");r.thousandsSeparator!=="none"&&(c[0]=c[0].replace(/\B(?=(\d{3})+(?!\d))/g,r.thousandsSeparator));let x=c.join(r.decimalSeparator);const u=n.find(L=>L.code===r.defaultCurrency),j=(u==null?void 0:u.symbol)||"$",E=r.currencySymbolSpace?" ":"";return r.currencySymbolPosition==="before"?"".concat(j).concat(E).concat(x):"".concat(x).concat(E).concat(j)}catch(s){return"Invalid format"}},A=s=>{s.preventDefault(),m.loading(a("Saving currency settings...")),J.post(route("settings.currency.update"),r,{preserveScroll:!0,onSuccess:t=>{var u,j;m.dismiss();const c=(u=t.props.flash)==null?void 0:u.success,x=(j=t.props.flash)==null?void 0:j.error;c?m.success(c):x?m.error(x):m.success(a("Currency settings updated successfully"))},onError:t=>{m.dismiss();const c=t.error||Object.values(t).join(", ")||a("Failed to update currency settings");m.error(c)}})};return e.jsx(q,{title:a("Currency Settings"),description:a("Configure how currency values are displayed throughout the application"),action:e.jsxs(h,{type:"submit",form:"currency-settings-form",size:"sm",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),a("Save Changes")]}),children:e.jsx("form",{id:"currency-settings-form",onSubmit:A,children:e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx("div",{children:e.jsxs(H,{children:[e.jsx(K,{className:"pb-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"text-base font-medium",children:a("Format Options")})]})})}),e.jsx(U,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"p-4 bg-muted/30 rounded-md border flex flex-col md:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col items-center md:items-start mb-3 md:mb-0",children:[e.jsx("div",{className:"text-2xl font-semibold mb-1",children:z()}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[r.currencyName," (",r.defaultCurrency,")"]})]}),e.jsx("div",{className:"w-full md:w-auto md:max-w-[200px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{type:"number",className:"text-right h-8 text-sm",value:D,onChange:s=>k(parseFloat(s.target.value)||0),placeholder:"Test amount"}),e.jsx(h,{variant:"outline",onClick:()=>k(1234.56),type:"button",size:"sm",className:"h-8 text-xs",children:a("Reset")})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{htmlFor:"defaultCurrency",className:"font-medium",children:a("Default Currency")}),e.jsx(_,{variant:"outline",className:"font-mono",children:r.defaultCurrency})]}),e.jsxs(C,{value:r.defaultCurrency,onValueChange:V,children:[e.jsx(w,{children:e.jsx(F,{placeholder:a("Select currency")})}),e.jsx(P,{children:e.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:n&&n.length>0?n.map(s=>e.jsx(l,{value:s.code,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-8 text-center",children:s.symbol}),e.jsxs("span",{children:[s.code," - ",s.name]}),s.is_default&&e.jsx("span",{className:"ml-2 text-xs text-primary",children:"(Default)"})]})},s.id)):e.jsx("div",{className:"p-2 text-center text-muted-foreground",children:a("No currencies found")})})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{htmlFor:"decimalFormat",className:"font-medium",children:a("Decimal Places")}),e.jsx(p,{children:e.jsxs(f,{children:[e.jsx(y,{asChild:!0,children:e.jsx(S,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(N,{children:e.jsx("p",{children:a("Number of digits after decimal point")})})]})})]}),e.jsxs(C,{value:r.decimalFormat,onValueChange:s=>i("decimalFormat",s),children:[e.jsx(w,{children:e.jsx(F,{placeholder:"Select decimal format"})}),e.jsxs(P,{children:[e.jsx(l,{value:"0",children:"0 (e.g., 1234)"}),e.jsx(l,{value:"1",children:"1 (e.g., 1234.5)"}),e.jsx(l,{value:"2",children:"2 (e.g., 1234.56)"}),e.jsx(l,{value:"3",children:"3 (e.g., 1234.567)"}),e.jsx(l,{value:"4",children:"4 (e.g., 1234.5678)"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{htmlFor:"currencySymbolPosition",className:"font-medium",children:a("Symbol Position")}),e.jsx(p,{children:e.jsxs(f,{children:[e.jsx(y,{asChild:!0,children:e.jsx(S,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(N,{children:e.jsx("p",{children:a("Where to place the currency symbol")})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(h,{type:"button",variant:r.currencySymbolPosition==="before"?"default":"outline",className:"justify-center",onClick:()=>i("currencySymbolPosition","before"),children:[e.jsx("span",{className:"mr-2",children:(($=(T=window==null?void 0:window.appSettings)==null?void 0:T.currencySettings)==null?void 0:$.currencySymbol)||"$"}),"100",r.currencySymbolPosition==="before"&&e.jsx(g,{className:"h-4 w-4 ml-2"})]}),e.jsxs(h,{type:"button",variant:r.currencySymbolPosition==="after"?"default":"outline",className:"justify-center",onClick:()=>i("currencySymbolPosition","after"),children:["100",e.jsx("span",{className:"ml-2",children:((B=(I=window==null?void 0:window.appSettings)==null?void 0:I.currencySettings)==null?void 0:B.currencySymbol)||"$"}),r.currencySymbolPosition==="after"&&e.jsx(g,{className:"h-4 w-4 ml-2"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{htmlFor:"decimalSeparator",className:"font-medium",children:a("Decimal Separator")}),e.jsx(p,{children:e.jsxs(f,{children:[e.jsx(y,{asChild:!0,children:e.jsx(S,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(N,{children:e.jsx("p",{children:a("Character used to separate decimal places")})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(h,{type:"button",variant:r.decimalSeparator==="."?"default":"outline",className:"justify-center",onClick:()=>i("decimalSeparator","."),children:[a("Dot")," (123.45)",r.decimalSeparator==="."&&e.jsx(g,{className:"h-4 w-4 ml-2"})]}),e.jsxs(h,{type:"button",variant:r.decimalSeparator===","?"default":"outline",className:"justify-center",onClick:()=>i("decimalSeparator",","),children:[a("Comma")," (123,45)",r.decimalSeparator===","&&e.jsx(g,{className:"h-4 w-4 ml-2"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{htmlFor:"thousandsSeparator",className:"font-medium",children:a("Thousands Separator")}),e.jsx(p,{children:e.jsxs(f,{children:[e.jsx(y,{asChild:!0,children:e.jsx(S,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(N,{children:e.jsx("p",{children:a("Character used to group thousands")})})]})})]}),e.jsxs(C,{value:r.thousandsSeparator,onValueChange:s=>i("thousandsSeparator",s),children:[e.jsx(w,{children:e.jsx(F,{placeholder:a("Select thousands separator")})}),e.jsxs(P,{children:[e.jsx(l,{value:",",children:"Comma (1,234.56)"}),e.jsx(l,{value:".",children:"Dot (1.234,56)"}),e.jsx(l,{value:" ",children:"Space (1 234.56)"}),e.jsx(l,{value:"none",children:"None (123456.78)"})]})]})]}),e.jsx("div",{className:"space-y-3 border rounded-md p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"floatNumber",className:"font-medium",children:a("Show Decimals")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a("Display decimal places in amounts")})]}),e.jsx(M,{id:"floatNumber",checked:r.floatNumber,onCheckedChange:s=>i("floatNumber",s)})]})}),e.jsx("div",{className:"space-y-3 border rounded-md p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"currencySymbolSpace",className:"font-medium",children:a("Add Space")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a("Space between amount and symbol")})]}),e.jsx(M,{id:"currencySymbolSpace",checked:r.currencySymbolSpace,onCheckedChange:s=>i("currencySymbolSpace",s)})]})})]})]})})]})})})})})}export{le as default};

import{r as g,j as e}from"./ui-XtzbmeJx.js";import{u as b,q as E,L as i,I as h,U as v,B as N,w as I,S as y,t as c}from"./app-CHRIhyY0.js";import{S as F}from"./switch-Bs9N4aMe.js";import"./vendor-CxtKjBZA.js";import"./utils-CCVAIzGD.js";function M({settings:t={}}){const{t:a}=b(),[m,d]=g.useState(!1),[s,p]=g.useState({googleCalendarEnabled:t.googleCalendarEnabled==="1"||t.googleCalendarEnabled==="true",googleCalendarId:t.googleCalendarId||""}),[u,j]=g.useState(null),S=l=>{l.preventDefault(),d(!0);const o=new FormData;o.append("googleCalendarEnabled",s.googleCalendarEnabled?"1":"0"),o.append("googleCalendarId",s.googleCalendarId),u&&o.append("googleCalendarJson",u),y.post(route("settings.google-calendar.update"),o,{preserveScroll:!0,onSuccess:n=>{var x,f;d(!1);const r=(x=n.props.flash)==null?void 0:x.success,C=(f=n.props.flash)==null?void 0:f.error;r?c.success(r):C&&c.error(C)},onError:n=>{d(!1);const r=n.error||Object.values(n).join(", ")||a("Failed to update Google Calendar settings");c.error(r)}})};return e.jsx(E,{title:a("Google Calendar Settings"),description:a("Configure Google Calendar integration for appointment synchronization"),action:e.jsxs(N,{type:"submit",form:"google-calendar-form",disabled:m,size:"sm",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),a(m?"Saving...":"Save Changes")]}),children:e.jsxs("form",{id:"google-calendar-form",onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(i,{htmlFor:"googleCalendarEnabled",children:a("Enable Google Calendar")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a("Enable Google Calendar integration for appointments")})]}),e.jsx(F,{id:"googleCalendarEnabled",checked:s.googleCalendarEnabled,onCheckedChange:l=>p(o=>({...o,googleCalendarEnabled:l}))})]}),s.googleCalendarEnabled&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"googleCalendarId",children:a("Google Calendar ID")}),e.jsx(h,{id:"googleCalendarId",type:"text",value:s.googleCalendarId,onChange:l=>p(o=>({...o,googleCalendarId:l.target.value})),placeholder:a("Enter your Google Calendar ID")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"googleCalendarJson",children:a("Google Calendar JSON File")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{id:"googleCalendarJson",type:"file",accept:".json",onChange:l=>{var o;return j(((o=l.target.files)==null?void 0:o[0])||null)},className:"flex-1"}),e.jsx(v,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("JSON files only, max 2MB")})]})]})]})})}export{M as default};

import{r as j,j as e}from"./ui-XtzbmeJx.js";import{u as q,K as B,q as O,C as w,g as C,L as n,I as o,am as k,x as H,y as J,J as K,z as W,B as T,w as G,t as r,S as E}from"./app-BNDAg-x0.js";import{S as F,a as M,b,c as A,d as u}from"./select-CWuHpsTP.js";import{A as Q,a as X}from"./alert-u50mgp2H.js";import{M as _}from"./mail-Dom0Io57.js";import{S as N}from"./server-05Yy63x_.js";import{U as P}from"./user-D1kIaiAN.js";import{L}from"./lock-BVHNeoPL.js";import{S as D}from"./send-CDuKdHp6.js";import"./vendor-CxtKjBZA.js";import"./utils-CCVAIzGD.js";import"./index-C0g6bluz.js";import"./chevron-up-DUlTmMPd.js";function oe(){const{t:a}=q(),{settings:c={}}=B().props,I="EtWave",[m,z]=j.useState({provider:c.email_provider||"smtp",driver:c.email_driver||"smtp",host:c.email_host||"smtp.example.com",port:c.email_port||"587",username:c.email_username||"user@example.com",password:c.email_password?"••••••••••••":"",encryption:c.email_encryption||"tls",fromAddress:c.email_from_address||"noreply@example.com",fromName:c.email_from_name||I}),[x,R]=j.useState(""),[S,f]=j.useState(!1),[v,d]=j.useState(null),i=(s,t)=>{z(l=>({...l,[s]:t}))},U=s=>{s.preventDefault(),r.loading(a("Saving email settings...")),E.post(route("settings.email.update"),m,{preserveScroll:!0,onSuccess:t=>{var h,g;r.dismiss();const l=(h=t.props.flash)==null?void 0:h.success,p=(g=t.props.flash)==null?void 0:g.error;l?r.success(l):p?r.error(p):r.success(a("Email settings saved successfully"))},onError:t=>{r.dismiss();const l=t.error||Object.values(t).join(", ")||a("Failed to save email settings");r.error(l)}})},V=s=>{s.preventDefault(),x&&(f(!0),d(null),r.loading(a("Sending test email...")),E.post(route("settings.email.test"),{email:x},{preserveScroll:!0,onSuccess:t=>{var h,g;f(!1),r.dismiss();const l=(h=t.props.flash)==null?void 0:h.success,p=(g=t.props.flash)==null?void 0:g.error;if(l)r.success(l),d({success:!0,message:l});else if(p)r.error(p),d({success:!1,message:p});else{const y=a("Test email sent successfully to {{email}}",{email:x});r.success(y),d({success:!0,message:y})}setTimeout(()=>{d(null)},5e3)},onError:t=>{f(!1),r.dismiss();const l=t.error||Object.values(t).join(", ")||a("Failed to send test email");r.error(l),d({success:!1,message:l}),setTimeout(()=>{d(null)},5e3)}}))};return e.jsx(O,{title:a("Email Settings"),description:a("Configure email server settings for system notifications and communications"),action:e.jsxs(T,{type:"submit",form:"email-settings-form",size:"sm",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),a("Save Changes")]}),children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx("form",{id:"email-settings-form",onSubmit:U,children:e.jsx(w,{children:e.jsx(C,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"provider",className:"font-medium",children:a("Email Provider")})]}),e.jsxs(F,{value:m.provider,onValueChange:s=>{i("provider",s),s==="smtp"?i("driver","smtp"):s==="mailgun"?i("driver","mailgun"):s==="ses"&&i("driver","ses")},children:[e.jsx(M,{children:e.jsx(b,{placeholder:"Select provider"})}),e.jsxs(A,{children:[e.jsx(u,{value:"smtp",children:"SMTP"}),e.jsx(u,{value:"mailgun",children:"Mailgun"}),e.jsx(u,{value:"ses",children:"Amazon SES"}),e.jsx(u,{value:"sendmail",children:"Sendmail"})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"driver",className:"font-medium",children:a("Mail Driver")})]}),e.jsx(o,{id:"driver",value:m.driver,onChange:s=>i("driver",s.target.value),placeholder:"smtp"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"host",className:"font-medium",children:a("SMTP Host")})]}),e.jsx(o,{id:"host",value:m.host,onChange:s=>i("host",s.target.value),placeholder:"smtp.example.com"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"port",className:"font-medium",children:a("SMTP Port")}),e.jsx(k,{children:e.jsxs(H,{children:[e.jsx(J,{asChild:!0,children:e.jsx(K,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(W,{children:e.jsx("p",{children:a("Common ports: 25, 465, 587, 2525")})})]})})]}),e.jsx(o,{id:"port",value:m.port,onChange:s=>i("port",s.target.value),placeholder:"587"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"username",className:"font-medium",children:a("SMTP Username")})]}),e.jsx(o,{id:"username",value:m.username,onChange:s=>i("username",s.target.value),placeholder:"user@example.com"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"password",className:"font-medium",children:a("SMTP Password")})]}),e.jsx(o,{id:"password",type:"password",value:m.password,onChange:s=>i("password",s.target.value),placeholder:"••••••••••••"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"encryption",className:"font-medium",children:a("Mail Encryption")})]}),e.jsxs(F,{value:m.encryption,onValueChange:s=>i("encryption",s),children:[e.jsx(M,{children:e.jsx(b,{placeholder:"Select encryption"})}),e.jsxs(A,{children:[e.jsx(u,{value:"tls",children:a("TLS")}),e.jsx(u,{value:"ssl",children:a("SSL")}),e.jsx(u,{value:"none",children:a("None")})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"fromAddress",className:"font-medium",children:a("From Address")})]}),e.jsx(o,{id:"fromAddress",value:m.fromAddress,onChange:s=>i("fromAddress",s.target.value),placeholder:"noreply@example.com"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(n,{htmlFor:"fromName",className:"font-medium",children:a("From Name")})]}),e.jsx(o,{id:"fromName",value:m.fromName,onChange:s=>i("fromName",s.target.value),placeholder:"System"})]})]})})})})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(w,{children:e.jsx(C,{className:"pt-6",children:e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(D,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"text-base font-medium",children:a("Test Email Configuration")})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(n,{htmlFor:"testEmail",className:"font-medium",children:a("Send Test To")}),e.jsx(o,{id:"testEmail",type:"email",value:x,onChange:s=>R(s.target.value),placeholder:"test@example.com",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("Enter an email address to send a test message")})]}),v&&e.jsx(Q,{variant:v.success?"success":"destructive",className:"py-2",children:e.jsx(X,{children:v.message})}),e.jsx(T,{type:"submit",className:"w-full",disabled:S||!x,children:S?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin mr-2",children:"◌"}),a("Sending...")]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),a("Send Test Email")]})})]})})})})]})})}export{oe as default};

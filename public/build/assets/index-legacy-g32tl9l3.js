!function(){function e(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,l){return function(e){if(Array.isArray(e))return e}(e)||function(e,l){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,t,s,c,r=[],u=!0,o=!1;try{if(s=(a=a.call(e)).next,0===l){if(Object(a)!==a)return;u=!1}else for(;!(u=(n=s.call(a)).done)&&(r.push(n.value),r.length!==l);u=!0);}catch(e){o=!0,t=e}finally{try{if(!u&&null!=a.return&&(c=a.return(),Object(c)!==c))return}finally{if(o)throw t}}return r}}(e,l)||a(e,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,l){if(e){if("string"==typeof e)return n(e,l);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,l):void 0}}function n(e,l){(null==l||l>e.length)&&(l=e.length);for(var a=0,n=Array(l);a<l;a++)n[a]=e[a];return n}System.register(["./ui-legacy-Df76W54t.js","./page-template-legacy-BF4pAgRj.js","./app-legacy-Ccoue2ey.js","./pagination-legacy-wnF3uwHP.js","./search-and-filter-bar-legacy-DXRlmJik.js","./CrudTable-legacy-BQBrXsPw.js","./CrudFormModal-legacy-CqEDi7DZ.js","./CrudDeleteModal-legacy-DG77Rxk_.js","./ContactReplyModal-legacy-CTKxXy-c.js","./vendor-legacy-DNs0y6R6.js","./app-layout-legacy-BoJkMdXe.js","./app-sidebar-layout-legacy-CLHyWU4i.js","./textarea-legacy-CJiaJOZ9.js","./select-legacy-BHn91CeG.js","./index-legacy-BrP_l-Mm.js","./chevron-up-legacy-BCEHjwgE.js","./react-country-flag.esm-legacy-C8Qm_EdK.js","./language-legacy-CPKUrWoi.js","./sparkles-legacy-sJaWTKoM.js","./loader-circle-legacy-Bw1sjScJ.js","./copy-legacy-BIfPI-rv.js","./chevron-right-legacy-GQXTpPPv.js","./language-switcher-legacy-DNvY0QDy.js","./globe-legacy-DrxQ7gox.js","./chart-column-legacy-Cn-Pu6-7.js","./briefcase-legacy-DpLHZyRP.js","./package-legacy-D7F3k5ak.js","./credit-card-legacy-AOdrHphW.js","./dollar-sign-legacy-BUXPIc5Q.js","./mail-legacy-DBTdNFmc.js","./users-legacy-Cz-M9xyG.js","./settings-legacy-CgFst_op.js","./message-square-legacy-C4cvBxJB.js","./calendar-legacy-xKHlC2rz.js","./wallet-legacy-IsHGS0vu.js","./shopping-bag-legacy-DTA1H9ag.js","./user-legacy-hWI7zqjr.js","./arrow-left-legacy-D0MnJHlx.js","./use-favicon-legacy-CC-T3M52.js","./cookie-consent-legacy-DEXuPW7O.js","./utils-legacy-4AQaPo1J.js","./date-picker-legacy-mPkm4KwS.js","./filter-legacy-D__okf5T.js","./list-legacy-CJUMNP_u.js","./table-legacy-v8IyfCvG.js","./activity-legacy-CfJKlvoc.js","./unlink-legacy-D8IWcxgG.js","./arrow-up-legacy-D6bRMoLV.js","./arrow-right-legacy-BJIUtQEK.js","./arrow-up-down-legacy-Bx6k4SZ4.js","./arrow-up-right-legacy-BJFi5jOc.js","./award-legacy-D3fiie_u.js","./banknote-legacy-BBav4DRg.js","./bell-ring-legacy-B52-t3YD.js","./bot-legacy-BnRiFwlZ.js","./crown-legacy-BMugPMLD.js","./building-legacy-XETllJ7P.js","./youtube-legacy-DU8Vc2c3.js","./camera-legacy-Cm2-B1FO.js","./wrench-legacy-BgNcXUk3.js","./chart-pie-legacy-Cia_LNQ2.js","./chevron-left-legacy-B5hNAxuS.js","./circle-check-big-legacy-uwkT3K8H.js","./circle-check-legacy-D4iO1AEe.js","./circle-help-legacy-CoRY2j2E.js","./pencil-line-legacy-CB9d_6Pq.js","./circle-x-legacy-Dw3jV4Da.js","./circle-legacy-BsgImk64.js","./clock-legacy-C2ey8uhF.js","./code-legacy-BMrwBJql.js","./indian-rupee-legacy-D9tjrO67.js","./compass-legacy-D0ux7T5G.js","./download-legacy-CX44wdxP.js","./droplet-legacy-A8wJr6Kn.js","./ellipsis-vertical-legacy-BZ-C9TYo.js","./ellipsis-legacy-CwaW7xD6.js","./external-link-legacy-BSoCC3YY.js","./eye-off-legacy-CPwUfWVk.js","./eye-legacy-BErJlCJG.js","./facebook-legacy-DPsF_hq3.js","./power-legacy-ezA7RoWq.js","./graduation-cap-legacy-DVp4lTz0.js","./navigation-legacy-C5Z-NpEc.js","./grip-vertical-legacy-HISK7Wms.js","./hammer-legacy-CUTEFIB1.js","./hard-drive-legacy-M8lWGw0K.js","./heart-legacy-8ZjrUExq.js","./house-legacy-Q5V1eCDy.js","./instagram-legacy-L69Qd6XB.js","./lock-open-legacy-DlcGiu7j.js","./layers-legacy-DBaZQ6r0.js","./lightbulb-legacy-B2m1zPaS.js","./link-2-legacy-CDVZcxKy.js","./linkedin-legacy-BbWGyYH-.js","./lock-legacy-BneQlT01.js","./map-pin-legacy-yqGSCril.js","./menu-legacy-DQTtVKQK.js","./message-circle-legacy-DI2Zgvge.js","./monitor-legacy-vxnPshdR.js","./pencil-legacy-B8JT5gRM.js","./shield-check-legacy-DukN5mv-.js","./phone-legacy-DdsKiRpC.js","./play-legacy-O7GmfVD1.js","./qr-code-legacy-CJRVbNrn.js","./quote-legacy-joeQdhGw.js","./refresh-cw-legacy-BCVgmD54.js","./rocket-legacy-enIIc2BZ.js","./send-legacy-BaT66LxA.js","./server-legacy-DSiI2LgT.js","./share-2-legacy-BEU9hWmo.js","./shield-legacy-wm3IqY8n.js","./shopping-cart-legacy-9JxqQw1J.js","./smartphone-legacy-PaHPrBOG.js","./square-pen-legacy-CPEHhJJb.js","./star-legacy-DuEw9QsB.js","./sticky-note-legacy-DYXAv-V5.js","./store-legacy-dCqyyQ3f.js","./sun-medium-legacy-DLvLefoW.js","./tag-legacy-BXfjZjmH.js","./target-legacy-C0PE98QV.js","./ticket-legacy-BRYXlal_.js","./trash-2-legacy-Dn2YzezI.js","./trending-up-legacy-CZfISHGe.js","./twitter-legacy-CxsPTrs1.js","./type-legacy-BXF4wubq.js","./user-x-legacy-W08sO_eT.js","./video-legacy-CUEw_nsQ.js","./waves-legacy-DinMyh3-.js","./webhook-legacy-DeSuoNgC.js","./wifi-legacy-BCbMPVwH.js","./zap-legacy-82cyTMUv.js","./radio-group-legacy-Cpfnkt-e.js","./checkbox-legacy-D_FQHyoD.js","./switch-legacy-DaL0K6VY.js","./scroll-area-legacy-Ct4j83TY.js"],function(a,n){"use strict";var t,s,c,r,u,o,i,g,y,d,j,p,f,b;return{setters:[function(e){t=e.r,s=e.j},function(e){c=e.P},function(e){r=e.u,u=e.K,o=e.S,i=e.t,g=e.P},function(e){y=e.P},function(e){d=e.S},function(e){j=e.C},function(e){p=e.C},function(e){f=e.C},function(e){b=e.C},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){a("default",function(){var a,n=r().t,m=u().props,v=m.auth,h=m.contacts,S=m.businesses,w=m.filters,x=void 0===w?{}:w,C=(null==v?void 0:v.permissions)||[],k=l(t.useState(x.search||""),2),_=k[0],A=k[1],N=l(t.useState(x.business||"all"),2),F=N[0],P=N[1],q=l(t.useState(x.status||"all"),2),O=q[0],E=q[1],M=l(t.useState(!1),2),D=M[0],I=M[1],R=l(t.useState(!1),2),T=R[0],B=R[1],z=l(t.useState(!1),2),U=z[0],Q=z[1],K=l(t.useState(!1),2),V=K[0],$=K[1],G=l(t.useState(null),2),H=G[0],J=G[1],L=l(t.useState("create"),2),W=L[0],X=L[1],Y=function(){var e={page:1};_&&(e.search=_),"all"!==F&&(e.business=F),"all"!==O&&(e.status=O),x.per_page&&(e.per_page=x.per_page),o.get(route("contacts.index"),e,{preserveState:!0,preserveScroll:!0})},Z=[];Z.push({label:"Create Contact",icon:s.jsx(g,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:function(){return J(null),X("create"),void B(!0)}});var ee=[{title:n("Dashboard"),href:route("dashboard")},{title:n("Contacts")}],le=[{key:"business.name",label:n("Business Name"),sortable:!1,render:function(e,l){var a;return(null===(a=l.business)||void 0===a?void 0:a.name)||"N/A"}},{key:"name",label:n("Name"),sortable:!0},{key:"email",label:n("Email"),sortable:!0,render:function(e){return e||"N/A"}},{key:"phone",label:n("Phone"),render:function(e){return e||"N/A"}},{key:"message",label:n("Message"),render:function(e){return e?e.length>50?"".concat(e.substring(0,50),"..."):e:"N/A"}},{key:"status",label:n("Status"),sortable:!0,render:function(e){return s.jsx("span",{className:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ring-gray-500/10 ".concat({new:"bg-blue-100 text-blue-800",contacted:"bg-yellow-100 text-yellow-800",qualified:"bg-purple-100 text-purple-800",converted:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800"}[e]||"bg-gray-100 text-gray-800"),children:e.charAt(0).toUpperCase()+e.slice(1)})}}],ae=[{label:n("Reply"),icon:"MessageSquare",action:"reply",className:"text-blue-500"},{label:n("Delete"),icon:"Trash2",action:"delete",className:"text-red-500"}];return s.jsxs(c,{title:n("Contacts Management"),url:"/contacts",actions:Z,breadcrumbs:ee,noPadding:!0,children:[s.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow mb-4 p-4",children:s.jsx(d,{searchTerm:_,onSearchChange:A,onSearch:function(e){e.preventDefault(),Y()},filters:[{name:"business",label:n("Business"),type:"select",value:F,onChange:function(e){P(e);var l={page:1};_&&(l.search=_),"all"!==e&&(l.business=e),"all"!==O&&(l.status=O),x.per_page&&(l.per_page=x.per_page),o.get(route("contacts.index"),l,{preserveState:!0,preserveScroll:!0})},options:[{value:"all",label:n("All Businesses")}].concat(e((S||[]).map(function(e){return{value:e.id.toString(),label:e.name}})))},{name:"status",label:n("Status"),type:"select",value:O,onChange:function(e){E(e);var l={page:1};_&&(l.search=_),"all"!==F&&(l.business=F),"all"!==e&&(l.status=e),x.per_page&&(l.per_page=x.per_page),o.get(route("contacts.index"),l,{preserveState:!0,preserveScroll:!0})},options:[{value:"all",label:n("All Statuses")},{value:"new",label:n("New")},{value:"contacted",label:n("Contacted")},{value:"qualified",label:n("Qualified")},{value:"converted",label:n("Converted")},{value:"closed",label:n("Closed")}]}],showFilters:D,setShowFilters:I,hasActiveFilters:function(){return"all"!==F||"all"!==O||""!==_},activeFilterCount:function(){return("all"!==F?1:0)+("all"!==O?1:0)+(_?1:0)},onResetFilters:function(){P("all"),E("all"),A(""),I(!1),o.get(route("contacts.index"),{page:1,per_page:x.per_page},{preserveState:!0,preserveScroll:!0})},onApplyFilters:Y,currentPerPage:(null===(a=x.per_page)||void 0===a?void 0:a.toString())||"10",onPerPageChange:function(e){var l={page:1,per_page:parseInt(e)};_&&(l.search=_),"all"!==F&&(l.business=F),"all"!==O&&(l.status=O),o.get(route("contacts.index"),l,{preserveState:!0,preserveScroll:!0})}})}),s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow overflow-hidden",children:[s.jsx(j,{columns:le,actions:ae,data:(null==h?void 0:h.data)||[],from:(null==h?void 0:h.from)||1,onAction:function(e,l){switch(J(l),e){case"reply":if(!l.email)return void i.error("Contact has no email address");$(!0);break;case"delete":Q(!0)}},sortField:x.sort_field,sortDirection:x.sort_direction,onSort:function(e){var l={sort_field:e,sort_direction:x.sort_field===e&&"asc"===x.sort_direction?"desc":"asc",page:1};_&&(l.search=_),"all"!==F&&(l.business=F),"all"!==O&&(l.status=O),x.per_page&&(l.per_page=x.per_page),o.get(route("contacts.index"),l,{preserveState:!0,preserveScroll:!0})},permissions:C,entityPermissions:{view:"view-contacts",create:"create-contacts",edit:"edit-contacts",delete:"delete-contacts"}}),s.jsx(y,{from:(null==h?void 0:h.from)||0,to:(null==h?void 0:h.to)||0,total:(null==h?void 0:h.total)||0,links:null==h?void 0:h.links,entityName:n("contacts"),onPageChange:function(e){return o.get(e)}})]}),s.jsx(p,{isOpen:T,onClose:function(){return B(!1)},onSubmit:function(e){"create"===W?(i.loading(n("Creating contact...")),o.post(route("contacts.store"),e,{onSuccess:function(){B(!1),i.dismiss(),i.success(n("Contact created successfully"))},onError:function(e){i.dismiss(),i.error("Failed to create contact: ".concat(Object.values(e).join(", ")))}})):"edit"===W&&(i.loading(n("Updating contact...")),o.put(route("contacts.update",H.id),e,{onSuccess:function(){B(!1),i.dismiss(),i.success(n("Contact updated successfully"))},onError:function(e){i.dismiss(),i.error("Failed to update contact: ".concat(Object.values(e).join(", ")))}}))},formConfig:{fields:[{name:"business_id",label:"Business",type:"select",required:!0,options:S?S.map(function(e){return{value:e.id.toString(),label:e.name}}):[]},{name:"name",label:"Name",type:"text",required:!0},{name:"email",label:"Email",type:"email"},{name:"phone",label:"Phone",type:"text"},{name:"message",label:"Message",type:"textarea"},{name:"status",label:"Status",type:"select",required:!0,options:[{value:"new",label:"New"},{value:"contacted",label:"Contacted"},{value:"qualified",label:"Qualified"},{value:"converted",label:"Converted"},{value:"closed",label:"Closed"}]},{name:"notes",label:"Notes",type:"textarea"}],modalSize:"lg"},initialData:H,title:n("create"===W?"Create Contact":"edit"===W?"Edit Contact":"View Contact"),mode:W}),s.jsx(b,{isOpen:V,onClose:function(){$(!1),J(null)},onSubmit:function(e){i.loading("Sending reply..."),o.post(route("contacts.reply",H.id),e,{onSuccess:function(){$(!1),J(null),i.dismiss(),i.success("Reply sent successfully")},onError:function(e){i.dismiss(),i.error("Failed to send reply: ".concat(Object.values(e).join(", ")))}})},contact:H}),s.jsx(f,{isOpen:U,onClose:function(){return Q(!1)},onConfirm:function(){i.loading(n("Deleting contact...")),o.delete(route("contacts.destroy",H.id),{onSuccess:function(){Q(!1),i.dismiss(),i.success(n("Contact deleted successfully"))},onError:function(e){i.dismiss(),i.error("Failed to delete contact: ".concat(Object.values(e).join(", ")))}})},itemName:(null==H?void 0:H.name)||"",entityName:"contact"})]})})}}})}();

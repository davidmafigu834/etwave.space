import{r as d,j as e}from"./ui-XtzbmeJx.js";import{u as U,K as W,B as b,C as j,d as y,e as v,g as N,i as R,p as H,X as K,t as m,S as X}from"./app--U2u_Nco.js";import{P as J}from"./page-template-_w_TezBb.js";import{F as Y,i as Z,a as ee,b as te}from"./index-CQXl2i7v.js";import{A as re}from"./AppointmentReplyModal-BE_TjD_p.js";import{C as u}from"./calendar-BvntvMDr.js";import{C as w}from"./clock-xep4wtUq.js";import{M as G}from"./mail-CeMU5Fvk.js";import{P as E}from"./phone-COl4jx2I.js";import{B as se}from"./building-CMFnWZJY.js";import{M as F}from"./message-square-PGEHhf8N.js";import{S as ae}from"./sticky-note-CM1iiSDi.js";import"./vendor-CxtKjBZA.js";import"./utils-CCVAIzGD.js";import"./app-layout-2q3qeuPG.js";import"./app-sidebar-layout-B8sCBDfP.js";import"./textarea-DI5KsTzY.js";import"./select-DPTsfyZo.js";import"./index-C0g6bluz.js";import"./chevron-up-Cb1PVDjg.js";import"./react-country-flag.esm-B3QM5-4S.js";import"./language-DYlIyiUn.js";import"./sparkles-CjzlGYDC.js";import"./loader-circle-sCJ-o5H7.js";import"./copy-C3tPhgbj.js";import"./chevron-right-BNDDuqe9.js";import"./language-switcher-CoqxIfsY.js";import"./globe-D7cjKJp0.js";import"./chart-column-I-WbOlTU.js";import"./briefcase-D8uqggDK.js";import"./package-sLSwB21j.js";import"./credit-card-BnHKQyNb.js";import"./dollar-sign-iDXPpovF.js";import"./users-DAfK_cju.js";import"./settings-DvHmCXCi.js";import"./wallet-BJ9Z1Mvd.js";import"./shopping-bag-D4ViwlKW.js";import"./user-Cz4gw8yj.js";import"./arrow-left-DKs6FA6H.js";import"./use-favicon-8c0NNY31.js";import"./cookie-consent-CREhfCi9.js";function Ue(){const{t:r}=U(),{appointments:l=[],business:i=null,selectedBusinessId:C=""}=W().props,[a,h]=d.useState(new Date),[x,k]=d.useState("month"),[V,f]=d.useState(!1),[o,_]=d.useState(null),[c,S]=d.useState(""),O=[{title:r("Dashboard"),href:route("dashboard")},{title:r("vCard Builder"),href:route("vcard-builder.index")},{title:(i==null?void 0:i.name)||r("Business")},{title:r("Calendar")}],A=t=>{switch(t){case"scheduled":return"bg-blue-100 text-blue-800";case"confirmed":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";case"no_show":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},D=t=>{switch(t){case"scheduled":return"#3b82f6";case"confirmed":return"#10b981";case"completed":return"#6b7280";case"cancelled":return"#ef4444";case"no_show":return"#f59e0b";default:return"#6b7280"}},I=l.map(t=>{const s=t.date,n=t.time||"00:00";return{id:t.id.toString(),title:t.title,start:"".concat(s,"T").concat(n),allDay:!t.time,backgroundColor:D(t.status),borderColor:D(t.status),extendedProps:{...t}}}),Q=t=>{const s=t.toISOString().split("T")[0];return l.filter(n=>n.date===s)},p=a&&!Array.isArray(a)?Q(a):[],M=()=>{if(!c)return p;const t=c.toLowerCase();return p.filter(s=>{var n,L,B,P,$,z;return((n=s.title)==null?void 0:n.toLowerCase().includes(t))||((L=s.email)==null?void 0:L.toLowerCase().includes(t))||((B=s.phone)==null?void 0:B.toLowerCase().includes(t))||((P=s.message)==null?void 0:P.toLowerCase().includes(t))||(($=s.business)==null?void 0:$.toLowerCase().includes(t))||((z=s.notes)==null?void 0:z.toLowerCase().includes(t))})},T=t=>t||"",g=t=>{_(t),f(!0)},q=t=>{m.loading(r("Sending reply...")),X.post(route("appointments.reply",[C,o.id]),t,{onSuccess:()=>{f(!1),m.dismiss(),m.success(r("Reply sent successfully"))},onError:s=>{m.dismiss(),m.error("Failed to send reply: ".concat(Object.values(s).join(", ")))}})};return e.jsxs(J,{title:r("Business Appointment"),url:route("vcard-builder.calendar",C),breadcrumbs:O,noPadding:!0,children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-lg font-semibold",children:i!=null&&i.name?"".concat(i.name," - ").concat(r("Calendar")):r("Business Calendar")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{variant:x==="month"?"default":"outline",size:"sm",onClick:()=>k("month"),children:r("Month View")}),e.jsx(b,{variant:x==="agenda"?"default":"outline",size:"sm",onClick:()=>k("agenda"),children:r("Agenda View")})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(j,{children:[e.jsx(y,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),r(x==="month"?"Monthly Calendar":"Agenda View")]})}),e.jsx(N,{children:x==="month"?e.jsx("div",{className:"fullcalendar-container",children:e.jsx(Y,{plugins:[Z,ee,te],initialView:"dayGridMonth",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},events:I,height:"auto",eventClick:t=>{const s=new Date(t.event.startStr);h(s);const n=t.event.extendedProps;g(n)},dateClick:t=>{h(new Date(t.dateStr))},dayMaxEventRows:2,moreLinkText:r("more"),moreLinkClick:t=>(h(t.date),"popover"),slotMinTime:"06:00:00",slotMaxTime:"22:00:00",allDaySlot:!0,allDayText:r("All day"),slotLabelFormat:{hour:"2-digit",minute:"2-digit",hour12:!0},eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!0}})}):e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:l.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:r("No appointments scheduled")}):l.sort((t,s)=>new Date(t.date).getTime()-new Date(s.date).getTime()).map(t=>e.jsxs("div",{className:"border rounded-lg p-4 min-h-[120px] hover:bg-gray-50 hover:shadow-sm cursor-pointer transition-all duration-200",onClick:()=>g(t),children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium",children:t.title}),e.jsx(R,{className:A(t.status),children:t.status.charAt(0).toUpperCase()+t.status.slice(1).replace("_"," ")})]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(u,{className:"h-4 w-4 text-primary flex-shrink-0"}),e.jsx("span",{children:new Date(t.date).toLocaleDateString()})]}),t.time&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(w,{className:"h-4 w-4 text-primary flex-shrink-0"}),e.jsx("span",{children:T(t.time)})]}),t.email&&e.jsxs("div",{className:"flex items-center gap-1 text-sm overflow-hidden",children:[e.jsx(G,{className:"h-4 w-4 text-primary flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.email})]}),t.phone&&e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(E,{className:"h-4 w-4 text-primary flex-shrink-0"}),e.jsx("span",{children:t.phone})]})]}),t.message&&e.jsxs("div",{className:"text-sm text-gray-600 line-clamp-2 mb-1",children:[e.jsx("span",{className:"font-medium",children:"Message:"})," ",t.message]})]},t.id))})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(j,{children:[e.jsxs(y,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5"}),a&&!Array.isArray(a)?"".concat(r("Appointments for")," ").concat(a.toLocaleDateString()):r("Select a Date")]}),a&&!Array.isArray(a)&&p.length>0&&e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:r("Search appointments..."),className:"w-full rounded-md border border-input pl-8 pr-8 py-2 text-sm",value:c,onChange:t=>S(t.target.value)}),c&&e.jsx("button",{onClick:()=>S(""),className:"absolute right-2 top-2.5 h-4 w-4 text-muted-foreground hover:text-foreground transition-colors rounded-full hover:bg-gray-100 flex items-center justify-center",title:r("Clear search"),children:e.jsx(K,{className:"h-3 w-3"})})]})})]}),e.jsx(N,{className:"max-h-[425px] overflow-y-auto pr-1",children:a&&!Array.isArray(a)?e.jsx("div",{className:"space-y-4",children:M().length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(u,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:r(c?"No appointments match your search":"No appointments on this date")})]}):M().sort((t,s)=>(t.time||"").localeCompare(s.time||"")).map(t=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow duration-200 bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:t.title}),e.jsx(R,{className:A(t.status),children:t.status.charAt(0).toUpperCase()+t.status.slice(1).replace("_"," ")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-3",children:[t.time&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(w,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:T(t.time)})]}),t.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm overflow-hidden",children:[e.jsx(G,{className:"h-4 w-4 text-primary flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.email})]}),t.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(E,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:t.phone})]}),t.business&&e.jsxs("div",{className:"flex items-center gap-2 text-sm overflow-hidden",children:[e.jsx(se,{className:"h-4 w-4 text-primary flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.business})]})]}),t.message&&e.jsx("div",{className:"mb-3 bg-gray-50 p-2 rounded-md",children:e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(F,{className:"h-4 w-4 text-primary mt-0.5"}),e.jsx("span",{className:"text-gray-600",children:t.message})]})}),t.notes&&e.jsx("div",{className:"mb-3 bg-blue-50 p-2 rounded-md",children:e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(ae,{className:"h-4 w-4 text-blue-500 mt-0.5"}),e.jsx("span",{className:"text-gray-700",children:t.notes})]})}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100 flex justify-end",children:e.jsxs(b,{size:"sm",className:"gap-1",onClick:s=>{s.stopPropagation(),g(t)},children:[e.jsx(F,{className:"h-4 w-4"}),r("Reply")]})})]},t.id))}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(u,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:r("Click on a date to view appointments")})]})})]}),e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(v,{children:r("Quick Stats")})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:r("Total Appointments")}),e.jsx("span",{className:"font-medium",children:l.length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:r("Scheduled")}),e.jsx("span",{className:"font-medium text-blue-600",children:l.filter(t=>t.status==="scheduled").length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:r("Confirmed")}),e.jsx("span",{className:"font-medium text-green-600",children:l.filter(t=>t.status==="confirmed").length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:r("Completed")}),e.jsx("span",{className:"font-medium text-gray-600",children:l.filter(t=>t.status==="completed").length})]})]})})]})]})]})]}),e.jsx(re,{isOpen:V,onClose:()=>f(!1),onSubmit:q,appointment:o?{...o,appointment_date:o.date,appointment_time:o.time,business:o.business?{name:o.business}:null}:null}),e.jsx("style",{children:"\n        .fullcalendar-container .fc {\n          font-family: inherit;\n        }\n        \n        .fullcalendar-container .fc-toolbar {\n          margin-bottom: 1rem;\n        }\n        \n        .fullcalendar-container .fc-button {\n          background: none;\n          border: 1px solid #d1d5db;\n          color: #374151;\n          padding: 0.5rem;\n          border-radius: 0.375rem;\n          font-weight: 500;\n          text-transform: capitalize;\n        }\n        \n        .fullcalendar-container .fc-button:hover {\n          background-color: #f3f4f6 !important;\n          border-color: #9ca3af !important;\n        }\n        \n        .fullcalendar-container .fc-button:not(.fc-button-active):hover {\n          background-color: #f3f4f6 !important;\n          color: #374151 !important;\n        }\n        \n        .fullcalendar-container .fc-button:focus {\n          box-shadow: none;\n        }\n        \n        .fullcalendar-container .fc-button-primary {\n          background-color: #f3f4f6;\n        }\n        \n        .fullcalendar-container .fc-today-button {\n          background-color: var(--primary) !important;\n          border-color: var(--primary) !important;\n          color: white !important;\n          text-transform: capitalize;\n        }\n        \n        .fullcalendar-container .fc-today-button:hover {\n          background-color: var(--primary) !important;\n          border-color: var(--primary) !important;\n          color: white !important;\n          opacity: 0.9;\n        }\n        \n        .fullcalendar-container .fc-button-active {\n          background-color: var(--primary) !important;\n          border-color: var(--primary) !important;\n          color: white !important;\n        }\n        \n        .fullcalendar-container .fc-button-active:hover {\n          background-color: var(--primary) !important;\n          border-color: var(--primary) !important;\n          color: white !important;\n          opacity: 0.9;\n        }\n        \n        .fullcalendar-container .fc-daygrid-day {\n          cursor: pointer;\n        }\n        \n        .fullcalendar-container .fc-daygrid-day:hover {\n          background-color: #f9fafb;\n        }\n        \n        .fullcalendar-container .fc-daygrid-more-link {\n          background-color: #f3f4f6;\n          border-radius: 0.25rem;\n          padding: 0.125rem 0.375rem;\n          font-size: 0.75rem;\n          font-weight: 500;\n          color: #4b5563;\n        }\n        \n        .fullcalendar-container .fc-daygrid-more-link:hover {\n          background-color: #e5e7eb;\n          color: #111827;\n          text-decoration: none;\n        }\n        \n        .fullcalendar-container .fc-event {\n          border-radius: 0.25rem;\n          padding: 0.125rem 0.25rem;\n          font-size: 0.75rem;\n          border: none;\n        }\n        \n        .fullcalendar-container .fc-event-title {\n          font-weight: 500;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n        }\n        \n        .fullcalendar-container .fc-daygrid-event {\n          background-color: var(--fc-event-bg-color);\n          color: white;\n        }\n        \n        .fullcalendar-container .fc-daygrid-dot-event {\n          background-color: var(--fc-event-bg-color);\n        }\n        \n        .fullcalendar-container .fc-day-today {\n          background-color: rgba(99, 102, 241, 0.05) !important;\n        }\n        \n        /* Ensure all buttons have consistent styling */\n        .fullcalendar-container .fc-prev-button,\n        .fullcalendar-container .fc-next-button,\n        .fullcalendar-container .fc-dayGridMonth-button,\n        .fullcalendar-container .fc-timeGridWeek-button,\n        .fullcalendar-container .fc-timeGridDay-button {\n          text-transform: capitalize !important;\n        }\n        \n        .fullcalendar-container .fc-button:disabled {\n          opacity: 0.5;\n          cursor: not-allowed;\n        }\n        \n        .fullcalendar-container .fc-button:disabled:hover {\n          background-color: transparent !important;\n          border-color: #d1d5db !important;\n          color: #374151 !important;\n        }\n      "})]})}export{Ue as default};

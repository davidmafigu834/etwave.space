!function(){var e=["auth"];function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./ui-legacy-Df76W54t.js","./page-template-legacy-vdr7rymY.js","./app-legacy--_EH1FA6.js","./pagination-legacy-CHfywoD0.js","./search-and-filter-bar-legacy-LX7-33hV.js","./CrudTable-legacy-CqL2qdCH.js","./CrudFormModal-legacy-RjcQFiOT.js","./CrudDeleteModal-legacy-B7dcXYhE.js"],function(r,a){"use strict";var s,c,l,u,f,p,d,m,g,b,v,y,h,j;return{setters:[function(e){s=e.r,c=e.j},function(e){l=e.P},function(e){u=e.u,f=e.K,p=e.a7,d=e.P,m=e.S,g=e.t},function(e){b=e.P},function(e){v=e.S},function(e){y=e.C},function(e){h=e.C},function(e){j=e.C}],execute:function(){r("P",function(r){var a,S=r.config,O=r.title,C=r.url,w=r.buttons,P=void 0===w?[]:w,E=r.breadcrumbs,A=u().t,_=S.entity,k=S.table,x=S.filters,D=void 0===x?[]:x,F=S.form,U=S.hooks,N=f().props,I=N.auth,T=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(N,e),z=(null==I?void 0:I.permissions)||[],M=T[_.name]||{data:[],links:[]},B=T.filters||{},K=o(s.useState(B.search||""),2),R=K[0],V=K[1],$=o(s.useState({}),2),q=$[0],G=$[1],H=o(s.useState(!1),2),J=H[0],L=H[1],Q=o(s.useState(!1),2),W=Q[0],X=Q[1],Y=o(s.useState(!1),2),Z=Y[0],ee=Y[1],te=o(s.useState(null),2),re=te[0],ne=te[1],ie=o(s.useState("create"),2),oe=ie[0],ae=ie[1];s.useEffect(function(){var e={};D.forEach(function(t){var r=t.name||t.key;e[r]=B[r]||""}),G(e)},[]);var se=function(){var e={page:1};R&&(e.search=R),Object.entries(q).forEach(function(t){var r=o(t,2),n=r[0],i=r[1];i&&""!==i&&(e[n]=i)}),B.per_page&&(e.per_page=B.per_page),m.get(_.endpoint,e,{preserveState:!0,preserveScroll:!0})},ce=P.every(function(e){return!1!==e.showAddButton}),le=[];P.forEach(function(e){e.permission&&!p(z,e.permission)||le.push({label:e.label,icon:e.icon,variant:e.variant,onClick:e.onClick})}),ce&&p(z,_.permissions.create)&&le.push({label:"Add New ".concat(_.name.slice(0,-1).charAt(0).toUpperCase()+_.name.slice(0,-1).slice(1)),icon:c.jsx(d,{className:"h-4 w-4"}),variant:"default",onClick:function(){return ne(null),ae("create"),void X(!0)}});var ue=O||_.name.charAt(0).toUpperCase()+_.name.slice(1),fe=[{title:A("Dashboard"),href:route("dashboard")},{title:ue}],pe=E||fe;return c.jsxs(l,{title:ue,url:C,actions:le,breadcrumbs:pe,noPadding:!0,children:[c.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow mb-4",children:c.jsx("div",{className:"p-4",children:c.jsx(v,{searchTerm:R,onSearchChange:function(e){return V(e)},onSearch:function(e){e.preventDefault(),se()},filters:D.map(function(e){var t=e.name||e.key;return{name:t,label:e.label,type:e.type,options:e.options,value:q[t]||"",onChange:function(e){return function(e,t){G(function(r){return n(n({},r),{},i({},e,t))});var r={page:1};R&&(r.search=R);var a=n(n({},q),{},i({},e,t));Object.entries(a).forEach(function(e){var t=o(e,2),n=t[0],i=t[1];i&&""!==i&&(r[n]=i)}),B.per_page&&(r.per_page=B.per_page),m.get(_.endpoint,r,{preserveState:!0,preserveScroll:!0})}(t,e)}}}),showFilters:J,setShowFilters:L,hasActiveFilters:function(){return Object.entries(q).some(function(e){var t=o(e,2),r=(t[0],t[1]);return r&&""!==r})||""!==R},activeFilterCount:function(){return Object.entries(q).filter(function(e){var t=o(e,2),r=(t[0],t[1]);return r&&""!==r}).length+(R?1:0)},onResetFilters:function(){var e={};D.forEach(function(t){e[t.key]="select"===t.type?"all":""}),G(e),V(""),L(!1),m.get(_.endpoint,{page:1,per_page:B.per_page},{preserveState:!0,preserveScroll:!0})},currentPerPage:(null===(a=B.per_page)||void 0===a?void 0:a.toString())||"10",onPerPageChange:function(e){var t={page:1,per_page:parseInt(e)};R&&(t.search=R),Object.entries(q).forEach(function(e){var r=o(e,2),n=r[0],i=r[1];i&&""!==i&&(t[n]=i)}),m.get(_.endpoint,t,{preserveState:!0,preserveScroll:!0})},perPageOptions:[10,25,50,100]})})}),c.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow overflow-hidden",children:[c.jsx(y,{columns:k.columns,actions:k.actions,data:M.data,from:M.from||1,onAction:function(e,t){switch(ne(t),e){case"view":ae("view"),X(!0);break;case"edit":ae("edit"),X(!0);break;case"delete":ee(!0)}},sortField:B.sort_field,sortDirection:B.sort_direction,onSort:function(e){var t={sort_field:e,sort_direction:B.sort_field===e&&"asc"===B.sort_direction?"desc":"asc",page:1};R&&(t.search=R),Object.entries(q).forEach(function(e){var r=o(e,2),n=r[0],i=r[1];i&&""!==i&&(t[n]=i)}),B.per_page&&(t.per_page=B.per_page),m.get(_.endpoint,t,{preserveState:!0,preserveScroll:!0})},statusColors:k.statusColors,permissions:z,entityPermissions:_.permissions}),c.jsx(b,{from:M.from||0,to:M.to||0,total:M.total,links:M.links,entityName:_.name,onPageChange:function(e){return m.get(e,{},{preserveState:!0,preserveScroll:!0})},className:"border-t dark:border-gray-700"})]}),c.jsx(h,{isOpen:W,onClose:function(){return X(!1)},onSubmit:function(e){var r=n({},e);if("roles"===_.name){if(r.permissions&&Array.isArray(r.permissions)){var i=r.permissions.map(function(e){return"object"===t(e)&&null!==e&&e.name?e.name:String(e)});r.permissions=i}var o={label:r.label,description:r.description||"",permissions:r.permissions||[]};Object.keys(r).forEach(function(e){delete r[e]}),Object.assign(r,o)}else if(r.permissions&&Array.isArray(r.permissions)){var a={};r.permissions.forEach(function(e,t){a[t]=String(e)}),r.permissions=a}if("permissions"===_.name&&"edit"===oe&&delete r.name,F.fields.some(function(e){return"file"===e.type})){var s=F.fields.filter(function(e){return"file"===e.type}).map(function(e){return e.name}),c=new FormData;return Object.keys(r).forEach(function(e){s.includes(e)&&"edit"===oe?r[e]&&"object"===t(r[e])&&c.append(e,r[e]):c.append(e,r[e])}),void("create"===oe?(g.loading(A("Creating...")),m.post(_.endpoint,c,{onSuccess:function(t){X(!1),g.dismiss(),null!=U&&U.afterCreate&&U.afterCreate(e,t.props[_.name])},onError:function(e){g.dismiss(),g.error(A("Failed to create ".concat(_.name.slice(0,-1),": ").concat(Object.values(e).join(", "))))}})):"edit"===oe&&(g.loading(A("Updating...")),m.post("".concat(_.endpoint,"/").concat(re.id,"?_method=PUT"),c,{onSuccess:function(t){X(!1),g.dismiss(),null!=U&&U.afterUpdate&&U.afterUpdate(e,t.props[_.name])},onError:function(e){g.dismiss(),g.error(A("Failed to update ".concat(_.name.slice(0,-1),": ").concat(Object.values(e).join(", "))))}})))}"create"===oe?(g.loading(A("Creating...")),m.post(_.endpoint,r,{onSuccess:function(t){X(!1),g.dismiss(),null!=U&&U.afterCreate&&U.afterCreate(e,t.props[_.name])},onError:function(e){g.dismiss(),g.error(A("Failed to create ".concat(_.name.slice(0,-1),": ").concat(Object.values(e).join(", "))))}})):"edit"===oe&&(g.loading(A("Updating...")),m.put("".concat(_.endpoint,"/").concat(re.id),r,{onSuccess:function(t){X(!1),g.dismiss(),null!=U&&U.afterUpdate&&U.afterUpdate(e,t.props[_.name])},onError:function(e){g.dismiss(),g.error(A("Failed to update ".concat(_.name.slice(0,-1),": ").concat(Object.values(e).join(", "))))}}))},formConfig:n(n({},F),{},{modalSize:S.modalSize||F.modalSize}),initialData:re,title:"create"===oe?"Add New ".concat(_.name.slice(0,-1).charAt(0).toUpperCase()+_.name.slice(0,-1).slice(1)):"edit"===oe?"Edit ".concat(_.name.slice(0,-1).charAt(0).toUpperCase()+_.name.slice(0,-1).slice(1)):"View ".concat(_.name.slice(0,-1).charAt(0).toUpperCase()+_.name.slice(0,-1).slice(1)),mode:oe,description:S.description}),c.jsx(j,{isOpen:Z,onClose:function(){return ee(!1)},onConfirm:function(){g.loading(A("Deleting...")),m.delete("".concat(_.endpoint,"/").concat(re.id),{onSuccess:function(){ee(!1),g.dismiss(),null!=U&&U.afterDelete&&U.afterDelete(re.id)},onError:function(e){g.dismiss(),g.error(A("Failed to delete ".concat(_.name.slice(0,-1),": ").concat(Object.values(e).join(", "))))}})},itemName:(null==re?void 0:re.name)||"",entityName:_.name.slice(0,-1)})]})})}}})}();

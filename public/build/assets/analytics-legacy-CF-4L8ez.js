!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,s){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,l,a,i,r=[],c=!0,d=!1;try{if(a=(t=t.call(e)).next,0===s){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=a.call(t)).done)&&(r.push(n.value),r.length!==s);c=!0);}catch(e){d=!0,l=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(d)throw l}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,s){(null==s||s>e.length)&&(s=e.length);for(var t=0,n=Array(s);t<s;t++)n[t]=e[t];return n}System.register(["./ui-legacy-Df76W54t.js","./app-legacy--_EH1FA6.js","./page-template-legacy-vdr7rymY.js","./date-picker-legacy-BJne9_9X.js","./tabs-legacy-CG_5CLlK.js","./progress-legacy-1PI6sgZk.js","./arrow-left-legacy-DNBUkron.js","./eye-legacy-BrYeqeQa.js","./users-legacy-CHx64N_f.js","./message-square-legacy-tsOtqq3E.js","./calendar-legacy-iowv-fv-.js","./circle-check-big-legacy-BmT8bW7v.js","./circle-x-legacy-rEFjtk3a.js","./CartesianChart-legacy-yaH8eaIk.js","./LineChart-legacy-CcPMSzA8.js","./PieChart-legacy-DFDUlEbX.js","./BarChart-legacy-DrCEo-Bm.js","./vendor-legacy-DNs0y6R6.js","./utils-legacy-4AQaPo1J.js","./app-layout-legacy-Ddjw4cyv.js","./app-sidebar-layout-legacy-DNUIHr2c.js","./textarea-legacy-C9BYI3_s.js","./select-legacy-CnS4pGYt.js","./index-legacy-BrP_l-Mm.js","./chevron-up-legacy-COSjq7BD.js","./react-country-flag.esm-legacy-C8Qm_EdK.js","./language-legacy-CPKUrWoi.js","./sparkles-legacy-CpybO37S.js","./loader-circle-legacy-BeSZcCZ2.js","./copy-legacy-B65eKCL5.js","./chevron-right-legacy-BajxNCtJ.js","./language-switcher-legacy-DyZl0IOB.js","./globe-legacy-D5ETsV0D.js","./chart-column-legacy-pf9KtNzA.js","./briefcase-legacy-qN8cP4rv.js","./package-legacy-BhxOSnhZ.js","./credit-card-legacy-D9le2VX2.js","./dollar-sign-legacy-Bra6CllU.js","./mail-legacy-BRLD7bu-.js","./settings-legacy-C4yHeyf-.js","./wallet-legacy-DkvJP23h.js","./shopping-bag-legacy-CZi31-ql.js","./user-legacy-NZm5tz0X.js","./use-favicon-legacy-CK09Bl0i.js","./cookie-consent-legacy-Dhln_i9Y.js","./react-redux-legacy-COhswo-V.js","./tiny-invariant-legacy-mQvYgMsb.js"],function(s,t){"use strict";var n,l,a,i,r,c,d,o,u,x,m,j,h,p,f,g,v,y,b,N,w,k,D,C,S,A,B,K,P,T,F,V,L,_,M,O,R,I,U,q,E;return{setters:[function(e){n=e.r,l=e.j},function(e){a=e.u,i=e.K,r=e.S,c=e.C,d=e.d,o=e.e,u=e.g,x=e.L,m=e.B,j=e.i,h=e.J,p=e.f},function(e){f=e.P},function(e){g=e.D},function(e){v=e.T,y=e.a,b=e.b,N=e.c},function(e){w=e.P},function(e){k=e.A},function(e){D=e.E},function(e){C=e.U},function(e){S=e.M},function(e){A=e.C},function(e){B=e.C},function(e){K=e.C},function(e){P=e.R,T=e.C,F=e.X,V=e.Y},function(e){L=e.L,_=e.a},function(e){M=e.T,O=e.P,R=e.a,I=e.C},function(e){U=e.L,q=e.B,E=e.a},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){s("default",function(){var s,t,$,J,W,X,Y,H,Q,Z,z,G,ee,se,te,ne,le,ae=a().t,ie=i().props,re=ie.business,ce=ie.analytics,de=ie.filters,oe=e(n.useState(de.start_date?new Date(de.start_date):new Date(ce.startDate)),2),ue=oe[0],xe=oe[1],me=e(n.useState(de.end_date?new Date(de.end_date):new Date(ce.endDate)),2),je=me[0],he=me[1],pe=e(n.useState(!1),2),fe=pe[0],ge=pe[1];n.useEffect(function(){var e=setInterval(function(){fe||r.reload({only:["analytics"]})},3e5);return function(){return clearInterval(e)}},[fe]);var ve=["#3b82f6","#00C49F","#FFBB28","#FF8042","#8884d8"],ye={Completed:"#10b981",Pending:"#f59e0b",Cancelled:"#ef4444",completed:"#10b981",pending:"#f59e0b",cancelled:"#ef4444"},be=function(e){var s=new Date(e);return"".concat(s.getMonth()+1,"/").concat(s.getDate())},Ne=(null===(s=ce.devices)||void 0===s?void 0:s.length)>0?ce.devices.map(function(e,s){return{name:e.device_type||"Unknown",value:e.count}}):[{name:"No Data",value:1}],we=(null===(t=ce.referrers)||void 0===t?void 0:t.length)>0?ce.referrers.map(function(e){return{name:e.referrer||"Direct",value:e.count}}):[{name:"No Data",value:1}],ke=(null===($=ce.platforms)||void 0===$?void 0:$.length)>0?ce.platforms.map(function(e){return{name:e.platform_name||"Unknown",value:e.count}}):[{name:"No Data",value:1}],De=(null===(J=ce.browsers)||void 0===J?void 0:J.length)>0?ce.browsers.map(function(e){return{name:e.browser_name||"Unknown",value:e.count}}):[{name:"No Data",value:1}],Ce=(null===(W=ce.appointments)||void 0===W||null===(W=W.statuses)||void 0===W?void 0:W.length)>0?ce.appointments.statuses.map(function(e){return{name:e.status,value:e.count}}):[{name:"No Data",value:1}],Se=(null===(X=ce.appointments)||void 0===X||null===(X=X.daily)||void 0===X?void 0:X.length)>0?ce.appointments.daily.map(function(e){return{date:e.date,appointments:e.appointments}}):[],Ae=(null===(Y=ce.appointments)||void 0===Y||null===(Y=Y.popularTimes)||void 0===Y?void 0:Y.length)>0?ce.appointments.popularTimes.map(function(e){return{name:e.time,value:e.count}}):[],Be=[{label:ae("Back to Businesses"),icon:l.jsx(k,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:function(){return r.get(route("vcard-builder.index"))}}],Ke=[{title:ae("Dashboard"),href:route("dashboard")},{title:ae("vCard Builder"),href:route("vcard-builder.index")},{title:(null==re?void 0:re.name)||"Business",href:route("vcard-builder.edit",null==re?void 0:re.id)},{title:ae("Analytics")}];return l.jsx(f,{title:"".concat(null==re?void 0:re.name," - ").concat(ae("Analytics")),url:route("vcard-builder.analytics",null==re?void 0:re.slug),actions:Be,breadcrumbs:Ke,children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs(c,{children:[l.jsx(d,{children:l.jsx(o,{className:"text-sm",children:ae("Date Range")})}),l.jsx(u,{children:l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(x,{children:ae("Start Date")}),l.jsx(g,{selected:ue,onSelect:xe,onChange:function(e){return xe(e)}})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(x,{children:ae("End Date")}),l.jsx(g,{selected:je,onSelect:he,onChange:function(e){return he(e)}})]}),l.jsx(m,{onClick:function(){ue&&je&&(ge(!0),r.get(route("vcard-builder.analytics",re.slug),{start_date:ue.toISOString().split("T")[0],end_date:je.toISOString().split("T")[0]},{preserveState:!0,onFinish:function(){return ge(!1)}}))},disabled:fe,children:ae(fe?"Loading...":"Apply")})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx(c,{children:l.jsx(u,{className:"p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:ae("Page Views")}),l.jsx("h3",{className:"mt-2 text-2xl font-bold",children:ce.pageViews})]}),l.jsx("div",{className:"rounded-full bg-blue-100 p-3 dark:bg-blue-900",children:l.jsx(D,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})})]})})}),l.jsx(c,{children:l.jsx(u,{className:"p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:ae("Unique Visitors")}),l.jsx("h3",{className:"mt-2 text-2xl font-bold",children:ce.uniqueVisitors})]}),l.jsx("div",{className:"rounded-full bg-purple-100 p-3 dark:bg-purple-900",children:l.jsx(C,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})})]})})}),l.jsx(c,{children:l.jsx(u,{className:"p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:ae("Contact Submissions")}),l.jsx("h3",{className:"mt-2 text-2xl font-bold",children:ce.contactSubmissions})]}),l.jsx("div",{className:"rounded-full bg-green-100 p-3 dark:bg-green-900",children:l.jsx(S,{className:"h-5 w-5 text-green-600 dark:text-green-400"})})]})})}),l.jsx(c,{children:l.jsx(u,{className:"p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:ae("Total Appointments")}),l.jsx("h3",{className:"mt-2 text-2xl font-bold",children:(null===(H=ce.appointments)||void 0===H?void 0:H.total)||0})]}),l.jsx("div",{className:"rounded-full bg-amber-100 p-3 dark:bg-amber-900",children:l.jsx(A,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})})]})})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(c,{children:[l.jsx(d,{className:"pb-2",children:l.jsxs(o,{className:"text-sm font-medium text-muted-foreground flex items-center",children:[l.jsx(B,{className:"h-4 w-4 mr-2 text-green-500"}),ae("Completed")]})}),l.jsxs(u,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xl font-bold text-green-600",children:(null===(Q=ce.appointments)||void 0===Q?void 0:Q.completed)||0}),l.jsxs(j,{variant:"outline",className:"bg-green-100 text-green-800 border-green-200",children:[(null===(Z=ce.appointments)||void 0===Z?void 0:Z.total)>0?Math.round(ce.appointments.completed/ce.appointments.total*100):0,"%"]})]}),l.jsx(w,{className:"mt-2",value:(null===(z=ce.appointments)||void 0===z?void 0:z.total)>0?ce.appointments.completed/ce.appointments.total*100:0})]})]}),l.jsxs(c,{children:[l.jsx(d,{className:"pb-2",children:l.jsxs(o,{className:"text-sm font-medium text-muted-foreground flex items-center",children:[l.jsx(h,{className:"h-4 w-4 mr-2 text-amber-500"}),ae("Pending")]})}),l.jsxs(u,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xl font-bold text-amber-600",children:(null===(G=ce.appointments)||void 0===G?void 0:G.pending)||0}),l.jsxs(j,{variant:"outline",className:"bg-amber-100 text-amber-800 border-amber-200",children:[(null===(ee=ce.appointments)||void 0===ee?void 0:ee.total)>0?Math.round(ce.appointments.pending/ce.appointments.total*100):0,"%"]})]}),l.jsx(w,{className:"mt-2",value:(null===(se=ce.appointments)||void 0===se?void 0:se.total)>0?ce.appointments.pending/ce.appointments.total*100:0})]})]}),l.jsxs(c,{children:[l.jsx(d,{className:"pb-2",children:l.jsxs(o,{className:"text-sm font-medium text-muted-foreground flex items-center",children:[l.jsx(K,{className:"h-4 w-4 mr-2 text-red-500"}),ae("Cancelled")]})}),l.jsxs(u,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xl font-bold text-red-600",children:(null===(te=ce.appointments)||void 0===te?void 0:te.cancelled)||0}),l.jsxs(j,{variant:"outline",className:"bg-red-100 text-red-800 border-red-200",children:[(null===(ne=ce.appointments)||void 0===ne?void 0:ne.total)>0?Math.round(ce.appointments.cancelled/ce.appointments.total*100):0,"%"]})]}),l.jsx(w,{className:"mt-2",value:(null===(le=ce.appointments)||void 0===le?void 0:le.total)>0?ce.appointments.cancelled/ce.appointments.total*100:0})]})]})]}),l.jsxs(v,{defaultValue:"traffic",children:[l.jsxs(y,{className:"mb-4 w-full justify-start overflow-x-auto",children:[l.jsx(b,{value:"traffic",children:ae("Traffic")}),l.jsx(b,{value:"devices",children:ae("Devices")}),l.jsx(b,{value:"platforms",children:ae("Platforms")}),l.jsx(b,{value:"browsers",children:ae("Browsers")}),l.jsx(b,{value:"referrers",children:ae("Referrers")}),l.jsx(b,{value:"appointments",children:ae("Appointments")})]}),l.jsx(N,{value:"traffic",children:l.jsxs(c,{children:[l.jsxs(d,{children:[l.jsx(o,{className:"text-sm",children:ae("Daily Page Views")}),l.jsx(p,{className:"text-xs",children:ae("Page views over the selected time period")})]}),l.jsx(u,{children:l.jsx("div",{className:"h-[300px]",children:l.jsx(P,{width:"100%",height:"100%",children:l.jsxs(L,{data:ce.dailyPageViews||[],margin:{top:5,right:30,left:20,bottom:5},children:[l.jsx(T,{strokeDasharray:"3 3"}),l.jsx(F,{dataKey:"date",tickFormatter:be}),l.jsx(V,{}),l.jsx(M,{}),l.jsx(U,{}),l.jsx(_,{type:"monotone",dataKey:"views",name:"Page Views",stroke:"#3b82f6",activeDot:{r:8}})]})})})})]})}),l.jsx(N,{value:"devices",children:l.jsxs(c,{children:[l.jsxs(d,{children:[l.jsx(o,{className:"text-sm",children:ae("Device Types")}),l.jsx(p,{className:"text-xs",children:ae("Breakdown of visitors by device type")})]}),l.jsx(u,{children:l.jsx("div",{className:"h-[300px]",children:l.jsx(P,{width:"100%",height:"100%",children:l.jsxs(O,{children:[l.jsx(R,{data:Ne,cx:"50%",cy:"50%",labelLine:!1,outerRadius:100,fill:"#8884d8",dataKey:"value",label:function(e){var s=e.name,t=e.percent;return"".concat(s,": ").concat((100*t).toFixed(0),"%")},children:Ne.map(function(e,s){return l.jsx(I,{fill:ve[s%ve.length]},"cell-".concat(s))})}),l.jsx(M,{}),l.jsx(U,{})]})})})})]})}),l.jsx(N,{value:"platforms",children:l.jsxs(c,{children:[l.jsxs(d,{children:[l.jsx(o,{className:"text-sm",children:ae("Operating Systems")}),l.jsx(p,{className:"text-xs",children:ae("Breakdown of visitors by operating system")})]}),l.jsx(u,{children:l.jsx("div",{className:"h-[300px]",children:l.jsx(P,{width:"100%",height:"100%",children:l.jsxs(O,{children:[l.jsx(R,{data:ke,cx:"50%",cy:"50%",labelLine:!1,outerRadius:100,fill:"#8884d8",dataKey:"value",label:function(e){var s=e.name,t=e.percent;return"".concat(s,": ").concat((100*t).toFixed(0),"%")},children:ke.map(function(e,s){return l.jsx(I,{fill:ve[s%ve.length]},"cell-".concat(s))})}),l.jsx(M,{}),l.jsx(U,{})]})})})})]})}),l.jsx(N,{value:"browsers",children:l.jsxs(c,{children:[l.jsxs(d,{children:[l.jsx(o,{className:"text-sm",children:ae("Web Browsers")}),l.jsx(p,{className:"text-xs",children:ae("Breakdown of visitors by web browser")})]}),l.jsx(u,{children:l.jsx("div",{className:"h-[300px]",children:l.jsx(P,{width:"100%",height:"100%",children:l.jsxs(q,{data:De,margin:{top:5,right:30,left:20,bottom:5},children:[l.jsx(T,{strokeDasharray:"3 3"}),l.jsx(F,{dataKey:"name"}),l.jsx(V,{}),l.jsx(M,{}),l.jsx(U,{}),l.jsx(E,{dataKey:"value",name:"Visits",fill:"#8884d8",children:De.map(function(e,s){return l.jsx(I,{fill:ve[s%ve.length]},"cell-".concat(s))})})]})})})})]})}),l.jsx(N,{value:"referrers",children:l.jsxs(c,{children:[l.jsxs(d,{children:[l.jsx(o,{className:"text-sm",children:ae("Top Referrers")}),l.jsx(p,{className:"text-xs",children:ae("Sources of traffic to your business card")})]}),l.jsx(u,{children:l.jsx("div",{className:"h-[300px]",children:l.jsx(P,{width:"100%",height:"100%",children:l.jsxs(q,{data:we,margin:{top:5,right:30,left:20,bottom:5},children:[l.jsx(T,{strokeDasharray:"3 3"}),l.jsx(F,{dataKey:"name"}),l.jsx(V,{}),l.jsx(M,{}),l.jsx(U,{}),l.jsx(E,{dataKey:"value",name:"Visits",fill:"#8884d8",children:we.map(function(e,s){return l.jsx(I,{fill:ve[s%ve.length]},"cell-".concat(s))})})]})})})})]})}),l.jsx(N,{value:"appointments",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(c,{children:[l.jsxs(d,{children:[l.jsx(o,{className:"text-sm",children:ae("Appointment Status Distribution")}),l.jsx(p,{className:"text-xs",children:ae("Breakdown of appointments by status")})]}),l.jsx(u,{children:l.jsx("div",{className:"h-[300px]",children:l.jsx(P,{width:"100%",height:"100%",children:l.jsxs(O,{children:[l.jsx(R,{data:Ce,cx:"50%",cy:"50%",labelLine:!1,outerRadius:100,fill:"#8884d8",dataKey:"value",label:function(e){var s=e.name,t=e.percent;return"".concat(s,": ").concat((100*t).toFixed(0),"%")},children:Ce.map(function(e,s){return l.jsx(I,{fill:ye[e.name.toLowerCase()]||ve[s%ve.length]},"cell-".concat(e.name))})}),l.jsx(M,{}),l.jsx(U,{})]})})})})]}),l.jsxs(c,{children:[l.jsxs(d,{children:[l.jsx(o,{className:"text-sm",children:ae("Daily Appointments")}),l.jsx(p,{className:"text-xs",children:ae("Number of appointments per day")})]}),l.jsx(u,{children:l.jsx("div",{className:"h-[300px]",children:l.jsx(P,{width:"100%",height:"100%",children:l.jsxs(L,{data:Se,margin:{top:5,right:30,left:20,bottom:5},children:[l.jsx(T,{strokeDasharray:"3 3"}),l.jsx(F,{dataKey:"date",tickFormatter:be}),l.jsx(V,{}),l.jsx(M,{}),l.jsx(U,{}),l.jsx(_,{type:"monotone",dataKey:"appointments",name:"Appointments",stroke:"#3b82f6",activeDot:{r:8}})]})})})})]}),l.jsxs(c,{className:"lg:col-span-2",children:[l.jsxs(d,{children:[l.jsx(o,{className:"text-sm",children:ae("Popular Appointment Times")}),l.jsx(p,{className:"text-xs",children:ae("Most frequently booked time slots")})]}),l.jsx(u,{children:l.jsx("div",{className:"h-[300px]",children:l.jsx(P,{width:"100%",height:"100%",children:l.jsxs(q,{data:Ae,margin:{top:5,right:30,left:20,bottom:5},children:[l.jsx(T,{strokeDasharray:"3 3"}),l.jsx(F,{dataKey:"name"}),l.jsx(V,{}),l.jsx(M,{}),l.jsx(U,{}),l.jsx(E,{dataKey:"value",name:"Bookings",fill:"#3b82f6",children:Ae.map(function(e,s){return l.jsx(I,{fill:ve[s%ve.length]},"cell-".concat(s))})})]})})})})]})]})})]})]})})})}}})}();

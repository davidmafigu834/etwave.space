import{R as j,j as e,r as de}from"./ui-XtzbmeJx.js";import{P as me}from"./page-template-CFccWGHX.js";import{K as E,u as le,G as xe,C as u,k as U,d as M,H as pe,e as T,f as ue,i as P,g as h,J as he,r as fe,B as m,F as re,h as ge,P as te,N as B,$ as w}from"./app-BNDAg-x0.js";import{P as je}from"./progress-CmOZgSeU.js";import{D as ve}from"./dashboard-overview-DyvvxKXQ.js";import{V as Ne}from"./VCardPreview-D3RJlNog.js";import{Q as be}from"./browser-VK1alZgc.js";import{S as ye}from"./ShareModal-D6s0F3tz.js";import we from"./DashboardOnboardingWizard-Cffdm13Y.js";import{R as ne}from"./refresh-cw-C_rZszMM.js";import{C as ke}from"./chart-column-c4hbpdne.js";import{U as Ce}from"./users-dhNqMrnE.js";import{M as ie}from"./mail-Dom0Io57.js";import{M as R}from"./message-square-BWj-TB69.js";import{C as L}from"./app-sidebar-layout-AHuSYAra.js";import{E as _e}from"./eye-3VLs8-F7.js";import{T as Se}from"./trending-up-i79bn84M.js";import{Q as Ae}from"./qr-code-CQ8236PS.js";import{S as ze}from"./share-2-C5tufTUg.js";import{H as Be}from"./hard-drive-B3jeU1FC.js";import{P as Me,a as Pe,C as ae,T as Ue}from"./PieChart-BhqwjD_2.js";import{C as Re}from"./clock-DkagGUmf.js";import"./vendor-CxtKjBZA.js";import"./app-layout-CJ9aiUxz.js";import"./use-favicon-B5hfZCZO.js";import"./cookie-consent-B_ejjwgp.js";import"./utils-CCVAIzGD.js";import"./building-2-DMMUyCqJ.js";import"./credit-card-DWMi5WDy.js";import"./sparkles-DpD6ndVc.js";import"./arrow-right-Pl_Cz_hR.js";import"./play-DoCzCOfb.js";import"./SocialIcon-qOmKQ0wb.js";import"./download-D0_w8mHD.js";import"./copy-DrIsvEfV.js";import"./sectionHelpers-Dniuxp0X.js";import"./index-CO6jniE0.js";import"./borehole-drilling-DMk3_hv2.js";import"./language-DYlIyiUn.js";import"./calendar-Calahg4u.js";import"./youtube-qcPb_Nsa.js";import"./wrench-CC3Gd12W.js";import"./phone-DR_qe593.js";import"./globe-Wz67MOVh.js";import"./map-pin-96bacp2H.js";import"./video-CmKPlxf2.js";import"./star-DzqcSj_M.js";import"./house-DU4ZKfa7.js";import"./award-C8ej-wRP.js";import"./user-D1kIaiAN.js";import"./briefcase-BSRomG9M.js";import"./building-CgWQ2SoN.js";import"./dollar-sign-Cilvu6Pq.js";import"./package-DifSoftz.js";import"./smartphone-CNm8VAQ8.js";import"./menu-BeeeYSFI.js";import"./camera-C-UQKom4.js";import"./heart-C-sT4fnZ.js";import"./external-link-aX1h0ANF.js";import"./chevron-right-Bd-0PcYb.js";import"./chevron-up-DUlTmMPd.js";import"./instagram-cV-N76_q.js";import"./facebook-CwgMUPmw.js";import"./shopping-bag-CblcqTrH.js";import"./shield-check-DMwzabF4.js";import"./compass-Bprd_yd6.js";import"./shield-miDYeZjR.js";import"./circle-check-big-CQAe5LhS.js";import"./circle-check-DWFyzZat.js";import"./code-O43MSYvJ.js";import"./linkedin-ojqsVbzp.js";import"./settings-CPdYUYGM.js";import"./zap-DDbCAESS.js";import"./monitor-C8YWkyx4.js";import"./ticket-D2-8zKy1.js";import"./circle-help-9NdNeTGO.js";import"./target-sc6z-tl4.js";import"./shopping-cart-D_c8Mwgj.js";import"./activity-Boh3tFUU.js";import"./lightbulb-DtxT_Re5.js";import"./layers-E5PjcZZt.js";import"./SolarInstallationTemplate-kqtlfLfw.js";import"./leaf-HDC9qo8p.js";import"./sun-medium-BtKuymUY.js";import"./RetailShopTemplate-BL-3WsOt.js";import"./BoreholeDrillingTemplate-D38dctzu.js";import"./waves-DDwyigPY.js";import"./message-circle-zaP7lS8a.js";import"./droplet-u9UhRTkF.js";import"./quote-x2bY6ZX9.js";import"./textarea-BAxIzAY1.js";import"./select-CWuHpsTP.js";import"./index-C0g6bluz.js";import"./react-country-flag.esm-B3QM5-4S.js";import"./loader-circle-CSHwA98f.js";import"./language-switcher-Sj0uA1nn.js";import"./wallet-BDuAFGuJ.js";import"./arrow-left-oLpbgumw.js";import"./react-redux-DgYNU6LW.js";const Le=()=>{const{auth:i}=E().props,s=l=>(Array.isArray(l)?l:[l]).some(d=>{var n;return(n=i.permissions)==null?void 0:n.includes(d)}),a=l=>(Array.isArray(l)?l:[l]).some(d=>{var n;return(n=i.roles)==null?void 0:n.includes(d)}),o=l=>(Array.isArray(l)?l:[l]).includes(i.user_type),r=(l,p="view")=>{const d="".concat(p,"-").concat(l),n="manage-".concat(l);return s([d,n])};return{permissions:i.permissions||[],roles:i.roles||[],userType:i.user_type,hasPermission:s,hasRole:a,hasUserType:o,canAccess:r}},Te=()=>{var n,v,f;const s=(n=E().props)==null?void 0:n.auth,a=((v=s==null?void 0:s.user)==null?void 0:v.onboardingProfile)||((f=s==null?void 0:s.user)==null?void 0:f.onboarding_profile),o=j.useMemo(()=>!(s!=null&&s.user)||s.user.type&&!["company"].includes(s.user.type)?!1:!(a!=null&&a.completed_at),[s==null?void 0:s.user,a==null?void 0:a.completed_at]),[r,l]=j.useState(o),[p,d]=j.useState(a);return j.useEffect(()=>{o?(l(!0),d(a)):!o&&(a!=null&&a.completed_at)&&(l(!1),d(a))},[o,a]),j.useEffect(()=>{const y=()=>{l(!0)};return window.addEventListener("open-onboarding-wizard",y),()=>window.removeEventListener("open-onboarding-wizard",y)},[]),s!=null&&s.user?e.jsx(we,{open:r,onOpenChange:l,profile:p,onProfileUpdate:d}):null},Ee=({className:i})=>{const{t:s}=le(),{announcements:a,unreadCount:o,isLoading:r,error:l,markAsRead:p,markAllAsRead:d,refresh:n,isEnabled:v}=xe(),f=de.useMemo(()=>a.slice(0,3),[a]);if(!v)return null;const y=async x=>{await p(x)||console.error("Failed to mark announcement as read")},_=async()=>{await d()};return e.jsxs(u,{className:U("border border-dashed border-primary/20 bg-white/70 dark:bg-slate-900/70",i),children:[e.jsxs(M,{className:"flex flex-row items-start justify-between gap-3 pb-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary",children:e.jsx(pe,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx(T,{className:"text-base font-semibold",children:s("Announcements")}),e.jsx(ue,{children:o>0?s("You have {{count}} unread updates",{count:o}):s("All caught up with the latest updates")})]})]}),e.jsx(P,{variant:o>0?"default":"secondary",children:s("{{count}} unread",{count:o})})]}),e.jsxs(h,{className:"space-y-4 pt-0",children:[r&&e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"h-3 w-3/4 animate-pulse rounded bg-muted"}),e.jsx("div",{className:"h-3 w-1/2 animate-pulse rounded bg-muted"}),e.jsx("div",{className:"h-3 w-2/3 animate-pulse rounded bg-muted"})]}),l&&!r&&e.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-destructive/40 bg-destructive/10 p-3 text-sm text-destructive",children:[e.jsx(he,{className:"mt-0.5 h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s("Unable to load announcements")}),e.jsx("p",{className:"text-xs text-destructive/80",children:l})]})]}),!r&&!l&&f.length===0&&e.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-muted/40 bg-muted/20 p-3 text-sm text-muted-foreground",children:[e.jsx(fe,{className:"mt-0.5 h-4 w-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:s("No announcements yet")}),e.jsx("p",{className:"text-xs",children:s("Stay tuned for product updates and important notices.")})]})]}),!r&&!l&&f.length>0&&e.jsx("div",{className:"space-y-3",children:f.map(x=>e.jsx("div",{className:U("group rounded-xl border border-transparent bg-gradient-to-r from-primary/0 to-primary/5 p-3 transition hover:border-primary/30 hover:from-primary/5",!x.is_read&&"border-primary/40 bg-primary/5"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-sm text-foreground",children:x.title}),e.jsx(P,{variant:"outline",className:"text-xs capitalize",children:s(x.type)})]}),e.jsx("p",{className:"line-clamp-2 text-xs text-muted-foreground",children:x.message}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:new Date(x.created_at).toLocaleString()})]}),!x.is_read&&e.jsxs(m,{size:"sm",variant:"ghost",className:"h-7 gap-1 text-xs text-primary hover:text-primary",onClick:()=>y(x.id),children:[e.jsx(re,{className:"h-3.5 w-3.5"}),s("Mark read")]})]})},x.id))})]}),e.jsxs(ge,{className:"flex flex-col gap-2 border-t border-border/60 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs(m,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>{_()},disabled:o===0||r,children:[e.jsx(re,{className:"h-4 w-4"}),s("Mark all as read")]}),e.jsxs(m,{size:"sm",variant:"ghost",className:"gap-2 text-muted-foreground hover:text-primary",onClick:()=>n==null?void 0:n(),disabled:r,children:[e.jsx(ne,{className:U("h-4 w-4",r&&"animate-spin")}),s("Refresh")]})]})]})};function zr({dashboardData:i}){var G,F,O,Q,V,H,W,K,q,I,Y,J,Z;const{t:s}=le(),{auth:a}=E().props,{hasPermission:o}=Le(),r=((F=(G=a.user)==null?void 0:G.businesses)==null?void 0:F.find(t=>{var c;return t.id===((c=a.user)==null?void 0:c.current_business)}))||((Q=(O=a.user)==null?void 0:O.businesses)==null?void 0:Q[0]),l=((V=a.user)==null?void 0:V.onboardingProfile)||((H=a.user)==null?void 0:H.onboarding_profile),p=((W=a.user)==null?void 0:W.type)==="company",d=[{label:s("Refresh"),icon:e.jsx(ne,{className:"h-4 w-4"}),variant:"outline",onClick:()=>window.location.reload()},...o(["manage-analytics","view-analytics"])?[{label:s("Analytics"),icon:e.jsx(ke,{className:"h-4 w-4"}),variant:"outline",onClick:()=>window.location.href=route("analytics")}]:[],...o(["create-businesses","create-vcard-builder"])?[{label:s("Create Business"),icon:e.jsx(te,{className:"h-4 w-4"}),variant:"default",onClick:()=>window.location.href=route("vcard-builder.create")}]:[]];p&&d.push({label:s("Business Profile"),icon:e.jsx(Ce,{className:"h-4 w-4"}),variant:"outline",onClick:()=>window.dispatchEvent(new CustomEvent("open-onboarding-wizard"))});const n={totalBusinesses:Number((K=i==null?void 0:i.stats)==null?void 0:K.totalBusinesses)||0,totalContacts:Number((q=i==null?void 0:i.stats)==null?void 0:q.totalContacts)||0,totalAppointments:Number((I=i==null?void 0:i.stats)==null?void 0:I.totalAppointments)||0,totalViews:Number((Y=i==null?void 0:i.stats)==null?void 0:Y.totalViews)||0,monthlyGrowth:Number((J=i==null?void 0:i.stats)==null?void 0:J.monthlyGrowth)||0},v=(i==null?void 0:i.recentContacts)||[],f=(i==null?void 0:i.recentAppointments)||[],[y,_]=j.useState(!1),[x,$]=j.useState("");return e.jsxs(e.Fragment,{children:[e.jsx(Te,{}),e.jsxs(me,{title:s("Dashboard"),description:s("Monitor performance, manage engagements, and keep your business profile up to date."),url:"/dashboard",actions:d,children:[e.jsxs("div",{className:"space-y-6 overflow-x-hidden",children:[p&&!(l!=null&&l.completed_at)&&e.jsx("div",{className:"rounded-3xl border border-primary/20 bg-primary/5 px-5 py-4 md:px-6 md:py-5",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-semibold text-primary",children:s("Complete your business profile")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("Weâ€™ll personalise templates, copy, and suggestions for you once we know more about your business.")})]}),e.jsx(m,{variant:"default",onClick:()=>window.dispatchEvent(new CustomEvent("open-onboarding-wizard")),className:"self-start md:self-auto",children:s("Start onboarding")})]})}),e.jsxs("div",{className:"grid gap-3 sm:gap-4 md:grid-cols-2 lg:grid-cols-5",children:[e.jsx(u,{children:e.jsx(h,{className:"p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Total Businesses")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:n.totalBusinesses.toLocaleString()})]}),e.jsx("div",{className:"rounded-full bg-blue-100 p-3 dark:bg-blue-900",children:e.jsx(ie,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})})]})})}),e.jsx(u,{children:e.jsx(h,{className:"p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Total Contacts")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:n.totalContacts.toLocaleString()})]}),e.jsx("div",{className:"rounded-full bg-green-100 p-3 dark:bg-green-900",children:e.jsx(R,{className:"h-5 w-5 text-green-600 dark:text-green-400"})})]})})}),e.jsx(u,{children:e.jsx(h,{className:"p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Appointments")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:n.totalAppointments.toLocaleString()})]}),e.jsx("div",{className:"rounded-full bg-purple-100 p-3 dark:bg-purple-900",children:e.jsx(L,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})})]})})}),e.jsx(u,{children:e.jsx(h,{className:"p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Total Views")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:n.totalViews.toLocaleString()})]}),e.jsx("div",{className:"rounded-full bg-orange-100 p-3 dark:bg-orange-900",children:e.jsx(_e,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})})]})})}),e.jsx(u,{children:e.jsx(h,{className:"p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s("Monthly Growth")}),e.jsxs("h3",{className:"mt-2 text-2xl font-bold",children:["+",Number(n.monthlyGrowth)||0,"%"]})]}),e.jsx("div",{className:"rounded-full bg-emerald-100 p-3 dark:bg-emerald-900",children:e.jsx(Se,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})})]})})})]}),e.jsxs("div",{className:"grid gap-4 sm:gap-6 lg:grid-cols-3",children:[r?e.jsxs(u,{className:"lg:col-span-1",children:[e.jsx(M,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-lg font-bold text-primary",children:r.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:r.name}),e.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:((Z=r.business_type)==null?void 0:Z.replace("-"," "))||"General"})]})]}),e.jsxs(P,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-200",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1"}),s("Live")]})]})}),e.jsxs(h,{className:"pt-0 p-3 sm:p-4 lg:p-6",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg overflow-hidden mb-4",children:e.jsx("div",{className:"w-full overflow-y-auto overflow-x-hidden max-h-[420px] shadow-sm",children:e.jsx(Ne,{businessType:r.business_type||"freelancer",data:{...r,config_sections:r.config_sections||{},template_config:{sections:r.config_sections||{},sectionSettings:r.config_sections||{}}},template:null})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:s("URL")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"px-2 py-1 rounded bg-background text-xs font-mono truncate",children:r.custom_domain?r.custom_domain:"/".concat(r.url_prefix||"v","/").concat(r.slug)}),e.jsx(m,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:async()=>{const t=r.custom_domain?"https://".concat(r.custom_domain):r.url_prefix&&r.url_prefix!==""?route("public.vcard.show",{prefix:r.url_prefix,slug:r.slug},!0):route("public.vcard.show.direct",r.slug,!0);try{await navigator.clipboard.writeText(t),B.success(s("Link copied to clipboard!"))}catch(c){B.error(s("Failed to copy link"))}},children:e.jsx("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(w,{href:route("vcard-builder.edit",r.id),children:s("Edit")})}),e.jsx(m,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(w,{href:route("vcard-builder.preview",r.id),target:"_blank",children:s("Preview")})}),e.jsx(m,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(w,{href:route("vcard-builder.index"),children:s("Businesses")})})]})]})]})]}):e.jsxs(u,{className:"lg:col-span-1 flex flex-col justify-center items-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 z-0 overflow-hidden pointer-events-none",children:e.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"bg-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"var(--theme-color)",stopOpacity:"0.08"}),e.jsx("stop",{offset:"100%",stopColor:"var(--theme-color)",stopOpacity:"0.18"})]})}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#bg-gradient)"}),e.jsx("circle",{cx:"15",cy:"15",r:"40",fill:"var(--theme-color)",opacity:"0.05"}),e.jsx("circle",{cx:"85",cy:"85",r:"30",fill:"var(--theme-color)",opacity:"0.07"}),e.jsx("path",{d:"M0,60 Q25,50 50,60 T100,60 V100 H0 Z",fill:"var(--theme-color)",opacity:"0.1"})]})}),e.jsxs(h,{className:"py-12 z-10 flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:e.jsx(ie,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:s("No Business Yet")}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-xs",children:s("Create your first digital business card to showcase your brand and connect with customers.")}),e.jsx(w,{href:route("vcard-builder.create"),className:"relative z-10",children:e.jsxs(m,{size:"lg",className:"flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:s("Create Business")})]})})]})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-6 h-full flex flex-col",children:[e.jsx(Ee,{}),r&&e.jsx(u,{className:"flex-1",children:e.jsx(h,{className:"p-3 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"flex items-start justify-between h-full",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:(()=>{const t=new Date().getHours();return t<12?s("Good Morning"):t<17?s("Good Afternoon"):s("Good Evening")})()}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s("Create and share digital business cards instantly. Connect with customers through QR codes and direct links.")})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground",children:[e.jsx("p",{children:s("Share via QR code, social media, or direct link")}),e.jsx("p",{children:s("Track engagement and grow your network")}),e.jsx("p",{children:s("Eco-friendly alternative to traditional paper cards")}),e.jsx("p",{children:s("Customizable templates for every industry")})]})})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-2 min-w-0",children:[e.jsx("div",{className:"w-28 h-28 bg-white border rounded-lg p-2 shadow-sm",children:(()=>{const t=r.custom_domain?"https://".concat(r.custom_domain):r.url_prefix&&r.url_prefix!==""?route("public.vcard.show",{prefix:r.url_prefix,slug:r.slug},!0):route("public.vcard.show.direct",r.slug,!0),[c,N]=j.useState("");return j.useEffect(()=>{be.toDataURL(t,{width:96,margin:1}).then(g=>N(g)).catch(g=>console.error(g))},[t]),c?e.jsx("img",{src:c,alt:"QR Code",className:"w-full h-full rounded"}):e.jsx("div",{className:"w-full h-full bg-gray-100 rounded flex items-center justify-center",children:e.jsx(Ae,{className:"h-12 w-12 text-gray-500"})})})()}),e.jsx("p",{className:"text-xs text-center text-muted-foreground px-2",children:s("Scan to view card")}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full",children:[e.jsx(m,{variant:"default",size:"sm",className:"h-8 text-xs bg-primary hover:bg-primary/90",onClick:async()=>{const t=r.custom_domain?"https://".concat(r.custom_domain):r.url_prefix&&r.url_prefix!==""?route("public.vcard.show",{prefix:r.url_prefix,slug:r.slug},!0):route("public.vcard.show.direct",r.slug,!0);try{await navigator.clipboard.writeText(t),B.success(s("Link copied to clipboard!"))}catch(c){B.error(s("Failed to copy link"))}},children:e.jsx("svg",{className:"h-3 w-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),e.jsx(m,{variant:"outline",size:"sm",className:"h-8 text-xs border-primary text-primary hover:bg-primary/10",onClick:()=>{const t=r.custom_domain?"https://".concat(r.custom_domain):r.url_prefix&&r.url_prefix!==""?route("public.vcard.show",{prefix:r.url_prefix,slug:r.slug},!0):route("public.vcard.show.direct",r.slug,!0);$(t),_(!0)},children:e.jsx(ze,{className:"h-3 w-3 mr-1"})})]})]})]})})}),e.jsxs(u,{className:"flex-1",children:[e.jsx(M,{className:"pb-3",children:e.jsxs(T,{className:"flex items-center gap-2 text-sm",children:[e.jsx(Be,{className:"h-4 w-4"}),s("Storage Usage")]})}),e.jsx(h,{className:"pt-0 p-3 sm:p-4 lg:p-6",children:(()=>{var X,D,ee,se;let t=Number((X=a.user)==null?void 0:X.storage_limit)||0;["company","superadmin"].includes((D=a.user)==null?void 0:D.type);const c=Number((se=(ee=a.user)==null?void 0:ee.plan)==null?void 0:se.storage_limit)||5,N=c*1024*1024*1024;window.isDemo&&(t=Math.min(7516192768e-1,N));const g=t>0?Math.max(Math.min(Math.round(Number(t)/Number(N)*100),100),1):0,S=Math.max(100-g,0),k=z=>{const b=Number(z)||0;return b<1024?"".concat(b," B"):b<1024*1024?"".concat((b/1024).toFixed(1)," KB"):b<1024*1024*1024?"".concat((b/(1024*1024)).toFixed(1)," MB"):"".concat((b/(1024*1024*1024)).toFixed(1)," GB")},C=k(t),A=(Number(c)||5).toFixed(1),oe=N-t,ce=k(oe);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-center mb-4 relative",children:[e.jsxs(Me,{width:120,height:120,children:[e.jsxs(Pe,{data:[{name:"Used",value:g},{name:"Free",value:S}],cx:60,cy:60,innerRadius:35,outerRadius:50,dataKey:"value",children:[e.jsx(ae,{fill:"var(--theme-color)"}),e.jsx(ae,{fill:"#e5e7eb"})]}),e.jsx(Ue,{formatter:z=>["".concat(z,"%"),"Storage"]})]}),e.jsxs("div",{className:"absolute flex flex-col items-center",children:[e.jsxs("span",{className:"text-lg font-bold text-primary",children:[g,"%"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s("Used")})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:s("Used Storage")}),e.jsx("span",{className:"font-medium",children:C})]}),e.jsx(je,{value:g,className:"h-2"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:s("Available")}),e.jsx("span",{className:"font-medium",children:ce})]}),e.jsxs("div",{className:"pt-2 border-t text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:s("{{used}} of {{total}} GB used",{used:C,total:A})}),e.jsxs("p",{className:"text-xs font-medium mt-1 capitalize",children:["Premium"," ",s("Plan")]})]})]})]})})()})]})]}),e.jsxs(u,{className:"lg:col-span-1",children:[e.jsx(M,{className:"pb-4",children:e.jsxs(T,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:e.jsx(Re,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),s("Recent Activity")]}),e.jsx(P,{variant:"secondary",className:"text-xs",children:[...v,...f].length})]})}),e.jsxs(h,{className:"pt-0 p-3 sm:p-4 lg:p-6",children:[e.jsx("div",{className:"space-y-2 mb-6",children:[...v,...f].sort((t,c)=>{var S,k,C,A;const N=new Date((k=(S=t.created_at)!=null?S:t.date)!=null?k:0).getTime();return new Date((A=(C=c.created_at)!=null?C:c.date)!=null?A:0).getTime()-N}).slice(0,6).map((t,c)=>e.jsxs("div",{className:"group flex items-start gap-3 p-3 rounded-xl hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 dark:hover:from-blue-950/20 dark:hover:to-indigo-950/20 transition-all duration-200 cursor-pointer border border-transparent hover:border-blue-200 dark:hover:border-blue-800",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ".concat("email"in t?"bg-gradient-to-br from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30":"bg-gradient-to-br from-purple-100 to-violet-100 dark:from-purple-900/30 dark:to-violet-900/30"),children:"email"in t?e.jsx(R,{className:"h-4 w-4 text-green-600 dark:text-green-400"}):e.jsx(L,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold truncate text-gray-900 dark:text-gray-100 mb-1",children:"email"in t?t.name:t.title}),e.jsx("p",{className:"text-xs text-muted-foreground truncate mb-1",children:"email"in t?t.email:t.date})]}),"status"in t&&e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:t.status==="confirmed"?"#10b981":t.status==="pending"?"#f59e0b":"#ef4444"}}),e.jsx("span",{className:"text-xs capitalize",style:{color:t.status==="confirmed"?"#10b981":t.status==="pending"?"#f59e0b":"#ef4444"},children:t.status})]})]})})]},c))}),e.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-800 space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",className:"h-8",asChild:!0,children:e.jsxs(w,{href:route("contacts.index"),children:[e.jsx(R,{className:"h-3 w-3 mr-1"}),s("Contacts")]})}),e.jsx(m,{variant:"outline",size:"sm",className:"h-8",asChild:!0,children:e.jsxs(w,{href:route("appointments.index"),children:[e.jsx(L,{className:"h-3 w-3 mr-1"}),s("Appointments")]})})]})})]})]})]}),e.jsx(ve,{userType:"company",stats:n})]}),e.jsx(ye,{isOpen:y,onClose:()=>_(!1),url:x,title:(r==null?void 0:r.name)||"Business"})]})]})}export{zr as default};

import{r as w,j as e}from"./ui-XtzbmeJx.js";import{u as ge,K as ve,S as k,C as l,d as c,e as o,g as i,L as ce,B as be,i as S,J as Ne,f as m}from"./app-CHRIhyY0.js";import{P as ye}from"./page-template-l6fMhetb.js";import{D as oe}from"./date-picker-DOMrxlTk.js";import{T as we,a as De,b as j,c as u}from"./tabs-CV5-k-Un.js";import{P as T}from"./progress-CKyO4B39.js";import{A as Ce}from"./arrow-left-hltsWyVL.js";import{E as ke}from"./eye-_GBMIZ3h.js";import{U as Se}from"./users-DVhUqNZg.js";import{M as Te}from"./message-square-CzRq4BMj.js";import{C as Be}from"./calendar-CuyjcLRJ.js";import{C as Ae}from"./circle-check-big-Blx2zDWr.js";import{C as Le}from"./circle-x-CHxqvcy2.js";import{R as x,C as g,X as v,Y as b}from"./CartesianChart-Bd-FNbfR.js";import{L as me,a as xe}from"./LineChart-lIzyjbX7.js";import{T as p,P as B,a as A,C as f}from"./PieChart-BhqwjD_2.js";import{L as h,B as L,a as P}from"./BarChart-B3JUZK-G.js";import"./vendor-CxtKjBZA.js";import"./utils-CCVAIzGD.js";import"./app-layout-Bpd3XWn2.js";import"./app-sidebar-layout-DTBrRaJF.js";import"./textarea-aJ3buVnx.js";import"./select-DVebJzi_.js";import"./index-C0g6bluz.js";import"./chevron-up-CWYfEUVP.js";import"./react-country-flag.esm-B3QM5-4S.js";import"./language-DYlIyiUn.js";import"./sparkles-CWM6veXP.js";import"./loader-circle-CU4vh_jx.js";import"./copy-_TD738Qf.js";import"./chevron-right-4OzdI5Hc.js";import"./language-switcher-DlUYSL3d.js";import"./globe-DnSDzBxp.js";import"./chart-column-C3hnsquQ.js";import"./briefcase-DFRvW6SB.js";import"./package-CVcIKtJX.js";import"./credit-card-D2Mnc2f1.js";import"./dollar-sign-CEEAnrcL.js";import"./mail-uU9WM_iR.js";import"./settings-D1jKjqmC.js";import"./wallet-B8MIIno5.js";import"./shopping-bag-DIpJi4I3.js";import"./user-UtdwWo_w.js";import"./use-favicon-DDTtBI2L.js";import"./cookie-consent-KmXGJKj8.js";import"./react-redux-DgYNU6LW.js";import"./tiny-invariant-BaFNuDhB.js";function Cs(){var I,q,X,Y,G,H,J,W,z,Q,Z,ee,se,te,ae,re,le,ie,ne,de;const{t:a}=ge(),{business:n,analytics:s,filters:N}=ve().props,[D,$]=w.useState(N.start_date?new Date(N.start_date):new Date(s.startDate)),[C,K]=w.useState(N.end_date?new Date(N.end_date):new Date(s.endDate)),[y,F]=w.useState(!1),pe=()=>{!D||!C||(F(!0),k.get(route("vcard-builder.analytics",n.slug),{start_date:D.toISOString().split("T")[0],end_date:C.toISOString().split("T")[0]},{preserveState:!0,onFinish:()=>F(!1)}))};w.useEffect(()=>{const t=setInterval(()=>{y||k.reload({only:["analytics"]})},3e5);return()=>clearInterval(t)},[y]);const d=["#3b82f6","#00C49F","#FFBB28","#FF8042","#8884d8"],he={Completed:"#10b981",Pending:"#f59e0b",Cancelled:"#ef4444",completed:"#10b981",pending:"#f59e0b",cancelled:"#ef4444"},R=t=>{const r=new Date(t);return"".concat(r.getMonth()+1,"/").concat(r.getDate())},V=((I=s.devices)==null?void 0:I.length)>0?s.devices.map((t,r)=>({name:t.device_type||"Unknown",value:t.count})):[{name:"No Data",value:1}],_=((q=s.referrers)==null?void 0:q.length)>0?s.referrers.map(t=>({name:t.referrer||"Direct",value:t.count})):[{name:"No Data",value:1}],E=((X=s.platforms)==null?void 0:X.length)>0?s.platforms.map(t=>({name:t.platform_name||"Unknown",value:t.count})):[{name:"No Data",value:1}],M=((Y=s.browsers)==null?void 0:Y.length)>0?s.browsers.map(t=>({name:t.browser_name||"Unknown",value:t.count})):[{name:"No Data",value:1}],O=((H=(G=s.appointments)==null?void 0:G.statuses)==null?void 0:H.length)>0?s.appointments.statuses.map(t=>({name:t.status,value:t.count})):[{name:"No Data",value:1}],je=((W=(J=s.appointments)==null?void 0:J.daily)==null?void 0:W.length)>0?s.appointments.daily.map(t=>({date:t.date,appointments:t.appointments})):[],U=((Q=(z=s.appointments)==null?void 0:z.popularTimes)==null?void 0:Q.length)>0?s.appointments.popularTimes.map(t=>({name:t.time,value:t.count})):[],ue=[{label:a("Back to Businesses"),icon:e.jsx(Ce,{className:"h-4 w-4 mr-2"}),variant:"outline",onClick:()=>k.get(route("vcard-builder.index"))}],fe=[{title:a("Dashboard"),href:route("dashboard")},{title:a("vCard Builder"),href:route("vcard-builder.index")},{title:(n==null?void 0:n.name)||"Business",href:route("vcard-builder.edit",n==null?void 0:n.id)},{title:a("Analytics")}];return e.jsx(ye,{title:"".concat(n==null?void 0:n.name," - ").concat(a("Analytics")),url:route("vcard-builder.analytics",n==null?void 0:n.slug),actions:ue,breadcrumbs:fe,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(o,{className:"text-sm",children:a("Date Range")})}),e.jsx(i,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{children:a("Start Date")}),e.jsx(oe,{selected:D,onSelect:$,onChange:t=>$(t)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{children:a("End Date")}),e.jsx(oe,{selected:C,onSelect:K,onChange:t=>K(t)})]}),e.jsx(be,{onClick:pe,disabled:y,children:a(y?"Loading...":"Apply")})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(l,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:a("Page Views")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:s.pageViews})]}),e.jsx("div",{className:"rounded-full bg-blue-100 p-3 dark:bg-blue-900",children:e.jsx(ke,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})})]})})}),e.jsx(l,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:a("Unique Visitors")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:s.uniqueVisitors})]}),e.jsx("div",{className:"rounded-full bg-purple-100 p-3 dark:bg-purple-900",children:e.jsx(Se,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})})]})})}),e.jsx(l,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:a("Contact Submissions")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:s.contactSubmissions})]}),e.jsx("div",{className:"rounded-full bg-green-100 p-3 dark:bg-green-900",children:e.jsx(Te,{className:"h-5 w-5 text-green-600 dark:text-green-400"})})]})})}),e.jsx(l,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:a("Total Appointments")}),e.jsx("h3",{className:"mt-2 text-2xl font-bold",children:((Z=s.appointments)==null?void 0:Z.total)||0})]}),e.jsx("div",{className:"rounded-full bg-amber-100 p-3 dark:bg-amber-900",children:e.jsx(Be,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(l,{children:[e.jsx(c,{className:"pb-2",children:e.jsxs(o,{className:"text-sm font-medium text-muted-foreground flex items-center",children:[e.jsx(Ae,{className:"h-4 w-4 mr-2 text-green-500"}),a("Completed")]})}),e.jsxs(i,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xl font-bold text-green-600",children:((ee=s.appointments)==null?void 0:ee.completed)||0}),e.jsxs(S,{variant:"outline",className:"bg-green-100 text-green-800 border-green-200",children:[((se=s.appointments)==null?void 0:se.total)>0?Math.round(s.appointments.completed/s.appointments.total*100):0,"%"]})]}),e.jsx(T,{className:"mt-2",value:((te=s.appointments)==null?void 0:te.total)>0?s.appointments.completed/s.appointments.total*100:0})]})]}),e.jsxs(l,{children:[e.jsx(c,{className:"pb-2",children:e.jsxs(o,{className:"text-sm font-medium text-muted-foreground flex items-center",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2 text-amber-500"}),a("Pending")]})}),e.jsxs(i,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xl font-bold text-amber-600",children:((ae=s.appointments)==null?void 0:ae.pending)||0}),e.jsxs(S,{variant:"outline",className:"bg-amber-100 text-amber-800 border-amber-200",children:[((re=s.appointments)==null?void 0:re.total)>0?Math.round(s.appointments.pending/s.appointments.total*100):0,"%"]})]}),e.jsx(T,{className:"mt-2",value:((le=s.appointments)==null?void 0:le.total)>0?s.appointments.pending/s.appointments.total*100:0})]})]}),e.jsxs(l,{children:[e.jsx(c,{className:"pb-2",children:e.jsxs(o,{className:"text-sm font-medium text-muted-foreground flex items-center",children:[e.jsx(Le,{className:"h-4 w-4 mr-2 text-red-500"}),a("Cancelled")]})}),e.jsxs(i,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xl font-bold text-red-600",children:((ie=s.appointments)==null?void 0:ie.cancelled)||0}),e.jsxs(S,{variant:"outline",className:"bg-red-100 text-red-800 border-red-200",children:[((ne=s.appointments)==null?void 0:ne.total)>0?Math.round(s.appointments.cancelled/s.appointments.total*100):0,"%"]})]}),e.jsx(T,{className:"mt-2",value:((de=s.appointments)==null?void 0:de.total)>0?s.appointments.cancelled/s.appointments.total*100:0})]})]})]}),e.jsxs(we,{defaultValue:"traffic",children:[e.jsxs(De,{className:"mb-4 w-full justify-start overflow-x-auto",children:[e.jsx(j,{value:"traffic",children:a("Traffic")}),e.jsx(j,{value:"devices",children:a("Devices")}),e.jsx(j,{value:"platforms",children:a("Platforms")}),e.jsx(j,{value:"browsers",children:a("Browsers")}),e.jsx(j,{value:"referrers",children:a("Referrers")}),e.jsx(j,{value:"appointments",children:a("Appointments")})]}),e.jsx(u,{value:"traffic",children:e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:a("Daily Page Views")}),e.jsx(m,{className:"text-xs",children:a("Page views over the selected time period")})]}),e.jsx(i,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(me,{data:s.dailyPageViews||[],margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(g,{strokeDasharray:"3 3"}),e.jsx(v,{dataKey:"date",tickFormatter:R}),e.jsx(b,{}),e.jsx(p,{}),e.jsx(h,{}),e.jsx(xe,{type:"monotone",dataKey:"views",name:"Page Views",stroke:"#3b82f6",activeDot:{r:8}})]})})})})]})}),e.jsx(u,{value:"devices",children:e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:a("Device Types")}),e.jsx(m,{className:"text-xs",children:a("Breakdown of visitors by device type")})]}),e.jsx(i,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(B,{children:[e.jsx(A,{data:V,cx:"50%",cy:"50%",labelLine:!1,outerRadius:100,fill:"#8884d8",dataKey:"value",label:({name:t,percent:r})=>"".concat(t,": ").concat((r*100).toFixed(0),"%"),children:V.map((t,r)=>e.jsx(f,{fill:d[r%d.length]},"cell-".concat(r)))}),e.jsx(p,{}),e.jsx(h,{})]})})})})]})}),e.jsx(u,{value:"platforms",children:e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:a("Operating Systems")}),e.jsx(m,{className:"text-xs",children:a("Breakdown of visitors by operating system")})]}),e.jsx(i,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(B,{children:[e.jsx(A,{data:E,cx:"50%",cy:"50%",labelLine:!1,outerRadius:100,fill:"#8884d8",dataKey:"value",label:({name:t,percent:r})=>"".concat(t,": ").concat((r*100).toFixed(0),"%"),children:E.map((t,r)=>e.jsx(f,{fill:d[r%d.length]},"cell-".concat(r)))}),e.jsx(p,{}),e.jsx(h,{})]})})})})]})}),e.jsx(u,{value:"browsers",children:e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:a("Web Browsers")}),e.jsx(m,{className:"text-xs",children:a("Breakdown of visitors by web browser")})]}),e.jsx(i,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(L,{data:M,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(g,{strokeDasharray:"3 3"}),e.jsx(v,{dataKey:"name"}),e.jsx(b,{}),e.jsx(p,{}),e.jsx(h,{}),e.jsx(P,{dataKey:"value",name:"Visits",fill:"#8884d8",children:M.map((t,r)=>e.jsx(f,{fill:d[r%d.length]},"cell-".concat(r)))})]})})})})]})}),e.jsx(u,{value:"referrers",children:e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:a("Top Referrers")}),e.jsx(m,{className:"text-xs",children:a("Sources of traffic to your business card")})]}),e.jsx(i,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(L,{data:_,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(g,{strokeDasharray:"3 3"}),e.jsx(v,{dataKey:"name"}),e.jsx(b,{}),e.jsx(p,{}),e.jsx(h,{}),e.jsx(P,{dataKey:"value",name:"Visits",fill:"#8884d8",children:_.map((t,r)=>e.jsx(f,{fill:d[r%d.length]},"cell-".concat(r)))})]})})})})]})}),e.jsx(u,{value:"appointments",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:a("Appointment Status Distribution")}),e.jsx(m,{className:"text-xs",children:a("Breakdown of appointments by status")})]}),e.jsx(i,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(B,{children:[e.jsx(A,{data:O,cx:"50%",cy:"50%",labelLine:!1,outerRadius:100,fill:"#8884d8",dataKey:"value",label:({name:t,percent:r})=>"".concat(t,": ").concat((r*100).toFixed(0),"%"),children:O.map((t,r)=>e.jsx(f,{fill:he[t.name.toLowerCase()]||d[r%d.length]},"cell-".concat(t.name)))}),e.jsx(p,{}),e.jsx(h,{})]})})})})]}),e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:a("Daily Appointments")}),e.jsx(m,{className:"text-xs",children:a("Number of appointments per day")})]}),e.jsx(i,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(me,{data:je,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(g,{strokeDasharray:"3 3"}),e.jsx(v,{dataKey:"date",tickFormatter:R}),e.jsx(b,{}),e.jsx(p,{}),e.jsx(h,{}),e.jsx(xe,{type:"monotone",dataKey:"appointments",name:"Appointments",stroke:"#3b82f6",activeDot:{r:8}})]})})})})]}),e.jsxs(l,{className:"lg:col-span-2",children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-sm",children:a("Popular Appointment Times")}),e.jsx(m,{className:"text-xs",children:a("Most frequently booked time slots")})]}),e.jsx(i,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(x,{width:"100%",height:"100%",children:e.jsxs(L,{data:U,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(g,{strokeDasharray:"3 3"}),e.jsx(v,{dataKey:"name"}),e.jsx(b,{}),e.jsx(p,{}),e.jsx(h,{}),e.jsx(P,{dataKey:"value",name:"Bookings",fill:"#3b82f6",children:U.map((t,r)=>e.jsx(f,{fill:d[r%d.length]},"cell-".concat(r)))})]})})})})]})]})})]})]})})}export{Cs as default};

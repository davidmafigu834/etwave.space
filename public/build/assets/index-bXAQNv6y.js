import{r as m,j as e}from"./ui-XtzbmeJx.js";import{P as J}from"./page-template-CFccWGHX.js";import{u as R,D as ee,a as se,b as ae,c as re,B as v,X as te,U as le,t as p,S as h,K as ie,P as oe,C as ne,d as ce,e as de,f as me,g as pe,h as he,i as T}from"./app-BNDAg-x0.js";import{S as xe}from"./search-and-filter-bar-Cv6CmNrA.js";import{P as ue}from"./pagination-C4qAnUGE.js";import{D as ge,a as fe,b as je,c as M}from"./language-switcher-Sj0uA1nn.js";import{F as be,P as ve}from"./power-CF_RXo38.js";import{L as we}from"./loader-circle-CSHwA98f.js";import{C as ye}from"./CrudDeleteModal-77wRveK6.js";import{P as U}from"./package-DifSoftz.js";import{E as Ne}from"./ellipsis-vertical-Bu3GgfAn.js";import{S as Se}from"./settings-CPdYUYGM.js";import{T as ke}from"./trash-2-DrQu6wJh.js";import{E as Ce}from"./eye-3VLs8-F7.js";import"./vendor-CxtKjBZA.js";import"./app-layout-CJ9aiUxz.js";import"./app-sidebar-layout-AHuSYAra.js";import"./textarea-BAxIzAY1.js";import"./select-CWuHpsTP.js";import"./index-C0g6bluz.js";import"./chevron-up-DUlTmMPd.js";import"./react-country-flag.esm-B3QM5-4S.js";import"./language-DYlIyiUn.js";import"./sparkles-DpD6ndVc.js";import"./copy-DrIsvEfV.js";import"./chevron-right-Bd-0PcYb.js";import"./chart-column-c4hbpdne.js";import"./globe-Wz67MOVh.js";import"./briefcase-BSRomG9M.js";import"./credit-card-DWMi5WDy.js";import"./dollar-sign-Cilvu6Pq.js";import"./mail-Dom0Io57.js";import"./users-dhNqMrnE.js";import"./message-square-BWj-TB69.js";import"./calendar-Calahg4u.js";import"./wallet-BDuAFGuJ.js";import"./shopping-bag-CblcqTrH.js";import"./building-2-DMMUyCqJ.js";import"./user-D1kIaiAN.js";import"./arrow-left-oLpbgumw.js";import"./use-favicon-B5hfZCZO.js";import"./cookie-consent-B_ejjwgp.js";import"./utils-CCVAIzGD.js";import"./date-picker-CeZOSIUN.js";import"./filter-Ced7YBYg.js";import"./list-DoCOV4SJ.js";function Pe({open:a,onOpenChange:n}){const{t:l}=R(),[r,N]=m.useState(!1),[j,b]=m.useState(null),[x,y]=m.useState(!1),c=m.useRef(null),S=o=>{o.preventDefault(),N(!0)},u=o=>{o.preventDefault(),N(!1)},k=o=>{o.preventDefault(),N(!1);const f=Array.from(o.dataTransfer.files).find(w=>w.name.endsWith(".zip"));f?b(f):p.error(l("Please select a valid ZIP file"))},D=o=>{var f;const g=(f=o.target.files)==null?void 0:f[0];g&&g.name.endsWith(".zip")?b(g):p.error(l("Please select a valid ZIP file"))},C=async()=>{if(!j)return;y(!0);const o=new FormData;o.append("addon_file",j),h.post(route("addons.upload"),o,{onSuccess:()=>{n(!1),b(null)},onError:g=>{g.addon_file?p.error(g.addon_file):p.error(l("Failed to upload addon"))},onFinish:()=>{y(!1)}})},P=()=>{x||(b(null),n(!1))};return e.jsx(ee,{open:a,onOpenChange:P,children:e.jsxs(se,{className:"sm:max-w-md",children:[e.jsx(ae,{children:e.jsx(re,{children:l("Upload Addon")})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors ".concat(r?"border-primary bg-primary/5":"border-gray-300 dark:border-gray-600"),onDragOver:S,onDragLeave:u,onDrop:k,children:j?e.jsxs("div",{className:"space-y-2",children:[e.jsx(be,{className:"h-12 w-12 mx-auto text-primary"}),e.jsx("p",{className:"font-medium",children:j.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(j.size/1024/1024).toFixed(2)," MB"]}),e.jsxs(v,{variant:"ghost",size:"sm",onClick:()=>b(null),disabled:x,children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),l("Remove")]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(le,{className:"h-12 w-12 mx-auto text-gray-400"}),e.jsx("p",{className:"text-lg font-medium",children:l("Drop your ZIP file here")}),e.jsx("p",{className:"text-sm text-gray-500",children:l("or click to browse")}),e.jsx(v,{variant:"outline",onClick:()=>{var o;return(o=c.current)==null?void 0:o.click()},disabled:x,children:l("Select File")})]})}),e.jsx("input",{ref:c,type:"file",accept:".zip",onChange:D,className:"hidden"}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(v,{variant:"outline",onClick:P,disabled:x,children:l("Cancel")}),e.jsxs(v,{onClick:C,disabled:!j||x,children:[x&&e.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),l("Upload")]})]})]})]})})}function vs(){var L;const{t:a}=R(),{flash:n,addons:l,filters:r}=ie().props,j=new URLSearchParams(window.location.search).get("per_page"),b=[18,36,72,144],x=b[0];let y=(r==null?void 0:r.per_page)||parseInt(j||"0")||x;b.includes(y)||(y=x);const[c,S]=m.useState((r==null?void 0:r.search)||""),[u,k]=m.useState({category:(r==null?void 0:r.category)||"all",status:(r==null?void 0:r.status)||"all"}),[D,C]=m.useState(!1),[P,o]=m.useState(!1),[g,f]=m.useState(!1),[w,_]=m.useState(null),B=[{label:a("Upload Addon"),icon:e.jsx(oe,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:()=>o(!0)}];m.useEffect(()=>{n!=null&&n.success&&p.success(n.success),n!=null&&n.error&&p.error(n.error)},[n]),m.useEffect(()=>{r!=null&&r.per_page||new URLSearchParams(window.location.search).has("per_page")||h.get(route("addons.index"),{per_page:18},{preserveState:!0,replace:!0})},[]);const F=()=>Object.entries(u).some(([s,t])=>t&&t!=="all")||c!=="",$=()=>Object.entries(u).filter(([s,t])=>t&&t!=="all").length+(c?1:0),W=s=>{s.preventDefault(),H()},H=()=>{const s={page:1};c&&(s.search=c),Object.entries(u).forEach(([t,i])=>{i&&i!=="all"&&(s[t]=i)}),s.per_page=(r==null?void 0:r.per_page)||18,h.get(route("addons.index"),s,{preserveState:!0,preserveScroll:!0})},z=(s,t)=>{k(A=>({...A,[s]:t}));const i={page:1};c&&(i.search=c);const d={...u,[s]:t};Object.entries(d).forEach(([A,E])=>{E&&E!=="all"&&(i[A]=E)}),r!=null&&r.per_page&&(i.per_page=r.per_page),h.get(route("addons.index"),i,{preserveState:!0,preserveScroll:!0})},I=()=>{k({category:"all",status:"all"}),S(""),C(!1),h.get(route("addons.index"),{page:1,per_page:(r==null?void 0:r.per_page)||18},{preserveState:!0,preserveScroll:!0})},V=s=>{if(!s.is_purchased){p.error(a("You must purchase this addon first"));return}h.post(route("addons.toggle-status",s.id),{},{onFinish:t=>{var i,d;(i=t.props.flash)!=null&&i.success&&(p.success(t.props.flash.success),window.location.reload()),(d=t.props.flash)!=null&&d.error&&p.error(t.props.flash.error)}})},Z=s=>{const t=s.name.toLowerCase().replace(/\s+/g,"-");h.get(route("".concat(t,".marketplace.settings")))},K=s=>{_(s),f(!0)},Q=s=>{window.open(s==null?void 0:s.url,"_blank")},X=async()=>{w&&h.delete(route("addons.remove",w.id),{onSuccess:()=>{f(!1),_(null),p.dismiss()},onError:s=>{p.dismiss(),p.error("Failed to delete: ".concat(Object.values(s).join(", ")))}})},Y=s=>s.is_purchased?s.is_enabled?e.jsx(T,{variant:"default",className:"bg-green-600 hover:bg-green-700 text-xs",children:a("Enabled")}):e.jsx(T,{variant:"secondary",className:"bg-gray-500 text-xs",children:a("Disabled")}):e.jsx(T,{variant:"outline",className:"text-blue-600 border-blue-600 bg-blue-50 dark:bg-blue-900/20 text-xs",children:a("Available")}),O=s=>{var t;if(s.is_purchased&&s.package_name){const i=((t=window.appSettings)==null?void 0:t.baseUrl)||window.location.origin;return"".concat(i,"/packages/workdo/").concat(s.package_name,"/favicon.png")}if(!s.is_purchased&&s.image)return s.image;switch(s.category.toLowerCase()){case"analytics":return"ðŸ“Š";case"social":return"ðŸ“±";case"e-commerce":return"ðŸ›’";case"marketing":return"ðŸ“§";case"seo":return"ðŸ”";case"localization":return"ðŸŒ";default:return"ðŸ“¦"}},q=[{title:a("Dashboard"),href:route("dashboard")},{title:a("Addons")}],G=[{name:"category",label:a("Category"),type:"select",options:[{value:"all",label:a("All Categories")},{value:"analytics",label:a("Analytics")},{value:"social",label:a("Social")},{value:"e-commerce",label:a("E-commerce")},{value:"marketing",label:a("Marketing")},{value:"seo",label:a("SEO")},{value:"localization",label:a("Localization")}],value:u.category||"all",onChange:s=>z("category",s)},{name:"status",label:a("Status"),type:"select",options:[{value:"all",label:a("All Status")},{value:"purchased",label:a("Purchased")},{value:"available",label:a("Available")},{value:"enabled",label:a("Enabled")},{value:"disabled",label:a("Disabled")}],value:u.status||"all",onChange:s=>z("status",s)}];return e.jsxs(J,{title:a("Addons"),url:"/addons",actions:B,breadcrumbs:q,noPadding:!0,children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-primary via-primary/90 to-primary/80 rounded-xl p-6 mb-4 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 800 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"700",cy:"50",r:"60",fill:"white",fillOpacity:"0.1"}),e.jsx("circle",{cx:"720",cy:"80",r:"30",fill:"white",fillOpacity:"0.05"}),e.jsx("rect",{x:"650",y:"120",width:"40",height:"40",rx:"8",fill:"white",fillOpacity:"0.08",transform:"rotate(15 670 140)"}),e.jsx("rect",{x:"680",y:"30",width:"25",height:"25",rx:"5",fill:"white",fillOpacity:"0.1",transform:"rotate(-20 692.5 42.5)"}),e.jsxs("g",{transform:"translate(600, 60)",fill:"white",fillOpacity:"0.15",children:[e.jsx("rect",{x:"0",y:"0",width:"20",height:"20",rx:"4"}),e.jsx("circle",{cx:"30",cy:"10",r:"8"}),e.jsx("polygon",{points:"50,0 60,10 50,20 40,10"}),e.jsx("rect",{x:"70",y:"5",width:"15",height:"10",rx:"2"})]}),e.jsx("path",{d:"M550 100 Q600 80 650 100 T750 100",stroke:"white",strokeOpacity:"0.1",strokeWidth:"2",fill:"none"}),e.jsx("circle",{cx:"580",cy:"140",r:"3",fill:"white",fillOpacity:"0.2"}),e.jsx("circle",{cx:"620",cy:"160",r:"2",fill:"white",fillOpacity:"0.15"}),e.jsx("circle",{cx:"660",cy:"170",r:"4",fill:"white",fillOpacity:"0.1"})]})}),e.jsxs("div",{className:"relative flex items-center justify-between z-10",children:[e.jsxs("div",{className:"text-white",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(U,{className:"h-6 w-6"})}),e.jsx("h3",{className:"text-2xl font-bold",children:a("Premium Addons")})]}),e.jsx("p",{className:"text-white/90 mb-3",children:a("Supercharge your platform with powerful extensions")}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"}),e.jsxs("span",{className:"text-sm",children:[a("Available"),": ",e.jsx("span",{className:"font-semibold",children:l.total||0})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-300 rounded-full"}),e.jsxs("span",{className:"text-sm",children:[a("Installed"),": ",e.jsx("span",{className:"font-semibold",children:((L=l.data)==null?void 0:L.filter(s=>s.is_purchased).length)||0})]})]})]})]}),e.jsxs(v,{className:"bg-white text-primary hover:bg-gray-100 font-semibold px-8 py-3 text-lg shadow-lg",onClick:()=>window.open("https://workdo.io/product-category/vcard-saas-add-ons","_blank"),children:[e.jsx(U,{className:"h-5 w-5 mr-2"}),a("Explore Addons")]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow mb-4",children:e.jsx("div",{className:"p-4",children:e.jsx(xe,{searchTerm:c,onSearchChange:s=>S(s),onSearch:W,filters:G,showFilters:D,setShowFilters:C,hasActiveFilters:F,activeFilterCount:$,onResetFilters:I,currentPerPage:y.toString(),onPerPageChange:s=>{const t={page:1,per_page:parseInt(s)};c&&(t.search=c),Object.entries(u).forEach(([i,d])=>{d&&d!=="all"&&(t[i]=d)}),h.get(route("addons.index"),t,{preserveState:!0,preserveScroll:!0})},perPageOptions:[18,36,72,144]})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow overflow-hidden",children:[l.data.length>0?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 sm:gap-4 md:gap-6",children:l.data.map((s,t)=>e.jsxs(ne,{className:"group relative overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[e.jsx("div",{className:"absolute top-3 left-3 z-10",children:Y(s)}),l.data.length>0&&s.is_purchased&&e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsxs(ge,{children:[e.jsx(fe,{asChild:!0,children:e.jsx(v,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(Ne,{className:"h-4 w-4 text-gray-500"})})}),e.jsxs(je,{align:"end",className:"w-40",children:[e.jsxs(M,{onClick:()=>V(s),children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),s.is_enabled?a("Disable"):a("Enable")]}),s.is_enabled&&e.jsxs(M,{onClick:()=>Z(s),children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),a("Marketplace")]}),e.jsxs(M,{className:"text-red-600 hover:text-red-700",onClick:()=>K(s),children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),a("Remove")]})]})]})}),e.jsx(ce,{className:"pb-2 pt-4 sm:pb-3 sm:pt-6",children:e.jsxs("div",{className:"flex flex-col items-center space-y-2 sm:space-y-3",children:[e.jsx("div",{className:"w-12 h-12 sm:w-12 sm:h-12 flex items-center justify-center text-3xl sm:text-4xl overflow-hidden mb-1",children:O(s).startsWith("http")?e.jsx("img",{src:O(s),alt:s.name,className:"w-full h-full object-contain",onError:i=>{i.currentTarget.style.display="none";const d=i.currentTarget.parentElement;d&&(d.innerHTML="<span>ðŸ“¦</span>")}}):e.jsx("span",{children:O(s)})}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx(de,{className:"text-xs sm:text-sm font-bold line-clamp-2 text-gray-900 dark:text-white",children:s.name}),e.jsxs(me,{className:"text-xs text-gray-500 dark:text-gray-400 font-medium hidden sm:block",children:["v",s.version," â€¢ ",s.category]})]})]})}),e.jsx(pe,{className:"px-2 pb-2 sm:px-4",children:e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 line-clamp-2 sm:line-clamp-3 text-center leading-relaxed",children:s.description})}),e.jsx(he,{className:"px-2 pb-3 pt-2 sm:px-4 sm:pb-4",children:e.jsxs(v,{variant:"outline",size:"sm",className:"w-full text-xs h-7 sm:h-8 border-gray-200 hover:border-primary hover:bg-primary/10 hover:text-primary",onClick:()=>Q(s),children:[e.jsx(Ce,{className:"h-3 w-3 sm:mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:a("Preview")})]})})]},"addon-".concat(s.id,"-").concat(t)))})}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(U,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:a("No addons found")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:F()?a("Try adjusting your search or filters to find what you're looking for."):a("There are no addons available at the moment.")}),F()&&e.jsx(v,{variant:"outline",onClick:I,className:"mt-4",children:a("Clear filters")})]}),l.data.length>0&&e.jsx(ue,{from:l.from||0,to:l.to||0,total:l.total,links:l.links,entityName:"addons",onPageChange:s=>h.get(s,{},{preserveState:!0,preserveScroll:!0}),className:"border-t dark:border-gray-700"})]}),e.jsx(Pe,{open:P,onOpenChange:o}),e.jsx(ye,{isOpen:g,onClose:()=>{f(!1),_(null)},onConfirm:X,itemName:(w==null?void 0:w.name)||"",entityName:"addon"})]})}export{vs as default};

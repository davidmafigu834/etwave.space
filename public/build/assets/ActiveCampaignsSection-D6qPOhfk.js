import{j as r}from"./ui-XtzbmeJx.js";import{u as B,C as E,g as $,B as u}from"./app-CHRIhyY0.js";import{M}from"./map-pin-DafcC9zB.js";import{C as S}from"./calendar-CuyjcLRJ.js";import{C as T}from"./clock-krPbraWS.js";import{E as U}from"./external-link-DvDG2v64.js";import"./vendor-CxtKjBZA.js";import"./utils-CCVAIzGD.js";function G({campaigns:o,settings:z,sectionData:e,brandColor:d}){var x;if(!o||o.length===0)return null;const{t}=B();e!=null&&e.layout;const g=(e==null?void 0:e.columns)||3,m=(e==null?void 0:e.max_display)||6,h=(e==null?void 0:e.show_view_all)||!1,p=(e==null?void 0:e.background_color)||"#f8fafc",n=e!=null&&e.background_image?e.background_image.startsWith("http")?e.background_image:"".concat(((x=window.appSettings)==null?void 0:x.imageUrl)||"/storage").concat(e.background_image):null,y=(e==null?void 0:e.overlay)||!1,f=(e==null?void 0:e.overlay_color)||"rgba(0,0,0,0.5)",j=o.slice(0,m),v=o.length>m,c=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),w=s=>{const l=new Date(s),i=new Date,C=l.getTime()-i.getTime(),a=Math.ceil(C/(1e3*60*60*24));return a>0?a:0},b=s=>s.custom_domain?"https://".concat(s.custom_domain):s.url_prefix&&s.url_prefix!==""?route("public.vcard.show",{prefix:s.url_prefix,slug:s.slug},!0):route("public.vcard.show.direct",s.slug,!0),N=(e==null?void 0:e.title)||"Featured Business Promotions",k=(e==null?void 0:e.subtitle)||"Explore businesses we're currently promoting and discover amazing services",_=()=>{switch(g){case 1:return"grid-cols-1";case 2:return"grid-cols-1 md:grid-cols-2";case 3:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-3";case 4:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4";default:return"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"}};return r.jsxs("section",{className:"py-16 relative",style:{backgroundColor:p},children:[n&&r.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url(".concat(n,")")},children:y&&r.jsx("div",{className:"absolute inset-0",style:{backgroundColor:f}})}),r.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",style:{color:d},children:N}),r.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:k})]}),r.jsx("div",{className:"grid ".concat(_()," gap-6"),children:j.map(s=>{const l=w(s.end_date),i=b(s.business);return r.jsx(E,{className:"group hover:shadow-lg transition-shadow duration-300",children:r.jsxs($,{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xl font-semibold mb-2 group-hover:text-primary transition-colors",children:s.name}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:s.description})]}),l>0&&r.jsxs("div",{className:"px-2 py-1 rounded-full text-xs font-medium text-white",style:{backgroundColor:d},children:[l," ",t("days left")]})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[r.jsx(M,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"font-medium",children:s.business.name})]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[r.jsx(S,{className:"h-4 w-4 mr-2"}),r.jsxs("span",{children:[c(s.start_date)," - ",c(s.end_date)]})]}),l>0&&r.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[r.jsx(T,{className:"h-4 w-4 mr-2"}),r.jsxs("span",{children:[t("Ends in")," ",l," ",t("day",{count:l})]})]})]}),r.jsxs(u,{className:"w-full group-hover:shadow-md transition-shadow",style:{backgroundColor:d},onClick:()=>window.open(i,"_blank","noopener,noreferrer"),children:[r.jsx("span",{children:t("Visit Business")}),r.jsx(U,{className:"h-4 w-4 ml-2"})]})]})},s.id)})}),h&&v&&r.jsx("div",{className:"text-center mt-8",children:r.jsx(u,{variant:"outline",size:"lg",className:"hover:shadow-md transition-shadow",style:{borderColor:d,color:d},children:t("View All Campaigns")})})]})]})}export{G as default};

import{r as l,j as t}from"./ui-XtzbmeJx.js";import{P as L}from"./page-template-l6fMhetb.js";import{u as w,K as E,t as c,B as j,k as R,S as T,C as O,I as v}from"./app-CHRIhyY0.js";import{S as P}from"./scroll-area-RBjlp-Q2.js";import{R as k}from"./react-country-flag.esm-B3QM5-4S.js";import"./vendor-CxtKjBZA.js";import"./app-layout-Bpd3XWn2.js";import"./app-sidebar-layout-DTBrRaJF.js";import"./textarea-aJ3buVnx.js";import"./select-DVebJzi_.js";import"./index-C0g6bluz.js";import"./chevron-up-CWYfEUVP.js";import"./language-DYlIyiUn.js";import"./sparkles-CWM6veXP.js";import"./loader-circle-CU4vh_jx.js";import"./copy-_TD738Qf.js";import"./chevron-right-4OzdI5Hc.js";import"./language-switcher-DlUYSL3d.js";import"./globe-DnSDzBxp.js";import"./chart-column-C3hnsquQ.js";import"./briefcase-DFRvW6SB.js";import"./package-CVcIKtJX.js";import"./credit-card-D2Mnc2f1.js";import"./dollar-sign-CEEAnrcL.js";import"./mail-uU9WM_iR.js";import"./users-DVhUqNZg.js";import"./settings-D1jKjqmC.js";import"./message-square-CzRq4BMj.js";import"./calendar-CuyjcLRJ.js";import"./wallet-B8MIIno5.js";import"./shopping-bag-DIpJi4I3.js";import"./user-UtdwWo_w.js";import"./arrow-left-hltsWyVL.js";import"./use-favicon-DDTtBI2L.js";import"./cookie-consent-KmXGJKj8.js";import"./utils-CCVAIzGD.js";function ge(){var x;const{t:a}=w(),{languages:f,defaultLang:i,defaultData:m}=E().props,[o,S]=l.useState(i),[g,n]=l.useState(m),[b,d]=l.useState(!1),[h,u]=l.useState(!1),[p,N]=l.useState("");l.useEffect(()=>{S(i)},[i]),l.useEffect(()=>{if(o===i&&Object.keys(m).length>0){n(m);return}d(!0),fetch("".concat(route("language.load"),"?lang=").concat(o)).then(e=>e.json()).then(e=>{e.data?n(e.data):n({}),d(!1)}).catch(()=>{n({}),d(!1),c.error(a("Failed to load language file"))})},[o,i,m,a]);const C=(e,r)=>{n(s=>({...s,[e]:r}))},y=e=>{var r;return e&&e.preventDefault(),u(!0),fetch(route("language.save"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||"",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({_method:"PATCH",lang:o,data:g})}).then(s=>s.json()).then(s=>{s.success?c.success(s.success||a("Language updated successfully")):s.error?c.error(s.error):c.success(a("Language updated successfully")),u(!1)}).catch(s=>{console.error("Save error:",s),c.error(a("Failed to update language file")),u(!1)}),!1};return t.jsx(L,{title:a("Manage Language"),url:"/manage-language",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[t.jsx("div",{className:"md:w-64 flex-shrink-0",children:t.jsx("div",{className:"sticky top-20",children:t.jsx(P,{className:"h-[calc(100vh-5rem)]",children:t.jsx("div",{className:"pr-4 space-y-1",children:f.map(e=>t.jsxs(j,{variant:"ghost",className:R("w-full justify-start",{"bg-muted font-medium":o===e.code}),onClick:()=>{o!==e.code&&T.get(route("manage-language",{lang:e.code}))},children:[e.countryCode&&t.jsx(k,{countryCode:e.countryCode,svg:!0,style:{width:"1.2em",height:"1.2em"}}),e.name]},e.code))})})})}),t.jsx("div",{className:"flex-1",children:t.jsxs(O,{className:"p-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4 gap-2",children:[t.jsxs("h2",{className:"text-lg font-semibold",children:[a("Edit Labels for")," ",(x=f.find(e=>e.code===o))==null?void 0:x.name]}),t.jsx(v,{placeholder:a("Search labels..."),value:p,onChange:e=>N(e.target.value),className:"w-full md:w-72"})]}),b?t.jsx("div",{children:a("Loading...")}):t.jsx("form",{onSubmit:e=>(e.preventDefault(),y(e),!1),children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(g).filter(([e,r])=>e.toLowerCase().includes(p.toLowerCase())||r.toLowerCase().includes(p.toLowerCase())).map(([e,r])=>t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-xs text-muted-foreground truncate mb-1",children:e}),t.jsx(v,{className:"w-full",value:r,onChange:s=>C(e,s.target.value)})]},e))}),t.jsx("div",{className:"pt-6 text-right",children:t.jsx(j,{type:"submit",disabled:h,children:h?t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"animate-spin h-4 w-4 border-2 border-t-transparent border-primary rounded-full"}),a("Saving...")]}):a("Save Changes")})})]})})]})})]})})}export{ge as default};

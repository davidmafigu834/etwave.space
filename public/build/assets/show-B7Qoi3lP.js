import{r as l,j as e}from"./ui-XtzbmeJx.js";import{k,L as N,u as I,K as U,t as L,n as V,C as v,d as g,e as y,B as R,w as F,S as z,g as C,I as T,i as w}from"./app-BNDAg-x0.js";import{P as $}from"./page-template-CFccWGHX.js";import{T as A,a as O,b as P,c as D}from"./tabs-CPDxz_-I.js";import{R as K}from"./rich-text-editor-4s_qiCGO.js";import"./vendor-CxtKjBZA.js";import"./utils-CCVAIzGD.js";import"./app-layout-CJ9aiUxz.js";import"./app-sidebar-layout-AHuSYAra.js";import"./textarea-BAxIzAY1.js";import"./select-CWuHpsTP.js";import"./index-C0g6bluz.js";import"./chevron-up-DUlTmMPd.js";import"./react-country-flag.esm-B3QM5-4S.js";import"./language-DYlIyiUn.js";import"./sparkles-DpD6ndVc.js";import"./loader-circle-CSHwA98f.js";import"./copy-DrIsvEfV.js";import"./chevron-right-Bd-0PcYb.js";import"./language-switcher-Sj0uA1nn.js";import"./globe-Wz67MOVh.js";import"./chart-column-c4hbpdne.js";import"./briefcase-BSRomG9M.js";import"./package-DifSoftz.js";import"./credit-card-DWMi5WDy.js";import"./dollar-sign-Cilvu6Pq.js";import"./mail-Dom0Io57.js";import"./users-dhNqMrnE.js";import"./settings-CPdYUYGM.js";import"./message-square-BWj-TB69.js";import"./calendar-Calahg4u.js";import"./wallet-BDuAFGuJ.js";import"./shopping-bag-CblcqTrH.js";import"./building-2-DMMUyCqJ.js";import"./user-D1kIaiAN.js";import"./arrow-left-oLpbgumw.js";import"./use-favicon-B5hfZCZO.js";import"./cookie-consent-B_ejjwgp.js";import"./unlink-DZ_PtX8b.js";import"./list-DoCOV4SJ.js";import"./quote-x2bY6ZX9.js";import"./code-O43MSYvJ.js";const _=l.forwardRef(({label:a,name:m,value:x="",onChange:t,placeholder:i,className:u,error:d,required:h,disabled:j=!1},p)=>{const o=l.useRef(null);return l.useImperativeHandle(p,()=>({getContent:()=>{var c;return((c=o.current)==null?void 0:c.getContent())||""},setContent:c=>{var f;return(f=o.current)==null?void 0:f.setContent(c)},focus:()=>{var c;return(c=o.current)==null?void 0:c.focus()}})),e.jsxs("div",{className:k("space-y-2",u),children:[a&&e.jsxs(N,{htmlFor:m,className:"text-sm font-medium",children:[a,h&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsx(K,{ref:o,content:x,onChange:t,placeholder:i,editable:!j,className:k(d&&"border-destructive",j&&"opacity-50 cursor-not-allowed")}),d&&e.jsx("p",{className:"text-sm text-destructive",children:d})]})});_.displayName="RichTextField";function _e({template:a,languages:m,variables:x}){var E,S;const{t}=I(),{flash:i}=U().props,[u,d]=l.useState(a.from),[h,j]=l.useState(((E=m[0])==null?void 0:E.code)||"en"),[p,o]=l.useState(a.email_template_langs.reduce((s,r)=>(s[r.lang]={subject:r.subject,content:r.content},s),{})),c=(s,r)=>{o(n=>({...n,[s]:{...n[s],subject:r}}))},f=(s,r)=>{o(n=>({...n,[s]:{...n[s],content:r}}))};l.useEffect(()=>{i!=null&&i.success&&L.success(i.success),i!=null&&i.error&&L.error(i.error)},[i]);const B=[{title:t("Dashboard"),href:route("dashboard")},{title:t("Email Templates"),href:route("email-templates.index")},{title:a.name}],H=[];return e.jsxs($,{title:a.name,url:route("email-templates.show",a.id),breadcrumbs:B,actions:H,children:[e.jsx(V,{title:"Edit Template - ".concat(a.name)}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(v,{children:[e.jsx(g,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{children:t("Template Settings")}),e.jsxs(R,{onClick:()=>{z.put(route("email-templates.update-settings",a.id),{from:u})},size:"sm",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),t("Save Changes")]})]})}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{children:t("Template Name")}),e.jsx(T,{value:a.name,disabled:!0,className:"bg-muted"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("Template name cannot be changed")})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{htmlFor:"from",children:t("From Name")}),e.jsx(T,{id:"from",value:u,onChange:s=>d(s.target.value),placeholder:t("Enter from name (e.g., {app_name}, Support Team)"),className:"focus:ring-2 focus:ring-primary"})]})]})]}),e.jsxs(v,{children:[e.jsx(g,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(y,{children:t("Email Content")}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t("Customize email content for different languages")})]}),e.jsxs(R,{onClick:()=>{const s=p[h];s&&z.put(route("email-templates.update-content",a.id),{lang:h,subject:s.subject,content:s.content})},size:"sm",className:"shrink-0",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),t("Save Content")]})]})}),e.jsx(C,{children:e.jsxs(A,{defaultValue:(S=m[0])==null?void 0:S.code,onValueChange:j,className:"w-full",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx(O,{className:"inline-flex h-auto p-1 w-max",children:m.map(s=>e.jsx(P,{value:s.code,className:"text-xs px-3 py-2 whitespace-nowrap data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:s.code.toUpperCase()},s.code))})})}),m.map(s=>{var r,n;return e.jsxs(D,{value:s.code,className:"space-y-6 mt-6",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[e.jsx(w,{variant:"default",className:"px-3 py-1",children:s.code.toUpperCase()}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t("Edit email content for this language")})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-3",children:[e.jsx(N,{htmlFor:"subject-".concat(s.code),className:"text-sm font-medium",children:t("Email Subject")}),e.jsx(T,{id:"subject-".concat(s.code),value:((r=p[s.code])==null?void 0:r.subject)||"",onChange:b=>c(s.code,b.target.value),placeholder:t("Enter email subject (you can use variables like {app_name})"),className:"focus:ring-2 focus:ring-primary"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{label:"Email Content",value:((n=p[s.code])==null?void 0:n.content)||"",onChange:b=>f(s.code,b),placeholder:t("Write your email content here. You can use HTML formatting and variables..."),className:"min-h-[300px]"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ðŸ’¡ ",t("Tip: Use the variables from the sidebar to personalize your emails")]})]})]})]},s.code)})]})})]})]}),e.jsx("div",{children:e.jsxs(v,{children:[e.jsxs(g,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx("span",{children:t("Available Variables")}),e.jsx(w,{variant:"secondary",className:"text-xs",children:Object.keys(x).length})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t("Click to copy variables to use in your email content")})]}),e.jsxs(C,{children:[e.jsx("div",{className:"space-y-3",children:Object.entries(x).map(([s,r])=>e.jsxs("div",{className:"group p-3 bg-muted/50 rounded-lg border hover:bg-muted/80 cursor-pointer transition-colors",onClick:()=>{navigator.clipboard.writeText(s)},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("code",{className:"text-sm font-mono text-primary font-medium bg-background px-1.5 py-0.5 rounded",children:s}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(w,{variant:"outline",className:"text-xs",children:t("Click to copy")})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 leading-relaxed",children:r})]},s))}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-700",children:["ðŸ’¡ ",e.jsxs("strong",{children:[t("Tip"),":"]})," ",t("These variables will be automatically replaced with actual values when emails are sent.")]})})]})]})})]})]})}export{_e as default};

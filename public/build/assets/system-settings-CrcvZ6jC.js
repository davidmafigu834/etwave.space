import{r as T,j as e}from"./ui-XtzbmeJx.js";import{u as D,K as w,q as k,L as c,I as z,B as O,w as M,S as Y,t as j}from"./app-BNDAg-x0.js";import{S as m,a as g,b as u,c as h,d as i}from"./select-CWuHpsTP.js";import{S as f}from"./switch-BcnxnoGE.js";import{l as P}from"./language-DYlIyiUn.js";import{R as V}from"./react-country-flag.esm-B3QM5-4S.js";import"./vendor-CxtKjBZA.js";import"./utils-CCVAIzGD.js";import"./index-C0g6bluz.js";import"./chevron-up-DUlTmMPd.js";function Q({settings:p={},timezones:b={},dateFormats:v={},timeFormats:y={}}){const{t}=D(),{pageProps:L,auth:S={}}=w().props,l={defaultLanguage:"en",dateFormat:"MM/DD/YYYY",timeFormat:"12h",calendarStartDay:"sunday",defaultTimezone:"UTC",emailVerification:!1,landingPageEnabled:!0,registrationEnabled:!0,termsConditionsUrl:""},n=Object.keys(p).length>0?p:L.settings||{},[s,E]=T.useState(()=>({defaultLanguage:n.defaultLanguage||l.defaultLanguage,dateFormat:n.dateFormat||l.dateFormat,timeFormat:n.timeFormat||l.timeFormat,calendarStartDay:n.calendarStartDay||l.calendarStartDay,defaultTimezone:n.defaultTimezone||l.defaultTimezone,emailVerification:n.emailVerification==="true"||n.emailVerification===!0||l.emailVerification,landingPageEnabled:n.landingPageEnabled==="true"||n.landingPageEnabled===!0||n.landingPageEnabled==="1"||(n.landingPageEnabled===void 0?l.landingPageEnabled:!1),registrationEnabled:n.registrationEnabled==="true"||n.registrationEnabled===!0||n.registrationEnabled==="1"||(n.registrationEnabled===void 0?l.registrationEnabled:!1),termsConditionsUrl:n.termsConditionsUrl||l.termsConditionsUrl}));T.useEffect(()=>{if(Object.keys(n).length>0){const a=Object.keys(l).reduce((r,d)=>(r[d]=n[d]||l[d],r),{});E(r=>({...r,...a,emailVerification:a.emailVerification==="true"||a.emailVerification===!0||a.emailVerification==="1",landingPageEnabled:a.landingPageEnabled==="true"||a.landingPageEnabled===!0||a.landingPageEnabled==="1"||(a.landingPageEnabled===void 0?l.landingPageEnabled:!1),registrationEnabled:a.registrationEnabled==="true"||a.registrationEnabled===!0||a.registrationEnabled==="1"||(a.registrationEnabled===void 0?l.registrationEnabled:!1),termsConditionsUrl:a.termsConditionsUrl||l.termsConditionsUrl}))}},[n]);const o=(a,r)=>{E(d=>({...d,[a]:r}))},U=a=>{a.preventDefault();const r={defaultLanguage:s.defaultLanguage,dateFormat:s.dateFormat,timeFormat:s.timeFormat,calendarStartDay:s.calendarStartDay,defaultTimezone:s.defaultTimezone,emailVerification:!!s.emailVerification,landingPageEnabled:!!s.landingPageEnabled,registrationEnabled:!!s.registrationEnabled,termsConditionsUrl:s.termsConditionsUrl};Y.post(route("settings.system.update"),r,{preserveScroll:!0,onSuccess:d=>{var F,N;const x=(F=d.props.flash)==null?void 0:F.success,C=(N=d.props.flash)==null?void 0:N.error;x?j.success(x):C&&j.error(C)},onError:d=>{const x=d.error||Object.values(d).join(", ")||t("Failed to update system settings");j.error(x)}})};return e.jsx(k,{title:t("System Settings"),description:t("Configure system-wide settings for your application"),action:e.jsxs(O,{type:"submit",form:"system-settings-form",size:"sm",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),t("Save Changes")]}),children:e.jsx("form",{id:"system-settings-form",onSubmit:U,className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"defaultLanguage",children:t("Default Language")}),e.jsxs(m,{value:s.defaultLanguage,onValueChange:a=>o("defaultLanguage",a),children:[e.jsx(g,{children:e.jsx(u,{placeholder:t("Select language"),children:s.defaultLanguage&&(()=>{const a=P.find(r=>r.code===s.defaultLanguage);return a?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{countryCode:a.countryCode,svg:!0,style:{width:"1.2em",height:"1.2em"}})," ",e.jsx("span",{children:a.name})," "]}):t("Select language")})()})}),e.jsx(h,{children:P.map(a=>e.jsx(i,{value:a.code,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{countryCode:a.countryCode,svg:!0,style:{width:"1.2em",height:"1.2em"}})," ",e.jsx("span",{children:a.name})]})},a.code))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"dateFormat",children:t("Date Format")}),e.jsxs(m,{value:s.dateFormat,onValueChange:a=>o("dateFormat",a),children:[e.jsx(g,{children:e.jsx(u,{placeholder:t("Select date format")})}),e.jsx(h,{children:Object.keys(v).length>0?Object.entries(v).map(([a,r])=>e.jsx(i,{value:a,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:a}),e.jsxs("span",{className:"text-muted-foreground text-sm ml-4",children:["(",r,")"]})]})},a)):e.jsxs(e.Fragment,{children:[e.jsx(i,{value:"M j, Y",children:"Jan 1, 2025"}),e.jsx(i,{value:"d-m-Y",children:"01-01-2025"}),e.jsx(i,{value:"Y-m-d",children:"2025-01-01"}),e.jsx(i,{value:"F j, Y",children:"January 1, 2025"})]})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"timeFormat",children:t("Time Format")}),e.jsxs(m,{value:s.timeFormat,onValueChange:a=>o("timeFormat",a),children:[e.jsx(g,{children:e.jsx(u,{placeholder:t("Select time format")})}),e.jsx(h,{children:Object.keys(y).length>0?Object.entries(y).map(([a,r])=>e.jsx(i,{value:a,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:a}),e.jsxs("span",{className:"text-muted-foreground text-sm ml-4",children:["(",r,")"]})]})},a)):e.jsxs(e.Fragment,{children:[e.jsx(i,{value:"g:i A",children:"1:30 PM"}),e.jsx(i,{value:"H:i",children:"13:30"}),e.jsx(i,{value:"g:i a",children:"1:30 pm"})]})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"calendarStartDay",children:t("Calendar Start Day")}),e.jsxs(m,{value:s.calendarStartDay,onValueChange:a=>o("calendarStartDay",a),children:[e.jsx(g,{children:e.jsx(u,{placeholder:t("Select start day")})}),e.jsxs(h,{children:[e.jsx(i,{value:"sunday",children:t("Sunday")}),e.jsx(i,{value:"monday",children:t("Monday")})]})]})]}),e.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[e.jsx(c,{htmlFor:"defaultTimezone",children:t("Default Timezone")}),e.jsxs(m,{value:s.defaultTimezone,onValueChange:a=>o("defaultTimezone",a),children:[e.jsx(g,{children:e.jsx(u,{placeholder:t("Select timezone")})}),e.jsx(h,{children:Object.keys(b).length>0?Object.entries(b).map(([a,r])=>e.jsx(i,{value:a,children:r},a)):e.jsxs(e.Fragment,{children:[e.jsx(i,{value:"UTC",children:t("UTC")}),e.jsx(i,{value:"America/New_York",children:t("Eastern Time (ET)")}),e.jsx(i,{value:"America/Chicago",children:t("Central Time (CT)")}),e.jsx(i,{value:"Europe/London",children:t("London (GMT)")})]})})]})]}),S.user&&S.user.type==="superadmin"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-2 md:col-span-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{htmlFor:"emailVerification",children:t("Email Verification")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("Require users to verify their email addresses")})]}),e.jsx(f,{id:"emailVerification",checked:s.emailVerification,onCheckedChange:a=>o("emailVerification",a)})]})}),e.jsx("div",{className:"grid gap-2 md:col-span-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{htmlFor:"landingPageEnabled",children:t("Landing Page")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("Enable or disable the public landing page")})]}),e.jsx(f,{id:"landingPageEnabled",checked:s.landingPageEnabled,onCheckedChange:a=>o("landingPageEnabled",a)})]})}),e.jsx("div",{className:"grid gap-2 md:col-span-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{htmlFor:"registrationEnabled",children:t("User Registration")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("Allow new users to register accounts")})]}),e.jsx(f,{id:"registrationEnabled",checked:s.registrationEnabled,onCheckedChange:a=>o("registrationEnabled",a)})]})}),e.jsxs("div",{className:"grid gap-2 md:col-span-2",children:[e.jsx(c,{htmlFor:"termsConditionsUrl",children:t("Terms and Conditions URL")}),e.jsx(z,{id:"termsConditionsUrl",type:"url",value:s.termsConditionsUrl,onChange:a=>o("termsConditionsUrl",a.target.value),placeholder:"https://example.com/terms"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("URL for Terms and Conditions page used in registration form")})]})]})]})})})}export{Q as default};

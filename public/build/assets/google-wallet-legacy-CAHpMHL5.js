!function(){function e(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",s=a.toStringTag||"@@toStringTag";function o(t,a,l,s){var o=a&&a.prototype instanceof c?a:c,u=Object.create(o.prototype);return r(u,"_invoke",function(t,r,a){var l,s,o,c=0,u=a||[],d=!1,g={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return l=t,s=0,o=e,g.n=r,i}};function f(t,r){for(s=t,o=r,n=0;!d&&c&&!a&&n<u.length;n++){var a,l=u[n],f=g.p,y=l[2];t>3?(a=y===r)&&(o=l[(s=l[4])?5:(s=3,3)],l[4]=l[5]=e):l[0]<=f&&((a=t<2&&f<l[1])?(s=0,g.v=r,g.n=l[1]):f<y&&(a=t<3||l[0]>r||r>y)&&(l[4]=t,l[5]=r,g.n=y,s=0))}if(a||t>1)return i;throw d=!0,r}return function(a,u,y){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,y),s=u,o=y;(n=s<2?e:o)||!d;){l||(s?s<3?(s>1&&(g.n=-1),f(s,o)):g.n=o:g.v=o);try{if(c=2,l){if(s||(a="next"),n=l[a]){if(!(n=n.call(l,o)))throw TypeError("iterator result is not an object");if(!n.done)return n;o=n.value,s<2&&(s=0)}else 1===s&&(n=l.return)&&n.call(l),s<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),s=1);l=e}else if((n=(d=g.n<0)?o:t.call(r,g))!==i)break}catch(n){l=e,s=1,o=n}finally{c=1}}return{value:n,done:d}}}(t,l,s),!0),u}var i={};function c(){}function u(){}function d(){}n=Object.getPrototypeOf;var g=[][l]?n(n([][l]())):(r(n={},l,function(){return this}),n),f=d.prototype=c.prototype=Object.create(g);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,r(e,s,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=d,r(f,"constructor",d),r(d,"constructor",u),u.displayName="GeneratorFunction",r(d,s,"GeneratorFunction"),r(f),r(f,s,"Generator"),r(f,l,function(){return this}),r(f,"toString",function(){return"[object Generator]"}),(t=function(){return{w:o,m:y}})()}function r(e,t,n,a){var l=Object.defineProperty;try{l({},"",{})}catch(e){l=0}r=function(e,t,n,a){function s(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?l?l(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(s("next",0),s("throw",1),s("return",2))},r(e,t,n,a)}function n(e,t,r,n,a,l,s){try{var o=e[l](s),i=o.value}catch(e){return void r(e)}o.done?t(i):Promise.resolve(i).then(n,a)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,s,o=[],i=!0,c=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=l.call(r)).done)&&(o.push(n.value),o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{if(!i&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw a}}return o}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./ui-legacy-Df76W54t.js","./page-template-legacy-et8O2PIf.js","./app-legacy-Ct73uABr.js","./pagination-legacy-C5GfrDQP.js","./search-and-filter-bar-legacy-CmRxlo_P.js","./settings-legacy-BXGYMxCJ.js","./wallet-legacy-DOeLcv8c.js","./vendor-legacy-DNs0y6R6.js","./app-layout-legacy-BbvocKkk.js","./app-sidebar-layout-legacy-DjGq5XwB.js","./textarea-legacy-DhpF_zd4.js","./select-legacy-DJ7KqnGK.js","./index-legacy-BrP_l-Mm.js","./chevron-up-legacy-C3cU62dz.js","./react-country-flag.esm-legacy-C8Qm_EdK.js","./language-legacy-CPKUrWoi.js","./sparkles-legacy-DXvM6dmp.js","./loader-circle-legacy-BAWBSNTr.js","./copy-legacy-CyY0zsNU.js","./chevron-right-legacy-D5fLjpJA.js","./language-switcher-legacy-BfnK_KLk.js","./globe-legacy-D167FJxM.js","./chart-column-legacy-xaxxIszB.js","./briefcase-legacy-fFmYMQCB.js","./package-legacy-BXVFs7qu.js","./credit-card-legacy-oVK_vO6r.js","./dollar-sign-legacy-De4_eAPE.js","./mail-legacy-DchUy0NJ.js","./users-legacy-CIHfY2gt.js","./message-square-legacy-CVHCr5Dt.js","./calendar-legacy-DdDaxKxU.js","./shopping-bag-legacy-BRpvr-V3.js","./building-2-legacy-Dj3cFBKu.js","./user-legacy-cMI1gv9J.js","./arrow-left-legacy-CqQR3bfj.js","./use-favicon-legacy-CbpIBPd5.js","./cookie-consent-legacy-BD_speLP.js","./utils-legacy-4AQaPo1J.js","./date-picker-legacy-Cpc8-hXR.js","./filter-legacy-BAhWbv77.js","./list-legacy-D-kIW24o.js"],function(r,l){"use strict";var s,o,i,c,u,d,g,f,y,p,m,h,j,v;return{setters:[function(e){s=e.r,o=e.j},function(e){i=e.P},function(e){c=e.u,u=e.K,d=e.B,g=e.S,f=e.C,y=e.P,p=e.t},function(e){m=e.P},function(e){h=e.S},function(e){j=e.S},function(e){v=e.W},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){r("default",function(){var r,l=c().t,x=u().props,b=(x.auth,x.businesses),w=x.businessTypes,S=x.hasGoogleWalletSettings,N=x.filters,k=void 0===N?{}:N,_=a(s.useState(new Set),2),C=_[0],A=_[1],T=a(s.useState(k.search||""),2),P=T[0],G=T[1],O=a(s.useState(k.business_type||"all"),2),F=O[0],W=O[1],B=a(s.useState(!1),2),E=B[0],I=B[1],D=function(){return"all"!==F||""!==P},R=function(){var e={page:1};P&&(e.search=P),"all"!==F&&(e.business_type=F),k.per_page&&(e.per_page=k.per_page),g.get(route("google-wallet.index"),e,{preserveState:!0,preserveScroll:!0})},U=function(){W("all"),G(""),I(!1),g.get(route("google-wallet.index"),{page:1,per_page:k.per_page},{preserveState:!0,preserveScroll:!0})},q=function(){var e,r=(e=t().m(function e(r){var n,a,s;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return A(function(e){return new Set(e).add(r)}),e.p=1,e.n=2,fetch(route("google-wallet.add",r),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(null===(n=document.querySelector('meta[name="csrf-token"]'))||void 0===n?void 0:n.getAttribute("content"))||""}});case 2:return a=e.v,e.n=3,a.json();case 3:s=e.v,a.ok?(window.open(s.addUrl,"_blank"),p.success(l("Redirecting to Google Wallet..."))):p.error(s.message||l("Failed to generate wallet pass")),e.n=5;break;case 4:e.p=4,e.v,p.error(l("An error occurred while generating wallet pass"));case 5:return e.p=5,A(function(e){var t=new Set(e);return t.delete(r),t}),e.f(5);case 6:return e.a(2)}},e,null,[[1,4,5,6]])}),function(){var t=this,r=arguments;return new Promise(function(a,l){var s=e.apply(t,r);function o(e){n(s,a,l,o,i,"next",e)}function i(e){n(s,a,l,o,i,"throw",e)}o(void 0)})});return function(e){return r.apply(this,arguments)}}(),K=[{title:l("Dashboard"),href:route("dashboard")},{title:l("Google Wallet")}];return o.jsx(i,{title:l("Google Wallet"),url:"/google-wallet",breadcrumbs:K,noPadding:!0,children:S?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-4",children:o.jsx(h,{searchTerm:P,onSearchChange:G,onSearch:function(e){e.preventDefault(),R()},filters:[{name:"business_type",label:l("Business Type"),type:"select",value:F,onChange:function(e){W(e);var t={page:1};P&&(t.search=P),"all"!==e&&(t.business_type=e),k.per_page&&(t.per_page=k.per_page),g.get(route("google-wallet.index"),t,{preserveState:!0,preserveScroll:!0})},options:[{value:"all",label:l("All Types")}].concat(e((w||[]).map(function(e){return{value:e,label:e}})))}],showFilters:E,setShowFilters:I,hasActiveFilters:D,activeFilterCount:function(){return("all"!==F?1:0)+(P?1:0)},onResetFilters:U,onApplyFilters:R,currentPerPage:(null===(r=k.per_page)||void 0===r?void 0:r.toString())||"10",onPerPageChange:function(e){var t={page:1,per_page:parseInt(e)};P&&(t.search=P),"all"!==F&&(t.business_type=F),g.get(route("google-wallet.index"),t,{preserveState:!0,preserveScroll:!0})}})}),o.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(v,{className:"h-6 w-6 text-primary"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:l("Your Businesses")})]}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:l("Add your business cards to Google Wallet for easy sharing and access.")}),b&&b.data&&b.data.length>0?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:b.data.map(function(e){var t;return o.jsxs(f,{className:"p-6",children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:e.name}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.business_type||l("Business Card")})]})}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:[l("Created"),":"]}),o.jsx("span",{children:null!==(t=window.appSettings)&&void 0!==t&&t.formatDateTime?window.appSettings.formatDateTime(e.created_at,!1):new Date(e.created_at).toLocaleDateString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:[l("Views"),":"]}),o.jsx("span",{children:e.view_count||0})]})]}),o.jsxs(d,{onClick:function(){return q(e.id)},disabled:C.has(e.id),className:"w-full",variant:"default",children:[o.jsx(y,{className:"h-4 w-4 mr-2"}),C.has(e.id)?l("Adding..."):l("Add to Wallet")]})]})]},e.id)})}),o.jsx(m,{from:(null==b?void 0:b.from)||0,to:(null==b?void 0:b.to)||0,total:(null==b?void 0:b.total)||0,links:null==b?void 0:b.links,entityName:l("businesses"),onPageChange:function(e){return g.get(e)}})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(v,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:l("No Businesses Found")}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:D()?l("No businesses match your current filters."):l("Create your first business card to add it to Google Wallet.")}),D()?o.jsx(d,{onClick:U,variant:"outline",className:"inline-flex items-center",children:l("Clear Filters")}):o.jsxs(d,{onClick:function(){return g.get(route("vcard-builder.create"))},className:"inline-flex items-center",children:[o.jsx(y,{className:"h-4 w-4 mr-2"}),l("Create Business Card")]})]})]})]}):o.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow p-6",children:o.jsxs("div",{className:"text-center py-8",children:[o.jsx(j,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:l("Google Wallet Not Configured")}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:l("Google Wallet settings need to be configured before you can add businesses to wallet.")}),o.jsxs(d,{onClick:function(){return g.get(route("settings"))},className:"inline-flex items-center",children:[o.jsx(j,{className:"h-4 w-4 mr-2"}),l("Go to Settings")]})]})})})})}}})}();

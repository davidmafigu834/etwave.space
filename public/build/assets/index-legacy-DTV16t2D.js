!function(){function e(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function t(t){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?e(Object(a),!0).forEach(function(e){s(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function s(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var n,a,r,i,l=[],c=!0,o=!1;try{if(r=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;c=!1}else for(;!(c=(n=r.call(s)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){o=!0,a=e}finally{try{if(!c&&null!=s.return&&(i=s.return(),Object(i)!==i))return}finally{if(o)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var s={}.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}System.register(["./ui-legacy-Df76W54t.js","./page-template-legacy-vdr7rymY.js","./app-legacy--_EH1FA6.js","./pagination-legacy-CHfywoD0.js","./search-and-filter-bar-legacy-LX7-33hV.js","./language-switcher-legacy-DyZl0IOB.js","./use-initials-legacy-BTOayKFs.js","./CrudFormModal-legacy-RjcQFiOT.js","./CrudDeleteModal-legacy-B7dcXYhE.js","./radio-group-legacy-rI-dSaEl.js","./switch-legacy-DR4XdF-9.js","./credit-card-legacy-D9le2VX2.js","./circle-check-legacy-Db25cqmC.js","./arrow-up-right-legacy-0FJVws6_.js","./external-link-legacy-Oleok4lO.js","./lock-open-legacy-CsowjNh9.js","./lock-legacy-DM6U3Qmy.js","./square-pen-legacy-DdPVLCZY.js","./trash-2-legacy-BHziuAts.js","./eye-legacy-BrYeqeQa.js","./copy-legacy-B65eKCL5.js","./vendor-legacy-DNs0y6R6.js","./app-layout-legacy-Ddjw4cyv.js","./app-sidebar-layout-legacy-DNUIHr2c.js","./textarea-legacy-C9BYI3_s.js","./select-legacy-CnS4pGYt.js","./index-legacy-BrP_l-Mm.js","./chevron-up-legacy-COSjq7BD.js","./react-country-flag.esm-legacy-C8Qm_EdK.js","./language-legacy-CPKUrWoi.js","./sparkles-legacy-CpybO37S.js","./loader-circle-legacy-BeSZcCZ2.js","./chevron-right-legacy-BajxNCtJ.js","./chart-column-legacy-pf9KtNzA.js","./globe-legacy-D5ETsV0D.js","./briefcase-legacy-qN8cP4rv.js","./package-legacy-BhxOSnhZ.js","./dollar-sign-legacy-Bra6CllU.js","./mail-legacy-BRLD7bu-.js","./users-legacy-CHx64N_f.js","./settings-legacy-C4yHeyf-.js","./message-square-legacy-tsOtqq3E.js","./calendar-legacy-iowv-fv-.js","./wallet-legacy-DkvJP23h.js","./shopping-bag-legacy-CZi31-ql.js","./user-legacy-NZm5tz0X.js","./arrow-left-legacy-DNBUkron.js","./use-favicon-legacy-CK09Bl0i.js","./cookie-consent-legacy-Dhln_i9Y.js","./utils-legacy-4AQaPo1J.js","./date-picker-legacy-BJne9_9X.js","./filter-legacy-e0LLGuF6.js","./list-legacy-BJRJqdGM.js","./checkbox-legacy-FDwD3jKv.js","./scroll-area-legacy-DTlOdBp7.js","./circle-legacy-CFKeO_55.js"],function(e,s){"use strict";var r,i,l,c,o,d,u,m,p,g,x,h,f,j,y,v,b,w,N,S,C,k,_,O,P,D,E,I,L,T,z,A,F,U,R,B,V,q,M,K,$,J,Q,W,Y,Z;return{setters:[function(e){r=e.r,i=e.j},function(e){l=e.P},function(e){c=e.u,o=e.D,d=e.a,u=e.b,m=e.c,p=e.A,g=e.i,x=e.E,h=e.B,f=e.K,j=e.P,y=e.S,v=e.x,b=e.y,w=e.z,N=e.r,S=e.C,C=e.F,k=e.t},function(e){_=e.P},function(e){O=e.S},function(e){P=e.D,D=e.a,E=e.b,I=e.c,L=e.d},function(e){T=e.u},function(e){z=e.C},function(e){A=e.C},function(e){F=e.R,U=e.a},function(e){R=e.S},function(e){B=e.C},function(e){V=e.C},function(e){q=e.A},function(e){M=e.E},function(e){K=e.K,$=e.L},function(e){J=e.L},function(e){Q=e.S},function(e){W=e.T},function(e){Y=e.E},function(e){Z=e.C},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){function s(e){var t=e.isOpen,s=e.onClose,n=e.onConfirm,l=e.plans,f=e.currentPlanId,j=e.companyName,y=c().t,v=a(r.useState(null),2),b=v[0],w=v[1],N=a(r.useState(!1),2),S=N[0],C=N[1],k=l.filter(function(e){var t=e.duration.toLowerCase();return S?"yearly"===t:"monthly"===t});r.useEffect(function(){if(t&&k&&k.length>0){var e=k.find(function(e){return!0===e.is_current});if(e)w(e.id);else if(f){var s=k.find(function(e){return e.id===f});w(s?f:k[0].id)}else w(k[0].id)}},[t,l,S]),r.useEffect(function(){k.length>0&&b&&(k.find(function(e){return e.id===b})||w(k[0].id))},[S]);return i.jsx(o,{open:t,onOpenChange:s,children:i.jsxs(d,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(u,{children:[i.jsxs(m,{children:[y("Upgrade Plan for")," ",j]}),i.jsx(p,{children:y("Select a new plan for this company")})]}),i.jsxs("div",{className:"py-4",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[i.jsx("span",{className:"text-sm font-medium ".concat(S?"text-gray-500":"text-primary"),children:y("Monthly")}),i.jsx(R,{checked:S,onCheckedChange:C,className:"data-[state=checked]:bg-primary"}),i.jsx("span",{className:"text-sm font-medium ".concat(S?"text-primary":"text-gray-500"),children:y("Yearly")})]}),i.jsx(F,{value:(null==b?void 0:b.toString())||"",onValueChange:function(e){return w(parseInt(e))},className:"space-y-4",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-96 overflow-y-auto",children:k.length>0?k.map(function(e){var t;return i.jsxs("div",{className:"relative rounded-lg border p-4 cursor-pointer transition-all ".concat(b===e.id?"border-primary bg-primary/5 shadow-md":"border-gray-200 hover:border-gray-300"," ").concat(e.is_current?"bg-blue-50":""),onClick:function(){return w(e.id)},children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(U,{value:e.id.toString(),id:"plan-".concat(e.id),className:"h-5 w-5"}),i.jsx("h3",{className:"text-lg font-semibold",children:e.name})]}),e.is_current&&i.jsx(g,{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-200",children:y("Current")})]}),i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx(B,{className:"mr-1.5 h-4 w-4 text-muted-foreground"}),i.jsx("p",{className:"text-xl font-bold text-primary",children:(null===(t=window.appSettings)||void 0===t?void 0:t.formatCurrency(e.price))||"$".concat(e.price)}),i.jsxs("span",{className:"text-sm text-muted-foreground ml-1",children:["/ ",e.duration.toLowerCase()]})]}),e.description&&i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:e.description}),(e.business||e.max_users||e.storage_limit)&&i.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3 p-2 bg-gray-50 rounded",children:[e.business&&i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-bold text-gray-900",children:e.business}),i.jsx("div",{className:"text-xs text-gray-500",children:y("Businesses")})]}),e.max_users&&i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-bold text-gray-900",children:e.max_users}),i.jsx("div",{className:"text-xs text-gray-500",children:y("Users")})]}),e.storage_limit&&i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-bold text-gray-900",children:e.storage_limit}),i.jsx("div",{className:"text-xs text-gray-500",children:y("Storage")})]})]}),e.features&&e.features.length>0&&i.jsxs("div",{className:"space-y-1",children:[e.features.slice(0,4).map(function(t,s){return i.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[i.jsx(V,{className:"mr-1 h-3 w-3 text-green-500 flex-shrink-0"}),i.jsx("span",{className:"truncate",children:t})]},"".concat(e.id,"-").concat(s))}),e.features.length>4&&i.jsxs("div",{className:"text-xs text-gray-400",children:["+",e.features.length-4," more features"]})]})]},e.id)}):i.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:i.jsxs("p",{children:[y("No plans available for")," ",y(S?"yearly":"monthly")," ",y("billing")]})})})})]}),i.jsxs(x,{children:[i.jsx(h,{variant:"outline",onClick:s,children:y("Cancel")}),i.jsx(h,{onClick:function(){b&&n(b,S?"yearly":"monthly")},disabled:!b||0===k.length,children:y("Upgrade Plan")})]})]})})}e("default",function(){var e,p,g,x=c().t,F=f().props,U=F.auth,R=F.companies,V=(F.plans,F.filters),H=void 0===V?{}:V;null==U||U.permissions;var X=T(),G=a(r.useState(H.view||"list"),2),ee=G[0],te=G[1],se=a(r.useState(H.search||""),2),ne=se[0],ae=se[1],re=a(r.useState(H.start_date?new Date(H.start_date):void 0),2),ie=re[0],le=re[1],ce=a(r.useState(H.end_date?new Date(H.end_date):void 0),2),oe=ce[0],de=ce[1],ue=a(r.useState(H.status||"all"),2),me=ue[0],pe=ue[1],ge=a(r.useState(!1),2),xe=ge[0],he=ge[1],fe=a(r.useState(!1),2),je=fe[0],ye=fe[1],ve=a(r.useState(!1),2),be=ve[0],we=ve[1],Ne=a(r.useState(!1),2),Se=Ne[0],Ce=Ne[1],ke=a(r.useState(!1),2),_e=ke[0],Oe=ke[1],Pe=a(r.useState(!1),2),De=Pe[0],Ee=Pe[1],Ie=a(r.useState(null),2),Le=Ie[0],Te=Ie[1],ze=a(r.useState([]),2),Ae=ze[0],Fe=ze[1],Ue=a(r.useState([]),2),Re=Ue[0],Be=Ue[1],Ve=a(r.useState(null),2),qe=Ve[0],Me=Ve[1],Ke=a(r.useState("create"),2),$e=Ke[0],Je=Ke[1],Qe=function(){var e={page:1,view:ee};ne&&(e.search=ne),"all"!==me&&(e.status=me),ie&&(e.start_date=ie.toISOString().split("T")[0]),oe&&(e.end_date=oe.toISOString().split("T")[0]),H.per_page&&(e.per_page=H.per_page),y.get(route("companies.index"),e,{preserveState:!0,preserveScroll:!0})},We=function(e,t){switch(Te(t),e){case"login-as":y.get(route("impersonate.start",t.id));break;case"company-info":Je("view"),ye(!0);break;case"upgrade-plan":Ze(t);break;case"business-link":He(t);break;case"reset-password":Ce(!0);break;case"toggle-status":Ye(t);break;case"edit":Je("edit"),ye(!0);break;case"delete":we(!0)}},Ye=function(e){k.loading(x("Updating status...")),y.put(route("companies.toggle-status",e.id),{},{onSuccess:function(){k.dismiss(),k.success(x("Status updated successfully"))},onError:function(e){k.dismiss(),k.error("Failed to update status: ".concat(Object.values(e).join(", ")))}})},Ze=function(e){Te(e),k.loading(x("Loading plans...")),fetch(route("companies.plans",e.id)).then(function(e){return e.json()}).then(function(e){Fe(e.plans||[]),Oe(!0),k.dismiss()}).catch(function(e){k.dismiss(),k.error(x("Failed to load plans"))})},He=function(e){Te(e),k.loading(x("Loading business links...")),fetch(route("companies.business-links",e.id)).then(function(e){return e.json()}).then(function(e){Be(e.businesses||[]),Ee(!0),k.dismiss()}).catch(function(e){k.dismiss(),k.error(x("Failed to load business links"))})},Xe=[{label:x("Add Company"),icon:i.jsx(j,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:function(){return Te(null),Je("create"),void ye(!0)}}],Ge=[{title:x("Dashboard"),href:route("dashboard")},{title:x("Companies")}],et=[{key:"name",label:x("Name"),sortable:!0,render:function(e,t){return i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary text-white",children:X(t.name)}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:t.name}),i.jsx("div",{className:"text-sm text-muted-foreground",children:t.email})]})]})}},{key:"plan_name",label:x("Plan"),render:function(e){return i.jsx("span",{className:"capitalize",children:e})}},{key:"created_at",label:x("Created At"),sortable:!0,render:function(e){var t;return null!==(t=window.appSettings)&&void 0!==t&&t.formatDateTime?window.appSettings.formatDateTime(e,!1):new Date(e).toLocaleDateString()}}];return i.jsxs(l,{title:x("Companies Management"),url:"/companies",actions:Xe,breadcrumbs:Ge,noPadding:!0,children:[i.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow mb-4 p-4",children:i.jsx(O,{searchTerm:ne,onSearchChange:ae,onSearch:function(e){e.preventDefault(),Qe()},filters:[{name:"status",label:x("Status"),type:"select",value:me,onChange:function(e){pe(e);var t={page:1,view:ee};ne&&(t.search=ne),"all"!==e&&(t.status=e),ie&&(t.start_date=ie.toISOString().split("T")[0]),oe&&(t.end_date=oe.toISOString().split("T")[0]),H.per_page&&(t.per_page=H.per_page),y.get(route("companies.index"),t,{preserveState:!0,preserveScroll:!0})},options:[{value:"all",label:x("All Status")},{value:"active",label:x("Active")},{value:"inactive",label:x("Inactive")}]},{name:"start_date",label:x("Start Date"),type:"date",value:ie,onChange:function(e){return le(e)}},{name:"end_date",label:x("End Date"),type:"date",value:oe,onChange:function(e){return de(e)}}],showFilters:xe,setShowFilters:he,hasActiveFilters:function(){return"all"!==me||""!==ne||void 0!==ie||void 0!==oe},activeFilterCount:function(){return("all"!==me?1:0)+(ne?1:0)+(ie?1:0)+(oe?1:0)},onResetFilters:function(){pe("all"),ae(""),le(void 0),de(void 0),he(!1),y.get(route("companies.index"),{page:1,per_page:H.per_page,view:ee},{preserveState:!0,preserveScroll:!0})},onApplyFilters:Qe,currentPerPage:(null===(e=H.per_page)||void 0===e?void 0:e.toString())||"10",onPerPageChange:function(e){var t={page:1,per_page:parseInt(e),view:ee};ne&&(t.search=ne),"all"!==me&&(t.status=me),ie&&(t.start_date=ie.toISOString().split("T")[0]),oe&&(t.end_date=oe.toISOString().split("T")[0]),y.get(route("companies.index"),t,{preserveState:!0,preserveScroll:!0})},showViewToggle:!0,activeView:ee,onViewChange:function(e){te(e);var t={view:e};ne&&(t.search=ne),"all"!==me&&(t.status=me),ie&&(t.start_date=ie.toISOString().split("T")[0]),oe&&(t.end_date=oe.toISOString().split("T")[0]),H.per_page&&(t.per_page=H.per_page),H.page&&(t.page=H.page),y.get(route("companies.index"),t,{preserveState:!0,preserveScroll:!0})}})}),"list"===ee?i.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b bg-gray-50 dark:bg-gray-800 dark:border-gray-700",children:[et.map(function(e){return i.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500",onClick:function(){return e.sortable&&(t=e.key,s={sort_field:t,sort_direction:H.sort_field===t&&"asc"===H.sort_direction?"desc":"asc",page:1,view:ee},ne&&(s.search=ne),"all"!==me&&(s.status=me),ie&&(s.start_date=ie.toISOString().split("T")[0]),oe&&(s.end_date=oe.toISOString().split("T")[0]),H.per_page&&(s.per_page=H.per_page),void y.get(route("companies.index"),s,{preserveState:!0,preserveScroll:!0}));var t,s},children:i.jsxs("div",{className:"flex items-center",children:[e.label,e.sortable&&i.jsx("span",{className:"ml-1",children:H.sort_field===e.key?"asc"===H.sort_direction?"↑":"↓":""})]})},e.key)}),i.jsx("th",{className:"px-4 py-3 text-right font-medium text-gray-500",children:x("Actions")})]})}),i.jsxs("tbody",{children:[null==R||null===(p=R.data)||void 0===p?void 0:p.map(function(e){return i.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-900 dark:hover:bg-gray-800",children:[et.map(function(t){return i.jsx("td",{className:"px-4 py-3",children:t.render?t.render(e[t.key],e):e[t.key]},"".concat(e.id,"-").concat(t.key))}),i.jsx("td",{className:"px-4 py-3 text-right",children:i.jsxs("div",{className:"flex justify-end gap-1",children:[i.jsxs(v,{children:[i.jsx(b,{asChild:!0,children:i.jsx(h,{variant:"ghost",size:"icon",onClick:function(){return We("login-as",e)},className:"text-blue-500 hover:text-blue-700",children:i.jsx(q,{className:"h-4 w-4"})})}),i.jsx(w,{children:x("Login as Company")})]}),i.jsxs(v,{children:[i.jsx(b,{asChild:!0,children:i.jsx(h,{variant:"ghost",size:"icon",onClick:function(){return We("company-info",e)},className:"text-blue-500 hover:text-blue-700",children:i.jsx(N,{className:"h-4 w-4"})})}),i.jsx(w,{children:x("Company Info")})]}),i.jsxs(v,{children:[i.jsx(b,{asChild:!0,children:i.jsx(h,{variant:"ghost",size:"icon",onClick:function(){return We("upgrade-plan",e)},className:"text-amber-500 hover:text-amber-700",children:i.jsx(B,{className:"h-4 w-4"})})}),i.jsx(w,{children:x("Upgrade Plan")})]}),i.jsxs(v,{children:[i.jsx(b,{asChild:!0,children:i.jsx(h,{variant:"ghost",size:"icon",onClick:function(){return We("business-link",e)},className:"text-blue-500 hover:text-blue-700",children:i.jsx(M,{className:"h-4 w-4"})})}),i.jsx(w,{children:x("Business Link")})]}),i.jsxs(v,{children:[i.jsx(b,{asChild:!0,children:i.jsx(h,{variant:"ghost",size:"icon",onClick:function(){return We("reset-password",e)},className:"text-blue-500 hover:text-blue-700",children:i.jsx(K,{className:"h-4 w-4"})})}),i.jsx(w,{children:x("Reset Password")})]}),i.jsxs(v,{children:[i.jsx(b,{asChild:!0,children:i.jsx(h,{variant:"ghost",size:"icon",onClick:function(){return We("toggle-status",e)},className:"text-amber-500 hover:text-amber-700",children:"active"===e.status?i.jsx(J,{className:"h-4 w-4"}):i.jsx($,{className:"h-4 w-4"})})}),i.jsx(w,{children:"active"===e.status?x("Disable Login"):x("Enable Login")})]}),i.jsxs(v,{children:[i.jsx(b,{asChild:!0,children:i.jsx(h,{variant:"ghost",size:"icon",onClick:function(){return We("edit",e)},className:"text-amber-500 hover:text-amber-700",children:i.jsx(Q,{className:"h-4 w-4"})})}),i.jsx(w,{children:x("Edit")})]}),i.jsxs(v,{children:[i.jsx(b,{asChild:!0,children:i.jsx(h,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",onClick:function(){return We("delete",e)},children:i.jsx(W,{className:"h-4 w-4"})})}),i.jsx(w,{children:x("Delete")})]})]})})]},e.id)}),(!(null!=R&&R.data)||0===R.data.length)&&i.jsx("tr",{children:i.jsx("td",{colSpan:et.length+1,className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:x("No companies found")})})]})]})}),i.jsx(_,{from:(null==R?void 0:R.from)||0,to:(null==R?void 0:R.to)||0,total:(null==R?void 0:R.total)||0,links:null==R?void 0:R.links,entityName:x("companies"),onPageChange:function(e){if(e)try{var t={page:new URL(e,window.location.origin).searchParams.get("page"),view:ee};ne&&(t.search=ne),"all"!==me&&(t.status=me),ie&&(t.start_date=ie.toISOString().split("T")[0]),oe&&(t.end_date=oe.toISOString().split("T")[0]),H.per_page&&(t.per_page=H.per_page),y.get(route("companies.index"),t,{preserveState:!0})}catch(s){console.error("Error parsing pagination URL:",s)}}})]}):i.jsxs("div",{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[null==R||null===(g=R.data)||void 0===g?void 0:g.map(function(e){var t;return i.jsx(S,{className:"bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg shadow",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-gray-200 flex items-center justify-center text-lg font-bold text-gray-700",children:X(e.name)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:e.name}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:e.email}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"h-2 w-2 rounded-full mr-2 ".concat("active"===e.status?"bg-gray-800":"bg-gray-400")}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"active"===e.status?x("Active"):x("Inactive")})]})]})]}),i.jsxs(P,{children:[i.jsx(D,{asChild:!0,children:i.jsx(h,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-gray-400 hover:text-gray-600",children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"1"}),i.jsx("circle",{cx:"12",cy:"5",r:"1"}),i.jsx("circle",{cx:"12",cy:"19",r:"1"})]})})}),i.jsxs(E,{align:"end",className:"w-48 z-50",sideOffset:5,children:[i.jsxs(I,{onClick:function(){return We("login-as",e)},children:[i.jsx(q,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:x("Login as Company")})]}),i.jsxs(I,{onClick:function(){return We("company-info",e)},children:[i.jsx(N,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:x("Company Info")})]}),i.jsxs(I,{onClick:function(){return We("upgrade-plan",e)},children:[i.jsx(B,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:x("Upgrade Plan")})]}),i.jsxs(I,{onClick:function(){return We("business-link",e)},children:[i.jsx(M,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:x("Business Link")})]}),i.jsxs(I,{onClick:function(){return We("reset-password",e)},children:[i.jsx(K,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:x("Reset Password")})]}),i.jsxs(I,{onClick:function(){return We("toggle-status",e)},children:["active"===e.status?i.jsx(J,{className:"h-4 w-4 mr-2"}):i.jsx($,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:"active"===e.status?x("Disable Login"):x("Enable Login")})]}),i.jsx(L,{}),i.jsxs(I,{onClick:function(){return We("edit",e)},className:"text-amber-600",children:[i.jsx(Q,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:x("Edit")})]}),i.jsxs(I,{onClick:function(){return We("delete",e)},className:"text-rose-600",children:[i.jsx(W,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:x("Delete")})]})]})]})]}),i.jsxs("div",{className:"border border-gray-200 rounded-md p-3 mb-4",children:[i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx(B,{className:"h-4 w-4 text-gray-500 mr-2"}),i.jsx("span",{className:"text-sm font-semibold text-gray-800",children:e.plan_name})]}),e.plan_expiry_date&&i.jsxs("div",{className:"text-xs text-gray-500 text-center mt-1",children:[x("Expires"),": ",null!==(t=window.appSettings)&&void 0!==t&&t.formatDateTime?window.appSettings.formatDateTime(e.plan_expiry_date,!1):new Date(e.plan_expiry_date).toLocaleDateString()]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{className:"text-center p-4 border border-gray-200 rounded-md",children:[i.jsx("div",{className:"text-xl font-bold text-gray-900 mb-1",children:e.business_count||0}),i.jsx("div",{className:"text-xs text-gray-600",children:x("Businesses")})]}),i.jsxs("div",{className:"text-center p-4 border border-gray-200 rounded-md",children:[i.jsx("div",{className:"text-xl font-bold text-gray-900 mb-1",children:e.appointments_count||0}),i.jsx("div",{className:"text-xs text-gray-600",children:x("Appointments")})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(h,{variant:"outline",size:"sm",onClick:function(){return We("edit",e)},className:"flex-1 h-9 text-sm border-gray-300",children:[i.jsx(Q,{className:"h-4 w-4 mr-2"}),x("Edit")]}),i.jsxs(h,{variant:"outline",size:"sm",onClick:function(){return We("company-info",e)},className:"flex-1 h-9 text-sm border-gray-300",children:[i.jsx(Y,{className:"h-4 w-4 mr-2"}),x("View")]}),i.jsxs(h,{variant:"outline",size:"sm",onClick:function(){return We("delete",e)},className:"flex-1 h-9 text-sm text-gray-700 border-gray-300",children:[i.jsx(W,{className:"h-4 w-4 mr-2"}),x("Delete")]})]})]})},e.id)}),(!(null!=R&&R.data)||0===R.data.length)&&i.jsx("div",{className:"col-span-full p-8 text-center text-gray-500 dark:text-gray-400",children:x("No companies found")})]}),i.jsx("div",{className:"mt-6 bg-white dark:bg-gray-900 rounded-lg shadow overflow-hidden",children:i.jsx(_,{from:(null==R?void 0:R.from)||0,to:(null==R?void 0:R.to)||0,total:(null==R?void 0:R.total)||0,links:null==R?void 0:R.links,entityName:x("companies"),onPageChange:function(e){if(e)try{var t={page:new URL(e,window.location.origin).searchParams.get("page"),view:ee};ne&&(t.search=ne),"all"!==me&&(t.status=me),ie&&(t.start_date=ie.toISOString().split("T")[0]),oe&&(t.end_date=oe.toISOString().split("T")[0]),H.per_page&&(t.per_page=H.per_page),y.get(route("companies.index"),t,{preserveState:!0})}catch(s){console.error("Error parsing pagination URL:",s)}}})})]}),i.jsx(z,{isOpen:je,onClose:function(){return ye(!1)},onSubmit:function(e){var t;!1===e.login_enabled&&delete e.password,e.status=e.login_enabled?"active":"inactive",delete e.login_enabled,t=e,"create"===$e?(k.loading(x("Creating company...")),y.post(route("companies.store"),t,{onSuccess:function(){ye(!1),k.dismiss(),k.success(x("Company created successfully"))},onError:function(e){k.dismiss(),k.error("Failed to create company: ".concat(Object.values(e).join(", ")))}})):"edit"===$e&&(k.loading(x("Updating company...")),y.put(route("companies.update",Le.id),t,{onSuccess:function(){ye(!1),k.dismiss(),k.success(x("Company updated successfully"))},onError:function(e){k.dismiss(),k.error("Failed to update company: ".concat(Object.values(e).join(", ")))}}))},formConfig:{fields:[{name:"name",label:x("Company Name"),type:"text",required:!0},{name:"email",label:x("Email"),type:"email",required:!0},{name:"login_enabled",label:x("Enable Login"),placeholder:"",type:"switch",defaultValue:!0,conditional:function(e){return"create"===e}},{name:"password",label:x("Password"),type:"password",required:function(e){return"create"===e},conditional:function(e,t){return"create"===e&&!0===(null==t?void 0:t.login_enabled)}}],modalSize:"lg"},initialData:t(t({},Le),{},{login_enabled:"active"===(null==Le?void 0:Le.status)}),title:x("create"===$e?"Add New Company":"edit"===$e?"Edit Company":"View Company"),mode:$e}),i.jsx(A,{isOpen:be,onClose:function(){return we(!1)},onConfirm:function(){k.loading(x("Deleting company...")),y.delete(route("companies.destroy",Le.id),{onSuccess:function(){we(!1),k.dismiss(),k.success(x("Company deleted successfully"))},onError:function(e){k.dismiss(),k.error("Failed to delete company: ".concat(Object.values(e).join(", ")))}})},itemName:(null==Le?void 0:Le.name)||"",entityName:"company"}),i.jsx(z,{isOpen:Se,onClose:function(){return Ce(!1)},onSubmit:function(e){k.loading(x("Resetting password...")),y.put(route("companies.reset-password",Le.id),e,{onSuccess:function(){Ce(!1),k.dismiss(),k.success(x("Password reset successfully"))},onError:function(e){k.dismiss(),k.error("Failed to reset password: ".concat(Object.values(e).join(", ")))}})},formConfig:{fields:[{name:"password",label:x("New Password"),type:"password",required:!0},{name:"password_confirmation",label:x("Confirm Password"),type:"password",required:!0}],modalSize:"sm"},initialData:{},title:"Reset Password for ".concat((null==Le?void 0:Le.name)||"Company"),mode:"edit"}),i.jsx(s,{isOpen:_e,onClose:function(){return Oe(!1)},onConfirm:function(e,t){k.loading(x("Upgrading plan...")),y.put(route("companies.upgrade-plan",Le.id),{plan_id:e,duration:t},{onSuccess:function(){Oe(!1),k.dismiss(),k.success(x("Plan upgraded successfully")),y.reload()},onError:function(e){k.dismiss();var t="object"===n(e)&&null!==e?Object.values(e).join(", "):x("Failed to upgrade plan");k.error(t)}})},plans:Ae,currentPlanId:null==Le?void 0:Le.plan_id,companyName:(null==Le?void 0:Le.name)||""}),i.jsx(o,{open:De,onOpenChange:Ee,children:i.jsxs(d,{className:"max-w-2xl",children:[i.jsx(u,{children:i.jsxs(m,{children:[x("Business Links")," - ",null==Le?void 0:Le.name]})}),i.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:Re.length>0?Re.map(function(e){return i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium",children:e.name}),i.jsx("p",{className:"text-sm text-gray-500 break-all",children:e.link})]}),i.jsx(h,{variant:"outline",size:"sm",onClick:function(){(function(e){if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(e);var t=document.createElement("textarea");return t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select(),new Promise(function(e,s){document.execCommand("copy")?(t.remove(),e()):(t.remove(),s(new Error("Copy failed")))})})(e.link).then(function(){k.success(x("Link copied to clipboard"))}).catch(function(){k.error(x("Failed to copy link"))}),Me(e.id),setTimeout(function(){return Me(null)},2e3)},className:"ml-4",children:qe===e.id?i.jsx(C,{className:"h-4 w-4"}):i.jsx(Z,{className:"h-4 w-4"})})]},e.id)}):i.jsx("div",{className:"text-center py-8 text-gray-500",children:x("No businesses found for this company")})})]})})]})})}}})}();

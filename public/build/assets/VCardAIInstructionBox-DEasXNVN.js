import{R as m,j as t}from"./ui-XtzbmeJx.js";import{u as E,C as G,L as W,B as D,t as p,o as H}from"./app-BNDAg-x0.js";import{T as O}from"./textarea-BAxIzAY1.js";import"./vendor-CxtKjBZA.js";import"./utils-CCVAIzGD.js";const M=1900,z=({userPlan:a,planFeatures:n,userRole:v,onboardingProfile:c,sections:u,businessName:h,businessType:x,templateSections:f,onResult:g})=>{const{t:e}=E(),[d,j]=m.useState(""),[l,y]=m.useState(!1),i=m.useMemo(()=>v==="superadmin"?!0:(n==null?void 0:n.ai_integration)===!0,[n==null?void 0:n.ai_integration,v]),b=m.useMemo(()=>i?null:a!=null&&a.name?e("AI content generation is not included in your current plan ({{plan}}).",{plan:a.name}):e("AI content generation is not available for your account."),[i,e,a==null?void 0:a.name]),U=async()=>{var I,A,_,w,C,k,N,B;const o=d.trim();if(!o||!i||l){o||p.error(e("Please provide some details about your business before generating."));return}y(!0);try{const s={business_name:(I=h!=null?h:c==null?void 0:c.business_name)!=null?I:void 0,business_type:(A=x!=null?x:c==null?void 0:c.business_category)!=null?A:void 0,tone:"professional",language:"en",sections:u!=null?u:{},template_sections:f&&f.length>0?f:void 0,chat:[{role:"user",content:o}]},r=await H.post(route("vcard-builder.ai.chat"),s);if(!((_=r.data)!=null&&_.success))throw new Error(((w=r.data)==null?void 0:w.message)||"Unable to generate content.");const L=(C=r.data.data)!=null?C:{},q=(k=L.sections)!=null?k:{};g==null||g(q,L),p.success(e("Draft content created. Review and adjust any sections you need.")),j("")}catch(s){const r=((B=(N=s==null?void 0:s.response)==null?void 0:N.data)==null?void 0:B.message)||(s==null?void 0:s.message)||e("Unable to generate AI content. Please try again.");p.error(r)}finally{y(!1)}};return t.jsx(G,{className:"border-dashed bg-muted/30",children:t.jsxs("div",{className:"flex flex-col gap-4 p-6",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("h2",{className:"text-lg font-semibold",children:e("AI Content Assistant")}),t.jsx("p",{className:"text-sm text-muted-foreground",children:e("Share the key details about your business, services, projects, and offers. The assistant will use this to fill every section automatically.")})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(W,{htmlFor:"ai-brief",children:e("Tell us about your business")}),t.jsx(O,{id:"ai-brief",value:d,onChange:o=>j(o.target.value),placeholder:e("For example: We are a construction company specialising in painting services, renovations, and home maintenance packages. Our hero call-to-action should invite visitors to request a quote. Include 3 core services, 2 featured projects, customer testimonials, package tiers, and contact details including phone, email, and address."),rows:6,maxLength:M,disabled:!i||l}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[t.jsx("span",{children:e("{{count}} characters remaining",{count:M-d.length})}),!i&&b?t.jsx("span",{className:"text-amber-600",children:b}):null]})]}),t.jsx("div",{className:"flex items-center justify-end gap-3",children:t.jsx(D,{type:"button",onClick:U,disabled:!i||l||!d.trim(),children:e(l?"Working...":"Generate all sections")})})]})})};export{z as default};

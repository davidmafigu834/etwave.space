import{R as N,j as e}from"./ui-XtzbmeJx.js";import{u as X,C as I,k as H,B as d,t as C,o as K,L as i,I as h,M as P}from"./app-CHRIhyY0.js";import{T as b}from"./textarea-aJ3buVnx.js";import{S as O,a as L,b as G,c as R,d as z}from"./select-DVebJzi_.js";import{S as Q}from"./switch-Bs9N4aMe.js";import"./vendor-CxtKjBZA.js";import"./utils-CCVAIzGD.js";import"./index-C0g6bluz.js";import"./chevron-up-CWYfEUVP.js";const S=[{id:"company",title:"About your business",description:"Tell us about your business so we can introduce you properly."},{id:"packages",title:"Services & offerings",description:"List your services, packages, and key value propositions."},{id:"projects",title:"Projects & case studies",description:"Highlight your recent work or success stories."},{id:"media",title:"Media & visuals",description:"Upload images and videos for your vCard."},{id:"extras",title:"Contact & extras",description:"Add contact info, social links, and calls to action."}],Z={companyName:"",tagline:"",overview:"",targetAudience:"",tone:"professional",language:"en",packages:[{name:"",price:"",description:""}],projects:[{name:"",outcome:"",testimonial:""}],gallery:[],callToAction:"",contactEmail:"",contactPhone:"",socials:[{platform:"",url:""}],allowAiMediaSuggestions:!1},$=5,F=5,ee=6,ae=[{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"de",label:"German"},{value:"pt",label:"Portuguese"},{value:"it",label:"Italian"},{value:"nl",label:"Dutch"},{value:"pl",label:"Polish"},{value:"ar",label:"Arabic"},{value:"tr",label:"Turkish"},{value:"zh",label:"Chinese"},{value:"ja",label:"Japanese"}],se=[{value:"professional",label:"Professional"},{value:"friendly",label:"Friendly"},{value:"technical",label:"Technical"},{value:"inspirational",label:"Inspirational"},{value:"conversational",label:"Conversational"}],te=["Facebook","Instagram","LinkedIn","Twitter","TikTok","YouTube","WhatsApp","Pinterest"];function pe({userPlan:n,planFeatures:c,userRole:j,onResult:p}){const{t:a}=X(),[f,_]=N.useState(0),[r,A]=N.useState(Z),[U,B]=N.useState(!1),[T,Y]=N.useState(null),M=N.useMemo(()=>j==="superadmin"?!0:(c==null?void 0:c.ai_integration)===!0,[c==null?void 0:c.ai_integration,j]),E=S[f],D=()=>_(s=>Math.max(s-1,0)),J=()=>_(s=>Math.min(s+1,S.length-1)),o=(s,t)=>{A(l=>({...l,[s]:t}))},u=(s,t,l,m)=>{A(g=>{const v=[...g[s]];return v[t]={...v[t],[l]:m},{...g,[s]:v}})},k=(s,t)=>{A(l=>({...l,[s]:[...l[s],t]}))},w=(s,t)=>{A(l=>({...l,[s]:l[s].filter((m,g)=>g!==t)}))},V=async()=>{var s,t,l,m,g,v;if(!M){C.error(a("Your current plan does not include AI content generation."));return}B(!0);try{const y=le(r),x=await K.post(route("vcard-builder.ai.generate"),y);(s=x.data)!=null&&s.success?(Y(x.data.data),localStorage.setItem("vcard_ai_result",JSON.stringify(x.data.data)),p==null||p(x.data.data),C.success(a("AI content generated. Scroll to review and apply."))):C.error((l=(t=x.data)==null?void 0:t.message)!=null?l:a("Unable to generate content. Please try again."))}catch(y){const x=(v=(g=(m=y==null?void 0:y.response)==null?void 0:m.data)==null?void 0:g.message)!=null?v:a("Unable to generate content. Please try again.");C.error(x)}finally{B(!1)}},q=()=>{switch(E.id){case"company":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:a("Company name")}),e.jsx(h,{value:r.companyName,onChange:s=>o("companyName",s.target.value),placeholder:a("Your Business Name")})]}),e.jsxs("div",{children:[e.jsx(i,{children:a("Tagline")}),e.jsx(h,{value:r.tagline,onChange:s=>o("tagline",s.target.value),placeholder:a("Your business tagline")})]}),e.jsxs("div",{children:[e.jsx(i,{children:a("Overview")}),e.jsx(b,{value:r.overview,onChange:s=>o("overview",s.target.value),placeholder:a("Explain what makes your business unique, where you operate, certifications, etc."),rows:5})]}),e.jsxs("div",{children:[e.jsx(i,{children:a("Target audience")}),e.jsx(b,{value:r.targetAudience,onChange:s=>o("targetAudience",s.target.value),placeholder:a("e.g. Individuals, businesses, specific industries, etc."),rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:a("Preferred tone")}),e.jsxs(O,{value:r.tone,onValueChange:s=>o("tone",s),children:[e.jsx(L,{children:e.jsx(G,{})}),e.jsx(R,{children:se.map(s=>e.jsx(z,{value:s.value,children:a(s.label)},s.value))})]})]}),e.jsxs("div",{children:[e.jsx(i,{children:a("Language")}),e.jsxs(O,{value:r.language,onValueChange:s=>o("language",s),children:[e.jsx(L,{children:e.jsx(G,{})}),e.jsx(R,{children:ae.map(s=>e.jsx(z,{value:s.value,children:a(s.label)},s.value))})]})]})]})]});case"packages":return e.jsxs("div",{className:"space-y-4",children:[r.packages.map((s,t)=>e.jsxs(I,{className:"p-4 space-y-3 border-dashed",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:a("Service or package name")}),e.jsx(h,{value:s.name,onChange:l=>u("packages",t,"name",l.target.value),placeholder:a("Service or package name")})]}),e.jsxs("div",{children:[e.jsx(i,{children:a("Price or starting price")}),e.jsx(h,{value:s.price,onChange:l=>u("packages",t,"price",l.target.value),placeholder:a("Price or starting price")})]})]}),e.jsxs("div",{children:[e.jsx(i,{children:a("Description")}),e.jsx(b,{value:s.description,onChange:l=>u("packages",t,"description",l.target.value),placeholder:a("Description of what this service or package includes"),rows:4})]}),e.jsxs("div",{children:[e.jsx(i,{children:a("Package image")}),e.jsx(P,{value:s.media,onChange:l=>u("packages",t,"media",l),placeholder:a("Image for this service or package (optional)")})]}),r.packages.length>1&&e.jsx(d,{variant:"outline",size:"sm",onClick:()=>w("packages",t),children:a("Remove package")})]},t)),r.packages.length<$&&e.jsx(d,{type:"button",variant:"outline",onClick:()=>k("packages",{name:"",price:"",description:""}),children:a("Add package")})]});case"projects":return e.jsxs("div",{className:"space-y-4",children:[r.projects.map((s,t)=>e.jsxs(I,{className:"p-4 space-y-3 border-dashed",children:[e.jsxs("div",{children:[e.jsx(i,{children:a("Project name")}),e.jsx(h,{value:s.name,onChange:l=>u("projects",t,"name",l.target.value),placeholder:a("Project or case study name")})]}),e.jsxs("div",{children:[e.jsx(i,{children:a("Outcome / impact")}),e.jsx(b,{value:s.outcome,onChange:l=>u("projects",t,"outcome",l.target.value),placeholder:a("Describe the results and impact of this project"),rows:4})]}),e.jsxs("div",{children:[e.jsx(i,{children:a("Project image")}),e.jsx(P,{value:s.media,onChange:l=>u("projects",t,"media",l),placeholder:a("Image for this project (optional)")})]}),e.jsxs("div",{children:[e.jsx(i,{children:a("Client quote or testimonial")}),e.jsx(b,{value:s.testimonial||"",onChange:l=>u("projects",t,"testimonial",l.target.value),placeholder:a("Client testimonial or quote"),rows:3})]}),r.projects.length>1&&e.jsx(d,{variant:"outline",size:"sm",onClick:()=>w("projects",t),children:a("Remove project")})]},t)),r.projects.length<F&&e.jsx(d,{type:"button",variant:"outline",onClick:()=>k("projects",{name:"",outcome:"",testimonial:""}),children:a("Add project")})]});case"media":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:a("Hero image")}),e.jsx(P,{value:r.heroImage,onChange:s=>o("heroImage",s),placeholder:a("Add a cover image (optional)")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a("Recommended size: 1200 x 800px")})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{children:a("Gallery images")}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[r.gallery.map((s,t)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{value:s,onChange:l=>{const m=[...r.gallery];m[t]=l,o("gallery",m)},placeholder:a("Select image")}),e.jsx(d,{variant:"outline",size:"xs",onClick:()=>w("gallery",t),children:a("Remove")})]},t)),r.gallery.length<ee&&e.jsx("button",{type:"button",onClick:()=>k("gallery",""),className:"flex h-24 w-full items-center justify-center rounded-md border border-dashed text-sm text-muted-foreground hover:bg-muted/40",children:a("Add image slot")})]})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[e.jsxs("div",{children:[e.jsx(i,{children:a("Need AI image suggestions?")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("We can recommend images based on your description.")})]}),e.jsx(Q,{checked:r.allowAiMediaSuggestions,onCheckedChange:s=>o("allowAiMediaSuggestions",s)})]})]});case"extras":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:a("Primary call to action")}),e.jsx(b,{value:r.callToAction,onChange:s=>o("callToAction",s.target.value),placeholder:a("Primary call to action for visitors"),rows:3})]}),e.jsxs("div",{children:[e.jsx(i,{children:a("Contact email")}),e.jsx(h,{value:r.contactEmail,type:"email",onChange:s=>o("contactEmail",s.target.value),placeholder:"hello@yourbusiness.com"})]}),e.jsxs("div",{children:[e.jsx(i,{children:a("Contact phone")}),e.jsx(h,{value:r.contactPhone,onChange:s=>o("contactPhone",s.target.value),placeholder:"+1 555 123 4567"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{children:a("Social links")}),r.socials.map((s,t)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs(O,{value:s.platform,onValueChange:l=>u("socials",t,"platform",l),children:[e.jsx(L,{children:e.jsx(G,{placeholder:a("Platform")})}),e.jsx(R,{children:te.map(l=>e.jsx(z,{value:l,children:l},l))})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(h,{value:s.url,onChange:l=>u("socials",t,"url",l.target.value),placeholder:a("https://facebook.com/yourbusiness")})}),r.socials.length>1&&e.jsx(d,{variant:"outline",size:"sm",onClick:()=>w("socials",t),children:a("Remove")})]},t)),r.socials.length<8&&e.jsx(d,{type:"button",variant:"outline",onClick:()=>k("socials",{platform:"",url:""}),children:a("Add social link")})]}),e.jsxs("div",{className:"rounded-md border p-3 bg-muted/30",children:[e.jsx(i,{children:a("Need more info?")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("Include testimonials, FAQ snippets, or other information to enrich AI prompts.")})]})]});default:return null}},W=e.jsx("div",{className:"grid gap-3",children:Object.entries(T||{}).map(([s,t])=>e.jsxs(I,{className:"p-3 space-y-1",children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:s}),e.jsx("pre",{className:" whitespace-pre-wrap text-sm",children:typeof t=="string"?t:JSON.stringify(t,null,2)})]},s))});return e.jsxs(I,{className:"border border-dashed",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center justify-between",children:[e.jsx("span",{children:a("AI Business Setup")}),M?e.jsx("span",{className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full",children:a("Included in your plan")}):e.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full",children:a("Upgrade for AI features")})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:a("Provide information about your business and let AI create content for your vCard.")})]}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a(E.title)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a(E.description)})]}),e.jsx("div",{className:"text-right text-xs text-muted-foreground",children:a("Step {{current}} of {{total}}",{current:f+1,total:S.length})})]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx("div",{className:"grid grid-cols-5 gap-2",children:S.map((s,t)=>e.jsxs("button",{type:"button",onClick:()=>_(t),className:H("rounded-md border px-2 py-2 text-xs text-left transition",t===f?"bg-primary text-primary-foreground border-primary":"bg-muted/40 hover:bg-muted"),children:[e.jsx("p",{className:"font-medium",children:a(s.title)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:a(s.description)})]},s.id))}),e.jsx("div",{className:"border rounded-md p-4 bg-muted/10",children:q()})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{variant:"outline",onClick:D,disabled:f===0,children:a("Back")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",onClick:J,disabled:f===S.length-1,children:a("Next")}),e.jsx(d,{onClick:V,disabled:!M||U,className:"relative overflow-hidden border-0 bg-gradient-to-r from-purple-500 via-purple-400 to-pink-500 text-white shadow-[0_0_12px_rgba(168,85,247,0.7)] transition hover:scale-[1.01]",children:a(U?"Generating...":"Generate AI content")})]})]}),T&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold",children:a("AI Output")}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>{localStorage.setItem("vcard_ai_result",JSON.stringify(T)),C.success(a("Saved to browser storage. You can paste sections into the editor below."))},children:a("Save to local storage")})]}),W]})]})]})}function le(n){return{business_name:n.companyName,tone:n.tone,language:n.language,sections:{header:{name:n.companyName,tagline:n.tagline,target_audience:n.targetAudience},about:{overview:n.overview,differentiators:n.targetAudience},services:n.packages.map(({name:c,price:j,description:p})=>({name:c,price:j,description:p})),portfolio:n.projects.map(({name:c,outcome:j,testimonial:p})=>({name:c,outcome:j,testimonial:p})),gallery:n.gallery.filter(Boolean),testimonials:n.projects.filter(c=>c.testimonial).map(c=>({quote:c.testimonial,project:c.name})),contact:{email:n.contactEmail,phone:n.contactPhone,call_to_action:n.callToAction},socials:n.socials.filter(c=>c.platform&&c.url),media_preferences:{allow_ai_suggestions:n.allowAiMediaSuggestions,hero_image:n.heroImage,gallery:n.gallery.filter(Boolean)}},scope:"Generate structured copy for each section. Use provided media notes to suggest image prompts if applicable."}}export{pe as default};

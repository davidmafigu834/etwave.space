!function(){var e=["className","indeterminate"];function l(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,l){return function(e){if(Array.isArray(e))return e}(e)||function(e,l){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,t,a,s,c=[],i=!0,o=!1;try{if(a=(n=n.call(e)).next,0===l){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(c.push(r.value),c.length!==l);i=!0);}catch(e){o=!0,t=e}finally{try{if(!i&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(o)throw t}}return c}}(e,l)||t(e,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,l){if(e){if("string"==typeof e)return a(e,l);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,l):void 0}}function a(e,l){(null==l||l>e.length)&&(l=e.length);for(var n=0,r=Array(l);n<l;n++)r[n]=e[n];return r}function s(e,l){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);l&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var l=1;l<arguments.length;l++){var n=null!=arguments[l]?arguments[l]:{};l%2?s(Object(n),!0).forEach(function(l){i(e,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(n,l))})}return e}function i(e,l,r){return(l=function(e){var l=function(e,l){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,l||"default");if("object"!=n(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===l?String:Number)(e)}(e,"string");return"symbol"==n(l)?l:l+""}(l))in e?Object.defineProperty(e,l,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[l]=r,e}System.register(["./ui-legacy-Df76W54t.js","./PageCrudWrapper-legacy-C9KBP6IA.js","./i18n-legacy-tKfG81Pa.js","./checkbox-legacy-w9Z93p4k.js","./app-legacy-Ct73uABr.js","./navigation-legacy-BtmYfG94.js","./vendor-legacy-DNs0y6R6.js","./page-template-legacy-et8O2PIf.js","./app-layout-legacy-BbvocKkk.js","./app-sidebar-layout-legacy-DjGq5XwB.js","./textarea-legacy-DhpF_zd4.js","./select-legacy-DJ7KqnGK.js","./index-legacy-BrP_l-Mm.js","./chevron-up-legacy-C3cU62dz.js","./react-country-flag.esm-legacy-C8Qm_EdK.js","./language-legacy-CPKUrWoi.js","./sparkles-legacy-DXvM6dmp.js","./loader-circle-legacy-BAWBSNTr.js","./copy-legacy-CyY0zsNU.js","./chevron-right-legacy-D5fLjpJA.js","./language-switcher-legacy-BfnK_KLk.js","./globe-legacy-D167FJxM.js","./chart-column-legacy-xaxxIszB.js","./briefcase-legacy-fFmYMQCB.js","./package-legacy-BXVFs7qu.js","./credit-card-legacy-oVK_vO6r.js","./dollar-sign-legacy-De4_eAPE.js","./mail-legacy-DchUy0NJ.js","./users-legacy-CIHfY2gt.js","./settings-legacy-BXGYMxCJ.js","./message-square-legacy-CVHCr5Dt.js","./calendar-legacy-DdDaxKxU.js","./wallet-legacy-DOeLcv8c.js","./shopping-bag-legacy-BRpvr-V3.js","./building-2-legacy-Dj3cFBKu.js","./user-legacy-cMI1gv9J.js","./arrow-left-legacy-CqQR3bfj.js","./use-favicon-legacy-CbpIBPd5.js","./cookie-consent-legacy-BD_speLP.js","./pagination-legacy-C5GfrDQP.js","./search-and-filter-bar-legacy-CmRxlo_P.js","./date-picker-legacy-Cpc8-hXR.js","./utils-legacy-4AQaPo1J.js","./filter-legacy-BAhWbv77.js","./list-legacy-D-kIW24o.js","./CrudTable-legacy-CnYddiyU.js","./table-legacy-DMkF8XyN.js","./activity-legacy-qEFGj3ED.js","./unlink-legacy-B-z4dptl.js","./arrow-up-legacy-pwFWK0Nm.js","./arrow-right-legacy-Cfkqbzln.js","./arrow-up-down-legacy-DADQmmAj.js","./arrow-up-right-legacy-DhqDNMSc.js","./award-legacy-1YF8hGuu.js","./banknote-legacy-DvdjeEGr.js","./bell-ring-legacy-C_ZRzTvz.js","./bot-legacy-Cq7Fvcb_.js","./crown-legacy-BOlfPL-z.js","./building-legacy-Cd7zlonT.js","./youtube-legacy-CFlSkXto.js","./camera-legacy-Dd-Wp0pf.js","./wrench-legacy-DDEScOmL.js","./chart-pie-legacy-D_jHmHdg.js","./chevron-left-legacy-CBzzFiYy.js","./circle-check-big-legacy-Dccr4Wi1.js","./circle-check-legacy-BQGACsTH.js","./circle-help-legacy-_6ND9uDH.js","./pencil-line-legacy-C-iBrfpN.js","./circle-x-legacy-BdJQBC_9.js","./circle-legacy-BZU12gvH.js","./clock-legacy-OYgw2bvN.js","./code-legacy-CD7E-MSX.js","./indian-rupee-legacy-DvIWk5Aw.js","./compass-legacy-Cib5yt8q.js","./download-legacy-DkH8e7Wo.js","./droplet-legacy-BKwjobrI.js","./ellipsis-vertical-legacy-j4YSGbwm.js","./ellipsis-legacy-DBG1h6S6.js","./external-link-legacy-ByGyBoEL.js","./eye-off-legacy-BsSxS_Hc.js","./eye-legacy-Bjr5hUAR.js","./facebook-legacy-DrnaedmE.js","./power-legacy-Dv2Ix3iz.js","./graduation-cap-legacy-DUNA-Z3b.js","./grip-vertical-legacy-4mYFDKFJ.js","./hammer-legacy-kJY1ntOM.js","./hard-drive-legacy-C2FYzfP2.js","./heart-legacy-D0LbDgyZ.js","./house-legacy-CsiLg80O.js","./instagram-legacy-CXTRGjkL.js","./lock-open-legacy-DtJ2AF9u.js","./layers-legacy-B_4hYWjh.js","./leaf-legacy-_8yl_EOv.js","./lightbulb-legacy-C1U_GpYo.js","./link-2-legacy-ChlCC2ap.js","./linkedin-legacy-iG5PF7m5.js","./lock-legacy-CiAXJP-P.js","./map-pin-legacy-C8q_6w13.js","./menu-legacy-D4E1bl_9.js","./message-circle-legacy-xY-4Lg5Y.js","./monitor-legacy-zlm-zjjO.js","./pencil-legacy-BhqsOyIl.js","./shield-check-legacy-DU0LL7Mi.js","./phone-legacy-Bw_bEeHz.js","./play-legacy-go6--FBd.js","./qr-code-legacy-BXob85p2.js","./quote-legacy-CA3k2GyX.js","./refresh-cw-legacy-ByjSkNji.js","./rocket-legacy-BfeBCF9C.js","./send-legacy-CbzSH1sf.js","./server-legacy-DQuN1-Ol.js","./share-2-legacy-D3gH8VZe.js","./shield-legacy-DQ5qNese.js","./shopping-cart-legacy-BNMDMyko.js","./smartphone-legacy-HSi3blOa.js","./square-pen-legacy-Bg3q-gjR.js","./star-legacy-H9DVfP6_.js","./sticky-note-legacy-9f1os5Gw.js","./store-legacy-Ca4Gm8Mw.js","./sun-medium-legacy-Dqp_z2t2.js","./tag-legacy-DfJrCzG8.js","./target-legacy-DTCKFHXT.js","./ticket-legacy-vDMhl5Iy.js","./trash-2-legacy-ZzhgHTxS.js","./trending-up-legacy-mdgqrkTY.js","./twitter-legacy-ok4-c2gy.js","./type-legacy-z3nQea3c.js","./user-x-legacy-gG1nfv5r.js","./video-legacy-CpBS_ohJ.js","./waves-legacy-0TsdQcdR.js","./webhook-legacy-MypP2g6T.js","./wifi-legacy-NUNRk_Rd.js","./zap-legacy-B-66XYlF.js","./CrudFormModal-legacy-Ba-bBMtP.js","./radio-group-legacy-DcsT9vco.js","./switch-legacy-t_Z_CqVY.js","./scroll-area-legacy-BQLfOKaF.js","./CrudDeleteModal-legacy-BjIGkHEP.js"],function(t,a){"use strict";var s,i,o,u,g,y,d,m,f,j,p,b,h;return{setters:[function(e){s=e.r,i=e.j},function(e){o=e.P},function(e){u=e.t},function(e){g=e.R,y=e.I,d=e.C},function(e){m=e.k,f=e.F,j=e.u,p=e.L,b=e.K},function(e){h=e.M},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){t("default",function(){var e=j().t,n=b().props,t=n.permissions,u=(n.flash,n.auth),g=r(s.useState(a),2),y=g[0],d=g[1];s.useEffect(function(){t&&d(c(c({},a),{},{table:c(c({},a.table),{},{columns:[].concat(l(a.table.columns),[{key:"permissions",label:e("Permissions"),render:function(e,l){return i.jsx(w,{permissions:e||[]})}}])}),form:c(c({},a.form),{},{fields:[].concat(l(a.form.fields.filter(function(e){return"permissions"!==e.name})),[{name:"permissions",label:e("Role Permissions"),type:"custom",colSpan:12,render:function(l,n,r){var a;return i.jsxs("div",{className:"mt-4",id:"permissions",children:[i.jsx("h3",{className:"text-lg font-medium mb-2",children:e("Manage Permissions")}),i.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[e("Select permissions for this role. You can select all permissions at once or manage them by module."),"superadmin"!==(null===(a=u.user)||void 0===a?void 0:a.type)&&i.jsx("span",{className:"block mt-1 text-amber-600",children:e("Note: Only permissions for modules available to your role are shown.")})]}),i.jsx(x,{permissions:t,selectedPermissions:n.permissions||[],onChange:function(e){r("permissions",e)}})]})}}])})}))},[t,e]);var m=[{title:e("Dashboard"),href:route("dashboard")},{title:e("User Management"),href:route("roles.index")},{title:e("Roles")}];return i.jsx(o,{config:y,url:"/roles",breadcrumbs:m})});var a={entity:{name:"roles",endpoint:route("roles.index"),permissions:{view:"view-roles",create:"create-roles",edit:"edit-roles",delete:"delete-roles"}},modalSize:"5xl",description:u("Manage user roles and their permissions"),table:{columns:[{key:"label",label:u("Name"),sortable:!0},{key:"name",label:u("Slug"),sortable:!0},{key:"description",label:u("Description")},{key:"creator.name",label:u("Created By"),render:function(e,l){var n;return(null===(n=l.creator)||void 0===n?void 0:n.name)||u("System")}},{key:"created_at",label:u("Created At"),sortable:!0,render:function(e){return"".concat(window.appSettings.formatDateTime(e,!1))}}],actions:[{label:u("View"),icon:"Eye",action:"view",className:"text-blue-500",requiredPermission:"view-roles"},{label:u("Edit"),icon:"Edit",action:"edit",className:"text-amber-500",requiredPermission:"edit-roles"},{label:u("Delete"),icon:"Trash2",action:"delete",className:"text-red-500",requiredPermission:"delete-roles",condition:function(e){return!e.is_system_role}}]},filters:[],form:{fields:[{name:"label",label:u("Role Name"),type:"text",required:!0},{name:"description",label:u("Description"),type:"textarea"}]}},v=s.forwardRef(function(l,n){var r=l.className,t=l.indeterminate,a=function(e,l){if(null==e)return{};var n,r,t=function(e,l){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==l.indexOf(r))continue;n[r]=e[r]}return n}(e,l);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===l.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}(l,e),o=s.useRef(null);return s.useImperativeHandle(n,function(){return o.current}),s.useEffect(function(){o.current&&(o.current.dataset.state=t?"indeterminate":a.checked?"checked":"unchecked")},[t,a.checked]),i.jsx(g,c(c({ref:o,className:m("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=indeterminate]:bg-primary data-[state=indeterminate]:text-primary-foreground",r)},a),{},{children:i.jsx(y,{className:m("flex items-center justify-center text-current"),children:t?i.jsx(h,{className:"h-3 w-3"}):i.jsx(f,{className:"h-4 w-4"})})}))});function x(e){var t=e.permissions,a=e.selectedPermissions,c=e.onChange,o=j().t,u=r(s.useState([]),2),g=u[0],y=u[1],m=t,f=function(){var e=[];return Object.values(m).forEach(function(l){l.forEach(function(l){e.push(l.id.toString())})}),e},b=function(e){var l;return(null===(l=m[e])||void 0===l?void 0:l.map(function(e){return e.id.toString()}))||[]};s.useEffect(function(){if(a&&0!==Object.keys(m).length)try{var e={};Object.values(m).forEach(function(l){l.forEach(function(l){e[l.name]=l.id.toString()})});var l=[];Array.isArray(a)?l=a.map(function(l){if("object"===n(l)&&null!==l){if("id"in l)return l.id.toString();if("name"in l)return e[l.name]||l.name}return e[String(l)]||String(l)}).filter(Boolean):"object"===n(a)&&null!==a&&"permissions"in a&&Array.isArray(a.permissions)&&(l=a.permissions.map(function(l){if("object"===n(l)&&null!==l){if("id"in l)return l.id.toString();if("name"in l)return e[l.name]||l.name}return e[String(l)]||String(l)}).filter(Boolean)),y(l)}catch(r){console.error("Error processing permissions:",r),y([])}else y([])},[a]);var h=function(e){var l={};Object.values(m).forEach(function(e){e.forEach(function(e){l[e.id.toString()]=e.name})});var n=e.map(function(e){return l[e]||e}).filter(function(e){return!!e});c(n)},x=g.length===f().length&&f().length>0,w=function(e){var l=b(e);return l.every(function(e){return g.includes(e)})&&l.length>0},k=function(e){var l=b(e),n=l.filter(function(e){return g.includes(e)}).length;return n>0&&n<l.length};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"border rounded shadow-sm p-3 bg-gray-50",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(v,{id:"select-all-permissions-checkbox",checked:x,onCheckedChange:function(e){return function(e){var l=e?f():[];y(l),h(l)}(!0===e)}}),i.jsx(p,{htmlFor:"select-all-permissions-checkbox",className:"font-medium",children:o("Select All Permissions")})]}),i.jsxs("div",{className:"text-xs text-gray-500",children:[g.length," ",o("of")," ",f().length," ",o("selected")]})]})}),i.jsx("div",{className:"space-y-6",children:Object.entries(m).map(function(e){var n=r(e,2),t=n[0],a=n[1];return i.jsxs("div",{className:"border rounded shadow-sm",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border-b",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(v,{id:"module-checkbox-".concat(t.replace(/\s+/g,"-").toLowerCase()),checked:w(t),indeterminate:k(t),onCheckedChange:function(e){return function(e,n){var r,t=b(e);if(n){var a=t.filter(function(e){return!g.includes(e)});r=[].concat(l(g),l(a))}else r=g.filter(function(e){return!t.includes(e)});y(r),h(r)}(t,!0===e)}}),i.jsx(p,{htmlFor:"module-checkbox-".concat(t.replace(/\s+/g,"-").toLowerCase()),className:"font-medium",children:t})]}),i.jsxs("div",{className:"text-xs text-gray-500",children:[a.filter(function(e){return g.includes(e.id.toString())}).length," of ",a.length," ",o("selected")]})]}),i.jsx("div",{className:"p-3",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:a.map(function(e){return i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(d,{id:"permission-checkbox-".concat(e.id.toString().replace(/\s+/g,"-").toLowerCase()),checked:g.includes(e.id.toString())||g.includes(e.name),onCheckedChange:function(n){return function(e,n){var r=n?[].concat(l(g),[e]):g.filter(function(l){return l!==e});y(r),h(r)}(e.id.toString(),!0===n)}}),i.jsx(p,{htmlFor:"permission-checkbox-".concat(e.id.toString().replace(/\s+/g,"-").toLowerCase()),className:"text-sm truncate",children:e.label})]},e.id)})})})]},t)})})]})}function w(e){var l=e.permissions,n=void 0===l?[]:l,r=e.maxDisplay,t=void 0===r?3:r,a=j().t;return n&&Array.isArray(n)&&0!==n.length?i.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.slice(0,t).map(function(e,l){return i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:e.label||e.name},l)}),n.length>t&&i.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:["+",n.length-t," ",a("more")]})]}):i.jsx("span",{className:"text-sm text-gray-500",children:"-"})}v.displayName="IndeterminateCheckbox"}}})}();

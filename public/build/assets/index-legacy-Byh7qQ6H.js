!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function a(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach(function(t){s(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function s(t,n,a){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var s=a.call(t,n||"default");if("object"!=e(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw r}}}}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",s=n.toStringTag||"@@toStringTag";function r(n,a,s,r){var i=a&&a.prototype instanceof o?a:o,d=Object.create(i.prototype);return l(d,"_invoke",function(n,a,s){var r,i,l,o=0,d=s||[],u=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return r=t,i=0,l=e,p.n=n,c}};function m(n,a){for(i=n,l=a,t=0;!u&&o&&!s&&t<d.length;t++){var s,r=d[t],m=p.p,f=r[2];n>3?(s=f===a)&&(l=r[(i=r[4])?5:(i=3,3)],r[4]=r[5]=e):r[0]<=m&&((s=n<2&&m<r[1])?(i=0,p.v=a,p.n=r[1]):m<f&&(s=n<3||r[0]>a||a>f)&&(r[4]=n,r[5]=a,p.n=f,i=0))}if(s||n>1)return c;throw u=!0,a}return function(s,d,f){if(o>1)throw TypeError("Generator is already running");for(u&&1===d&&m(d,f),i=d,l=f;(t=i<2?e:l)||!u;){r||(i?i<3?(i>1&&(p.n=-1),m(i,l)):p.n=l:p.v=l);try{if(o=2,r){if(i||(s="next"),t=r[s]){if(!(t=t.call(r,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=r.return)&&t.call(r),i<2&&(l=TypeError("The iterator does not provide a '"+s+"' method"),i=1);r=e}else if((t=(u=p.n<0)?l:n.call(a,p))!==c)break}catch(t){r=e,i=1,l=t}finally{o=1}}return{value:t,done:u}}}(n,s,r),!0),d}var c={};function o(){}function d(){}function u(){}t=Object.getPrototypeOf;var p=[][a]?t(t([][a]())):(l(t={},a,function(){return this}),t),m=u.prototype=o.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,l(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e}return d.prototype=u,l(m,"constructor",u),l(u,"constructor",d),d.displayName="GeneratorFunction",l(u,s,"GeneratorFunction"),l(m),l(m,s,"Generator"),l(m,a,function(){return this}),l(m,"toString",function(){return"[object Generator]"}),(i=function(){return{w:r,m:f}})()}function l(e,t,n,a){var s=Object.defineProperty;try{s({},"",{})}catch(e){s=0}l=function(e,t,n,a){function r(t,n){l(e,t,function(e){return this._invoke(t,n,e)})}t?s?s(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(r("next",0),r("throw",1),r("return",2))},l(e,t,n,a)}function c(e,t,n,a,s,r,i){try{var l=e[r](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(a,s)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(a,s){var r=e.apply(t,n);function i(e){c(r,a,s,i,l,"next",e)}function l(e){c(r,a,s,i,l,"throw",e)}i(void 0)})}}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,s,r,i,l=[],c=!0,o=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=r.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(e){o=!0,s=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(o)throw s}}return l}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}System.register(["./ui-legacy-Df76W54t.js","./page-template-legacy-vdr7rymY.js","./app-legacy--_EH1FA6.js","./pagination-legacy-CHfywoD0.js","./search-and-filter-bar-legacy-LX7-33hV.js","./select-legacy-CnS4pGYt.js","./switch-legacy-DR4XdF-9.js","./textarea-legacy-C9BYI3_s.js","./CrudFormModal-legacy-RjcQFiOT.js","./CrudDeleteModal-legacy-B7dcXYhE.js","./react-stripe.esm-legacy-DaQMvUkh.js","./loader-circle-legacy-BeSZcCZ2.js","./copy-legacy-B65eKCL5.js","./circle-check-big-legacy-BmT8bW7v.js","./calendar-legacy-iowv-fv-.js","./tag-legacy-DFdF1Wcu.js","./eye-legacy-BrYeqeQa.js","./chart-column-legacy-pf9KtNzA.js","./square-pen-legacy-DdPVLCZY.js","./trash-2-legacy-BHziuAts.js","./credit-card-legacy-D9le2VX2.js","./banknote-legacy-DOJMfX7K.js","./vendor-legacy-DNs0y6R6.js","./app-layout-legacy-Ddjw4cyv.js","./app-sidebar-layout-legacy-DNUIHr2c.js","./react-country-flag.esm-legacy-C8Qm_EdK.js","./language-legacy-CPKUrWoi.js","./sparkles-legacy-CpybO37S.js","./chevron-up-legacy-COSjq7BD.js","./chevron-right-legacy-BajxNCtJ.js","./language-switcher-legacy-DyZl0IOB.js","./globe-legacy-D5ETsV0D.js","./briefcase-legacy-qN8cP4rv.js","./package-legacy-BhxOSnhZ.js","./dollar-sign-legacy-Bra6CllU.js","./mail-legacy-BRLD7bu-.js","./users-legacy-CHx64N_f.js","./settings-legacy-C4yHeyf-.js","./message-square-legacy-tsOtqq3E.js","./wallet-legacy-DkvJP23h.js","./shopping-bag-legacy-CZi31-ql.js","./user-legacy-NZm5tz0X.js","./arrow-left-legacy-DNBUkron.js","./use-favicon-legacy-CK09Bl0i.js","./cookie-consent-legacy-Dhln_i9Y.js","./utils-legacy-4AQaPo1J.js","./date-picker-legacy-BJne9_9X.js","./filter-legacy-e0LLGuF6.js","./list-legacy-BJRJqdGM.js","./index-legacy-BrP_l-Mm.js","./radio-group-legacy-rI-dSaEl.js","./circle-legacy-CFKeO_55.js","./checkbox-legacy-FDwD3jKv.js","./scroll-area-legacy-DTlOdBp7.js"],function(e,n){"use strict";var s,l,c,u,p,m,f,h,g,x,y,v,j,b,_,N,S,C,w,k,P,D,O,T,F,E,A,I,M,B,z,q,U,V,$,G,L,K,R,Z,J,W,X,Y,H,Q,ee,te,ne,ae;return{setters:[function(e){s=e.r,l=e.j},function(e){c=e.P},function(e){u=e.u,p=e.L,m=e.I,f=e.B,h=e.t,g=e.S,x=e.C,y=e.g,v=e.m,j=e.D,b=e.a,_=e.b,N=e.c,S=e.i,C=e.K,w=e.x,k=e.y,P=e.z,D=e.A,O=e.P},function(e){T=e.P},function(e){F=e.S},function(e){E=e.S,A=e.a,I=e.b,M=e.c,B=e.d},function(e){z=e.S},function(e){q=e.T},function(e){U=e.C},function(e){V=e.C},function(e){$=e.l,G=e.E,L=e.u,K=e.a,R=e.C},function(e){Z=e.L},function(e){J=e.C},function(e){W=e.C},function(e){X=e.C},function(e){Y=e.T},function(e){H=e.E},function(e){Q=e.C},function(e){ee=e.S},function(e){te=e.T},function(e){ne=e.C},function(e){ae=e.B},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){e("default",function(){var e,n,i,o,x,y,v=u().t,S=C().props,$=(S.auth,S.campaigns),G=S.filters,L=void 0===G?{}:G,K=S.isAdmin,R=void 0!==K&&K,Z=S.users,J=void 0===Z?[]:Z,W=S.businesses,X=void 0===W?[]:W,Y=S.paymentMethods,se=void 0===Y?[]:Y,re=S.paymentSettings,ie=void 0===re?{}:re,ce=S.campaignSettings,oe=void 0===ce?null:ce,de=d(s.useState(L.search||""),2),ue=de[0],pe=de[1],me=d(s.useState(L.user_id||"all"),2),fe=me[0],he=me[1],ge=d(s.useState(L.business_id||"all"),2),xe=ge[0],ye=ge[1],ve=d(s.useState(L.status||"all"),2),je=ve[0],be=ve[1],_e=d(s.useState(L.start_date?new Date(L.start_date):void 0),2),Ne=_e[0],Se=_e[1],Ce=d(s.useState(L.end_date?new Date(L.end_date):void 0),2),we=Ce[0],ke=Ce[1],Pe=d(s.useState(!1),2),De=Pe[0],Oe=Pe[1],Te=d(s.useState(!1),2),Fe=Te[0],Ee=Te[1],Ae=d(s.useState(!1),2),Ie=Ae[0],Me=Ae[1],Be=d(s.useState(!1),2),ze=Be[0],qe=Be[1],Ue=d(s.useState(!1),2),Ve=(Ue[0],Ue[1],d(s.useState(null),2)),$e=Ve[0],Ge=Ve[1],Le=d(s.useState("create"),2),Ke=Le[0],Re=Le[1],Ze=d(s.useState(null),2),Je=(Ze[0],Ze[1],d(s.useState(""),2)),We=Je[0],Xe=Je[1],Ye=d(s.useState({name:"",description:"",business_id:"",start_date:"",end_date:"",total_days:0,total_cost:0,coupon_code:"",payment_method:"credit_card"}),2),He=Ye[0],Qe=Ye[1],et=d(s.useState({}),2),tt=(et[0],et[1],s.useMemo(function(){return R&&We?X.filter(function(e){var t;return(null===(t=e.created_by)||void 0===t?void 0:t.toString())===We.toString()}):X},[X,We,R]));s.useEffect(function(){if(He.start_date&&He.end_date){var e=new Date(He.start_date),t=new Date(He.end_date),n=Math.abs(t.getTime()-e.getTime()),s=Math.ceil(n/864e5)+1,i=function(e){if(null==oe||!oe.pricing_tiers||0===oe.pricing_tiers.length)return 10;var t,n=r(oe.pricing_tiers);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(e>=a.min_days&&e<=a.max_days)return parseFloat(a.per_day_price)}}catch(i){n.e(i)}finally{n.f()}var s=oe.pricing_tiers[oe.pricing_tiers.length-1];return parseFloat((null==s?void 0:s.per_day_price)||10)}(s),l=s*i;Qe(function(e){return a(a({},e),{},{total_days:s,total_cost:l})})}},[He.start_date,He.end_date,oe]);var nt=function(){var e={page:1};ue&&(e.search=ue),"all"!==fe&&(e.user_id=fe),"all"!==xe&&(e.business_id=xe),"all"!==je&&(e.status=je),Ne&&(e.start_date=Ne.toISOString().split("T")[0]),we&&(e.end_date=we.toISOString().split("T")[0]),L.per_page&&(e.per_page=L.per_page),g.get(route("campaigns.index"),e,{preserveState:!0,preserveScroll:!0})},at=function(e,t){var n={page:1};switch(ue&&(n.search=ue),e){case"user_id":he(t),"all"!==t&&(n.user_id=t);break;case"business_id":ye(t),"all"!==t&&(n.business_id=t);break;case"status":be(t),"all"!==t&&(n.status=t)}"all"!==fe&&"user_id"!==e&&(n.user_id=fe),"all"!==xe&&"business_id"!==e&&(n.business_id=xe),"all"!==je&&"status"!==e&&(n.status=je),Ne&&(n.start_date=Ne.toISOString().split("T")[0]),we&&(n.end_date=we.toISOString().split("T")[0]),L.per_page&&(n.per_page=L.per_page),g.get(route("campaigns.index"),n,{preserveState:!0,preserveScroll:!0})},st=function(e){var t={sort_field:e,sort_direction:L.sort_field===e&&"asc"===L.sort_direction?"desc":"asc",page:1};ue&&(t.search=ue),"all"!==fe&&(t.user_id=fe),"all"!==xe&&(t.business_id=xe),"all"!==je&&(t.status=je),Ne&&(t.start_date=Ne.toISOString().split("T")[0]),we&&(t.end_date=we.toISOString().split("T")[0]),L.per_page&&(t.per_page=L.per_page),g.get(route("campaigns.index"),t,{preserveState:!0,preserveScroll:!0})},rt=function(e,t){var n;switch(Ge(t),e){case"edit":Re("edit"),Xe((null===(n=t.user_id)||void 0===n?void 0:n.toString())||""),Ee(!0);break;case"delete":Me(!0);break;case"toggle-status":it(t);break;case"preview":if(t.business){var a=t.business;if(a.custom_domain&&!/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(a.custom_domain))return void h.error(v("Invalid business domain"));var s=a.custom_domain?"https://".concat(a.custom_domain):a.url_prefix&&""!==a.url_prefix?route("public.vcard.show",{prefix:a.url_prefix,slug:a.slug},!0):route("public.vcard.show.direct",a.slug,!0);window.open(s,"_blank","noopener,noreferrer")}else h.error(v("Business information not available"));break;case"analytics":window.location.href=route("campaigns.analytics",t.id)}},it=function(e){h.loading(v("Updating status...")),g.put(route("campaigns.toggle-status",e.id),{},{onSuccess:function(){h.dismiss(),h.success(v("Status updated successfully"))},onError:function(e){h.dismiss(),h.error("Failed to update status: ".concat(Object.values(e).join(", ")))}})},lt=[{label:"Create Campaign",icon:l.jsx(O,{className:"h-4 w-4 mr-2"}),variant:"default",onClick:function(){return Ge(null),Re("create"),Xe(""),void Ee(!0)}}],ct=[{title:v("Dashboard"),href:route("dashboard")},{title:v("Campaigns")}];return l.jsxs(c,{title:v("Campaigns Management"),url:"/campaigns",actions:lt,breadcrumbs:ct,noPadding:!0,children:[l.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow mb-4 p-4",children:l.jsx(F,{searchTerm:ue,onSearchChange:pe,onSearch:function(e){e.preventDefault(),nt()},filters:[].concat(t(R?[{name:"user_id",label:v("User"),type:"select",value:fe,onChange:function(e){return at("user_id",e)},options:[{value:"all",label:v("All Users")}].concat(t(J.map(function(e){return{value:e.id.toString(),label:e.name}})))}]:[]),[{name:"business_id",label:v("Business"),type:"select",value:xe,onChange:function(e){return at("business_id",e)},options:[{value:"all",label:v("All Businesses")}].concat(t(X.map(function(e){return{value:e.id.toString(),label:e.name}})))},{name:"status",label:v("Status"),type:"select",value:je,onChange:function(e){return at("status",e)},options:[{value:"all",label:v("All Status")},{value:"pending",label:v("Pending")},{value:"active",label:v("Active")},{value:"completed",label:v("Completed")},{value:"cancelled",label:v("Cancelled")}]},{name:"start_date",label:v("Start Date"),type:"date",value:Ne,onChange:function(e){return Se(e)}},{name:"end_date",label:v("End Date"),type:"date",value:we,onChange:function(e){return ke(e)}}]),showFilters:De,setShowFilters:Oe,hasActiveFilters:function(){return"all"!==fe||"all"!==xe||"all"!==je||""!==ue||void 0!==Ne||void 0!==we},activeFilterCount:function(){return("all"!==fe?1:0)+("all"!==xe?1:0)+("all"!==je?1:0)+(ue?1:0)+(Ne?1:0)+(we?1:0)},onResetFilters:function(){he("all"),ye("all"),be("all"),pe(""),Se(void 0),ke(void 0),Oe(!1),g.get(route("campaigns.index"),{page:1,per_page:L.per_page},{preserveState:!0,preserveScroll:!0})},onApplyFilters:nt,currentPerPage:(null===(e=L.per_page)||void 0===e?void 0:e.toString())||"10",onPerPageChange:function(e){var t={page:1,per_page:parseInt(e)};ue&&(t.search=ue),"all"!==fe&&(t.user_id=fe),"all"!==xe&&(t.business_id=xe),"all"!==je&&(t.status=je),Ne&&(t.start_date=Ne.toISOString().split("T")[0]),we&&(t.end_date=we.toISOString().split("T")[0]),g.get(route("campaigns.index"),t,{preserveState:!0,preserveScroll:!0})}})}),l.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow overflow-hidden",children:[l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b bg-gray-50 dark:bg-gray-800 dark:border-gray-700",children:[l.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 cursor-pointer",onClick:function(){return st("name")},children:l.jsxs("div",{className:"flex items-center",children:[v("Name"),"name"===L.sort_field&&l.jsx("span",{className:"ml-1",children:"asc"===L.sort_direction?"↑":"↓"})]})}),R&&l.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 cursor-pointer",onClick:function(){return st("user.name")},children:l.jsxs("div",{className:"flex items-center",children:[v("User Name"),"user.name"===L.sort_field&&l.jsx("span",{className:"ml-1",children:"asc"===L.sort_direction?"↑":"↓"})]})}),l.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500",children:v("Business Name")}),l.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 cursor-pointer",onClick:function(){return st("start_date")},children:l.jsxs("div",{className:"flex items-center",children:[v("Start Date"),"start_date"===L.sort_field&&l.jsx("span",{className:"ml-1",children:"asc"===L.sort_direction?"↑":"↓"})]})}),l.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 cursor-pointer",onClick:function(){return st("end_date")},children:l.jsxs("div",{className:"flex items-center",children:[v("End Date"),"end_date"===L.sort_field&&l.jsx("span",{className:"ml-1",children:"asc"===L.sort_direction?"↑":"↓"})]})}),l.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500",children:v("Total Days")}),l.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 cursor-pointer",onClick:function(){return st("total_amount")},children:l.jsxs("div",{className:"flex items-center",children:[v("Total Amount"),"total_amount"===L.sort_field&&l.jsx("span",{className:"ml-1",children:"asc"===L.sort_direction?"↑":"↓"})]})}),l.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500",children:v("Payment Method")}),l.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500",children:v("Status")}),R&&l.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500",children:v("Active")}),l.jsx("th",{className:"px-4 py-3 text-right font-medium text-gray-500",children:v("Actions")})]})}),l.jsxs("tbody",{children:[null==$||null===(n=$.data)||void 0===n?void 0:n.map(function(e){var t,n,a,s,r,i;return l.jsxs("tr",{className:"border-b hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-800",children:[l.jsxs("td",{className:"px-4 py-3",children:[l.jsx("div",{className:"font-medium",children:e.name}),e.description&&l.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]}),R&&l.jsx("td",{className:"px-4 py-3",children:l.jsx("div",{className:"font-medium",children:null===(t=e.user)||void 0===t?void 0:t.name})}),l.jsx("td",{className:"px-4 py-3",children:null===(n=e.business)||void 0===n?void 0:n.name}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("div",{className:"flex items-center",children:null!==(a=window.appSettings)&&void 0!==a&&a.formatDateTime?window.appSettings.formatDateTime(e.start_date,!1):new Date(e.start_date).toLocaleDateString()})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("div",{className:"flex items-center",children:null!==(s=window.appSettings)&&void 0!==s&&s.formatDateTime?window.appSettings.formatDateTime(e.end_date,!1):new Date(e.end_date).toLocaleDateString()})}),l.jsx("td",{className:"px-4 py-3",children:l.jsxs("span",{className:"font-medium",children:[e.total_days," days"]})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("div",{className:"flex items-center",children:l.jsx("span",{className:"font-medium",children:(null===(r=window.appSettings)||void 0===r?void 0:r.formatCurrency(e.total_amount))||"$".concat(parseFloat(e.total_amount).toFixed(2))})})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx("span",{className:"capitalize",children:"stripe"===e.payment_method?"Credit Card":"paypal"===e.payment_method?"PayPal":"bank"===e.payment_method?"Bank Transfer":e.payment_method.replace("_"," ")})}),l.jsx("td",{className:"px-4 py-3",children:(i=e.status,l.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat({pending:"bg-yellow-100 text-yellow-800",active:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"}[i]||"bg-gray-100 text-gray-800"),children:i.charAt(0).toUpperCase()+i.slice(1)}))}),R&&l.jsx("td",{className:"px-4 py-3",children:l.jsx(z,{checked:e.is_active,onCheckedChange:function(){return rt("toggle-status",e)},size:"sm"})}),l.jsx("td",{className:"px-4 py-3 text-right",children:l.jsxs("div",{className:"flex justify-end gap-1",children:[R&&l.jsxs(w,{children:[l.jsx(k,{asChild:!0,children:l.jsx(f,{variant:"ghost",size:"icon",onClick:function(){return rt("preview",e)},className:"text-blue-500 hover:text-blue-700",children:l.jsx(H,{className:"h-4 w-4"})})}),l.jsx(P,{children:v("Preview")})]}),l.jsxs(w,{children:[l.jsx(k,{asChild:!0,children:l.jsx(f,{variant:"ghost",size:"icon",onClick:function(){return rt("analytics",e)},className:"text-green-500 hover:text-green-700",children:l.jsx(Q,{className:"h-4 w-4"})})}),l.jsx(P,{children:v("Analytics")})]}),R&&l.jsxs(w,{children:[l.jsx(k,{asChild:!0,children:l.jsx(f,{variant:"ghost",size:"icon",onClick:function(){return rt("edit",e)},className:"text-amber-500 hover:text-amber-700",children:l.jsx(ee,{className:"h-4 w-4"})})}),l.jsx(P,{children:v("Edit")})]}),!R&&"pending"===e.status&&l.jsxs(w,{children:[l.jsx(k,{asChild:!0,children:l.jsx(f,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",onClick:function(){return rt("delete",e)},children:l.jsx(te,{className:"h-4 w-4"})})}),l.jsx(P,{children:v("Delete")})]}),R&&l.jsxs(w,{children:[l.jsx(k,{asChild:!0,children:l.jsx(f,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",onClick:function(){return rt("delete",e)},children:l.jsx(te,{className:"h-4 w-4"})})}),l.jsx(P,{children:v("Delete")})]})]})})]},e.id)}),(!(null!=$&&$.data)||0===$.data.length)&&l.jsx("tr",{children:l.jsx("td",{colSpan:R?12:10,className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:v("No campaigns found")})})]})]})}),(null==$?void 0:$.links)&&l.jsx(T,{from:(null==$?void 0:$.from)||0,to:(null==$?void 0:$.to)||0,total:(null==$?void 0:$.total)||0,links:null==$?void 0:$.links,entityName:v("campaigns"),onPageChange:function(e){return g.get(e)}})]}),R?l.jsx(U,{isOpen:Fe,onClose:function(){Ee(!1),Xe("")},onSubmit:function(e){var t={name:e.name,description:e.description,business_id:e.business_id,start_date:e.start_date,end_date:e.end_date,payment_method:e.payment_method,status:R?e.status:"pending",is_active:!R||void 0===e.is_active||e.is_active};R&&e.user_id&&(t.user_id=e.user_id),"create"===Ke?(h.loading(v("Creating campaign...")),g.post(route("campaigns.store"),t,{onSuccess:function(){Ee(!1),h.dismiss(),h.success(v("Campaign created successfully"))},onError:function(e){h.dismiss(),h.error("Failed to create campaign: ".concat(Object.values(e).join(", ")))}})):"edit"===Ke&&(h.loading(v("Updating campaign...")),g.put(route("campaigns.update",$e.id),t,{onSuccess:function(){Ee(!1),h.dismiss(),h.success(v("Campaign updated successfully"))},onError:function(e){h.dismiss(),h.error("Failed to update campaign: ".concat(Object.values(e).join(", ")))}}))},formConfig:{fields:[{name:"name",label:v("Campaign Name"),type:"text",required:!0},{name:"description",label:v("Description"),type:"textarea"},{name:"user_id",label:v("Company User"),type:"select",required:!0,options:J.map(function(e){return{value:e.id,label:e.name}}),render:function(e,t,n){var a;return l.jsxs(E,{value:(null===(a=t[e.name])||void 0===a?void 0:a.toString())||"",onValueChange:function(t){n(e.name,t),Xe(t)},children:[l.jsx(A,{children:l.jsx(I,{placeholder:v("Select User")})}),l.jsx(M,{className:"z-[60000]",children:J.map(function(e){return l.jsx(B,{value:e.id.toString(),children:e.name},e.id)})})]})}},{name:"business_id",label:v("Business"),type:"select",required:!0,options:tt.map(function(e){return{value:e.id,label:e.name}})},{name:"start_date",label:v("Start Date"),type:"date",required:!0},{name:"end_date",label:v("End Date"),type:"date",required:!0},{name:"status",label:v("Status"),type:"select",required:!0,options:[{value:"pending",label:v("Pending")},{value:"active",label:v("Active")},{value:"completed",label:v("Completed")},{value:"cancelled",label:v("Cancelled")}]},{name:"is_active",label:v("Active"),type:"switch",defaultValue:!0}],modalSize:"lg",columns:2},initialData:$e?a(a({},$e),{},{business_id:null===(i=$e.business_id)||void 0===i?void 0:i.toString(),user_id:null===(o=$e.user_id)||void 0===o?void 0:o.toString(),start_date:null===(x=$e.start_date)||void 0===x?void 0:x.split("T")[0],end_date:null===(y=$e.end_date)||void 0===y?void 0:y.split("T")[0],is_active:Boolean($e.is_active)}):null,title:v("create"===Ke?"Create Campaign":"edit"===Ke?"Edit Campaign":"View Campaign"),mode:Ke},"campaign-".concat((null==$e?void 0:$e.id)||"new")):l.jsx(le,{isOpen:Fe,onClose:function(){return Ee(!1)},campaignData:null,paymentMethods:se.map(function(e){return a(a({},e),{},{icon:"stripe"===e.id?l.jsx(ne,{className:"h-5 w-5"}):"paypal"===e.id||"bank"===e.id?l.jsx(ae,{className:"h-5 w-5"}):l.jsx(ne,{className:"h-5 w-5"})})}),paymentSettings:ie,campaignSettings:oe,businesses:X}),l.jsx(V,{isOpen:Ie,onClose:function(){return Me(!1)},onConfirm:function(){h.loading(v("Deleting campaign...")),g.delete(route("campaigns.destroy",$e.id),{onSuccess:function(){Me(!1),h.dismiss(),h.success(v("Campaign deleted successfully"))},onError:function(e){h.dismiss(),h.error("Failed to delete campaign: ".concat(Object.values(e).join(", ")))}})},itemName:(null==$e?void 0:$e.name)||"",entityName:"campaign"}),l.jsx(j,{open:ze,onOpenChange:qe,children:l.jsxs(b,{className:"max-w-2xl",children:[l.jsxs(_,{children:[l.jsx(N,{children:v("Campaign Analytics")}),l.jsx(D,{children:v("View and analyze campaign details")})]}),l.jsxs("div",{className:"space-y-6 py-4",children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx(p,{htmlFor:"analytics_name",children:v("Campaign Name")}),l.jsx(m,{id:"analytics_name",value:He.name,onChange:function(e){return Qe(function(t){return a(a({},t),{},{name:e.target.value})})},placeholder:"Enter campaign name"})]})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(p,{htmlFor:"analytics_description",children:v("Description")}),l.jsx(q,{id:"analytics_description",value:He.description,onChange:function(e){return Qe(function(t){return a(a({},t),{},{description:e.target.value})})},placeholder:"Enter campaign description",rows:3})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(p,{htmlFor:"analytics_business",children:v("Business")}),l.jsxs(E,{value:He.business_id,onValueChange:function(e){return Qe(function(t){return a(a({},t),{},{business_id:e})})},children:[l.jsx(A,{children:l.jsx(I,{placeholder:"Select business"})}),l.jsx(M,{children:X.map(function(e){return l.jsx(B,{value:e.id.toString(),children:e.name},e.id)})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(p,{htmlFor:"analytics_start_date",children:v("Start Date")}),l.jsx(m,{id:"analytics_start_date",type:"date",value:He.start_date,onChange:function(e){return Qe(function(t){return a(a({},t),{},{start_date:e.target.value})})}})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(p,{htmlFor:"analytics_end_date",children:v("End Date")}),l.jsx(m,{id:"analytics_end_date",type:"date",value:He.end_date,onChange:function(e){return Qe(function(t){return a(a({},t),{},{end_date:e.target.value})})}})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(p,{children:v("Total Days")}),l.jsx("div",{className:"p-3 bg-gray-100 rounded-md",children:l.jsxs("span",{className:"font-medium",children:[He.total_days," ",v("days")]})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(p,{children:v("Total Cost")}),l.jsx("div",{className:"p-3 bg-gray-100 rounded-md",children:l.jsxs("span",{className:"font-medium",children:["$",He.total_cost.toFixed(2)]})})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(p,{htmlFor:"analytics_coupon",children:v("Apply Coupon")}),l.jsx(m,{id:"analytics_coupon",value:He.coupon_code,onChange:function(e){return Qe(function(t){return a(a({},t),{},{coupon_code:e.target.value})})},placeholder:"Enter coupon code"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(p,{htmlFor:"analytics_payment",children:v("Payment Method")}),l.jsxs(E,{value:He.payment_method,onValueChange:function(e){return Qe(function(t){return a(a({},t),{},{payment_method:e})})},children:[l.jsx(A,{children:l.jsx(I,{placeholder:"Select payment method"})}),l.jsxs(M,{children:[l.jsx(B,{value:"credit_card",children:v("Credit Card")}),l.jsx(B,{value:"paypal",children:v("PayPal")}),l.jsx(B,{value:"bank_transfer",children:v("Bank Transfer")}),l.jsx(B,{value:"stripe",children:v("Stripe")})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[l.jsx(f,{variant:"outline",onClick:function(){return qe(!1)},children:v("Close")}),l.jsx(f,{onClick:function(){h.success(v("Analytics data logged to console"))},children:v("View Analytics")})]})]})]})})]})});var n=function(e){var t=e.campaignData,n=e.onSuccess,a=e.onCancel,r=u().t,c=L(),x=K(),y=d(s.useState(!1),2),v=y[0],j=y[1],b=d(s.useState(""),2),_=b[0],N=b[1],S=function(){var e=o(i().m(function e(a){var s,l,o,d;return i().w(function(e){for(;;)switch(e.n){case 0:if(a.preventDefault(),c&&x){e.n=1;break}return e.a(2);case 1:if(j(!0),s=x.getElement(R)){e.n=2;break}return j(!1),e.a(2);case 2:return e.n=3,c.createPaymentMethod({type:"card",card:s,billing_details:{name:_}});case 3:if(l=e.v,o=l.error,d=l.paymentMethod,!o){e.n=4;break}return h.error(o.message||r("Payment failed")),j(!1),e.a(2);case 4:g.post(route("campaigns.stripe.payment"),{payment_method_id:d.id,campaign_data:t,coupon_code:t.coupon_code||"",cardholder_name:_},{onSuccess:function(){h.success(r("Campaign created and payment processed successfully")),n()},onError:function(e){var t=(null==e?void 0:e.message)||(null==e?void 0:e.error)||r("Payment failed");h.error(t)},onFinish:function(){j(!1)}});case 5:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();return l.jsxs("form",{onSubmit:S,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(p,{htmlFor:"cardholder-name",children:r("Name on card")}),l.jsx(m,{id:"cardholder-name",type:"text",value:_,onChange:function(e){return N(e.target.value)},placeholder:r("Enter cardholder name"),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(p,{children:r("Card details")}),l.jsx("div",{className:"p-3 border rounded-md",children:l.jsx(R,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})})]}),l.jsxs("div",{className:"flex gap-3 pt-4",children:[l.jsx(f,{type:"button",variant:"outline",onClick:a,disabled:v,className:"flex-1",children:r("Cancel")}),l.jsx(f,{type:"submit",disabled:!c||v,className:"flex-1",children:v?l.jsxs(l.Fragment,{children:[l.jsx(Z,{className:"h-4 w-4 mr-2 animate-spin"}),r("Processing...")]}):r("Pay ${amount}",{amount:(Number(t.final_amount)||0).toFixed(2)})})]})]})};function se(e){var t=e.campaignData,a=e.stripeKey,r=e.onSuccess,i=e.onCancel,c=u().t,o=d(s.useState(null),2),p=o[0],m=o[1];return s.useEffect(function(){a&&a.startsWith("pk_")&&m($(a))},[a]),p?l.jsx(G,{stripe:p,children:l.jsx(n,{campaignData:t,onSuccess:r,onCancel:i})}):l.jsx("div",{className:"p-4 text-center text-red-500",children:c("Stripe not configured properly")})}function re(e){var t=e.campaignData,n=e.paypalClientId,a=e.currency,r=e.onSuccess,i=e.onCancel,c=u().t,o=s.useRef(null);return s.useEffect(function(){if(n&&o.current){var e=document.createElement("script");return e.src="https://www.paypal.com/sdk/js?client-id=".concat(n,"&currency=").concat(a.toUpperCase(),"&disable-funding=credit,card"),e.async=!0,e.onload=function(){window.paypal&&o.current&&window.paypal.Buttons({createOrder:function(e,n){var s,r;return n.order.create({purchase_units:[{amount:{value:(null===(s=t.final_amount)||void 0===s?void 0:s.toString())||(null===(r=t.total_amount)||void 0===r?void 0:r.toString())||"0",currency_code:a.toUpperCase()},description:"Campaign: ".concat(t.name)}]})},onApprove:function(e,n){return n.order.capture().then(function(n){g.post(route("campaigns.paypal.payment"),{order_id:e.orderID,payment_id:n.id,campaign_data:t,coupon_code:t.coupon_code||""},{onSuccess:function(){h.success(c("Campaign created and payment processed successfully")),r()},onError:function(){h.error(c("Payment failed"))}})})},onError:function(e){console.error("PayPal error:",e),e.message&&e.message.includes("declined")?h.error(c("Card was declined. Please try a different payment method.")):h.error(c("Payment failed. Please try again."))},onCancel:function(){i()}}).render(o.current)},document.head.appendChild(e),function(){document.head.contains(e)&&document.head.removeChild(e)}}},[n,t,a]),n?l.jsx("div",{className:"space-y-4",children:l.jsx("div",{ref:o})}):l.jsx("div",{className:"p-4 text-center text-red-500",children:c("PayPal not configured")})}function ie(e){var t=e.campaignData,n=e.bankDetails,a=e.onSuccess,r=e.onCancel,i=u().t,c=d(s.useState(!1),2),o=c[0],p=c[1],m=t.final_amount||t.total_amount||0;return l.jsxs("div",{className:"space-y-4",children:[l.jsx(x,{children:l.jsxs(y,{className:"p-4",children:[l.jsx("h3",{className:"font-medium mb-3",children:i("Bank Transfer Details")}),l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsx("div",{className:"whitespace-pre-line",children:n}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:l.jsxs("span",{className:"font-medium",children:[i("Campaign"),": ",t.name]})}),l.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[l.jsxs("span",{className:"font-medium",children:[i("Amount"),": ",window.appSettings.formatCurrency(m)]}),l.jsxs(f,{variant:"outline",size:"sm",onClick:function(){(function(e){if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(e);var t=document.createElement("textarea");return t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select(),new Promise(function(e,n){document.execCommand("copy")?(t.remove(),e()):(t.remove(),n(new Error("Copy failed")))})})(window.appSettings.formatCurrency(m)).then(function(){h.success(i("Amount copied to clipboard"))}).catch(function(){h.error(i("Failed to copy amount"))})},children:[l.jsx(J,{className:"h-3 w-3 mr-1"}),i("Copy")]})]})]})]})]})}),l.jsx(x,{className:"border-orange-200 bg-orange-50",children:l.jsx(y,{className:"p-4",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(W,{className:"h-5 w-5 text-orange-600 mt-0.5"}),l.jsxs("div",{className:"text-sm text-orange-800",children:[l.jsx("p",{className:"font-medium mb-1",children:i("Important Instructions")}),l.jsxs("ul",{className:"space-y-1 text-xs",children:[l.jsxs("li",{children:["• ",i("Transfer the exact amount shown above")]}),l.jsxs("li",{children:["• ",i("Include the campaign name in the transfer description")]}),l.jsxs("li",{children:["• ",i("Your campaign will be activated after payment verification")]}),l.jsxs("li",{children:["• ",i("Verification may take 1-3 business days")]})]})]})]})})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(f,{variant:"outline",onClick:r,className:"flex-1",children:i("Cancel")}),l.jsx(f,{onClick:function(){p(!0),g.post(route("campaigns.bank.payment"),{campaign_data:t,coupon_code:t.coupon_code||"",amount:t.final_amount||t.total_amount},{onSuccess:function(){h.success(i("Campaign created. Payment verification pending.")),a()},onError:function(){h.error(i("Failed to submit payment request"))},onFinish:function(){p(!1)}})},disabled:o,className:"flex-1",children:i(o?"Processing...":"I have made the payment")})]})]})}function le(e){var t,n=e.isOpen,c=e.onClose,g=(e.campaignData,e.paymentMethods),C=e.paymentSettings,w=void 0===C?{}:C,k=e.campaignSettings,P=void 0===k?null:k,D=(e.categories,e.businesses),O=void 0===D?[]:D,T=u().t,F=d(s.useState(""),2),E=F[0],A=F[1],I=d(s.useState(""),2),M=I[0],B=I[1],z=d(s.useState(!1),2),q=z[0],U=z[1],V=d(s.useState(!1),2),$=V[0],G=V[1],L=d(s.useState(!1),2),K=L[0],R=L[1],J=d(s.useState(0),2),W=J[0],H=J[1],Q=d(s.useState(0),2),ee=Q[0],te=Q[1],ne=d(s.useState(0),2),ae=ne[0],le=ne[1],ce=d(s.useState(0),2),oe=ce[0],de=ce[1],ue=d(s.useState(null),2),pe=ue[0],me=ue[1],fe=d(s.useState(!1),2),he=fe[0],ge=fe[1],xe=v({name:"",description:"",business_id:"",start_date:"",end_date:"",payment_method:"",coupon_code:""}),ye=xe.data,ve=xe.setData,je=xe.post,be=xe.processing;s.useEffect(function(){if(ye.start_date&&ye.end_date){var e=new Date(ye.start_date),t=new Date(ye.end_date);if(t<e)return te(0),le(0),void de(0);var n=t.getTime()-e.getTime(),a=Math.ceil(n/864e5)+1,s=a*function(e){if(null==P||!P.pricing_tiers||0===P.pricing_tiers.length)return 10;var t,n=r(P.pricing_tiers);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(e>=a.min_days&&e<=a.max_days)return parseFloat(a.per_day_price)}}catch(i){n.e(i)}finally{n.f()}var s=P.pricing_tiers[P.pricing_tiers.length-1];return parseFloat((null==s?void 0:s.per_day_price)||10)}(a);te(a),le(s),de(Math.max(0,s-W))}},[ye.start_date,ye.end_date,W,P]);var _e=function(){var e=o(i().m(function e(){var t,n,a,s;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(M.trim()){e.n=1;break}return h.error(T("Please enter a coupon code")),e.a(2);case 1:return ge(!0),e.p=2,e.n=3,fetch(route("coupons.validate"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(null===(t=document.querySelector('meta[name="csrf-token"]'))||void 0===t?void 0:t.getAttribute("content"))||""},body:JSON.stringify({coupon_code:M,amount:ae})});case 3:return n=e.v,e.n=4,n.json();case 4:a=e.v,n.ok&&a.valid?(s="percentage"===a.coupon.type?ae*a.coupon.value/100:a.coupon.value,H(Math.min(s,ae)),me(a.coupon),h.success(T("Coupon applied successfully"))):(h.error(a.message||T("Invalid coupon code")),H(0),me(null)),e.n=6;break;case 5:e.p=5,e.v,h.error(T("Failed to validate coupon")),H(0),me(null);case 6:return e.p=6,ge(!1),e.f(6);case 7:return e.a(2)}},e,null,[[2,5,6,7]])}));return function(){return e.apply(this,arguments)}}(),Ne=function(){h.success(T("Campaign created and payment processed successfully")),c()},Se=g.filter(function(e){return e.enabled});return l.jsx(j,{open:n,onOpenChange:c,children:l.jsxs(b,{className:"max-w-lg max-h-[90vh] flex flex-col",children:[l.jsx(_,{className:"flex-shrink-0",children:l.jsx(N,{children:T("Complete Campaign Payment")})}),l.jsxs("div",{className:"space-y-6 overflow-y-auto flex-1 pr-2",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(p,{htmlFor:"name",children:T("Campaign Name")}),l.jsx(m,{id:"name",value:ye.name,onChange:function(e){return ve("name",e.target.value)},placeholder:T("Enter campaign name"),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(p,{htmlFor:"description",children:T("Description")}),l.jsx(m,{id:"description",value:ye.description,onChange:function(e){return ve("description",e.target.value)},placeholder:T("Enter description (optional)")})]}),l.jsx("div",{className:"grid grid-cols-1 gap-4",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx(p,{htmlFor:"business",children:T("Business")}),l.jsxs("select",{id:"business",value:ye.business_id,onChange:function(e){return ve("business_id",e.target.value)},className:"w-full p-2 border rounded-md",required:!0,children:[l.jsx("option",{value:"",children:T("Select Business")}),O.map(function(e){return l.jsx("option",{value:e.id,children:e.name},e.id)})]})]})}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(p,{htmlFor:"start_date",children:T("Start Date")}),l.jsx(m,{id:"start_date",type:"date",value:ye.start_date,onChange:function(e){return ve("start_date",e.target.value)},required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(p,{htmlFor:"end_date",children:T("End Date")}),l.jsx(m,{id:"end_date",type:"date",value:ye.end_date,onChange:function(e){return ve("end_date",e.target.value)},required:!0})]})]})]}),ee>0&&l.jsx(x,{children:l.jsx(y,{className:"p-4",children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("h3",{className:"font-medium",children:T("Campaign Summary")}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(X,{className:"h-4 w-4 text-muted-foreground"}),l.jsxs("span",{children:[ee," ",T("days")]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("span",{children:window.appSettings.formatCurrency(ae)})})]}),W>0&&l.jsxs("div",{className:"border-t pt-3 space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:T("Subtotal")}),l.jsx("span",{children:window.appSettings.formatCurrency(ae)})]}),l.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[l.jsx("span",{children:T("Discount")}),l.jsxs("span",{children:["-",window.appSettings.formatCurrency(W)]})]}),l.jsxs("div",{className:"flex justify-between font-medium border-t pt-2",children:[l.jsx("span",{children:T("Total")}),l.jsx("span",{children:window.appSettings.formatCurrency(oe)})]})]})]})})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs(p,{htmlFor:"coupon",children:[T("Coupon Code")," (",T("Optional"),")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(m,{id:"coupon",value:M,onChange:function(e){return B(e.target.value)},placeholder:T("Enter coupon code"),className:"pr-10",disabled:!!pe}),l.jsx(Y,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"})]}),pe?l.jsx(f,{type:"button",variant:"outline",onClick:function(){me(null),B(""),H(0)},children:T("Remove")}):l.jsx(f,{type:"button",variant:"outline",onClick:_e,disabled:!M.trim()||he,children:he?l.jsx(Z,{className:"h-4 w-4 animate-spin"}):T("Apply")})]}),pe&&l.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("span",{className:"text-green-700 font-medium",children:[T("Coupon Applied"),": ",pe.code]}),l.jsxs("span",{className:"text-green-600",children:["-","percentage"===pe.type?"".concat(pe.value,"%"):"".concat((null===(t=window)||void 0===t||null===(t=t.appSettings)||void 0===t||null===(t=t.currencySettings)||void 0===t?void 0:t.currencySymbol)||"$").concat(pe.value)]})]})})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(p,{children:T("Select Payment Method")}),0===Se.length?l.jsx("p",{className:"text-sm text-muted-foreground",children:T("No payment methods available")}):l.jsx("div",{className:"space-y-2",children:Se.map(function(e){return l.jsx(x,{className:"cursor-pointer transition-colors ".concat(E===e.id?"border-primary bg-primary/5":"hover:border-gray-300"),onClick:function(){return A(e.id)},children:l.jsx(y,{className:"p-3",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"text-primary",children:e.icon}),l.jsx("span",{className:"font-medium",children:e.name}),E===e.id&&l.jsx(S,{variant:"secondary",className:"ml-auto",children:T("Selected")})]})})},e.id)})})]}),q&&"stripe"===E&&l.jsxs("div",{className:"border-t pt-4",children:[l.jsx("h3",{className:"font-medium mb-4",children:T("Enter Card Details")}),l.jsx(se,{campaignData:a(a({},ye),{},{coupon_code:(null==pe?void 0:pe.code)||M,final_amount:oe}),stripeKey:(null==w?void 0:w.stripe_key)||"",onSuccess:Ne,onCancel:function(){return U(!1)}})]}),$&&"paypal"===E&&l.jsxs("div",{className:"border-t pt-4",children:[l.jsx("h3",{className:"font-medium mb-4",children:T("PayPal Payment")}),l.jsx(re,{campaignData:a(a({},ye),{},{coupon_code:(null==pe?void 0:pe.code)||M,final_amount:oe}),paypalClientId:(null==w?void 0:w.paypal_client_id)||"",currency:(null==w?void 0:w.default_currency)||"usd",onSuccess:Ne,onCancel:function(){return G(!1)}})]}),K&&"bank"===E&&l.jsxs("div",{className:"border-t pt-4",children:[l.jsx("h3",{className:"font-medium mb-4",children:T("Bank Transfer")}),l.jsx(ie,{campaignData:a(a({},ye),{},{coupon_code:(null==pe?void 0:pe.code)||M,final_amount:oe}),bankDetails:(null==w?void 0:w.bank_details)||"",onSuccess:Ne,onCancel:function(){return R(!1)}})]}),!q&&!$&&!K&&l.jsxs("div",{className:"flex gap-3",children:[l.jsx(f,{variant:"outline",onClick:c,className:"flex-1",children:T("Cancel")}),l.jsx(f,{onClick:function(){if(E)if("stripe"!==E)if("paypal"!==E)if("bank"!==E){var e=a(a({},ye),{},{payment_method:E,coupon_code:(null==pe?void 0:pe.code)||M,final_amount:oe});je(route("campaigns.store"),e,{onSuccess:function(){h.success(T("Campaign created successfully")),c()},onError:function(e){h.error(T("Failed to create campaign: {{error}}",{error:Object.values(e).join(", ")}))}})}else R(!0);else G(!0);else U(!0);else h.error(T("Please select a payment method"))},disabled:be||0===Se.length,className:"flex-1",children:be?l.jsxs(l.Fragment,{children:[l.jsx(Z,{className:"h-4 w-4 mr-2 animate-spin"}),T("Processing...")]}):"".concat(T("Pay")," ").concat(window.appSettings.formatCurrency(oe))})]})]})]})})}}}})}();
